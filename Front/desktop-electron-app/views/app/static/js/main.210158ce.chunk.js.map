{"version":3,"sources":["assets/logo.png","services/appMode.js","components/navbar/NavBar.js","services/customStyles.js","components/common/CircularProgressBar.js","components/SplashScreen.js","components/modal/ModalWindow.js","services/api/baseApiService.js","services/api/searchMediaApiService.js","services/api/bookmarkApiService.js","services/api/watchedMediaApiService.js","services/api/torrentApiService.js","services/api/subtitlesApiService.js","services/api/appInfoApiService.js","services/AppServices.js","components/modal/ModalCategories.js","components/common/Rating.js","components/media/presentation/MediaLitePresentation.js","services/cacheService.js","components/media/list/MediasCategorieList.js","pages/MediaListGenrePage.js","pages/MediaListPlatformPage.js","components/modal/ModalMediaTrailer.js","components/common/TitleAndContent.js","components/common/ProgressionBar.js","components/common/text/SecondaryInfo.js","components/common/text/Paragraph.js","components/common/buttons/BaseButton.js","services/customHooks.js","components/common/DropDown.js","components/modal/ModalEpisodeSelector.js","components/video/videoPlayerComponents/VideoSubtitles.js","components/video/videoPlayerComponents/Slider.js","components/video/videoPlayerComponents/TimeController.js","components/video/videoPlayerComponents/LeftControlsGroup.js","components/video/videoPlayerComponents/Options.js","components/video/videoPlayerComponents/RightControlsGroup.js","components/video/videoPlayerComponents/Controls.js","components/video/VideoPlayer.js","components/video/VideoPlayerWindow.js","components/common/buttons/TrailerButton.js","components/common/text/Title.js","components/common/buttons/CopyButton.js","components/common/buttons/PlayWithVLCButton.js","components/common/buttons/BookmarkButton.js","components/common/buttons/PlayButton.js","components/media/list/MediasListLite.js","components/media/list/MediasListLiteWithTitle.js","pages/MediaPresentationPage.js","components/media/presentation/MediaPicturesPresentation.js","components/media/list/MediasOfTodayList.js","pages/HomePage.js","components/media/presentation/MediaIntermediatePresentation.js","components/media/list/MediasIntermediatePresentationList.js","pages/WatchedMediasPage.js","pages/BookmarkedMediasPage.js","components/common/TextInput.js","pages/ResearchPage.js","components/common/buttons/OpenButton.js","pages/TorrentLinkPage.js","components/Router.js","App.js","reportWebVitals.js","index.js"],"names":["AppMode","onAppModeChanged","callback","eventName","this","modeChangedEvent","Event","document","addEventListener","e","modes","label","urlKey","isActive","getActiveMode","find","mode","switchActiveMode","forEach","dispatchEvent","NavBar","onSearchClick","onHomeClick","onGenreMenuClick","onWatchedMediasClick","onBookmarkedMediasClick","onTorrentLinkClick","onAppModeSwitch","useState","setModes","useEffect","navBarIconStyle","color","width","height","className","map","onClick","updatedModes","switchAppMode","alt","src","logo","style","fadeTransition","visible","speedTransition","zIndex","transitionStyle","visibility","opacity","transition","CircularProgressBar","position","size","text","positionStyle","setpositionStyle","displayedText","setDisplayedText","top","left","transform","textAlign","fontSize","fontWeigth","CircularProgress","SplashScreen","showErrorMessage","display","ModalWindow","content","onCloseClick","BaseApiService","_apiBaseUrl","relativePath","url","parameters","deserializeResult","onSuccess","onFail","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","result","response","JSON","parse","length","i","parameter","name","value","open","send","setRequestHeader","obj","stringify","Boolean","SearchMediaApiService","buildUrl","buildSearchUrl","getRequest","genreId","page","platformId","id","mediaId","serieId","seasonNumber","BookmarkApiService","buildBookmarkUrl","mediaDto","putRequest","deleteRequest","WatchedMediaApiService","buildWatchedMediaUrl","episodeNumber","mediaDetails","currentTime","duration","watchedMedia","totalDuration","TorrentApiService","fileName","buildTorrentUrl","title","year","imdbid","streamUrl","URLSearchParams","replace","get","torrentUrl","SubtitlesApiService","imdbCode","buildSubtitlesUrl","subtitlesSourceUrl","AppInfoApiService","isDesktopApp","self","buildAppInfoUrl","isDesktopApplication","btoa","AppServices","init","searchMediaService","bookmarkApiService","watchedMediaApiService","torrentApiService","subtitlesApiService","appInfoApiService","ModalCategories","onGenreClick","onPlatformClick","loading","setLoading","listGenres","setListGenres","listPlatforms","setListPlatforms","loadCategories","getMediaGenres","genres","getMediaPlatforms","platforms","class","genre","Rating","rating","fontWeight","margin","backgroundColor","borderRadius","alignItems","justifyContent","MediaLitePresentation","maxLength","media","onMediaClick","hoverEffect","dataLoaded","setDataLoaded","coverImageUrl","setTimeout","backgroundImage","toString","substring","CacheService","cacheCollection","setCache","data","cache","getCache","push","c","clearCache","MediasCategorieList","categorie","searchOperation","loadFromCache","medias","setMedias","pageIndex","setPageIndex","searchInProgress","setSearchInProgress","plusButtonVisible","setPlusButtonVisible","performSearch","mediasOfCategories","concat","getCacheId","categorieId","cacheMedias","scrollToMedia","mediaElementId","elemId","elem","getElementById","scrollIntoView","block","inline","handleMediaClick","elementId","index","MediasListGenrePage","getMediasByGenre","platform","getMediasByPlatform","ModalMediaTrailer","youtubeTrailerUrl","trailerStyle","border","boxShadow","TitleAndContent","containerStyle","justify","marginRight","ProgressionBar","progressionStyle","SecondaryInfo","center","Paragraph","BaseButton","centered","rounded","showRippleEffect","setShowRippleEffect","handleClick","computeClass","useOnClickOutside","ref","handler","listener","event","current","contains","target","removeEventListener","DropDown","values","onValueChanged","textAlignement","showList","setShowList","selectedValue","setSelectedValue","dropDownValues","setDropDownValues","dropdownRef","useRef","shouldUpdateDropDownValues","nbDifferentValues","v","listStyle","bottom","maxHeight","overflowY","buttonContentStyle","buttonContent","listElementStyle","padding","cursor","onMouseOver","onMouseOut","ModalEpisodeSelector","numberOfSeasons","onEpisodeSelected","selectedSeasonNumber","setSelectedSeasonNumber","episodes","setEpisodes","isLoading","setIsLoading","noEpisodeMessageVisible","setNoEpisodeMessageVisible","episodeListRef","seasonNumberList","getEpisodes","scrollTop","loadEpisodesProgress","episodesOfSeason","getWatchedEpisodes","watchedEpisodes","newTab","watchedEpisode","episode","ep","progression","selectedIndex","Episode","imagePath","runTime","totalHours","hours","Math","trunc","minutes","timeFormat","ToTimeFormat","overview","VideoSubtitles","videoCurrentTime","urlSource","subtitlesAdjustTime","currentSubtitles","setCurrentSubtitles","subtitles","setSubtitles","textItalic","setTextItalic","responseText","subtitle","s","startTime","endTime","includes","applySubtitles","fontStyle","Slider","progressColor","cursorColor","tooltip","onCursorMoved","onCursorEndMove","onMouseOverSlider","cursorPosition","setCursorPosition","showToolTip","setShowToolTip","positionToPercentage","XPosition","railBoundings","right","moveCursor","percentage","clientX","parentElement","getBoundingClientRect","endMove","onSliderClick","onMouseMove","onMouseMoveOverSlider","onMouseLeave","onMouseDown","TimeController","videoDuration","onTimeChanged","videoCurrentTimeLabel","setVideoCurrentTimeLabel","videoRemainingTimeLabel","setVideoRemainingTimeLabel","currentPourcentageTimeVideo","setcurrentPourcentageTimeVideo","setTooltip","totalTime","setTotalTime","getTimeLabel","floor","seconds","hourValues","time","newTime","changeTimeVideo","setTimeControllerTooltip","LeftControlsGroup","videoIsPlaying","onPlayClick","onPauseClick","onVolumeChanged","onPlayBackwardClick","onPlayForwardClick","showPlayButton","setShowPlayButton","VolumeController","newVolume","currentVolumeRef","previousVolume","setPreviousVolume","changeVolume","onKeyboardPress","keyCode","VideoOptions","options","icon","onOptionChanged","menuOptions","setMenuOptions","menuSubOptions","setMenuSubOptions","showMenu","setShowMenu","showSubMenu","setShowSubMenu","selectedOption","setSelectedOption","selectedSubOption","setSelectedSubOption","updateMenuOptions","oldSelectedOption","op","selected","oldSelectedSubOption","subOptions","subOp","updatedOptions","updatedOption","updatedSubOptions","updatedsubOption","option","onMouseEnter","getOptionDisplay","subOption","getSubOptionDisplay","VideoOptionsButton","hide","RightControlsGroup","subtitlesOptions","qualityOptions","onSubtitleSizeChange","onSubtitlesChange","onAdjustSubtitleTimeChange","onVideoQualityChange","isFullScreen","onFullScreenStateChanged","videoInFullscreen","setVideoInFullscreen","changeFullScreenState","fullscreen","AdjustSubtitleTimeOption","menuRef","type","step","onChange","valueAsNumber","Controls","videoSubtitlesOptions","videoQualitiesOptions","pixelsToAdd","newUrlSource","VideoPlayer","onWatchedTimeUpdate","videoTime","videoRef","videoPlayerContainerRef","watchedTimeUpdateTriggeredRef","setIsFullScreen","setCurrentTime","errorMessage","setErrorMessage","checkDownloadStateRef","videoDownloadState","setVideoDownloadState","videoSource","setVideoSource","videoIsLoading","setVideoIsLoading","setVideoIsPlaying","subtitlesUrl","setSubtitlesUrl","subtitlesSize","setSubtitlesSize","setSubtitlesAdjustTime","showVideoControls","setShowVideoControls","lastTimeMouseMovedRef","checkMovieDownloadState","getDownloadState","decodeURIComponent","error","message","changeVideoSource","autoplay","paused","load","changeVideoTime","displayControls","Date","now","waitingTime","playVideo","play","pauseVideo","pause","videoErrorHandler","attributes","onVideoReady","onVideoPaused","onVideoWaiting","onTimeUpdated","round","onFullScreenChange","fullscreenElement","videoQuality","volume","changeVideoVolume","fullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","VideoPlayerWindow","sources","goToTime","setSubtitlesOptions","setVideoQualitiesOptions","resumeMessageVisible","setResumeMessageVisible","setVideoTime","source","qualities","filter","o","startsWith","quality","buildStreamUrl","downloadUrl","buildVideoQualitiesOptions","newSubtitlesOptions","sub","subtitlesOption","language","subtitlesSourceUrls","sourceUrl","getSubtitlesApiUrl","buildSubtitlesOptions","ResumeMessage","resumeTime","onNoClick","onYesClick","VideoPlayerContainer","totalMinutes","TrailerButton","marginLeft","Title","CopyButton","PlayWithVLCButton","videoUrl","showModal","setShowModal","ModalForVlc","container","background","ModalContent","launchPlay","setIsDesktopApp","inputLinkUrlRef","playWithVlc","checkState","checkVideoDownloadState","handleCloseClick","centerStyle","vertical","flexDirection","outline","textOverflow","readOnly","select","execCommand","window","getSelection","removeAllRanges","AddBookmarkButton","BookmarkButton","insideIcon","RemoveBookmarkButton","PlayButton","MediasListLite","alignLeft","listRef","hideBackArrow","setHideBackArrow","hideForwardArrow","setHideForwardArrow","onscroll","showHideNavArrows","isElementVisible","boundings","elemBoundings","getVisibleRange","indexes","listBoundings","children","max","min","visibleRange","goToIndex","minIndex","count","behavior","navToLeft","maxIndex","navToRight","MediasListLiteWithTitle","listTitle","MediaFullPresentation","setMediaDetails","mediaProgression","setMediaProgression","versionsSources","voSourcesSearching","setVoSourcesSearching","vfSourcesSearching","setVfSourcesSearching","selectedVersionSources","setSelectedVersionSources","selectedVersionSourceLink","setSelectedVersionSourceLink","mediaSubtitlesSources","setMediaSubtitlesSources","loadingSubtitles","setLoadingSubtitles","showMediaPlayer","setShowMediaPlayer","showMediaTrailer","setShowMediaTrailer","addBookmarkButtonVisible","setAddBookmarkButtonVisible","similarMedias","setSimilarMedias","navHistory","selectedEpisode","loadPage","imdbId","getAvailableSubtitles","clearVersionSources","searchVfSources","searchVoSources","getElementsByClassName","changeSelectedSource","getMediaDetails","details","isMediaBookmarked","getMediaProgression","getSimilarMedias","recommandedMedias","setVersionSources","versionLabel","setFirst","newVersionSources","unshift","mediaTitle","mediaYear","searchVFSources","searchVOSources","getWatchedMedia","remainingTime","availableSubtitles","onBackClick","lastMediaId","pop","saveWacthedMedia","backgroundImageUrl","logoImageUrl","join","MediaProgression","addBookmarkedMedia","deleteBookmarkedMedia","EpisodeSelector","seasonsCount","AvailableSubtitles","availableSubtitlesSources","AvailableVersions","availableVersionsSources","onVersionSelected","versionSources","QualitySelector","onQualityChanged","director","cast","synopsis","onRecommandedMediaClick","setSelectedIndex","nbSameQualities","q","modalVisible","setModalVisible","selectedEpisodeNumber","setSelectedEpisodeNumber","handleEpisodeSelected","MediaPicturesPresentation","MediasOfToday","mediaIndexVisible","setMediaIndexVisible","carouselPlay","setCarouselPlay","changeMedia","clearTimeout","MediaPicturesCarousel","nbMedias","onNavElementClick","navElements","HomePage","onReady","mediaListref","cacheIdRef","mediaLists","setMediaLists","todayTrendingTitle","addMedias","insertAtBeginning","newArray","loadContent","appMode","buildCacheId","getMediasOfToday","getPopularMedias","toLocaleLowerCase","getRecommandedMedias","getPopularNetflixMedias","getPopularDisneyPlusMedias","getPopularAmazonPrimeMedias","getPopularAppleTvMedias","list","mediasList","MediaIntermediatePresentation","MediasIntermediatePresentationList","centerToMedia","loadingProgressVisible","findIndex","m","watchedMediaLastClicked","WatchedMediasPage","centerToLastClickedMedia","loadingVisible","setLoadingVisible","getWatchedMedias","mediaLabel","toLowerCase","lastClickedMedia","BookmarkedMediasPage","mediasBookmarks","setMediasBookmarks","getBookmarkedMedias","bookmarkedMedias","TextInput","placeHolder","onTextChanged","large","setText","TextField","placeholder","cacheResearch","searchValue","save","clean","ResearchPage","setSearchValue","searchValueRef","useReducer","state","mediasLength","searchResultLabel","searchResultLabelDispatch","searchMedias","OpenButton","TorrentLinkPage","torrentLink","setTorrentLink","torrentLinkRef","openingTorrentLink","setOpeningTorrentLink","openingHistory","setOpeningHistory","torrentHistory","setTorrentHistory","torrentFiles","setTorrentFiles","selectedFile","setSelectedFile","loadingMessage","setLoadingMessage","showMoviePlayer","setShowMoviePlayer","movieSources","setMovieSources","getTorrentHistory","files","changeTorrentLink","torrentFilesAreLoadingOrLoaded","getTorrentFiles","link","TorrentHistory","TorrentFilesList","onPlayFileClick","file","FilesList","contentType","onFileClick","selectedFileIndex","setSelectedFileIndex","textStyle","selectedTextStyle","titleStyle","getComponent","FileFromTorrent","isSelected","TorrentLink","onMouseHover","enter","playButtons","fullDateTime","today","yesterday","setDate","getDate","date","day","toDateString","toLocaleString","month","toLocaleTimeString","navigator","hour","minute","hour12","formateDate","lastOpenedDateTime","Router","components","activeComponentId","activeComponent","setActiveComponent","component","render","App","selectedGenre","setSelectedGenre","loadFullListGenrefromCache","setLoadFullListGenrefromCache","selectedPlatform","setSelectedPlatform","loadFullListPlatformfromCache","setLoadFullListPlatformfromCache","loadResearchfromCache","setLoadResearchfromCache","centerToLastClickedBookmark","setCenterToLastClickedBookmark","centerToLastClickedWatchedMedia","setCenterToLastClickedWatchedMedia","splashscreenVisible","setSplashscreenVisible","homePageFailed","setHomePageFailed","modalListCategoriesVisible","setModalListCategoriesVisible","setMediaId","showComponent","componentId","setRouterPreviousComponentId","routerActiveComponentId","setRouterActiveComponentId","showMediaFullPresentation","routerIds","mediaPresentationPage","onMediaFullPresentationClose","routerPreviousComponentId","homePage","mediasListGenrePage","mediasListPlatformPage","watchedMediasListPage","bookmarkedMediasListPage","researchPage","torrentLinkPage","router","MediaListGenrePage","MediaListPlatformPage","MediaPresentationPage","showMediasFullListofGenre","showMediasFullListofPlatform","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.210158ce.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARQAAAAlCAMAAAC0/+b3AAACdlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qNy/4AAAA0XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFxgaGxwdHh8gIiMkJSYnKCkqKywtLzAxMzQ3ODk7PT9AQUJDRUZHSElLTE1OT1JUVVZXWFlaW1xdXl9gYWJjZGVmaGlqa2xvcHFydHV2eHl6fH1+f4CCg4SGh4iKi42Oj5OUlZeYmZucnZ+hoqOkpaanqKmqq6ytrq+xsrO1uLm6u72+v8HCw8TFx8jJysvMzc7P0NHT1NbZ2tzd3uDh4uPk5ebn6Orr7O3u7/Dx8vP09fb3+Pn6+/z9/jaJQ6QAAAABYktHRNF50f8KAAAE2ElEQVRo3u2a6WNMVxTAz0xEQhASYxe7WCKaVBCEStrQVitVVbWFLqqIXWOX2lpp7TShpUVXiSpKS1AqsiCduf9RM/ecO+++ee+Nl8w1uR96vrx3z7nb+82ce8599wH8LzaSu4PLh/bWRWjNpOLGHY6yUWo1vELIif1ri4Y6D+6yP4AtXJfr/rEyyrlk2JjexQG2drZYVqIFYAlDmWbX9Yt+brvUjsq3maPclpplmU23SrMdpu6yP4BGrlviHkoe9pJnYxr0CG27ww1vo77egPKHFRwkXOYmfzZEBaVZfnrFow0UmEND5JvVA2pRvdCAwkqtrVejZRtEDYWxs0O1gQLlaKzxycq4c6g96ZGg+C3/8VFPcXpdVUBhdbO1gdLtBloPy8qPUHevF0hQWHV7c9O4C6h/DZRAYYFPdIECObhWsiJDNeYJqgrBBIWFTXopar+WVNMLHWW6VC0pk2Ts1DdLzv8bGqAkfHIu+1MOBdai+Z/+QpFYjZq9EAblcbpp3anjysZB0Qb9lFUPxQhzW9uHaijxF9F+xkuKTyncJIdDYee8RjNPBeo+VpALpR6iARrTNYECgykuF1O2FsB1dQJYoLAFlrh1ub2KDNFTQgOc9mgCRSQl+DN1u4mlTWAD5WEf0abn37g45mASFzWWzTTCFF2gwJeUQcU33x/A+6pEM5Tv8XIsLJSX8cI7JVFD8Z7CDiu0gZJyM7T6v4p3T0aDGcrYGrzOQO1LFLR5epNWGz0UGIFRMJCmCxQYh2GxKas3egX7AMKgpBVSlpcSVCb/haW3+I98himAAl9gl+9rAwXWYZ0rlXj91muBIhyGb5N2UorCl8VipgRKPmXR+kBpd15eTx9JuUcIiu8O/r+b9+fjMUDdD2a8MKzBgNJ/gIO4iFFJj3mntXL8cd3fc4ECQ+okKHPABgqQA/3escMVvHuD47wgpaKOaflIF/OkfKm3mzR/ZEygwFxjRNM+yIAiHGjDerwe4fYVTBWUY1g1SyMo8FVoq+VzgEIO1NTEL3d78H3SU2VQdmHVSTpBSSUHCpjfsUlQhANJ28W4KqYMyh6sOlknKPNpvO3gCEU4UFA+54pOTB0USt+yNYIyvB6rXe0cAQo5UNDHuttBOVjhIG5Ssmp5JBlK5bP7ez5QEn5hlL9BBCiGAxWAHZRopCfG+QavBUpiG+UpsIkedjVEhCIcaA8oh1KEXX0D2kCZjD8T+yG4J4TX5zlCQQf6s6t6KN9hVyu0geK7hXUahvFErrZusBMUKAiWpoJyKLTFDAzUBspRcp5F/HXkz4z9GO8EJehAO0E5lOTf7F4dtCWU94jJKb7v2GZ6TAuU7jXXuyiH4j1OU8jVBUo6ReMHfY0A489xggIFE0A1lCR6zWU6GmhTKAm/0oxm8uI+LFzr4gRFFjVQMi7RDOqH6AJFvB7dR+5Bi+5nMYLifeFgQGQ/RaAJlCk0pRsizOYF5DePLYIS4fBK3tKkCuWsxWvK7xnJuyVJaiGUMuuwL7cKio/2F/6JIVUpau73aTGUCMecVVIrh2NT6xFSC6HYSGNroHjEsr/Z0HXALyxYpTeWUB4Ugi5QFojTc3nkTPycgC2LIZTj/UAXKCMa6EhjjEm9nA6PR8cKSqX9l1ltAiVBxMKwT9riztL/5z/xk1pSPhmQ0AAAAABJRU5ErkJggg==\"","const AppMode = {\r\n    onAppModeChanged(callback){\r\n        const eventName = 'appModeChanged';\r\n        if(!this.modeChangedEvent)\r\n            this.modeChangedEvent = new Event(eventName);\r\n        document.addEventListener(eventName, (e) => { \r\n            if(callback)\r\n                callback() \r\n        }, false);\r\n    },\r\n    modeChangedEvent: null,\r\n    modes: [\r\n        {\r\n            label: 'Films',\r\n            urlKey: 'movies',\r\n            isActive: true\r\n        },\r\n        {\r\n            label: 'Series',\r\n            urlKey: 'series',\r\n            isActive: false\r\n        }\r\n    ],\r\n    getActiveMode(){\r\n        return this.modes.find(mode => mode.isActive);\r\n    },\r\n    switchActiveMode(){\r\n        this.modes.forEach(mode => {\r\n            mode.isActive = !mode.isActive;\r\n        });\r\n        if(this.modeChangedEvent)\r\n            document.dispatchEvent(this.modeChangedEvent);\r\n    }\r\n}\r\n\r\nexport default AppMode;","import \"../../style/nav-bar.css\";\r\nimport logo from '../../assets/logo.png';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from '../../services/appMode';\r\n\r\nfunction NavBar({ onSearchClick, onHomeClick, onGenreMenuClick, onWatchedMediasClick, onBookmarkedMediasClick, onTorrentLinkClick, onAppModeSwitch }) {\r\n\r\n    const [modes, setModes] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        setModes(AppMode.modes);\r\n    },[]);\r\n\r\n    const switchAppMode = () => {\r\n        AppMode.switchActiveMode();\r\n        const updatedModes = [...AppMode.modes];\r\n        setModes(updatedModes);\r\n        onAppModeSwitch(AppMode.getActiveMode());\r\n    }\r\n\r\n    const navBarIconStyle = {\r\n        color: 'white',\r\n        width: '30px',\r\n        height: '30px'\r\n    }\r\n\r\n    return (\r\n        <div className=\"nav-bar-container\">\r\n            <div className=\"nav-bar-left\">\r\n                {modes.map(mode => <div key={mode.label} className={\"mode \" + (mode.isActive ? 'active' : '')} onClick={()=> {if(!mode.isActive)switchAppMode()}}>{mode.label}</div>)}\r\n            </div>\r\n            <img className=\"nav-bar-logo\" alt=\"\" src={logo} />\r\n            <div className=\"nav-bar-right\">\r\n                <div className=\"nav-bar-btn\" onClick={() => onHomeClick()}>\r\n                    <HomeIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onWatchedMediasClick()}>\r\n                    <VisibilityIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onBookmarkedMediasClick()}>\r\n                    <BookmarkIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onGenreMenuClick()}>\r\n                    <ViewModuleIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onSearchClick()}>\r\n                    <SearchIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onTorrentLinkClick()}>\r\n                    <LinkIcon style={navBarIconStyle} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default NavBar;","function fadeTransition(visible, speedTransition, zIndex){\r\n    var speed = speedTransition ? speedTransition + 's' : '0.5s';\r\n\r\n    const transitionStyle = {\r\n            visibility: visible ? 'visible' : 'hidden',\r\n            opacity: visible ? '1' : '0',\r\n            transition: \"all \" + speed\r\n    }\r\n\r\n    if(zIndex)\r\n        transitionStyle.zIndex = visible ? zIndex : '-1';\r\n    \r\n\r\n    return transitionStyle;\r\n}\r\n\r\nexport default fadeTransition;","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useEffect, useState } from 'react';\r\nimport fadeTransition from \"../../services/customStyles.js\";\r\n\r\nfunction CircularProgressBar({ position, color, size, visible, text }) {\r\n\r\n    const [positionStyle, setpositionStyle] = useState({});\r\n    const [displayedText, setDisplayedText] = useState();\r\n\r\n    const textStyle = {\r\n        color: 'white',\r\n        fontSize: '20px',\r\n        fontWeigth: 'bold'\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (position === 'center') {\r\n            setpositionStyle({\r\n                position: 'fixed',\r\n                top: '50%',\r\n                left: '50%',\r\n                transform: 'translate(-50%, -50%)',\r\n                textAlign: 'center'\r\n            })\r\n        }\r\n    }, [position]);\r\n\r\n    useEffect(()=>{\r\n        setDisplayedText(text);\r\n    },[text]);\r\n\r\n    return (\r\n        <div style={fadeTransition(visible)}>\r\n            <div style={positionStyle}>\r\n                <div style={textStyle}>{displayedText}</div>\r\n                <CircularProgress style={{ color: color, width: size, height: 'auto' }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CircularProgressBar;","\r\nimport \"../style/splashscreen.css\";\r\nimport logo from '../assets/logo.png';\r\nimport CircularProgressBar from \"./common/CircularProgressBar\";\r\n\r\nfunction SplashScreen({visible, showErrorMessage}) {\r\n    \r\n    return (\r\n        <div className={\"splash-screen-container\" + (visible ? '' : ' hidden')}>\r\n           <img alt=\"\" src={logo} />\r\n           <CircularProgressBar color='white' size='40px' visible={!showErrorMessage}/>\r\n           <div className=\"error-message\" style={{display: showErrorMessage ? '' : 'none'}}>\r\n                The application failed to load, try to relaunch it\r\n           </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SplashScreen;","import \"../../style/modal-window.css\";\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../services/customStyles.js\";\r\n\r\nfunction ModalWindow({ visible, content, onCloseClick }) {\r\n    return (\r\n        <div style={fadeTransition(visible)} className={\"modal-window-container\" + (visible ? \" visible\": \"\")}>\r\n            <div className=\"modal-window-content\">\r\n                <div className=\"modal-window-close-btn\" style={{ display: onCloseClick ? '' : \"none\" }} onClick={() => onCloseClick()}>\r\n                    <ClearIcon className=\"close-cross\" />\r\n                </div>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ModalWindow;","class BaseApiService {\r\n    constructor() {\r\n        this._apiBaseUrl = 'http://localhost:5000/';\r\n      }\r\n    \r\n    buildUrl(relativePath){\r\n        return this._apiBaseUrl + relativePath;\r\n    }\r\n\r\n    getRequest(url, parameters, deserializeResult, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    var result = deserializeResult && this.response ? JSON.parse(this.response) : this.response;\r\n                    if (onSuccess)\r\n                        onSuccess(result);\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n\r\n        if (parameters && parameters.length > 0) {\r\n            url += '?';\r\n            for (let i = 0; i < parameters.length; i++) {\r\n                const parameter = parameters[i];\r\n                url += parameter.name + '=' + parameter.value;\r\n                if (i !== parameters.length - 1)\r\n                    url += '&'\r\n            }\r\n        }\r\n\r\n        xhttp.open(\"GET\", url, true);\r\n        xhttp.send();\r\n    }\r\n\r\n    postRequest(url, parameters, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    if (onSuccess)\r\n                        onSuccess();\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n        xhttp.open(\"POST\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n        xhttp.send(parameters);\r\n    }\r\n\r\n    putRequest(url, obj, onSuccess){\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"PUT\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4 && this.status === 200 && Boolean(onSuccess))\r\n                onSuccess();\r\n        }\r\n    }\r\n\r\n    deleteRequest(url, obj, onSuccess) {\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"DELETE\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4)\r\n                if (this.status === 200)\r\n                    onSuccess();\r\n        }\r\n    }\r\n  }\r\n\r\nexport default BaseApiService;","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SearchMediaApiService extends BaseApiService {\r\n    buildSearchUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/' + url);\r\n    }\r\n\r\n    getMediaGenres(onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genres');\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaPlatforms(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('platforms');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMediasByGenre(genreId, onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genre/' + genreId);\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasOfToday(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('mediasoftoday')\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByGenre(genreId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('genre/' + genreId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByPlatform(platformId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('platform/' + platformId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaDetails(id, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('details/' + id);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    searchMedias(text, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('search');\r\n        var parameters = [\r\n            {\r\n                name: 't',\r\n                value: text\r\n            }\r\n        ]\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularNetflixMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('netflix');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularDisneyPlusMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('disneyplus');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAmazonPrimeMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('amazonprime');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAppleTvMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('appletv');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('popular');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getRecommandedMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('recommandations');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getSimilarMedias(mediaId, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('similar/'+ mediaId);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getEpisodes(serieId, seasonNumber, onSuccess, onFail){\r\n        var url = this.buildSearchUrl('episodes/'+ serieId + '/' + seasonNumber);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n}\r\n\r\nexport default SearchMediaApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass BookmarkApiService extends BaseApiService {\r\n    buildBookmarkUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/bookmarks/' + (url ? url : ''));\r\n    }\r\n\r\n    getBookmarkedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildBookmarkUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    addBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.putRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    deleteBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.deleteRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    isMediaBookmarked(mediaId, onSuccess, onFail) {\r\n        var parameters = [\r\n            {\r\n                name: 'id',\r\n                value: mediaId\r\n            }\r\n        ];\r\n        this.getRequest(this.buildBookmarkUrl('exists'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default BookmarkApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass WatchedMediaApiService extends BaseApiService {\r\n    buildWatchedMediaUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/watchedmedia/' + (url ? url : ''));\r\n    }\r\n\r\n    getWatchedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedMedia(mediaId, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        const parameters = [\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ]\r\n\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedEpisodes(mediaId, seasonNumber, onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId + '/' + seasonNumber), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    saveWacthedMedia(mediaDetails, currentTime, duration, seasonNumber, episodeNumber) {\r\n        const watchedMedia = {... mediaDetails};\r\n        watchedMedia.currentTime = currentTime ? currentTime : 0;\r\n        watchedMedia.totalDuration = duration ? duration : 0;\r\n\r\n        if(AppMode.getActiveMode().urlKey === 'series'){\r\n            watchedMedia.seasonNumber = seasonNumber;\r\n            watchedMedia.episodeNumber = episodeNumber;\r\n        }\r\n\r\n        this.putRequest(this.buildWatchedMediaUrl(), watchedMedia);\r\n    }\r\n}\r\n\r\nexport default WatchedMediaApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass TorrentApiService extends BaseApiService {\r\n    buildTorrentUrl(url){\r\n        return this.buildUrl('torrent/' + (url ? url : ''));\r\n    }\r\n\r\n    buildStreamUrl(url, fileName, seasonNumber, episodeNumber){\r\n        if(fileName)\r\n            return this.buildTorrentUrl('stream/file?url=' + url + '&fileName=' + fileName);\r\n        else if(AppMode.getActiveMode().urlKey === \"series\")\r\n            return this.buildTorrentUrl('stream/series?url=' + url + '&seasonNumber=' + seasonNumber + '&episodeNumber=' + episodeNumber);\r\n        else\r\n            return this.buildTorrentUrl('stream/movies?url=' + url);\r\n    }\r\n\r\n    searchVFSources(mediaId, title, year, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildTorrentUrl(AppMode.getActiveMode().urlKey + '/vf');\r\n      \r\n        var parameters = [\r\n            {\r\n                name: 'mediaId',\r\n                value: mediaId\r\n            },\r\n            {\r\n                name: 'title',\r\n                value: title\r\n            },\r\n            {\r\n                name: 'year',\r\n                value: year\r\n            },\r\n            {\r\n                name: 'season',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episode',\r\n                value: episodeNumber\r\n            },\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    searchVOSources(title, year, imdbid, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildTorrentUrl(AppMode.getActiveMode().urlKey + '/vo');\r\n        var parameters = [\r\n            {\r\n                name: 'title',\r\n                value: title\r\n            },\r\n            {\r\n                name: 'year',\r\n                value: year\r\n            },\r\n            {\r\n                name: 'season',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episode',\r\n                value: episodeNumber\r\n            },\r\n            {\r\n                name: 'imdbid',\r\n                value: imdbid\r\n            }\r\n        ];\r\n\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getDownloadState(streamUrl, onSuccess, onFail) {\r\n        const streamUrlParams = new URLSearchParams(streamUrl.replace(this.buildTorrentUrl('stream/'+ AppMode.getActiveMode().urlKey)+'?',''));\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'torrentUrl',\r\n                value: streamUrlParams.get('url')\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('streamdownloadstate'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentFiles(torrentUrl, onSuccess, onFail){\r\n        var parameters = [\r\n            {\r\n                name: 'torrentUrl',\r\n                value: torrentUrl\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('files'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentHistory(onSuccess, onFail) {\r\n        this.getRequest(this.buildTorrentUrl('history'), null, true, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default TorrentApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SubtitlesApiService extends BaseApiService {\r\n    buildSubtitlesUrl(url){\r\n        return this.buildUrl('subtitles/' + (url ? url : ''));\r\n    }\r\n\r\n    getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildSubtitlesUrl(AppMode.getActiveMode().urlKey);\r\n        var parameters = [\r\n            {\r\n                name: 'imdbCode',\r\n                value: imdbCode\r\n            },\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n    \r\n    getSubtitlesApiUrl(subtitlesSourceUrl) {\r\n        return this.buildSubtitlesUrl(\"?sourceUrl=\" + subtitlesSourceUrl);\r\n    }\r\n}\r\n\r\nexport default SubtitlesApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\n\r\nclass AppInfoApiService extends BaseApiService {\r\n    buildAppInfoUrl(url){\r\n        return this.buildUrl('application/' + (url ? url : ''));\r\n    }\r\n\r\n    isDesktopApplication(onSuccess, onFail) {\r\n        if (this.isDesktopApp) onSuccess(this.isDesktopApp);\r\n        else {\r\n            const self = this;\r\n            this.getRequest(this.buildAppInfoUrl('platform'), null, true, (response) => {\r\n                self.isDesktopApp = response.isDesktopApplication;\r\n                onSuccess(response.isDesktopApplication);\r\n            }, onFail);\r\n        }\r\n    }\r\n\r\n    playWithVlc(streamUrl, onSuccess, onFail){\r\n        var parameters = [\r\n            {\r\n                name: 'data',\r\n                value: btoa(streamUrl)\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildAppInfoUrl('startvlc'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default AppInfoApiService;\r\n  ","import SearchMediaApiService from './api/searchMediaApiService';\r\nimport BookmarkApiService from './api/bookmarkApiService';\r\nimport WatchedMediaApiService from './api/watchedMediaApiService';\r\nimport TorrentApiService from './api/torrentApiService';\r\nimport SubtitlesApiService from './api/subtitlesApiService';\r\nimport AppInfoApiService from './api/appInfoApiService';\r\n\r\nconst AppServices = {\r\n    init(){\r\n        this.searchMediaService = new SearchMediaApiService();\r\n        this.bookmarkApiService = new BookmarkApiService();\r\n        this.watchedMediaApiService = new WatchedMediaApiService();\r\n        this.torrentApiService = new TorrentApiService();\r\n        this.subtitlesApiService = new SubtitlesApiService();\r\n        this.appInfoApiService = new AppInfoApiService();\r\n    }\r\n}\r\n\r\nexport default AppServices;","import \"../../style/list-categories-view.css\";\r\nimport ModalWindow from \"./ModalWindow\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport AppMode from \"../../services/appMode\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction ModalCategories({ visible, onCloseClick, onGenreClick, onPlatformClick }) {\r\n    const [loading, setLoading] = useState(true);\r\n    const [listGenres, setListGenres] = useState([]);\r\n    const [listPlatforms, setListPlatforms] = useState([]);\r\n\r\n    const loadCategories = () => {\r\n        setListGenres([]);\r\n        AppServices.searchMediaService.getMediaGenres(\r\n            (genres) => {\r\n              if (genres && genres.length > 0) {\r\n                setListGenres(genres);\r\n              }\r\n            }\r\n        );\r\n\r\n        AppServices.searchMediaService.getMediaPlatforms(\r\n            (platforms) => {\r\n                if (platforms && platforms.length > 0) {\r\n                    setListPlatforms(platforms);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    useEffect(() => {\r\n        loadCategories();\r\n        AppMode.onAppModeChanged(()=>{\r\n            loadCategories();\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setLoading(!listGenres || listGenres.length === 0 || !listPlatforms || listPlatforms.length === 0);\r\n    }, [listGenres, listPlatforms]);\r\n\r\n    const listGenresView = () => {\r\n        return (\r\n            <div className=\"list-categories-view-container\">\r\n                <CircularProgressBar color={'white'} size={'60px'} position={'center'} visible={loading} />\r\n                <h3 class=\"categorie-title\">Genres</h3>\r\n                <div className=\"list-categories\">\r\n                    {listGenres.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onGenreClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n                <h3 class=\"categorie-title\">Platforms</h3>\r\n                <div className=\"list-categories\">\r\n                    {listPlatforms.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onPlatformClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={listGenresView()} onCloseClick={() => onCloseClick()} />\r\n    )\r\n}\r\n\r\nexport default ModalCategories;","function Rating({ rating, size }) {\r\n\r\n    const style = {\r\n        color: \"white\",\r\n        fontSize: size === \"small\" ? \"15px\" : \"20px\",\r\n        fontWeight: \"bold\",\r\n        margin: \"0 auto\",\r\n        backgroundColor: \"#52525263\",\r\n        borderRadius: \"50%\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: size === \"small\" ? \"35px\" : \"50px\",\r\n        width: size === \"small\" ? \"35px\" : \"50px\",\r\n    };\r\n\r\n    return (\r\n        <div style={style}>{rating}</div>\r\n    );\r\n}\r\n\r\nexport default Rating;","\r\nimport \"../../../style/media-lite-presentation.css\";\r\n\r\nimport Rating from \"../../common/Rating\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport fadeTransition from \"../../../services/customStyles.js\";\r\n\r\nfunction MediaLitePresentation({ media, onMediaClick, hoverEffect }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setDataLoaded(media?.coverImageUrl);\r\n    }, [media]);\r\n\r\n    if(!Boolean(media?.coverImageUrl))\r\n        return null;\r\n\r\n    const truncate = (text, maxLength) => {\r\n        if (text && text.length > maxLength)\r\n            return text.substring(0, maxLength) + '...';\r\n        else return text;\r\n    }\r\n\r\n    const handleClick = () => {\r\n        setTimeout(()=>{\r\n            if(onMediaClick)\r\n                onMediaClick(media?.id);\r\n        }, 150);   \r\n    }\r\n\r\n    const formatMediaRating = (rating) => {\r\n        return rating ? rating.toString().replace(',', '.') : '';\r\n    };\r\n\r\n    return (\r\n        <div style={fadeTransition(dataLoaded)}>\r\n            <div className={\"media-lite-presentation \" + (hoverEffect ? \"hover-effect\": \"\")} onClick={() => handleClick()}>\r\n                <div className={\"media-lite-presentation-img\"}  style={{ backgroundImage: 'url(' + media.coverImageUrl + ')' }}>                \r\n                    <div className=\"rating\">\r\n                        <Rating rating={formatMediaRating(media.rating)} size=\"small\"/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"infos\">\r\n                    <div className=\"title\">{truncate(media.title, 25)}</div>\r\n                    <div className=\"year\">{media.year}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediaLitePresentation;","const CacheService = {\r\n    cacheCollection: [],\r\n    setCache(id, data){\r\n        let cache = this.getCache(id);\r\n        if(!cache){\r\n            this.cacheCollection.push({\r\n                id: id,\r\n                data: data\r\n            }); \r\n        }\r\n        else\r\n            cache.data = data;\r\n    },\r\n    getCache(id){\r\n        return this.cacheCollection.find(c => c.id === id);\r\n    },\r\n    clearCache(){\r\n        this.cacheCollection = [];\r\n    }\r\n}\r\n\r\nexport default CacheService;","import \"../../../style/media-lite-presentation.css\";\r\nimport \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport CacheService from \"../../../services/cacheService\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction MediasCategorieList({ categorie, searchOperation, loadFromCache, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [pageIndex, setPageIndex] = useState(0);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n    const [plusButtonVisible, setPlusButtonVisible] = useState(false);\r\n    \r\n    const addIconStyle = {\r\n        width: '60px',\r\n        height: '60px',\r\n        color: 'white',\r\n        margin: 'auto'\r\n    };\r\n\r\n    const performSearch = () => {\r\n        setSearchInProgress(true);\r\n        setPlusButtonVisible(false); \r\n        searchOperation(categorie.id, pageIndex,\r\n            (mediasOfCategories) => {\r\n                setSearchInProgress(false);\r\n                if (mediasOfCategories && mediasOfCategories.length > 0) {\r\n                    setPlusButtonVisible(true);\r\n                    if (pageIndex === 1) setMedias(mediasOfCategories);\r\n                    else setMedias(medias.concat(mediasOfCategories));\r\n                }\r\n            },\r\n            () => setSearchInProgress(false));\r\n    }\r\n\r\n    const getCacheId = (categorieId) => \"categorie\" + categorieId;\r\n\r\n    useEffect(() => {\r\n        if (loadFromCache) {\r\n            const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n            setPageIndex(cacheMedias.data.pageIndex);\r\n        }\r\n        else {           \r\n            CacheService.setCache(getCacheId(categorie.id), null);\r\n            setMedias([]);\r\n            setPageIndex(1); \r\n            if(pageIndex === 1) performSearch(); \r\n        }\r\n    }, [categorie.id]);\r\n\r\n    useEffect(() => {\r\n        if (pageIndex > 0) {  \r\n            const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n            if (cacheMedias && cacheMedias.data) setMedias(cacheMedias.data.medias);\r\n            else performSearch();\r\n        }\r\n    }, [pageIndex]);\r\n\r\n    useEffect(() => {\r\n        if (medias && medias.length > 0) {\r\n            if (loadFromCache) {\r\n                const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n                if (cacheMedias && cacheMedias.data) {\r\n                    setPlusButtonVisible(true);\r\n                    scrollToMedia(cacheMedias.data.mediaElementId);\r\n                    CacheService.setCache(getCacheId(categorie.id), null);\r\n                }\r\n            }\r\n            else if(pageIndex === 1)  scrollToMedia(\"medialite0\");\r\n        }\r\n    }, [medias]);\r\n\r\n    const scrollToMedia = (elemId) => {\r\n        var elem = document.getElementById(elemId);\r\n        if (elem) {\r\n            elem.scrollIntoView({\r\n                block: \"nearest\",\r\n                inline: \"nearest\"\r\n            });\r\n        }\r\n    }\r\n \r\n    const handleMediaClick = (mediaId, elementId) => {\r\n        const data = {\r\n            medias: medias,\r\n            pageIndex: pageIndex,\r\n            mediaElementId: elementId\r\n        }\r\n        CacheService.setCache(getCacheId(categorie.id), data);\r\n        onMediaClick(mediaId);\r\n    }\r\n\r\n    return (\r\n        <div className=\"medias-list-by-categorie-container\">\r\n            <div className=\"medias-list-by-categorie-header\">\r\n                <div className=\"medias-list-categorie\">{categorie.name}</div>\r\n                <CircularProgressBar size={'30px'} color={'white'} visible={searchInProgress} />\r\n            </div>\r\n            <div className=\"medias-list-container full\">\r\n                <div className=\"medias-list wrap-content\">\r\n                    {medias.map((media, index) =>\r\n                    (<div id={\"medialite\" + index} key={index}>\r\n                        <MediaLitePresentation media={media} hoverEffect={true} onMediaClick={(mediaId) => handleMediaClick(mediaId, \"medialite\" + index)} />\r\n                    </div>))}\r\n                    <div className=\"medias-list-more\">\r\n                        <div className=\"round-btn grey\"\r\n                            style={{ visibility: plusButtonVisible ? 'visible' : 'hidden' }}\r\n                            onClick={() => { if (plusButtonVisible) {setPageIndex(pageIndex + 1);} }}>\r\n                            <AddIcon style={addIconStyle} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasCategorieList;","\r\n\r\nimport MediasCategorieList from \"../components/media/list/MediasCategorieList\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\n\r\nfunction MediasListGenrePage({ genre, loadFromCache, onMediaClick }) {\r\n\r\n    return (\r\n        <MediasCategorieList \r\n            categorie={genre} \r\n            loadFromCache={loadFromCache}\r\n            searchOperation={(genreId, pageIndex, onSuccess, onFail) => AppServices.searchMediaService.getMediasByGenre(genreId, pageIndex, onSuccess, onFail)}\r\n            onMediaClick={(mediaId) => onMediaClick(mediaId)}/>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","\r\n\r\nimport MediasCategorieList from \"../components/media/list/MediasCategorieList\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\n\r\nfunction MediasListGenrePage({ platform, loadFromCache, onMediaClick }) {\r\n\r\n    return (\r\n        <MediasCategorieList \r\n            categorie={platform} \r\n            loadFromCache={loadFromCache}\r\n            searchOperation={(platformId, pageIndex, onSuccess, onFail) => AppServices.searchMediaService.getMediasByPlatform(platformId, pageIndex, onSuccess, onFail)}\r\n            onMediaClick={(mediaId) => onMediaClick(mediaId)}/>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","import ModalWindow from \"./ModalWindow\";\r\n\r\nfunction ModalMediaTrailer({visible, youtubeTrailerUrl, onCloseClick}){\r\n\r\n\r\n    const trailerStyle = {      \r\n            width: '800px',\r\n            height: '500px',\r\n            margin: 'auto 0',\r\n            backgroundColor: 'black',\r\n            border: 'none',\r\n            boxShadow: '1px 1px 14px 7px #101010c9'       \r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <iframe style={trailerStyle} src={visible ? youtubeTrailerUrl : ''}></iframe>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalMediaTrailer; ","function TitleAndContent({ title, content, justify }) {\r\n    let justifyContent;\r\n    if(justify === 'left')\r\n        justifyContent = 'flex-start';\r\n    else \r\n        justifyContent = 'center';\r\n\r\n    const containerStyle = {\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: justifyContent,\r\n        margin: '10px 0',\r\n    }\r\n\r\n    const titleStyle = {\r\n        color: 'white',\r\n        marginRight : '15px'\r\n    }\r\n\r\n    const contentStyle = {\r\n        color: \"#959595\",\r\n        display: \"flex\"\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={titleStyle}>{title}</div>\r\n            <div style={contentStyle}>{content}</div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default TitleAndContent;","function ProgressionBar({value, width}){\r\n\r\n    const containerStyle = {\r\n        width: width,\r\n        backgroundColor: '#423737',\r\n        height: '5px',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    const progressionStyle = {\r\n        width: value + '%',\r\n        backgroundColor: '#e91919',\r\n        height: '100%',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={progressionStyle}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProgressionBar;","\r\n\r\nfunction SecondaryInfo({text, center}){\r\n    const style = {\r\n        fontSize: \"18px\",\r\n        fontWeight: \"500\",\r\n        color: \"#959595\",\r\n        textAlign: center ? \"center\" : \"left\",\r\n        margin: '10px 0'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default SecondaryInfo;","function Paragraph({text, visible}){\r\n\r\n    if(visible === false)\r\n        return null;\r\n        \r\n    const style = {\r\n        fontSize: '17px',\r\n        fontWeight: '500',\r\n        color: 'white'\r\n    }\r\n\r\n    return(\r\n        <p style={style}>{text}</p>\r\n    )\r\n}\r\n\r\nexport default Paragraph;","import \"../../../style/button.css\";\r\nimport { useState } from 'react';\r\n\r\nfunction BaseButton({ color, content, centered, rounded, onClick }) {\r\n\r\n    const [showRippleEffect, setShowRippleEffect] = useState(false);\r\n\r\n    const handleClick = () => {\r\n        setShowRippleEffect(true)\r\n        setTimeout(() => {\r\n            setShowRippleEffect(false);\r\n            onClick();\r\n        }, 300);\r\n    };\r\n\r\n    const computeClass = () => {\r\n        let className = \"standard-button\";\r\n        if (color) className += \" \" + color;\r\n        if (centered) className += \" center\";\r\n        if(rounded) className += \" rounded\";\r\n        return className;\r\n    }\r\n\r\n    return (\r\n        <div className={computeClass()} onClick={() => handleClick()}>\r\n            <div className={\"ripple-effect \" + (showRippleEffect ? 'visible' : '')}></div>\r\n            {content}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BaseButton;","\r\nimport { useEffect } from 'react';\r\n// Hook\r\nfunction useOnClickOutside(ref, handler) {\r\n    useEffect(\r\n      () => {\r\n        const listener = event => {\r\n          if (!ref.current || ref.current.contains(event.target)) {\r\n            return;\r\n          }\r\n          handler(event);         \r\n        };\r\n  \r\n        document.addEventListener('mousedown', listener);\r\n        document.addEventListener('touchstart', listener);\r\n  \r\n        return () => {\r\n          document.removeEventListener('mousedown', listener);\r\n          document.removeEventListener('touchstart', listener);\r\n        };\r\n      },\r\n      [ref, handler]\r\n    );\r\n  }\r\n\r\n  export { useOnClickOutside };","import BaseButton from './buttons/BaseButton';\r\nimport ArrowDropDownOutlinedIcon  from '@material-ui/icons/ArrowDropDownOutlined';\r\nimport { useOnClickOutside } from '../../services/customHooks';\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction DropDown({values, width, onValueChanged, textAlignement}){\r\n\r\n    const [showList, setShowList] = useState(false);\r\n    const [selectedValue, setSelectedValue] = useState('');\r\n    const [dropDownValues, setDropDownValues] = useState([]);\r\n    const dropdownRef = useRef(null);\r\n\r\n    useEffect(()=>{\r\n        if(shouldUpdateDropDownValues(values)){\r\n            setDropDownValues(values);\r\n            setSelectedValue(values[0]);\r\n        }\r\n    },[values])\r\n\r\n    useOnClickOutside(dropdownRef, () => setShowList(false));\r\n\r\n    const shouldUpdateDropDownValues = (values) => {\r\n        if (dropDownValues.length !== values.length)\r\n            return true;\r\n\r\n        let nbDifferentValues = 0;\r\n        dropDownValues.forEach((v, i) => {\r\n            if(values[i] !== v) \r\n                nbDifferentValues += 1;\r\n        });\r\n\r\n        return nbDifferentValues > 0;\r\n    }\r\n\r\n    const containerStyle = {    \r\n        position: 'relative'\r\n    }\r\n\r\n    const listStyle = {\r\n        display: showList ? 'block' : 'none',\r\n        position: 'absolute',\r\n        bottom: '0',\r\n        left: '50%',\r\n        transform: 'translate(-50%, 100%)',\r\n        borderRadius: '5px',\r\n        boxShadow: 'rgb(0 0 0 / 91%) 0px 19px 20px 8px, rgb(0 0 0) 0px 15px 20px 0px',\r\n        backgroundColor: '#141414',\r\n        color: 'white',\r\n        fontSize: '16px',\r\n        fontWeight: '500',\r\n        maxHeight: '100px',\r\n        width: width,\r\n        overflowY: 'scroll',\r\n        zIndex: '5',\r\n        textAlign: textAlignement ? textAlignement : 'left' \r\n    }\r\n\r\n    const buttonContentStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: width,\r\n    }\r\n\r\n    const buttonContent = (\r\n    <div style={buttonContentStyle}>\r\n        <div>{selectedValue}</div>\r\n        <ArrowDropDownOutlinedIcon />\r\n    </div>)\r\n\r\n    const listElementStyle = {\r\n        padding: '5px',\r\n        cursor: 'pointer'\r\n    }\r\n\r\n    const onElementMouseHover = (element) =>{\r\n        element.style.backgroundColor = '#959595';\r\n    }\r\n\r\n    const onElementMouseOut = (element) =>{\r\n        element.style.backgroundColor = '';\r\n    }\r\n\r\n    const OnElementClick = (index) => {\r\n        setShowList(false);\r\n        setSelectedValue(values[index]);\r\n        onValueChanged(index);\r\n    }\r\n\r\n    return (\r\n        <div ref={dropdownRef} style={containerStyle}>\r\n            <BaseButton color=\"red\" content={buttonContent} onClick={() => setShowList(!showList)}/>\r\n            <div style={listStyle}>\r\n                {dropDownValues.map((v,i) => <div \r\n                    key={v} \r\n                    style={listElementStyle}\r\n                    onMouseOver={(e)=> onElementMouseHover(e.target)}\r\n                    onMouseOut={(e)=> onElementMouseOut(e.target)} \r\n                    onClick={()=> OnElementClick(i)}>\r\n                        {v}\r\n                </div>)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropDown;","import ModalWindow from \"./ModalWindow\";\r\nimport TitleAndContent from \"../common/TitleAndContent\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport ProgressionBar from \"../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../common/text/SecondaryInfo\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport DropDown from \"../common/DropDown\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport fadeTransition from \"../../services/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\n\r\nimport \"../../style/modal-episode-selector.css\";\r\n\r\nfunction ModalEpisodeSelector({visible, serieId, numberOfSeasons, onEpisodeSelected, onCloseClick}){\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1);\r\n    const [episodes, setEpisodes] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [noEpisodeMessageVisible, setNoEpisodeMessageVisible] = useState(false);\r\n    const episodeListRef = useRef(null);\r\n\r\n    const seasonNumberList = [];\r\n    for (let i = 1; i <= numberOfSeasons; i++) {\r\n        seasonNumberList.push(\"Season \" + i);\r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <div className=\"modal-episode-selector-container\">\r\n                <div className=\"season-selector-container\">\r\n                    <DropDown values={seasonNumberList}  width=\"120px\" textAlignement={\"center\"} onValueChanged={(selectedIndex) => setSelectedSeasonNumber(selectedIndex + 1)}/>\r\n                </div>\r\n                <div ref={episodeListRef} className=\"episode-list-container\">\r\n                    <div className=\"loading-container\">\r\n                        <CircularProgressBar color={\"white\"} size={\"50px\"} visible={isLoading}/>\r\n                        <Paragraph text={\"No episodes found\"} visible={noEpisodeMessageVisible}/>\r\n                    </div>\r\n                   <div style={fadeTransition(episodes && episodes.length > 0)}>\r\n                        {episodes.map(episode => \r\n                                <Episode \r\n                                    key={episode.episodeNumber} \r\n                                    episode={episode}\r\n                                    onClick={()=>onEpisodeSelected(selectedSeasonNumber, episode.episodeNumber)}/>)}\r\n                   </div>\r\n                    \r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    useEffect(()=>{\r\n        if(serieId){\r\n            setEpisodes([]);\r\n            setIsLoading(true);\r\n            setNoEpisodeMessageVisible(false)\r\n            AppServices.searchMediaService.getEpisodes(serieId, selectedSeasonNumber,\r\n                (episodes)=>{\r\n                    if(episodeListRef.current)\r\n                        episodeListRef.current.scrollTop = 0;\r\n\r\n                    setIsLoading(false);\r\n                    if(episodes && episodes.length > 0){\r\n                        loadEpisodesProgress(episodes, selectedSeasonNumber);\r\n                    }\r\n                    else \r\n                        setNoEpisodeMessageVisible(true)\r\n                },\r\n                ()=>{\r\n                    setIsLoading(false);\r\n                    setNoEpisodeMessageVisible(true)\r\n                }) \r\n        }\r\n    },[serieId, selectedSeasonNumber]);\r\n\r\n    const loadEpisodesProgress = (episodesOfSeason, seasonNumber) => {\r\n        AppServices.watchedMediaApiService.getWatchedEpisodes(serieId, seasonNumber,  \r\n            (watchedEpisodes) => {\r\n                const newTab = [...episodesOfSeason]\r\n                if(watchedEpisodes && watchedEpisodes.length > 0){\r\n                    watchedEpisodes.forEach(watchedEpisode => {\r\n                        const episode = newTab.find(ep => ep.episodeNumber === watchedEpisode.episodeNumber);\r\n                        if(episode)\r\n                            episode.progression = watchedEpisode.currentTime/watchedEpisode.totalDuration; \r\n                    }); \r\n                }\r\n                setEpisodes(newTab);\r\n            }, \r\n            () => {\r\n                setEpisodes(episodesOfSeason);\r\n            });\r\n    }\r\n        \r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalEpisodeSelector; \r\n\r\nfunction Episode({episode, onClick}){\r\n\r\n    const ToTimeFormat = (runTime) => {\r\n        const totalHours = runTime / 60;\r\n\r\n        const hours = Math.trunc(totalHours);\r\n        const minutes = Math.trunc((totalHours - hours) * 60);\r\n    \r\n        let timeFormat = '';\r\n        if (hours > 0)\r\n            timeFormat += hours + 'h ';\r\n    \r\n        if (minutes > 0)\r\n            timeFormat += minutes + 'min';\r\n    \r\n        return timeFormat;\r\n    }\r\n\r\n    return <div className=\"episode-container\" onClick={()=> onClick()}>\r\n                <div style={{margin: 'auto 0'}}>\r\n                    <img src={episode.imagePath}/>\r\n                    {episode.progression ? <ProgressionBar value={episode.progression * 100} width=\"98%\"/> : null }\r\n                </div>\r\n                \r\n                <div>\r\n                    <TitleAndContent title={episode.episodeNumber + '.' + episode.name} content={ToTimeFormat(episode.runTime)} justify=\"left\" />\r\n                    <SecondaryInfo text={episode.overview.substring(0, 300)}/>\r\n                </div>\r\n            </div>\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\nfunction VideoSubtitles({ videoCurrentTime, urlSource, size, subtitlesAdjustTime }) {\r\n    const [currentSubtitles, setCurrentSubtitles] = useState('');\r\n    const [subtitles, setSubtitles] = useState([]);\r\n    const [textItalic, setTextItalic] = useState(false);\r\n\r\n    const applySubtitles = (currentTime) => {\r\n        if (!subtitles || subtitles.length === 0)\r\n            return;\r\n        \r\n        var subtitle = subtitles.find(s =>\r\n            (s.startTime + subtitlesAdjustTime) <= currentTime && currentTime <= (s.endTime + subtitlesAdjustTime));\r\n\r\n        if (subtitle?.text) {\r\n            var text = subtitle.text;\r\n            setTextItalic(false);\r\n            if (text.includes('<i>') || text.includes('</i>')) {\r\n                setTextItalic(true);\r\n                text = text.replace('<i>', '').replace('</i>', '');\r\n            }\r\n            setCurrentSubtitles(text);\r\n        }\r\n        else setCurrentSubtitles('');\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (urlSource) {\r\n            var xhttp = new XMLHttpRequest();\r\n            xhttp.onreadystatechange = function () {\r\n                if (this.readyState == 4 && this.status == 200 && this.responseText) {\r\n                    setSubtitles(JSON.parse(this.response));\r\n                }\r\n            };\r\n            xhttp.open(\"GET\", urlSource, true);\r\n            xhttp.send();\r\n        }\r\n\r\n        return () => {\r\n            setSubtitles([]);\r\n            setCurrentSubtitles('');\r\n        }\r\n    }, [urlSource]);\r\n\r\n    useEffect(() => {\r\n        if(videoCurrentTime)\r\n            applySubtitles(videoCurrentTime);\r\n    }, [videoCurrentTime, subtitles, subtitlesAdjustTime]);\r\n\r\n    return (<div className=\"video-player-subtitles\"\r\n        style={{ fontSize: size + 'px', fontStyle: textItalic ? 'italic' : '' }}>\r\n        {currentSubtitles}\r\n    </div>);\r\n}\r\n\r\nexport default VideoSubtitles;","import { useEffect, useState } from 'react';\r\n\r\nfunction Slider({ value, width, height, progressColor, cursorColor, tooltip, onCursorMoved, onCursorEndMove, onMouseOverSlider }) {\r\n    const [cursorPosition, setCursorPosition] = useState(0);\r\n    const [showToolTip, setShowToolTip] = useState(false);\r\n\r\n    const positionToPercentage = (XPosition, railBoundings) => {\r\n        if (XPosition < railBoundings.left)\r\n            return 0;\r\n        else if (XPosition > railBoundings.right)\r\n            return 100;\r\n        else\r\n            return (XPosition - railBoundings.left) * 100 / (railBoundings.right - railBoundings.left);\r\n    }\r\n\r\n    const initiateCursorMove = () => {\r\n        document.addEventListener('mousemove', moveCursor);\r\n        document.addEventListener('mouseup', endMove);\r\n    }\r\n\r\n    const moveCursor = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorMoved) onCursorMoved(percentage);\r\n    }\r\n\r\n    const endMove = (event) => {\r\n        if (onCursorEndMove) {\r\n            var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n            onCursorEndMove(percentage);\r\n        }\r\n        document.removeEventListener('mouseup', endMove);\r\n        document.removeEventListener('mousemove', moveCursor);\r\n    }\r\n\r\n    const onSliderClick = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorEndMove) onCursorEndMove(percentage);\r\n    }\r\n\r\n    const onMouseMoveOverSlider = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        if (onMouseOverSlider) onMouseOverSlider(percentage);\r\n    }\r\n\r\n    const onMouseLeaveSlider = () => {\r\n        setShowToolTip(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setCursorPosition(value);\r\n    }, [value])\r\n\r\n    useEffect(() => {\r\n        if (tooltip) setShowToolTip(true);\r\n    }, [tooltip])\r\n\r\n    return (\r\n        <div className=\"video-player-slider-container\"\r\n            style={{ width: width, height: height }}\r\n            onClick={(event) => onSliderClick(event)}\r\n            onMouseMove={(event) => onMouseMoveOverSlider(event)}\r\n            onMouseLeave={() => onMouseLeaveSlider()}>\r\n            <div className=\"complete-part\" style={{ width: cursorPosition + \"%\", backgroundColor: progressColor }}></div>\r\n            <div className=\"remaining-part\" style={{ width: (100 - cursorPosition) + \"%\" }}></div>\r\n            <div className=\"cursor\" style={{ left: cursorPosition + '%', backgroundColor: cursorColor }} onMouseDown={() => initiateCursorMove()}></div>\r\n            <div className=\"tooltip\" style={{ left: tooltip?.position + '%', display: showToolTip ? '' : 'none' }}>{tooltip?.text}</div>\r\n        </div>)\r\n}\r\n\r\n\r\nexport default Slider;","\r\nimport VideoPlayerSlider from './Slider';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction TimeController({ videoDuration, videoCurrentTime, onTimeChanged }) {\r\n    const [videoCurrentTimeLabel, setVideoCurrentTimeLabel] = useState('00:00');\r\n    const [videoRemainingTimeLabel, setVideoRemainingTimeLabel] = useState('00:00');\r\n    const [currentPourcentageTimeVideo, setcurrentPourcentageTimeVideo] = useState(0);\r\n    const [tooltip, setTooltip] = useState(null);\r\n    const [totalTime, setTotalTime] = useState(0);\r\n\r\n    const getTimeLabel = (duration) => {\r\n        let hours = Math.floor(duration / 3600);\r\n        let minutes = Math.floor((duration - (hours * 3600)) / 60);\r\n        let seconds = Math.floor(duration - (hours * 3600) - (minutes * 60));\r\n\r\n        let hourValues = '';\r\n        if (hours > 0) {\r\n            hourValues = hours < 10 ? '0' + hours : hours;\r\n            hourValues += ':';\r\n        }\r\n        let minuteValue = minutes < 10 ? '0' + minutes : minutes;\r\n        let secondValue = seconds < 10 ? '0' + seconds : seconds;\r\n        return hourValues + minuteValue + ':' + secondValue;\r\n    };\r\n\r\n    const changeTimeVideo = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            var newTime = Math.floor((percentage * totalTime) / 100)\r\n            setVideoCurrentTimeLabel(getTimeLabel(newTime));\r\n            onTimeChanged(newTime);\r\n        }\r\n    }\r\n\r\n    const updateTimeVideo = (time) => {\r\n        setVideoCurrentTimeLabel(getTimeLabel(time));\r\n        setVideoRemainingTimeLabel(getTimeLabel(videoDuration - time));\r\n        \r\n        if(totalTime && totalTime > 0)\r\n            setcurrentPourcentageTimeVideo((time) * 100 / totalTime);\r\n        else\r\n            setcurrentPourcentageTimeVideo(0);\r\n    }\r\n\r\n    const setTimeControllerTooltip = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            setTooltip({\r\n                text: getTimeLabel(Math.floor((percentage * totalTime) / 100)),\r\n                position: percentage\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (videoCurrentTime)\r\n            updateTimeVideo(videoCurrentTime);\r\n    }, [videoCurrentTime]);\r\n\r\n    useEffect(() => {\r\n        if (videoDuration){\r\n            setTotalTime(videoDuration);\r\n            setVideoRemainingTimeLabel(getTimeLabel(videoDuration));\r\n        }\r\n        else\r\n            setTotalTime(0);\r\n            \r\n    }, [videoDuration]);\r\n\r\n    return (\r\n        <div className=\"video-time-controller-container\">\r\n            <div className=\"video-time-label\">{videoCurrentTimeLabel}</div>\r\n            <VideoPlayerSlider value={currentPourcentageTimeVideo}\r\n                onCursorEndMove={(percentage) => changeTimeVideo(percentage)}\r\n                onMouseOverSlider={(percentage) => setTimeControllerTooltip(percentage)}\r\n                tooltip={tooltip}\r\n                progressColor={'#ed0f0f'}\r\n                cursorColor={'#b59e9e'} />\r\n            <div className=\"video-time-label\">{videoRemainingTimeLabel}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TimeController;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport VolumeUp from '@material-ui/icons/VolumeUp';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\r\nimport Forward10Icon from '@material-ui/icons/Forward10';\r\nimport Replay10Icon from '@material-ui/icons/Replay10';\r\n\r\nimport Slider from './Slider';\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction LeftControlsGroup({ videoIsPlaying, onPlayClick, onPauseClick, onVolumeChanged, onPlayBackwardClick, onPlayForwardClick }) {\r\n    const [showPlayButton, setShowPlayButton] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setShowPlayButton(!videoIsPlaying);\r\n    }, [videoIsPlaying]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <PlayArrowIcon className=\"icon\" style={{ display: showPlayButton ? '' : 'none' }} onClick={() => onPlayClick()} />\r\n            <PauseIcon className=\"icon\" style={{ display: showPlayButton ? 'none' : '' }} onClick={() => onPauseClick()} />\r\n            <VolumeController onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)} />\r\n            <Replay10Icon className=\"icon\" onClick={() => onPlayBackwardClick()}/>\r\n            <Forward10Icon className=\"icon\" onClick={() => onPlayForwardClick()}/>\r\n        </div>)\r\n}\r\n\r\nexport default LeftControlsGroup;\r\n\r\n\r\nfunction VolumeController({ onVolumeChanged }) {\r\n    const defaultVolume = 70;\r\n    const currentVolumeRef = useRef(0);\r\n    const [previousVolume, setPreviousVolume] = useState(defaultVolume);\r\n\r\n    const changeVolume = (percentage) => {\r\n        currentVolumeRef.current = percentage;\r\n        onVolumeChanged(percentage / 100);\r\n    };\r\n\r\n    const muteVideo = () => {\r\n        setPreviousVolume(currentVolumeRef.current);\r\n        changeVolume(0);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        changeVolume(defaultVolume);\r\n      \r\n        const onKeyboardPress = (e) =>{\r\n            if(e.keyCode === 38 && currentVolumeRef.current < 100)\r\n                changeVolume(currentVolumeRef.current + 10);\r\n            else if(e.keyCode === 40 && currentVolumeRef.current > 0)\r\n                changeVolume(currentVolumeRef.current - 10);\r\n        }\r\n\r\n        document.addEventListener('keyup', onKeyboardPress, false);\r\n\r\n        return () => {\r\n            document.removeEventListener('keyup', onKeyboardPress);\r\n        }\r\n    },[]);\r\n\r\n    return (<div className=\"video-volume-controller\">\r\n        <VolumeUp className=\"icon\" onClick={() => { muteVideo() }} style={{ display: currentVolumeRef.current > 0 ? '' : 'none' }} />\r\n        <VolumeOffIcon className=\"icon\" onClick={() => changeVolume(previousVolume)} style={{ display: currentVolumeRef.current > 0 ? 'none' : '' }} />\r\n        <Slider\r\n            value={currentVolumeRef.current}\r\n            onCursorMoved={(percentage) => changeVolume(percentage)}\r\n            onCursorEndMove={(percentage) => changeVolume(percentage)}\r\n            width={'120px'}\r\n            height={'4px'} />\r\n    </div>)\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\n\r\nexport function VideoOptions({ options, icon, onOptionChanged }) {\r\n\r\n    const [menuOptions, setMenuOptions] = useState([]);\r\n    const [menuSubOptions, setMenuSubOptions] = useState([]);\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const [showSubMenu, setShowSubMenu] = useState(false);\r\n\r\n    const [selectedOption, setSelectedOption] = useState(null);\r\n    const [selectedSubOption, setSelectedSubOption] = useState(null);\r\n\r\n    const updateMenuOptions = (selectedOption, selectedSubOption) => {\r\n\r\n        const oldSelectedOption = menuOptions.find(op => op.selected);\r\n        const oldSelectedSubOption = selectedOption?.subOptions?.find(subOp => subOp.selected);\r\n\r\n        if (selectedOption?.subOptions && !selectedSubOption)\r\n            return;\r\n\r\n        if (selectedOption?.subOptions\r\n            && oldSelectedSubOption?.label === selectedSubOption?.label)\r\n            return;\r\n\r\n        if (!selectedOption?.subOptions && oldSelectedOption?.label === selectedOption.label)\r\n            return;\r\n\r\n        var updatedOptions = [];\r\n        menuOptions.forEach(op => {\r\n            var updatedOption = {\r\n                label: op.label,\r\n                selected: op.label === selectedOption.label,\r\n                data: op.data\r\n            };\r\n            var updatedSubOptions = [];\r\n            if (op.subOptions) {\r\n                op.subOptions.forEach(subOp => {\r\n                    var updatedsubOption =\r\n                    {\r\n                        label: subOp.label,\r\n                        data: subOp.data,\r\n                        selected: subOp.label === selectedSubOption?.label\r\n                    }\r\n                    updatedSubOptions.push(updatedsubOption);\r\n                })\r\n                updatedOption.subOptions = updatedSubOptions;\r\n            }\r\n            updatedOptions.push(updatedOption);\r\n        });\r\n\r\n        setMenuOptions(updatedOptions);\r\n\r\n        setShowMenu(false);\r\n        setShowSubMenu(false);\r\n\r\n        var option = updatedOptions.find(op => op.selected);\r\n        if (option.subOptions) onOptionChanged(option.subOptions.find(subOp => subOp.selected));\r\n        else onOptionChanged(option);\r\n    }\r\n\r\n    const getOptionDisplay = (option) => {\r\n        return  (<div key={option.label} className={\"option \" + (option.selected ? 'selected' : '')}\r\n            onClick={() => {if(!option.subOptions)setSelectedOption(option)}}\r\n            onMouseEnter={() => {if(option.subOptions){setSelectedOption(option);setMenuSubOptions(!option || !option.subOptions ? [] : option.subOptions)}}}\r\n            >\r\n            {option.label}\r\n        </div>)\r\n    }\r\n\r\n    const getSubOptionDisplay = (subOption) => {\r\n        return  (<div key={subOption.label} className={\"option \" + (subOption.selected ? 'selected' : '')}\r\n            onClick={() => setSelectedSubOption(subOption)}\r\n            >\r\n            {subOption.label}\r\n        </div>)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (options) {\r\n            setMenuOptions(options);\r\n        }\r\n    }, [options]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && !selectedOption.subOptions)\r\n            updateMenuOptions(selectedOption, null);\r\n    }, [selectedOption]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && selectedSubOption)\r\n            updateMenuOptions(selectedOption, selectedSubOption);\r\n    }, [selectedSubOption]);\r\n\r\n\r\n    return (\r\n        <div className=\"video-options-container\" onMouseLeave={() => {setShowMenu(false);setShowSubMenu(false)}}>\r\n            <div className={\"video-options-menu \" + (showMenu ? '' : 'hidden')}\r\n                onMouseEnter={() => {setShowSubMenu(true)}}>\r\n                {menuOptions.map(option => getOptionDisplay(option))}\r\n            </div>\r\n            <div className={\"video-options-menu suboptions \" + (showSubMenu && menuSubOptions && menuSubOptions.length > 0 ? '' : 'hidden')}\r\n                onMouseLeave={() => {setShowSubMenu(false)}}>\r\n                {menuSubOptions.map(subOption => getSubOptionDisplay(subOption))}\r\n            </div>\r\n            <VideoOptionsButton icon={icon} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function VideoOptionsButton({ icon, hide, onClick }) {\r\n    return (\r\n        <div className=\"video-options-btn\" style={{ display: hide ? 'none' : '' }} onClick={() => onClick()}>\r\n            {icon}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport SubtitlesIcon from '@material-ui/icons/Subtitles';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport SortByAlphaIcon from '@material-ui/icons/SortByAlpha';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\n\r\nimport { VideoOptions, VideoOptionsButton } from './Options';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useOnClickOutside } from '../../../services/customHooks';\r\n\r\nfunction RightControlsGroup({\r\n    subtitlesOptions,\r\n    qualityOptions,\r\n    onSubtitleSizeChange,\r\n    onSubtitlesChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged}) {\r\n\r\n    const [videoInFullscreen, setVideoInFullscreen] = useState(false);\r\n\r\n    const changeFullScreenState = (fullscreen) => {\r\n        onFullScreenStateChanged(fullscreen);\r\n    };\r\n\r\n    useEffect(()=>{\r\n        setVideoInFullscreen(isFullScreen);\r\n    },[isFullScreen]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <div className=\"controls-sub-group\">\r\n                <VideoOptions options={subtitlesOptions}\r\n                    icon={<SubtitlesIcon className=\"icon\" />}\r\n                    onOptionChanged={(option) => onSubtitlesChange(option?.data?.url ? option.data.url : '')}\r\n                />\r\n                <AdjustSubtitleTimeOption onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon big\" />} onClick={() => onSubtitleSizeChange(2)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon small\" />} onClick={() => onSubtitleSizeChange(-2)} />\r\n            </div>\r\n\r\n            <VideoOptions options={qualityOptions}\r\n                icon={<SettingsIcon className=\"icon\" />}\r\n                onOptionChanged={(option) => onVideoQualityChange(option?.data?.url ? option.data.url : '')}\r\n            />\r\n\r\n            <VideoOptionsButton icon={<FullscreenIcon className=\"icon big\" />} hide={videoInFullscreen} onClick={() => changeFullScreenState(true)} />\r\n            <VideoOptionsButton icon={<FullscreenExitIcon className=\"icon big\" />} hide={!videoInFullscreen} onClick={() => changeFullScreenState(false)} />\r\n        </div>)\r\n}\r\nexport default RightControlsGroup;\r\n\r\nfunction AdjustSubtitleTimeOption({ onAdjustSubtitleTimeChange }) {\r\n\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const menuRef = useRef(null);\r\n\r\n    useOnClickOutside(menuRef, () => setShowMenu(false));\r\n\r\n    return (\r\n        <div ref={menuRef} className=\"adjust-subtitle-time-container\">\r\n            <div className={\"video-options-menu\" + (showMenu ? '' : ' hidden')}>\r\n                <div className=\"label\">Adj. Sub.</div>\r\n                <div className=\"adjust-subtitle-time-input-container\">\r\n                    <input type=\"number\" step=\"0.01\" onChange={(e) => onAdjustSubtitleTimeChange(e.target.valueAsNumber)} /><span className=\"label\"> s</span>\r\n                </div>\r\n            </div>\r\n            <VideoOptionsButton icon={<RestoreIcon className=\"icon\" />} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","import LeftControlsGroup from \"./LeftControlsGroup\";\r\nimport RightControlsGroup from \"./RightControlsGroup\";\r\n\r\nfunction Controls({\r\n    videoIsPlaying,\r\n    onPlayClick,\r\n    onPauseClick,\r\n    onVolumeChanged,\r\n    onPlayBackwardClick,\r\n    onPlayForwardClick,\r\n    videoSubtitlesOptions, \r\n    videoQualitiesOptions,\r\n    onSubtitlesChange,\r\n    onSubtitleSizeChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged }) {\r\n        \r\n    return (\r\n        <div className=\"video-player-controls\">\r\n            <LeftControlsGroup \r\n                videoIsPlaying = {videoIsPlaying}\r\n                onPlayClick={() => onPlayClick()} \r\n                onPauseClick={() => onPauseClick()} \r\n                onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)}\r\n                onPlayBackwardClick={()=> onPlayBackwardClick()}\r\n                onPlayForwardClick={()=> onPlayForwardClick()}/>\r\n            <RightControlsGroup\r\n                subtitlesOptions={videoSubtitlesOptions}\r\n                qualityOptions={videoQualitiesOptions}\r\n                onSubtitleSizeChange={(pixelsToAdd) => onSubtitleSizeChange(pixelsToAdd)}\r\n                onSubtitlesChange={(newUrlSource) => onSubtitlesChange(newUrlSource)}\r\n                onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)}\r\n                onVideoQualityChange={(newUrlSource) => onVideoQualityChange(newUrlSource)} \r\n                isFullScreen={isFullScreen}\r\n                onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Controls;","import \"../../style/video-player.css\";\r\n\r\nimport fadeTransition from \"../../services/customStyles\";\r\n\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\n\r\nimport VideoSubtitles from './videoPlayerComponents/VideoSubtitles';\r\nimport TimeController from './videoPlayerComponents/TimeController';\r\nimport Controls from './videoPlayerComponents/Controls';\r\n\r\nimport AppServices from \"../../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction VideoPlayer({ videoQualitiesOptions, videoSubtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n    const videoRef = useRef(null);\r\n    const videoPlayerContainerRef = useRef(null);\r\n    const watchedTimeUpdateTriggeredRef = useRef(0);\r\n\r\n    const [isFullScreen, setIsFullScreen] = useState(false);\r\n    const [currentTime, setCurrentTime] = useState(0);\r\n\r\n    const [errorMessage, setErrorMessage] = useState();\r\n\r\n    const checkDownloadStateRef = useRef(false);\r\n    const [videoDownloadState, setVideoDownloadState] =  useState('Loading');\r\n    \r\n    const [videoSource, setVideoSource] = useState('');\r\n    const [videoIsLoading, setVideoIsLoading] = useState(false);\r\n    const [videoIsPlaying, setVideoIsPlaying] = useState(false);\r\n\r\n    const [subtitlesUrl, setSubtitlesUrl] = useState('');\r\n    const [subtitlesSize, setSubtitlesSize] = useState(30);\r\n    const [subtitlesAdjustTime, setSubtitlesAdjustTime] = useState(0);\r\n\r\n    const [showVideoControls, setShowVideoControls] = useState(false);\r\n    const lastTimeMouseMovedRef = useRef(0);\r\n\r\n    const checkMovieDownloadState = (url) => {\r\n        if (checkDownloadStateRef.current && videoRef.current) {      \r\n            AppServices.torrentApiService.getDownloadState(url, (response) => { \r\n                if(decodeURIComponent(url) === decodeURIComponent(videoRef.current?.src)){\r\n                    if(response.error) {\r\n                        checkDownloadStateRef.current = false;\r\n                        setErrorMessage(response.message);\r\n                    }                \r\n                    else{\r\n                        setVideoDownloadState(response.message ? response.message : 'Loading'); \r\n                        setTimeout(() => {\r\n                            checkMovieDownloadState(url);\r\n                        }, 3000);\r\n                    }                \r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    const changeVideoSource = (url) => {       \r\n        var currentTime = videoRef.current.currentTime;\r\n        setVideoSource(url);\r\n\r\n        videoRef.current.autoplay = !videoRef.current.paused;\r\n        videoRef.current.load();\r\n       \r\n        videoRef.current.currentTime = currentTime;\r\n        setCurrentTime(currentTime);\r\n      \r\n        setVideoIsLoading(true);\r\n        checkDownloadStateRef.current = true;\r\n        setErrorMessage('');\r\n        checkMovieDownloadState(url);\r\n    }\r\n\r\n    const changeVideoTime = (newTime) =>{\r\n        videoRef.current.currentTime = newTime;\r\n    }\r\n\r\n    const displayControls = () => {\r\n        setShowVideoControls(true);\r\n        videoPlayerContainerRef.current.style.cursor = 'auto';\r\n        lastTimeMouseMovedRef.current = Date.now();\r\n        const waitingTime = 3000;\r\n        setTimeout(() => {\r\n            if (videoPlayerContainerRef?.current && Date.now() > lastTimeMouseMovedRef.current + waitingTime){\r\n                setShowVideoControls(false);\r\n                videoPlayerContainerRef.current.style.cursor = 'none';\r\n            }\r\n        }, waitingTime + 500);\r\n    };\r\n\r\n    const onFullScreenStateChanged = (fullScreen) => {\r\n        if(fullScreen){\r\n            if (!videoPlayerContainerRef.current) return;\r\n\r\n            if (videoPlayerContainerRef.current.requestFullscreen) videoPlayerContainerRef.current.requestFullscreen();\r\n            else if (videoPlayerContainerRef.current.mozRequestFullScreen) videoPlayerContainerRef.current.mozRequestFullScreen();\r\n            else if (videoPlayerContainerRef.current.webkitRequestFullscreen) videoPlayerContainerRef.current.webkitRequestFullscreen();\r\n            else if (videoPlayerContainerRef.current.msRequestFullscreen) videoPlayerContainerRef.current.msRequestFullscreen();\r\n        }\r\n        else\r\n            document.exitFullscreen();     \r\n    }\r\n\r\n    const playVideo =()=>{\r\n        if(videoRef?.current)\r\n            videoRef.current.play();\r\n    }\r\n\r\n    const pauseVideo = ()=>{\r\n        if(videoRef?.current)\r\n            videoRef.current.pause();\r\n    }\r\n\r\n    const changeVideoVolume = (newVolume) => {\r\n        if(videoRef?.current)\r\n            videoRef.current.volume = newVolume;\r\n    }\r\n\r\n    useEffect(() => {\r\n        videoPlayerContainerRef.current.addEventListener(\"mousemove\", displayControls);\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef?.current) videoPlayerContainerRef.current.removeEventListener(\"mousemove\", displayControls);\r\n        }\r\n    }, [videoPlayerContainerRef]);\r\n\r\n    useEffect(() => {\r\n        if(!Boolean(videoRef?.current))\r\n            return;\r\n            \r\n        const videoErrorHandler = (e) => {\r\n            if (videoRef?.current?.attributes.src.value) {\r\n                setErrorMessage(errorMessage ? errorMessage : \"An error occured\");\r\n                setVideoIsLoading(false);\r\n            }\r\n        }\r\n        videoRef.current.addEventListener('error', videoErrorHandler, true);\r\n\r\n        const onVideoReady = () => {        \r\n            checkDownloadStateRef.current = false;\r\n            setVideoDownloadState('');\r\n            setVideoIsLoading(false);\r\n        };\r\n        videoRef.current.addEventListener('canplay', onVideoReady, true);\r\n\r\n        const onVideoPlaying = () => {        \r\n            onVideoReady();\r\n            setVideoIsPlaying(true);\r\n        };\r\n        videoRef.current.addEventListener('playing', onVideoPlaying, true);\r\n\r\n        const onVideoPaused = () => {        \r\n            setVideoIsPlaying(false);\r\n        };\r\n        videoRef.current.addEventListener('pause', onVideoPaused, true);\r\n\r\n        const onVideoWaiting = () => {     \r\n            setVideoIsLoading(true);\r\n        };\r\n        videoRef.current.addEventListener('waiting', onVideoWaiting, true);\r\n\r\n        const onTimeUpdated = (e) =>{\r\n            if (videoRef.current?.currentTime){\r\n                setCurrentTime(videoRef.current?.currentTime);\r\n\r\n                let currentTime = Math.round(videoRef.current?.currentTime);\r\n                if(currentTime - watchedTimeUpdateTriggeredRef.current > 10){\r\n                    watchedTimeUpdateTriggeredRef.current = currentTime;\r\n                    onWatchedTimeUpdate(videoRef.current.currentTime, videoRef.current.duration);\r\n                }\r\n            }\r\n        };\r\n        videoRef.current.addEventListener('timeupdate', onTimeUpdated);\r\n\r\n        return () => {\r\n            if (videoRef?.current) {\r\n                videoRef.current.removeEventListener(\"error\", videoErrorHandler);\r\n                videoRef.current.removeEventListener('playing', onVideoReady);\r\n                videoRef.current.removeEventListener('canplay', onVideoReady);\r\n                videoRef.current.removeEventListener('waiting', onVideoWaiting);\r\n                videoRef.current.removeEventListener('pause', onVideoPaused);\r\n                videoRef.current.removeEventListener('timeupdate', onTimeUpdated);\r\n            }\r\n        }\r\n    }, [videoRef]);\r\n\r\n    useEffect(()=>{\r\n        const onFullScreenChange = (e) => {\r\n            setIsFullScreen(document.fullscreenElement);\r\n        };\r\n\r\n        const onKeyboardPress = (e) =>{\r\n\r\n            if(!videoRef?.current) return;\r\n\r\n            displayControls();\r\n\r\n            if(e.keyCode === 32){\r\n                if(videoRef.current.paused) playVideo();\r\n                else pauseVideo();\r\n            }\r\n            else if(e.keyCode === 37)\r\n                changeVideoTime(videoRef.current?.currentTime - 10);\r\n            else if(e.keyCode === 39)\r\n                changeVideoTime(videoRef.current?.currentTime + 10);\r\n        }\r\n        if (videoPlayerContainerRef.current){\r\n            videoPlayerContainerRef.current.addEventListener('fullscreenchange', onFullScreenChange);\r\n            document.addEventListener('keyup', onKeyboardPress, false);\r\n        }\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef.current){\r\n                document.removeEventListener('keyup', onKeyboardPress);\r\n                videoPlayerContainerRef.current.removeEventListener('fullscreenchange', onFullScreenChange);\r\n            } \r\n        }\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        if (videoQualitiesOptions) {\r\n            const videoQuality = videoQualitiesOptions.find(op => op.selected);\r\n            if (videoQuality?.data?.url) changeVideoSource(videoQuality.data.url);\r\n        }\r\n    }, [videoQualitiesOptions]);\r\n\r\n    useEffect(() => {\r\n        if(videoTime > 0 && videoRef?.current)\r\n            videoRef.current.currentTime = videoTime;\r\n    },[videoTime]);\r\n\r\n    return (\r\n        <div ref={videoPlayerContainerRef} className=\"video-player-content\" >\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={videoSource && videoIsLoading} text={videoDownloadState} />\r\n            <div className=\"video-player-error-message\" style={{ display: errorMessage ? '' : 'none' }}>{errorMessage}</div>\r\n            <video ref={videoRef} className=\"video-player\" src={videoSource}></video>\r\n            <div className=\"video-player-bottom\">\r\n                <VideoSubtitles\r\n                    videoCurrentTime={currentTime}\r\n                    urlSource={subtitlesUrl}\r\n                    size={subtitlesSize}\r\n                    subtitlesAdjustTime={subtitlesAdjustTime} />\r\n                <div className=\"video-player-controls-container\" style={fadeTransition(showVideoControls)}>\r\n                    <TimeController \r\n                        videoDuration={videoRef.current?.duration}\r\n                        videoCurrentTime={currentTime}\r\n                        onTimeChanged={(newTime) => changeVideoTime(newTime)} />\r\n                    <Controls\r\n                        videoIsPlaying={videoIsPlaying}\r\n                        onPlayClick={() => playVideo()}\r\n                        onPauseClick={() => pauseVideo()}\r\n                        onVolumeChanged={(newVolume)=> changeVideoVolume(newVolume)}\r\n                        onPlayBackwardClick={() => changeVideoTime(currentTime - 10)}\r\n                        onPlayForwardClick={() => changeVideoTime(currentTime + 10)}\r\n                        videoSubtitlesOptions={videoSubtitlesOptions}\r\n                        videoQualitiesOptions={videoQualitiesOptions}\r\n                        onSubtitleSizeChange={(pixelsToAdd) => setSubtitlesSize(subtitlesSize + pixelsToAdd <= 60 && subtitlesSize + pixelsToAdd >= 20 ? subtitlesSize + pixelsToAdd : subtitlesSize)}\r\n                        onSubtitlesChange={(newUrlSource) => setSubtitlesUrl(newUrlSource ? newUrlSource : '')}\r\n                        onAdjustSubtitleTimeChange={(time) => setSubtitlesAdjustTime(time ? time : 0)}\r\n                        onVideoQualityChange={(newUrlSource) => changeVideoSource(newUrlSource)}\r\n                        isFullScreen={isFullScreen}\r\n                        onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default VideoPlayer;\r\n","\r\nimport \"../../style/video-player-window.css\";\r\nimport \"../../style/button.css\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport VideoPlayer from \"./VideoPlayer\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport BaseButton from \"../common/buttons/BaseButton\";\r\nimport ModalWindow from \"../modal/ModalWindow\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function VideoPlayerWindow({ sources, subtitles, visible, onCloseClick, onWatchedTimeUpdate, goToTime }) {\r\n    const [subtitlesOptions, setSubtitlesOptions] = useState([]);\r\n    const [videoQualitiesOptions, setVideoQualitiesOptions] = useState([]);\r\n    const [resumeMessageVisible, setResumeMessageVisible] = useState(true);\r\n    const [videoTime, setVideoTime] = useState(0);\r\n\r\n    const buildVideoQualitiesOptions = (sources) => {\r\n        var options = [];\r\n        if (!sources) return;\r\n        sources.forEach(source => {\r\n            var qualities = options.filter(o => o.label.startsWith(source.quality));\r\n\r\n            var option = {\r\n                label: qualities && qualities.length > 0 ? source.quality + ' (' + (qualities.length + 1) + ')' : source.quality,\r\n                selected: source.selected,\r\n                data: {\r\n                    url: AppServices.torrentApiService.buildStreamUrl(source.downloadUrl, source.fileName, source.seasonNumber, source.episodeNumber)\r\n                }\r\n            }\r\n            options.push(option);\r\n        });\r\n\r\n        if (options.filter(o => o.selected).length === 0)\r\n            options[0].selected = true;\r\n\r\n        setVideoQualitiesOptions(options);\r\n    }\r\n\r\n    const buildSubtitlesOptions = (subtitles) => {\r\n        var newSubtitlesOptions = [];\r\n        newSubtitlesOptions.push(\r\n            {\r\n                label: 'Off',\r\n                selected: true\r\n            });\r\n\r\n        if (subtitles && subtitles.length > 0) {\r\n            subtitles.forEach(sub => {\r\n                var subtitlesOption = {\r\n                    label: sub.language,\r\n                    selected: false,\r\n                    subOptions: []\r\n                };\r\n                sub.subtitlesSourceUrls.forEach((sourceUrl, index) => {\r\n                    subtitlesOption.subOptions.push({\r\n                        label: sub.language + ' ' + (index + 1),\r\n                        selected: false,\r\n                        data: {\r\n                            url: AppServices.subtitlesApiService.getSubtitlesApiUrl(sourceUrl)\r\n                        }\r\n                    });\r\n                })\r\n                newSubtitlesOptions.push(subtitlesOption);\r\n            });\r\n        }\r\n\r\n        setSubtitlesOptions(newSubtitlesOptions);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (visible && sources && sources.length > 0) {\r\n            buildVideoQualitiesOptions(sources);\r\n        }\r\n    }, [sources, visible]);\r\n\r\n    useEffect(() => {\r\n        if (visible && subtitles && subtitles.length > 0) {\r\n            buildSubtitlesOptions(subtitles);\r\n        }\r\n    }, [subtitles, visible]);\r\n\r\n    useEffect(() => {\r\n        if (goToTime > 0) {\r\n            setResumeMessageVisible(true);\r\n        }\r\n    }, [goToTime]);\r\n\r\n\r\n    const content = (\r\n        <div className=\"video-player-window-container\">\r\n            <ResumeMessage \r\n                visible={goToTime > 0 && resumeMessageVisible} \r\n                resumeTime={goToTime} \r\n                onNoClick={() => setResumeMessageVisible(false)} \r\n                onYesClick={() => {setVideoTime(goToTime);setResumeMessageVisible(false)}} />\r\n            <VideoPlayerContainer \r\n                visible={visible}\r\n                videoQualitiesOptions={videoQualitiesOptions} \r\n                subtitlesOptions={subtitlesOptions} \r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)}\r\n                videoTime={videoTime}/>\r\n        </div>\r\n    )\r\n    return (\r\n        <ModalWindow visible={visible} content={content} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport function ToTimeFormat(totalMinutes) {\r\n    const totalHours = totalMinutes / 60;\r\n\r\n    const hours = Math.trunc(totalHours);\r\n    const minutes = Math.trunc((totalHours - hours) * 60);\r\n\r\n    let timeFormat = '';\r\n    if (hours > 0)\r\n        timeFormat += hours + ' h ';\r\n\r\n    timeFormat += minutes + ' min';\r\n\r\n    return timeFormat;\r\n}\r\n\r\n\r\nfunction ResumeMessage({ visible, resumeTime, onYesClick, onNoClick }) {\r\n    const containerStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    }\r\n    if (visible) {\r\n        return (\r\n            <div style={containerStyle}>\r\n                <Paragraph text={\"Do you want to resume the video to \" + ToTimeFormat(resumeTime/60) + \" ?\"} />\r\n                <BaseButton color=\"red\" content=\"Yes\" onClick={() => onYesClick()} />\r\n                <BaseButton color=\"grey\" content=\"No\" onClick={() => onNoClick()} />\r\n            </div>\r\n        );\r\n    }\r\n    else\r\n        return null;\r\n}\r\n\r\nfunction VideoPlayerContainer({ visible, videoQualitiesOptions, subtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n\r\n    if (visible) {\r\n        return <div className=\"video-player-container\">\r\n            <VideoPlayer\r\n                videoQualitiesOptions={videoQualitiesOptions}\r\n                videoSubtitlesOptions={subtitlesOptions}\r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)} \r\n                videoTime={videoTime}/>\r\n        </div>;\r\n    }\r\n    else\r\n        return null;\r\n}","import BaseButton from './BaseButton';\r\nimport TrailerIcon from '@material-ui/icons/LocalMovies';\r\n\r\nfunction TrailerButton({ visible, onClick }) {\r\n    if (visible) {\r\n\r\n        const content = (<div style={{display: 'flex', justifyContent: 'center'}}>\r\n            <TrailerIcon style={{ color: 'black' }}/>\r\n            <div style={{ marginLeft: '5px' }}>Trailer</div>\r\n        </div>);\r\n\r\n        return (\r\n            <BaseButton content={content} color={\"white\"} onClick={() => onClick()}/>\r\n        )\r\n    }\r\n    else return null;\r\n}\r\n\r\nexport default TrailerButton;","function Title({text}){\r\n\r\n    const style={\r\n        fontSize: '28px',\r\n        fontWeight: '500',\r\n        color: 'white',\r\n        textAlign: 'center'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default Title;","import BaseButton from './BaseButton';\r\nimport FilterNoneIcon from '@material-ui/icons/FilterNone';\r\n\r\nfunction CopyButton({ onClick }) {\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <FilterNoneIcon />\r\n        <div style={{ marginLeft: '5px' }}>Copy</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} color={\"grey\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default CopyButton;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nimport ModalWindow from \"../../modal/ModalWindow\";\r\nimport Title from '../text/Title';\r\nimport SecondaryInfo from '../text/SecondaryInfo';\r\nimport CopyButton from \"./CopyButton\";\r\nimport BaseButton from \"./BaseButton\";\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport AppServices from \"../../../services/AppServices\";\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction PlayWithVLCButton({ onClick, videoUrl }) {\r\n    const [showModal, setShowModal] = useState(false);\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n        <div style={{ marginLeft: '5px' }}>Play With VLC</div>\r\n    </div>);\r\n\r\n    const handleClick = () => {\r\n        setShowModal(true);\r\n        if(onClick) onClick();\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <BaseButton content={content} color={\"orange\"} onClick={() => handleClick()} />\r\n            <ModalForVlc visible={showModal} videoUrl={videoUrl} onCloseClick={() => setShowModal(false)} />\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default PlayWithVLCButton;\r\n\r\nfunction ModalForVlc({ visible, videoUrl, onCloseClick }) {\r\n\r\n    const containerStyle = {\r\n        backgroundColor: 'black',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: '300px',\r\n        width: '500px',\r\n        padding: '0 20px',\r\n        margin: 'auto',\r\n        color: 'white',\r\n        borderRadius: '10px',\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)'\r\n    };\r\n\r\n    const container = (\r\n        <div style={containerStyle}>\r\n            <ModalContent videoUrl={videoUrl} launchPlay={visible} onCloseClick={() => onCloseClick()} />\r\n        </div>\r\n    );\r\n\r\n    return <ModalWindow visible={visible} content={container} />;\r\n}\r\n\r\nfunction ModalContent({ videoUrl, launchPlay, onCloseClick }) {\r\n    const [isDesktopApp, setIsDesktopApp] = useState(null);\r\n    const inputLinkUrlRef = useRef(null);\r\n    const [videoDownloadState, setVideoDownloadState] = useState(null);\r\n    const checkDownloadStateRef = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (isDesktopApp === null) {\r\n            AppServices.appInfoApiService.isDesktopApplication((isDesktopApp) => {\r\n                setIsDesktopApp(isDesktopApp);\r\n            });\r\n        }\r\n    }, [isDesktopApp]);\r\n\r\n    useEffect(() => {\r\n        if (launchPlay && isDesktopApp && videoUrl) {\r\n            setVideoDownloadState({\r\n                message: 'Loading'\r\n            });\r\n            AppServices.appInfoApiService.playWithVlc(\r\n                videoUrl,\r\n                () => {\r\n                    setVideoDownloadState({\r\n                        message: 'Loading',\r\n                        url: videoUrl,\r\n                        checkState: true\r\n                    });\r\n                },\r\n                () => {\r\n                    setVideoDownloadState({\r\n                         message: \"Error trying to open VLC. Make sure it is correctly installed.\",\r\n                         checkState: false,\r\n                         error: true\r\n                        });\r\n                });\r\n        }\r\n    }, [launchPlay]);\r\n\r\n    useEffect(()=>{\r\n        checkDownloadStateRef.current = videoDownloadState?.checkState;\r\n        if(videoDownloadState?.checkState)\r\n            setTimeout(()=> checkVideoDownloadState(videoDownloadState.url), 3000);\r\n    },[videoDownloadState]);\r\n\r\n    const onCopyClick = () => {\r\n        if (inputLinkUrlRef?.current) {\r\n            inputLinkUrlRef.current.select();\r\n            document.execCommand(\"copy\");\r\n            window.getSelection().removeAllRanges();\r\n        }\r\n    }\r\n\r\n    const handleCloseClick = () => {\r\n        setVideoDownloadState(null);\r\n        onCloseClick();\r\n    }\r\n\r\n    const checkVideoDownloadState = (url) => {\r\n        AppServices.torrentApiService.getDownloadState(url, (response) => {            \r\n            if(decodeURIComponent(videoDownloadState.url) === decodeURIComponent(url)){\r\n                if(checkDownloadStateRef.current){\r\n                    setVideoDownloadState({\r\n                        message: response.message,\r\n                        checkState: !response.error,\r\n                        error: Boolean(response.error),\r\n                        url: url\r\n                    }); \r\n                }\r\n            }\r\n        })\r\n    };\r\n\r\n    const centerStyle = (vertical) => {\r\n        return {\r\n            display: 'flex', \r\n            alignItems: 'center', \r\n            height: '100%',\r\n            justifyContent: 'space-around',\r\n            flexDirection: vertical ? 'column' : ''\r\n        }\r\n    }\r\n\r\n\r\n    if (isDesktopApp) {\r\n        return (\r\n            <div style={centerStyle(true)}>\r\n                <Title text={\"Play with VLC\"} />\r\n                <SecondaryInfo text={videoDownloadState?.message} center/>\r\n                <CircularProgress style={{display: !videoDownloadState?.error ? '' : 'none', color: \"white\", width: \"50px\", height: 'auto', margin: '40px auto' }} />\r\n                <BaseButton content={\"Close\"} color={\"red\"} onClick={() => handleCloseClick()} />\r\n            </div>);\r\n    }\r\n    else\r\n        return (\r\n            <div>\r\n                <Title text={\"Play with VLC\"} />\r\n                <SecondaryInfo text={\"To play the video in VLC, click on 'Copy', open VLC then open a network stream and paste the copied link.\"} />\r\n                <input ref={inputLinkUrlRef}\r\n                    style={{ background: 'none', border: 'none', outline: 'none', color: 'grey', width: '100%', textAlign: 'center', textOverflow: 'ellipsis', margin: '10px 0' }}\r\n                    type=\"text\"\r\n                    readOnly={true}\r\n                    value={Boolean(videoUrl) ? videoUrl : ''} />\r\n                <div style={centerStyle()}>\r\n                    <CopyButton onClick={() => onCopyClick()} />\r\n                    <BaseButton content={\"Close\"} color={\"red\"} onClick={() => handleCloseClick()} />\r\n                </div>\r\n\r\n            </div>);\r\n\r\n}\r\n\r\n\r\n","import BaseButton from './BaseButton';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\n\r\n\r\nexport function AddBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"grey\"}\r\n                insideIcon={<AddIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n      \r\n}\r\n\r\nexport function RemoveBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"dark-red\"}\r\n                insideIcon={<RemoveIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n\r\n}\r\n\r\nfunction BookmarkButton({ onClick, visible, color, insideIcon }) {\r\n\r\n    if (visible) {\r\n        const contentStyle = {\r\n            position: 'relative',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const insideIconStyle = {\r\n            position: 'absolute',\r\n            top: '-2px',\r\n            right: '-2px',\r\n            padding: '1px',\r\n            zIndex: 3,\r\n            width: '15px',\r\n            height: '15px',\r\n            borderRadius: '100%',\r\n            backgroundColor: 'rgba(45,44,44,0.5)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const content = (\r\n            <div style={contentStyle}>\r\n                <BookmarkIcon style={{ fontSize: 28 }} />\r\n                <div style={insideIconStyle}>{insideIcon}</div>\r\n            </div>\r\n        )\r\n\r\n        return (\r\n            <BaseButton content={content} color={color} onClick={() => onClick()} />\r\n        );\r\n    }\r\n    else return null;\r\n\r\n}\r\n","import BaseButton from './BaseButton';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nfunction PlayButton({center, onClick }) {\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n            <div style={{ marginLeft: '5px' }}>Play</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} centered={center} color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default PlayButton;","import \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport ArrowForwardIosRounded from '@material-ui/icons/ArrowForwardIosRounded';\r\nimport ArrowBackIosRounded from '@material-ui/icons/ArrowBackIosRounded';\r\n\r\nimport fadeTransition from \"../../../services/customStyles.js\";\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nfunction MediasListLite({ medias, alignLeft, onMediaClick }) {\r\n  const listRef = useRef(null);\r\n  const [hideBackArrow, setHideBackArrow] = useState(true);\r\n  const [hideForwardArrow, setHideForwardArrow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    listRef.current.onscroll = () => {\r\n      showHideNavArrows();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!medias || medias.length === 0) {\r\n      setHideForwardArrow(true);\r\n      setHideBackArrow(true);\r\n    }\r\n    else showHideNavArrows();\r\n  }, [medias]);\r\n\r\n  useEffect(()=>{ showHideNavArrows(); }, [hideBackArrow, hideForwardArrow]);\r\n\r\n  const isElementVisible = (elem, boundings) => {\r\n    const elemBoundings = elem.getBoundingClientRect();\r\n    return Math.floor(elemBoundings.right) <= Math.floor(boundings.right)\r\n      && Math.floor(elemBoundings.left) >= Math.floor(boundings.left);\r\n  }\r\n\r\n  const getVisibleRange = () => {\r\n    var indexes = []\r\n    var listBoundings = listRef.current.getBoundingClientRect();\r\n    for (let i = 0; i < listRef.current.children.length; i++) {\r\n      if (isElementVisible(listRef.current.children[i], listBoundings))\r\n        indexes.push(i);\r\n    }\r\n\r\n    return {\r\n      'maxIndex': Math.max(...indexes),\r\n      'minIndex': Math.min(...indexes),\r\n      'count': indexes.length\r\n    }\r\n  }\r\n\r\n  const navToRight = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.maxIndex + visibleRange.count;\r\n      var index = goToIndex > listRef.current.children.length - 1 ? listRef.current.children.length - 1 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const navToLeft = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.minIndex - visibleRange.count;\r\n      var index = goToIndex < 0 ? 0 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const showHideNavArrows = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var listBoundings = listRef.current.getBoundingClientRect();\r\n      setHideBackArrow(isElementVisible(listRef.current.children[0], listBoundings));\r\n      setHideForwardArrow(isElementVisible(listRef.current.children[listRef.current.children.length - 1], listBoundings));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={\"medias-list-container\"}>\r\n      <div style={fadeTransition(!hideBackArrow)} className=\"floating-navigation-btn left\" onClick={() => navToLeft()}>\r\n        <ArrowBackIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div style={fadeTransition(!hideForwardArrow)} className=\"floating-navigation-btn right\" onClick={() => navToRight()}>\r\n        <ArrowForwardIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div ref={listRef} className={\"medias-list\"+ (hideBackArrow && hideForwardArrow && !alignLeft ? ' center' : '')}>\r\n        {medias.map((media, index) => (<MediaLitePresentation key={index} media={media} hoverEffect={true} onMediaClick={(mediaId)=>onMediaClick(mediaId)}/>))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default MediasListLite;","import \"../../../style/medias-list.css\";\r\nimport MediasListLite from \"./MediasListLite\";\r\nimport fadeTransition from \"../../../services/customStyles.js\";\r\n\r\nfunction MediasListLiteWithTitle({ listTitle, medias, alignLeft, visible, onMediaClick}) {\r\n    return (\r\n        <div style={fadeTransition(medias && medias.length > 0  && visible, 1)} className=\"medias-list-genre-container\">\r\n            <div className=\"medias-list-header\">\r\n                <div className=\"medias-list-categorie\">{listTitle}</div>\r\n            </div>\r\n            <MediasListLite medias={medias} alignLeft={alignLeft} onMediaClick={(mediaId)=>onMediaClick(mediaId)}/>\r\n        </div>\r\n    );\r\n}\r\nexport default MediasListLiteWithTitle;\r\n\r\n","\r\nimport \"../style/media-presentation-page.css\";\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport ModalMediaTrailer from '../components/modal/ModalMediaTrailer';\r\nimport ModalEpisodeSelector from '../components/modal/ModalEpisodeSelector';\r\n\r\nimport { VideoPlayerWindow, ToTimeFormat } from '../components/video/VideoPlayerWindow';\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport ProgressionBar from \"../components/common/ProgressionBar\";\r\n\r\nimport BaseButton from \"../components/common/buttons/BaseButton\";\r\nimport TrailerButton from \"../components/common/buttons/TrailerButton\";\r\nimport PlayWithVLCButton from \"../components/common/buttons/PlayWithVLCButton\";\r\nimport {AddBookmarkButton, RemoveBookmarkButton} from \"../components/common/buttons/BookmarkButton\";\r\nimport PlayButton from \"../components/common/buttons/PlayButton\";\r\n\r\nimport SecondaryInfo from \"../components/common/text/SecondaryInfo\";\r\nimport Paragraph from \"../components/common/text/Paragraph\";\r\nimport Title from \"../components/common/text/Title\";\r\nimport TitleAndContent from \"../components/common/TitleAndContent\";\r\nimport Rating from \"../components/common/Rating\";\r\nimport DropDown from \"../components/common/DropDown\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\n\r\nimport AppServices from \"../services/AppServices\";\r\nimport fadeTransition from \"../services/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\n\r\nfunction MediaFullPresentation({ mediaId, onCloseClick }) {\r\n\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n    const [mediaDetails, setMediaDetails] = useState({});\r\n    const [mediaProgression, setMediaProgression] = useState({});\r\n\r\n    const versionsSources = useRef([]);\r\n    const [voSourcesSearching, setVoSourcesSearching] = useState(false);\r\n    const [vfSourcesSearching, setVfSourcesSearching] = useState(false);\r\n\r\n    const [selectedVersionSources, setSelectedVersionSources] = useState([]);\r\n    const [selectedVersionSourceLink, setSelectedVersionSourceLink] = useState('');\r\n\r\n    const [mediaSubtitlesSources, setMediaSubtitlesSources] = useState([]);\r\n    const [loadingSubtitles, setLoadingSubtitles] = useState(false);\r\n\r\n    const [showMediaPlayer, setShowMediaPlayer] = useState(false);\r\n    const [showMediaTrailer, setShowMediaTrailer] = useState(false);\r\n    const [addBookmarkButtonVisible, setAddBookmarkButtonVisible] = useState(true);\r\n\r\n    const [similarMedias, setSimilarMedias] = useState([]);\r\n    const navHistory = useRef([]);\r\n\r\n    const selectedEpisode = useRef({ \r\n        seasonNumber: 1,\r\n        episodeNumber: 1\r\n    })\r\n\r\n\r\n    useEffect(() => {\r\n        if(mediaId)\r\n            loadPage(mediaId);\r\n    }, [mediaId]);\r\n\r\n    useEffect(() => {\r\n        if (mediaDetails.imdbId) getAvailableSubtitles(mediaDetails.imdbId, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n        if (mediaDetails.id && mediaDetails.title && mediaDetails.year) {\r\n            clearVersionSources();\r\n            searchVfSources(mediaDetails.id, mediaDetails.title, mediaDetails.year, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n            searchVoSources(mediaDetails.title, mediaDetails.year, mediaDetails.imdbId ,selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n        }\r\n\r\n        const topPage = document.getElementsByClassName('back-btn')[0];\r\n        topPage.scrollIntoView();\r\n    }, [mediaDetails]);\r\n\r\n    useEffect(()=>{\r\n        if(!selectedVersionSourceLink && selectedVersionSources.length > 0)\r\n            changeSelectedSource(0);\r\n        \r\n    },[selectedVersionSources]);\r\n\r\n    const loadPage = (mediaId) => {\r\n        setDataLoaded(false);\r\n        setMediaDetails({});\r\n        setSimilarMedias([]);\r\n        if (mediaId) {\r\n            AppServices.searchMediaService.getMediaDetails(mediaId,\r\n                (details) => {\r\n                    if (details) {\r\n                        setMediaDetails(details);\r\n                        setDataLoaded(true);\r\n                        AppServices.bookmarkApiService.isMediaBookmarked(mediaId, (isMediaBookmarked) => {\r\n                            isMediaBookmarked = isMediaBookmarked === 'true';\r\n                            setAddBookmarkButtonVisible(!isMediaBookmarked);\r\n                        });\r\n                    }\r\n                    else{\r\n                        setDataLoaded(true);\r\n                        const topPage = document.getElementsByClassName('no-media-details-message')[0];\r\n                        topPage.scrollIntoView();\r\n                    }\r\n                });\r\n            getMediaProgression(mediaId, 1, 1);               \r\n            AppServices.searchMediaService.getSimilarMedias(mediaId, (recommandedMedias) => {\r\n                if(recommandedMedias && recommandedMedias.length > 0)\r\n                    setSimilarMedias(recommandedMedias);\r\n            });\r\n        }\r\n    }\r\n\r\n    const setVersionSources = (versionLabel, sources, setFirst) => {\r\n        if (sources && sources.length > 0) {\r\n            const newVersionSources = {\r\n                versionLabel: versionLabel,\r\n                sources: sources\r\n            };\r\n            if(setFirst) versionsSources.current.unshift(newVersionSources);\r\n            else versionsSources.current.push(newVersionSources);\r\n            setSelectedVersionSources(versionsSources.current[0].sources);\r\n        }\r\n    }\r\n\r\n    const clearVersionSources = () => {\r\n        versionsSources.current = [];\r\n        setSelectedVersionSources([]);\r\n        setSelectedVersionSourceLink('');\r\n    }\r\n\r\n    const changeSelectedSource = (index) => {\r\n        const newTab = [];\r\n        for (let i = 0; i < selectedVersionSources.length; i++) {\r\n            newTab.push(selectedVersionSources[i]);\r\n            newTab[i].selected = index == i;\r\n        }\r\n        setSelectedVersionSourceLink(\r\n            selectedVersionSources.length > 0 ? AppServices.torrentApiService.buildStreamUrl(selectedVersionSources[index].downloadUrl, '', selectedVersionSources[index].seasonNumber, selectedVersionSources[index].episodeNumber) \r\n            : '');\r\n        setSelectedVersionSources(newTab);\r\n    }\r\n\r\n    const searchVfSources = (mediaId, mediaTitle, mediaYear, seasonNumber, episodeNumber) => {\r\n        setVfSourcesSearching(true);\r\n        AppServices.torrentApiService.searchVFSources(mediaId, mediaTitle, mediaYear, seasonNumber, episodeNumber,\r\n            (sources) => {\r\n                setVfSourcesSearching(false);\r\n                if (sources && sources.length > 0) {\r\n                    setVersionSources(\"VF\", sources.map(source => ({...source, seasonNumber: seasonNumber, episodeNumber: episodeNumber})));\r\n                }\r\n\r\n            }, () => {\r\n                setVfSourcesSearching(false);\r\n            }\r\n        );\r\n    }\r\n\r\n    const searchVoSources = (title, year, imdbId, seasonNumber, episodeNumber) => {\r\n        setVoSourcesSearching(true);\r\n        AppServices.torrentApiService.searchVOSources(title, year, imdbId, seasonNumber, episodeNumber,\r\n            (sources) => {\r\n                setVoSourcesSearching(false);\r\n                if (sources && sources.length > 0) {\r\n                    setVersionSources(\"VO\", sources.map(source => ({...source, seasonNumber: seasonNumber, episodeNumber: episodeNumber})), true);\r\n                }\r\n            }, () => {\r\n                setVoSourcesSearching(false);\r\n            }\r\n        );\r\n    }\r\n\r\n    const getMediaProgression = (mediaId, seasonNumber, episodeNumber) => {\r\n        setMediaProgression({});\r\n        AppServices.watchedMediaApiService.getWatchedMedia(\r\n            mediaId,\r\n            seasonNumber,\r\n            episodeNumber,\r\n            (watchedMedia) => {\r\n                if(watchedMedia?.currentTime && watchedMedia?.totalDuration){\r\n                    setMediaProgression({\r\n                        progression: watchedMedia.currentTime/watchedMedia.totalDuration,\r\n                        remainingTime: watchedMedia.totalDuration - watchedMedia.currentTime,\r\n                        currentTime: watchedMedia.currentTime\r\n                    });\r\n                }\r\n            }\r\n        )\r\n    }\r\n    \r\n\r\n    const getAvailableSubtitles = (imdbCode, seasonNumber, episodeNumber) => {\r\n        setLoadingSubtitles(true);\r\n        AppServices.subtitlesApiService.getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber,\r\n            (availableSubtitles) => {\r\n                setMediaSubtitlesSources(availableSubtitles);\r\n                setTimeout(() => setLoadingSubtitles(false), 1000);\r\n            })\r\n    }\r\n\r\n    const bookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.addBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(false);\r\n        });\r\n    }\r\n\r\n    const unbookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.deleteBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(true);\r\n        });\r\n    }\r\n\r\n    const onWatchedTimeUpdate = (currentTime, duration) => {\r\n       AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, currentTime, duration, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n    }\r\n\r\n    const onRecommandedMediaClick = (mediaId) => {\r\n        navHistory.current.push(mediaDetails.id);\r\n        loadPage(mediaId);\r\n    }\r\n\r\n    const onBackClick = () => {      \r\n        if(navHistory.current.length > 0){\r\n            let lastMediaId = navHistory.current.pop();\r\n            loadPage(lastMediaId);\r\n        }\r\n        else \r\n            onCloseClick();\r\n    }\r\n\r\n    const onEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        clearVersionSources();\r\n        selectedEpisode.current = {\r\n            seasonNumber: seasonNumber,\r\n            episodeNumber: episodeNumber\r\n        };\r\n        searchVoSources(mediaDetails.title, mediaDetails.year, mediaDetails.imdbId, seasonNumber, episodeNumber);\r\n        searchVfSources(mediaDetails.id, mediaDetails.title, mediaDetails.year, seasonNumber, episodeNumber);\r\n        getAvailableSubtitles(mediaDetails.imdbId, seasonNumber, episodeNumber);\r\n        getMediaProgression(mediaDetails.id, seasonNumber, episodeNumber);  \r\n    }\r\n \r\n    return (\r\n        <div style={{ height: '100%' }}>          \r\n            <VideoPlayerWindow \r\n                visible={showMediaPlayer} \r\n                sources={selectedVersionSources} \r\n                subtitles={mediaSubtitlesSources} \r\n                onCloseClick={() => setShowMediaPlayer(false)}\r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)} \r\n                goToTime={mediaProgression?.currentTime}/> \r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={!dataLoaded} />\r\n            <ModalMediaTrailer visible={showMediaTrailer} youtubeTrailerUrl={mediaDetails.youtubeTrailerUrl} onCloseClick={() => setShowMediaTrailer(false)}/>\r\n            <div style={{display: dataLoaded && !mediaDetails.title ? 'flex' : 'none'}} className=\"no-media-details-message\">\r\n                <Paragraph text={\"No info found for this media\"}/>\r\n                <BaseButton color=\"red\" content={\"Back\"} onClick={() => onBackClick()}/>\r\n            </div>\r\n            <div style={fadeTransition(dataLoaded && mediaDetails.title)} className=\"media-presentation-page-container\">\r\n                <div className=\"back-btn\" onClick={() => onBackClick()}>\r\n                    <ArrowBackIcon className=\"back-arrow\" />\r\n                </div>\r\n                <div className=\"presentation\" style={{ backgroundImage: 'url(' + mediaDetails.backgroundImageUrl + ')' }}>\r\n                    <div className=\"info-container\">\r\n                        <div className=\"info\">\r\n                            <div className=\"title\">\r\n                                {\r\n                                    mediaDetails.logoImageUrl ? <img src={mediaDetails.logoImageUrl} /> : <Title text={mediaDetails.title} />\r\n                                }\r\n                            </div>\r\n                            <div className=\"info-content\">\r\n                                <Rating rating={mediaDetails.rating} size=\"50px\" />\r\n                                <SecondaryInfo center text={mediaDetails.year  + \" | \" + (mediaDetails.duration ? ToTimeFormat(mediaDetails.duration) + \" | \" : '') +  mediaDetails.genres?.map(genre => genre.name).join(', ')} />\r\n                                <MediaProgression mediaProgression={mediaProgression?.progression} remainingTime={mediaProgression?.remainingTime}/>\r\n                                <div className=\"horizontal\">\r\n                                    <TrailerButton visible={mediaDetails?.youtubeTrailerUrl} onClick={() => setShowMediaTrailer(true)} />\r\n                                    <AddBookmarkButton onClick={() => bookmarkMedia()} visible={addBookmarkButtonVisible} />\r\n                                    <RemoveBookmarkButton onClick={() => unbookmarkMedia()} visible={!addBookmarkButtonVisible} />\r\n                                </div>\r\n                                <div className=\"play-options\">\r\n                                    <EpisodeSelector \r\n                                        serieId={mediaDetails.id} \r\n                                        seasonsCount={mediaDetails.seasonsCount} \r\n                                        onEpisodeSelected={(seasonNumber, episodeNumber) => onEpisodeSelected(seasonNumber, episodeNumber)}/>\r\n                                    <AvailableSubtitles loading={loadingSubtitles} availableSubtitlesSources={mediaSubtitlesSources} />\r\n                                    <AvailableVersions\r\n                                        loading={voSourcesSearching || vfSourcesSearching}\r\n                                        availableVersionsSources={versionsSources.current}\r\n                                        onVersionSelected={(versionSources) =>{setSelectedVersionSourceLink(null);setSelectedVersionSources(versionSources.sources)} } />\r\n                                    <div style={fadeTransition(!(voSourcesSearching || vfSourcesSearching) && Boolean(selectedVersionSources) && selectedVersionSources.length > 0)} >\r\n                                        <QualitySelector versionSources={selectedVersionSources} onQualityChanged={(i) => changeSelectedSource(i)} />\r\n                                        <div className=\"horizontal\">\r\n                                            <PlayButton onClick={() => setShowMediaPlayer(true)} />\r\n                                            <PlayWithVLCButton \r\n                                                videoUrl={selectedVersionSourceLink}\r\n                                                onClick={() => {if(mediaDetails) AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, 0, 0, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber)}} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"extra\">\r\n                            <TitleAndContent title=\"Director\" content={mediaDetails.director} justify=\"left\" />\r\n                            <TitleAndContent title=\"Cast\" content={mediaDetails.cast} justify=\"left\" />\r\n                            <Paragraph text={mediaDetails.synopsis}></Paragraph>\r\n                            <MediasListLiteWithTitle \r\n                                medias={similarMedias} \r\n                                alignLeft\r\n                                listTitle=\"You may also like\" \r\n                                visible={similarMedias && similarMedias.length > 0} \r\n                                onMediaClick={(mediaId) =>  {onRecommandedMediaClick(mediaId)}}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default MediaFullPresentation;\r\n\r\n\r\nfunction MediaProgression({mediaProgression, remainingTime}){\r\n    if(mediaProgression > 0){\r\n        return (\r\n            <div>\r\n                <ProgressionBar width=\"100%\" value={mediaProgression * 100}/>\r\n                <SecondaryInfo  text={ToTimeFormat(remainingTime / 60) + ' remaining'} />\r\n            </div>\r\n        )\r\n    }\r\n    else \r\n        return null;\r\n}\r\n\r\nfunction AvailableSubtitles({ availableSubtitlesSources, loading }) {\r\n    const availableSubtitles = availableSubtitlesSources?.length > 0 ? availableSubtitlesSources.map(s => s.language).join(\", \") : 'No subtitles available';\r\n    const content = loading ? <CircularProgressBar color={'white'} size={'15px'} visible={true} /> : availableSubtitles;\r\n    return (\r\n        <TitleAndContent title=\"Subtitles\" content={content} />\r\n    )\r\n}\r\n\r\nfunction AvailableVersions({ availableVersionsSources, loading, onVersionSelected }) {\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    let content;\r\n\r\n    const onVersionClick = (index) => {\r\n        setSelectedIndex(index);\r\n        onVersionSelected(availableVersionsSources[index]);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(loading)\r\n            setSelectedIndex(0);\r\n    },[loading]);\r\n\r\n    if (loading)\r\n        content = <CircularProgressBar color={'white'} size={'15px'} visible={true} />;\r\n    else {\r\n        if (availableVersionsSources?.length > 0) {\r\n            content = availableVersionsSources.map((v, i) => <BaseButton\r\n                key={i}\r\n                color={selectedIndex == i ? \"red\" : \"grey\"}\r\n                content={v.versionLabel}\r\n                onClick={() => onVersionClick(i)} />);\r\n        }\r\n        else\r\n            content = 'No version available';\r\n    }\r\n\r\n    return (\r\n        <TitleAndContent title=\"Versions\" content={content} />\r\n    )\r\n}\r\n\r\nfunction QualitySelector({ versionSources, onQualityChanged }) {\r\n    if (!versionSources || versionSources.length === 0)\r\n        return null;\r\n\r\n    const qualities = [];\r\n    versionSources.forEach(source => {\r\n\r\n        const nbSameQualities = qualities.filter(q => q.startsWith(source.quality)).length;\r\n        qualities.push(source.quality + (nbSameQualities > 0 ? \" (\" + nbSameQualities + \")\" : \"\"));\r\n    });\r\n\r\n    const content = <DropDown\r\n        values={qualities}\r\n        onValueChanged={(index) => onQualityChanged(index)} />\r\n\r\n    return <TitleAndContent title=\"Qualities\" content={content} justify=\"left\"/>\r\n\r\n}\r\n\r\nfunction EpisodeSelector({serieId, seasonsCount, onEpisodeSelected}){\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1)\r\n    const [selectedEpisodeNumber, setSelectedEpisodeNumber] = useState(1)\r\n\r\n    useEffect(() => {\r\n        setSelectedSeasonNumber(1);\r\n        setSelectedEpisodeNumber(1);\r\n    },[seasonsCount]);\r\n\r\n    if(!seasonsCount)\r\n        return null;\r\n\r\n    const onButtonClick = () => {\r\n        setModalVisible(true);\r\n    }\r\n\r\n    const containerStyle = {\r\n        margin: '12px auto',\r\n    }\r\n\r\n    const handleEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        setSelectedSeasonNumber(seasonNumber);\r\n        setSelectedEpisodeNumber(episodeNumber);\r\n        onEpisodeSelected(seasonNumber, episodeNumber);\r\n        setModalVisible(false);\r\n    }\r\n\r\n    return <div style={containerStyle}>\r\n            <ModalEpisodeSelector \r\n                visible={modalVisible} \r\n                serieId={serieId} \r\n                numberOfSeasons={seasonsCount} \r\n                onEpisodeSelected={(seasonNumber, episodeNumber)=> handleEpisodeSelected(seasonNumber, episodeNumber)}\r\n                onCloseClick={()=> setModalVisible(false)}/>\r\n            <BaseButton \r\n                color=\"red\" \r\n                content={\"Season \" + selectedSeasonNumber + \" - Episode \" + selectedEpisodeNumber}\r\n                onClick={()=> onButtonClick()}/>\r\n        </div>\r\n}\r\n\r\n\r\n","\r\nfunction MediaPicturesPresentation({ media, visible, onClick }) {\r\n    return (\r\n        <div className={\"media-pictures \" + (!visible ? \"hidden\" : \"\")} onClick={() => onClick(media.id)}>\r\n            <div className=\"logo-title\">\r\n                <img src={media?.logoImageUrl}></img>\r\n            </div>\r\n            <img className=\"background-image\" src={media?.backgroundImageUrl}></img>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediaPicturesPresentation;","\r\n\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport MediaPicturesPresentation from \"../presentation/MediaPicturesPresentation\";\r\nimport { useEffect, useState } from 'react';\r\nimport \"../../../style/media-pictures-presentation.css\";\r\n\r\n\r\nfunction MediasOfToday({ medias, onClick }) {\r\n    const [mediaIndexVisible, setMediaIndexVisible] = useState(0);\r\n    const [carouselPlay, setCarouselPlay] = useState(false);\r\n\r\n    useEffect(() =>{\r\n        if(medias && medias.length > 0)\r\n            setCarouselPlay(true);\r\n    }, [medias]);\r\n\r\n    useEffect(() => {\r\n        var changeMedia;\r\n        if (carouselPlay) {\r\n            changeMedia = setTimeout(() => {\r\n                if (mediaIndexVisible === medias?.length - 1)\r\n                    setMediaIndexVisible(0)\r\n                else setMediaIndexVisible(mediaIndexVisible + 1);\r\n            }, 5000);\r\n        }\r\n\r\n        return () => {\r\n            clearTimeout(changeMedia);\r\n        }\r\n    }, [mediaIndexVisible, carouselPlay]);\r\n\r\n\r\n    return (\r\n        <div className=\"medias-pictures-container\">\r\n            {medias?.map((media, index) =>\r\n                <MediaPicturesPresentation\r\n                    key={index}\r\n                    media={media}\r\n                    visible={index === mediaIndexVisible}\r\n                    onClick={() => onClick(media.id)} />)}\r\n            <div className=\"medias-pictures-nav-controls\">\r\n                <MediaPicturesCarousel\r\n                    nbMedias={medias?.length}\r\n                    selectedIndex={mediaIndexVisible}\r\n                    onNavElementClick={(index) => setMediaIndexVisible(index)} />\r\n                <div className=\"medias-pictures-play-pause\" onClick={() => setCarouselPlay(!carouselPlay)}>\r\n                    <PlayArrowIcon className=\"icon\" style={{ display: carouselPlay ? 'none' : '' }} />\r\n                    <PauseIcon className=\"icon\" style={{ display: !carouselPlay ? 'none' : '' }} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasOfToday;\r\n\r\nfunction MediaPicturesCarousel({ nbMedias, selectedIndex, onNavElementClick }) {\r\n\r\n    const navElements = [];\r\n\r\n    for (let i = 0; i <= nbMedias - 1; i++)\r\n        navElements.push(i);\r\n\r\n    return (\r\n        <div className=\"medias-pictures-nav\">\r\n            {navElements.map((i) =>\r\n                <div key={i}\r\n                    onClick={() => onNavElementClick(i)}\r\n                    className={\"nav-elem\" + (selectedIndex === i ? ' selected' : '')}></div>)}\r\n        </div>\r\n    );\r\n}","\r\nimport \"../style/home-page.css\";\r\nimport MediasOfToday from \"../components/media/list/MediasOfTodayList\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\n\r\nimport fadeTransition from \"../services/customStyles.js\";\r\nimport AppServices from \"../services/AppServices\";\r\nimport CacheService from \"../services/cacheService\";\r\nimport AppMode from \"../services/appMode\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\nfunction HomePage({ onMediaClick, onReady, onFail }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    const mediaListref = useRef([]);\r\n    const cacheIdRef = useRef(\"\");\r\n\r\n    const [mediaLists, setMediaLists] = useState([]);\r\n\r\n    const buildCacheId = (appMode) => {\r\n        return 'homepage' + appMode;\r\n    }\r\n\r\n    const todayTrendingTitle = \"todayTrending\"\r\n\r\n    const addMedias = (listTitle, medias, insertAtBeginning)=> {\r\n        if(medias && medias.length > 0){ \r\n            let data = {\r\n                title: listTitle,\r\n                medias: medias\r\n            }\r\n            if(insertAtBeginning)mediaListref.current.unshift(data);\r\n            else mediaListref.current.push(data);\r\n            CacheService.setCache(cacheIdRef.current, mediaListref.current);\r\n            const newArray = [...mediaListref.current];\r\n            setMediaLists(newArray);\r\n        }\r\n    };\r\n\r\n    const loadContent = () => {\r\n        cacheIdRef.current = buildCacheId(AppMode.getActiveMode().label);\r\n\r\n        let cache = CacheService.getCache(cacheIdRef.current);\r\n        mediaListref.current = [];\r\n\r\n        if(cache){\r\n            mediaListref.current = cache.data;\r\n            setMediaLists(mediaListref.current);\r\n            setDataLoaded(true);\r\n        }\r\n        else{\r\n            AppServices.searchMediaService.getMediasOfToday(\r\n            (medias) => {\r\n                addMedias(todayTrendingTitle, medias);\r\n                setDataLoaded(true);\r\n                onReady();\r\n            }, ()=>{\r\n                onFail();\r\n            });\r\n            AppServices.searchMediaService.getPopularMedias((medias)=>{\r\n                addMedias(\"Popular \" + AppMode.getActiveMode().label.toLocaleLowerCase(), medias, true);\r\n            });\r\n            AppServices.searchMediaService.getRecommandedMedias((medias)=>{\r\n                addMedias(\"Recommanded for you\", medias, true);\r\n            });\r\n            AppServices.searchMediaService.getPopularNetflixMedias((medias)=>{\r\n                addMedias(\"Popular on Netflix\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularDisneyPlusMedias((medias)=>{\r\n                addMedias(\"Popular on Disney Plus\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAmazonPrimeMedias((medias)=>{\r\n                addMedias(\"Popular on Amazon Prime\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAppleTvMedias((medias)=>{\r\n                addMedias(\"Popular on AppleTv\", medias);\r\n            });\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadContent();\r\n        AppMode.onAppModeChanged(()=>{\r\n            loadContent();\r\n        });\r\n    },[]);\r\n\r\n    return (\r\n        <div style={{height: '100%'}}>\r\n            <CircularProgressBar position={\"center\"} visible={!dataLoaded} color={\"white\"} size={\"60px\"}/>\r\n            <div className=\"home-page-container\" style={fadeTransition(dataLoaded)}>\r\n                <MediasOfToday medias={mediaLists.find(list => list.title === todayTrendingTitle)?.medias} onClick={(mediaId) => onMediaClick(mediaId)}/>\r\n                <div className=\"blur-divider\"></div>    \r\n                 {mediaLists.filter(list => list.title !== todayTrendingTitle).map((mediasList) =>\r\n                (\r\n                    <MediasListLiteWithTitle\r\n                        key={mediasList.title}\r\n                        visible={true}\r\n                        listTitle={mediasList.title}\r\n                        medias={mediasList.medias}\r\n                        onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                ))}    \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import \"../../../style/media-intermediate-presentation.css\";\r\n\r\nimport MediaLitePresentation from \"./MediaLitePresentation\";\r\nimport ProgressionBar from \"../../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../../common/text/SecondaryInfo\";\r\n\r\nfunction MediaIntermediatePresentation({ media, onClick }) {\r\n    const truncateText = (text) =>{\r\n        if(text && text.length > 400) return text.substring(0, 300) + '...';\r\n        else return text;\r\n    };\r\n\r\n    return (\r\n        <div className=\"media-intermediate-presentation-container\" onClick={() => onClick()}>\r\n            <MediaLitePresentation media={media} />\r\n            <div className=\"media-intermediate-presentation-content\">\r\n                <div className=\"media-intermediate-presentation-info\">\r\n                    <SecondaryInfo text={truncateText(media.synopsis)} />\r\n                    {media.seasonNumber && media.episodeNumber ? <SecondaryInfo text={\"Season \" + media.seasonNumber + \" - Episode \" + media.episodeNumber}/>: null}\r\n                    {media.totalDuration && media.currentTime ? <ProgressionBar value={(media.currentTime/media.totalDuration) * 100} width=\"100%\"/> : null}\r\n                </div>\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default MediaIntermediatePresentation;","import \"../../../style/media-intermediate-list.css\";\r\n\r\nimport MediaIntermediatePresentation from \"../presentation/MediaIntermediatePresentation\";\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\nimport { useEffect } from 'react';\r\n\r\nfunction MediasIntermediatePresentationList({ title, medias, centerToMedia, loadingProgressVisible, onClick }) {\r\n\r\n    useEffect(() => {\r\n        if (centerToMedia) {\r\n            var index = medias.findIndex(m => m.id === centerToMedia.id);\r\n            var elem = document.getElementById(\"mediaintermediatepresentation\" + index);\r\n            if (elem) {\r\n                elem.scrollIntoView({\r\n                    block: \"nearest\",\r\n                    inline: \"nearest\"\r\n                });\r\n            }\r\n        }\r\n    }, [medias, centerToMedia]);\r\n\r\n    return (\r\n        <div>\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={loadingProgressVisible} />          \r\n            <div className=\"media-intermediate-list-title-page\">{title}</div>\r\n            <div className=\"media-intermediate-list-content\">\r\n                {medias.map((media, index) =>\r\n                (<div id={\"mediaintermediatepresentation\" + index} key={index}>\r\n                    <MediaIntermediatePresentation\r\n                        media={media}\r\n                        onClick={() => onClick(media)}/>\r\n                </div>))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediasIntermediatePresentationList;","import AppServices from \"../services/AppServices\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from \"../services/appMode.js\";\r\n\r\nvar watchedMediaLastClicked = null;\r\n\r\nfunction WatchedMediasPage({centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            watchedMediaLastClicked = null;\r\n\r\n            AppServices.watchedMediaApiService.getWatchedMedias((medias) => {\r\n            setLoadingVisible(false);\r\n            if (medias && medias.length > 0)\r\n                setMedias(medias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleClick = (media) => {\r\n        watchedMediaLastClicked = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={medias && medias.length > 0 ? \"You can see here the \" + mediaLabel + \" you have watched\" : \"No \" + mediaLabel + \" watched\"}\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={medias}\r\n            centerToMedia={watchedMediaLastClicked}\r\n            onClick={(media) => handleClick(media)} />\r\n    )\r\n}\r\n\r\n\r\nexport default WatchedMediasPage;","import AppServices from \"../services/AppServices\";\r\nimport AppMode from \"../services/appMode.js\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\n\r\nvar lastClickedMedia = null;\r\n\r\nfunction BookmarkedMediasPage({ centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [mediasBookmarks, setMediasBookmarks] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            lastClickedMedia = null;\r\n\r\n            AppServices.bookmarkApiService.getBookmarkedMedias((bookmarkedMedias) => {\r\n            setLoadingVisible(false);\r\n            if (bookmarkedMedias && bookmarkedMedias.length > 0)\r\n                setMediasBookmarks(bookmarkedMedias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleMediaClick = (media) => {\r\n        lastClickedMedia = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={mediasBookmarks && mediasBookmarks.length > 0 ? \"You can see here the \" + mediaLabel + \" you have bookmarked\" : \"No bookmarked \" + mediaLabel }\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={mediasBookmarks}\r\n            centerToMedia={lastClickedMedia}\r\n            onClick={(media) => handleMediaClick(media)}/>\r\n    )\r\n}\r\n\r\n\r\nexport default BookmarkedMediasPage;","import \"../../style/text-input.css\";\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../services/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nfunction TextInput({ placeHolder, onTextChanged, large, value}){\r\n\r\n    useEffect(()=>{\r\n        setText(value);\r\n    },[value]);\r\n\r\n    const [text, setText] = useState('');\r\n\r\n    const onValueChanged = (value) => {\r\n        setText(value);\r\n        onTextChanged(value);\r\n    }\r\n\r\n    return (\r\n        <div className=\"text-input-container\">\r\n            <div className={\"text-input \" + (large ? 'large' : '')}>\r\n                <TextField value={text} onChange={(e) => { onValueChanged(e.target.value) }} placeholder={ placeHolder } />\r\n                <ClearIcon style={fadeTransition(text)} className='delete-text-cross' onClick={() => { onValueChanged('') }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TextInput;","import \"../style/search-view.css\";\r\n\r\nimport MediasListLite from \"../components/media/list/MediasListLite\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport TextInput from '../components/common/TextInput';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nconst cacheResearch = {\r\n    searchValue: '',\r\n    result: [],\r\n    save(searchValue, medias){\r\n        this.searchValue = searchValue;\r\n        this.result = medias;\r\n    },\r\n    clean(){\r\n        this.searchValue = '';\r\n        this.result = [];\r\n    }\r\n}; \r\n\r\nfunction ResearchPage({ loadFromCache, onMediaClick }) {\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [medias, setMedias] = useState([]);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n\r\n    const searchValueRef = useRef(searchValue);\r\n\r\n    const searchResultLabelReducer = (state, mediasLength) => {\r\n        if (mediasLength === 0) return \"Nothing found\";\r\n        else if (mediasLength === 1) return \"one result\";\r\n        else if (mediasLength > 1) return mediasLength + \" results\";\r\n        else return \"\";\r\n    };\r\n    const [searchResultLabel, searchResultLabelDispatch] = useReducer(searchResultLabelReducer, '');\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache && searchValue === cacheResearch.searchValue)\r\n            return;\r\n\r\n        searchValueRef.current = searchValue;\r\n        if (searchValue && searchValue.length > 2) {\r\n            setTimeout(() => {\r\n                if (searchValue === searchValueRef.current) {\r\n                    setSearchInProgress(true);\r\n                    searchResultLabelDispatch(-1);                \r\n                    setMedias([]);\r\n                    cacheResearch.clean();\r\n                    AppServices.searchMediaService.searchMedias(searchValue,\r\n                        (medias) => {\r\n                            setSearchInProgress(false);\r\n                            if(searchValueRef.current && searchValue === searchValueRef.current){\r\n                                searchResultLabelDispatch(medias.length);\r\n                                if (medias && medias.length > 0){\r\n                                    setMedias(medias);\r\n                                    cacheResearch.save(searchValue, medias);\r\n                                } \r\n                            }\r\n                        },\r\n                        () => {\r\n                            setSearchInProgress(false);\r\n                            searchResultLabelDispatch(0);\r\n                        });\r\n                }\r\n            }, 1000);\r\n        }\r\n        else {\r\n            searchResultLabelDispatch(-1);\r\n            setMedias([]);\r\n        }\r\n    }, [searchValue]);\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache){\r\n            setMedias(cacheResearch.result);\r\n            searchResultLabelDispatch(cacheResearch.result.length);\r\n            setSearchValue(cacheResearch.searchValue);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"search-view-container\">    \r\n            <TextInput placeHolder=\"Type here to start search...\" large onTextChanged={(text) => { setSearchValue(text) }} />\r\n            <CircularProgressBar color={'white'} size={'40px'} visible={searchInProgress} />\r\n            <div className=\"medias-search-result\">\r\n                <MediasListLite medias={medias} onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                <div className=\"label-result\">{searchResultLabel}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ResearchPage;","import BaseButton from './BaseButton';\r\n\r\nfunction OpenButton({ onClick, visible }) {\r\n\r\n    if(!visible)\r\n        return null;\r\n\r\n    const content = <div>Open</div>;\r\n\r\n    return (\r\n        <BaseButton content={content} centered color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default OpenButton;","\r\nimport \"../style/torrent-link-page.css\";\r\n\r\nimport TextInput from '../components/common/TextInput';\r\nimport OpenButton from '../components/common/buttons/OpenButton';\r\nimport CircularProgressBar from '../components/common/CircularProgressBar';\r\nimport PlayButton from '../components/common/buttons/PlayButton';\r\nimport PlayWithVLCButton from '../components/common/buttons/PlayWithVLCButton';\r\nimport { VideoPlayerWindow } from '../components/video/VideoPlayerWindow';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction TorrentLinkPage() {\r\n\r\n    const [torrentLink, setTorrentLink] = useState('');\r\n    const torrentLinkRef = useRef('');\r\n    const [openingTorrentLink, setOpeningTorrentLink] = useState(false);\r\n    const [openingHistory, setOpeningHistory] = useState(false);\r\n    const [torrentHistory, setTorrentHistory] = useState([]);\r\n    const [torrentFiles, setTorrentFiles] = useState([]);\r\n    const [selectedFile, setSelectedFile] = useState('');\r\n    const [loadingMessage, setLoadingMessage] = useState('');\r\n\r\n    const [showMoviePlayer, setShowMoviePlayer] = useState(false);\r\n\r\n    const [movieSources, setMovieSources] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        setMovieSources([{\r\n            quality: 'Movie',\r\n            downloadUrl: torrentLink,\r\n            fileName: selectedFile\r\n        }]);\r\n\r\n        if (!torrentLink)\r\n            getTorrentHistory();\r\n\r\n        torrentLinkRef.current = torrentLink;\r\n            \r\n    }, [torrentLink, selectedFile]);\r\n\r\n    const getTorrentHistory = () => {\r\n        setOpeningHistory(true);\r\n        setLoadingMessage('Loading history');\r\n        AppServices.torrentApiService.getTorrentHistory(\r\n            (files) => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory(files);\r\n            },\r\n            () => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory([]);\r\n            });\r\n    };\r\n\r\n    const changeTorrentLink = (torrentLink) => {\r\n        setOpeningTorrentLink(false);\r\n        setSelectedFile('');\r\n        setTorrentLink(torrentLink);\r\n        setTorrentFiles([]);\r\n    };\r\n\r\n    const openTorrent = () => {\r\n        setTorrentFiles([]);\r\n        setOpeningTorrentLink(true);\r\n        setLoadingMessage('Opening torrent');\r\n        \r\n        AppServices.torrentApiService.getTorrentFiles(torrentLink,\r\n            (response) => {\r\n                if(decodeURIComponent(torrentLinkRef.current) === decodeURIComponent(response.link)){\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles(response.files);\r\n                }\r\n            },\r\n            (response) => {\r\n                if(decodeURIComponent(torrentLinkRef.current) === decodeURIComponent(response.link)){\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles([]);\r\n                }\r\n            });\r\n    };\r\n\r\n    const onPlayFileClick = (file) => {\r\n        setSelectedFile(file);\r\n        setShowMoviePlayer(true);\r\n    }\r\n\r\n    const torrentFilesAreLoadingOrLoaded = () => {\r\n        return openingTorrentLink || (torrentFiles && torrentFiles.length > 0);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"torrent-link-page-container\">\r\n            <div className=\"title\">Enter a torrent url or magnet and click on Open to see the list of files</div>\r\n            <TextInput placeHolder=\"Torrent link or magnet...\" large onTextChanged={(text) => changeTorrentLink(text)} value={torrentLink}/>\r\n\r\n            <div style={{ margin: \"10px 0\" }}>\r\n                <OpenButton visible={!torrentFilesAreLoadingOrLoaded()} onClick={() => openTorrent()} />\r\n                {Boolean(openingTorrentLink) || Boolean(openingHistory) ? <CircularProgressBar visible size=\"30px\" color=\"white\" text={loadingMessage}/> : null}\r\n            </div>\r\n            <TorrentHistory visible={!torrentFilesAreLoadingOrLoaded()} files={torrentHistory} onClick={(torrentLink) => {changeTorrentLink(torrentLink)}}/>\r\n            <TorrentFilesList visible={torrentFilesAreLoadingOrLoaded()} torrentLink={torrentLink} files={torrentFiles} onPlayFileClick={(file) => onPlayFileClick(file)} />\r\n\r\n            <VideoPlayerWindow visible={showMoviePlayer} sources={movieSources} onCloseClick={() => setShowMoviePlayer(false)} onWatchedTimeUpdate={()=> {}}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TorrentLinkPage;\r\n\r\nfunction TorrentFilesList({ visible, torrentLink, files, onPlayFileClick }) {\r\n    if(!visible)\r\n        return null;\r\n\r\n    return <FilesList \r\n        torrentLink={torrentLink}\r\n        files={files}\r\n        onPlayFileClick={(file) => onPlayFileClick(file)}\r\n        contentType=\"fileFromTorrent\"\r\n        listTitle=\"Torrent files\" />\r\n}\r\n\r\nfunction TorrentHistory({ visible, files, onClick }) {\r\n    if(!visible)\r\n        return null;\r\n\r\n    return <FilesList \r\n        files={files}\r\n        onFileClick={(torrentLink) => onClick(torrentLink)}\r\n        contentType=\"torrentFile\"\r\n        listTitle=\"Last opened torrent files\" />\r\n}\r\n\r\nfunction FilesList({ torrentLink, files, onFileClick, onPlayFileClick, contentType, listTitle }) {\r\n\r\n    const [selectedFileIndex, setSelectedFileIndex] = useState(null);\r\n\r\n    useEffect(() => {\r\n        setSelectedFileIndex(null);\r\n    }, [files]);\r\n\r\n\r\n    if (!files || files.length === 0)\r\n        return null;\r\n\r\n    const fileListContainerStyle = {\r\n        width: '50%'\r\n    };\r\n\r\n    const fileListStyle = {\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)',\r\n        borderRadius: '15px',\r\n        padding: '5px 0',\r\n        maxHeight: '300px',\r\n        overflowY: 'auto'\r\n    };\r\n\r\n    const textStyle = {\r\n        padding: '10px 7px',\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        borderRadius: '7px',\r\n        cursor: 'pointer'\r\n    };\r\n\r\n    const selectedTextStyle = {\r\n        ...textStyle,\r\n        background: 'linear-gradient(90deg, rgba(187,0,0,1) 0%, rgba(193,76,76,1) 35%, rgba(0,0,0,1) 100%)'\r\n    };\r\n\r\n    const titleStyle = {\r\n        ...textStyle,\r\n        fontSize: '20px',\r\n        color: '#858585'\r\n    };\r\n\r\n\r\n    const getComponent = (file, index) => {\r\n        if(contentType === 'fileFromTorrent'){\r\n            return <FileFromTorrent \r\n                        torrentLink={torrentLink}\r\n                        file={file} \r\n                        isSelected={index === selectedFileIndex} \r\n                        onClick={()=> setSelectedFileIndex(index)}\r\n                        onPlayFileClick={() => onPlayFileClick(file)}/>\r\n        }\r\n        else if(contentType === 'torrentFile'){\r\n            return <TorrentLink file={file} onClick={(torrentLink) => onFileClick(torrentLink)}/>\r\n        }\r\n    };\r\n\r\n    const onMouseHover = (index, enter) => {\r\n        if (index !== selectedFileIndex){\r\n            const element = document.getElementById('idfile_' + index);\r\n            element.style.background = enter ? '#362b2b' : '';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={fileListContainerStyle}>\r\n            <div style={titleStyle}>{listTitle}</div>\r\n            <div style={fileListStyle}>\r\n            {files.map((file, index) =>\r\n                <div\r\n                    id={'idfile_' + index}\r\n                    key={index}\r\n                    onMouseEnter={() => { onMouseHover(index, true) }}\r\n                    onMouseLeave={() => { onMouseHover(index, false) }} style={index === selectedFileIndex ? selectedTextStyle : textStyle}>\r\n                    {getComponent(file, index)}\r\n                </div>\r\n            )}\r\n            </div>\r\n        </div>\r\n      \r\n    )\r\n}\r\n\r\nfunction FileFromTorrent({ torrentLink, file, isSelected, onClick, onPlayFileClick }) {\r\n    let playButtons = null;\r\n    if (isSelected) {\r\n        playButtons = (\r\n            <div className=\"play-buttons-container\">\r\n                <PlayButton onClick={() => onPlayFileClick()} />\r\n                <PlayWithVLCButton videoUrl={AppServices.torrentApiService.buildStreamUrl(torrentLink, file)} />\r\n            </div>)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            onClick={() => onClick()}>\r\n            {file}\r\n            {playButtons}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction TorrentLink({ file, onClick }) {\r\n    const dateStyle = {\r\n        textAlign: 'left',\r\n        color: 'grey'\r\n    };\r\n\r\n    const formateDate = (fullDateTime) => {\r\n        const today = new Date();\r\n        \r\n        const yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n        const date = new Date(fullDateTime);\r\n\r\n        let day = '';\r\n        if(yesterday.toDateString() === date.toDateString())\r\n            day = 'Yesterday';\r\n        else if(today.toDateString() === date.toDateString())\r\n            day = 'Today';\r\n        else {\r\n            let options = {year: \"numeric\", month: \"long\", day: \"numeric\"};\r\n            day = date.toLocaleString('en-US', options);\r\n        }\r\n          \r\n        const time = date.toLocaleTimeString(navigator.language, {\r\n            hour: '2-digit',\r\n            minute:'2-digit',\r\n            hour12: false\r\n          });\r\n        return day + ', ' + time;\r\n    }\r\n\r\n    return (\r\n        <div onClick={() => onClick(file.link)}>\r\n                <div style={dateStyle}>{formateDate(file.lastOpenedDateTime)}</div>\r\n                <div style={{textAlign: 'left'}}>{file.link}</div>\r\n        </div>\r\n    );\r\n}","\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction Router({ components, activeComponentId }) {\r\n\r\n    const [activeComponent, setActiveComponent] = useState({});\r\n\r\n    useEffect(()=>{\r\n        var component = components.find(c => c.id === activeComponentId);\r\n        if(component) setActiveComponent(component);\r\n    },[components, activeComponentId]);\r\n\r\n    return <div style={activeComponent?.containerStyle}>{activeComponent?.render}</div>;\r\n}\r\n\r\nexport default Router;","import './App.css';\r\nimport NavBar from \"./components/navbar/NavBar\";\r\nimport SplashScreen from \"./components/SplashScreen\";\r\nimport ModalCategories from \"./components/modal/ModalCategories.js\";\r\n\r\nimport MediaListGenrePage from \"./pages/MediaListGenrePage\";\r\nimport MediaListPlatformPage from \"./pages/MediaListPlatformPage\";\r\nimport MediaPresentationPage from \"./pages/MediaPresentationPage\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport WatchedMediasPage from \"./pages/WatchedMediasPage\";\r\nimport BookmarkedMediasPage from \"./pages/BookmarkedMediasPage\";\r\nimport ResearchPage from \"./pages/ResearchPage\";\r\nimport TorrentLinkPage from \"./pages/TorrentLinkPage\";\r\n\r\nimport AppServices from './services/AppServices';\r\nimport Router from \"./components/Router\";\r\nimport { useState } from 'react';\r\n\r\n\r\nfunction App() {\r\n  AppServices.init();\r\n\r\n  const [selectedGenre, setSelectedGenre] = useState(null);\r\n  const [loadFullListGenrefromCache, setLoadFullListGenrefromCache] = useState(false);\r\n\r\n  const [selectedPlatform, setSelectedPlatform] = useState(null);\r\n  const [loadFullListPlatformfromCache, setLoadFullListPlatformfromCache] = useState(false);\r\n\r\n  const [loadResearchfromCache, setLoadResearchfromCache] = useState(false);\r\n\r\n  const [centerToLastClickedBookmark, setCenterToLastClickedBookmark] = useState(false);\r\n  const [centerToLastClickedWatchedMedia, setCenterToLastClickedWatchedMedia] = useState(false);\r\n\r\n  const [splashscreenVisible, setSplashscreenVisible] = useState(true);\r\n  const [homePageFailed, setHomePageFailed] = useState(false);\r\n\r\n  const [modalListCategoriesVisible, setModalListCategoriesVisible] = useState(false);\r\n\r\n  const [mediaId, setMediaId] = useState('');\r\n\r\n  const showComponent = (componentId) => {\r\n    setRouterPreviousComponentId(routerActiveComponentId);\r\n    setRouterActiveComponentId(componentId);\r\n  }\r\n\r\n  const showMediasFullListofGenre = (genre) => {\r\n    setSelectedGenre(genre);\r\n    setLoadFullListGenrefromCache(false);\r\n    showComponent(routerIds.mediasListGenrePage);\r\n  }\r\n\r\n  const showMediasFullListofPlatform = (platform) => {\r\n    setSelectedPlatform(platform);\r\n    setLoadFullListPlatformfromCache(false);\r\n    showComponent(routerIds.mediasListPlatformPage);\r\n  }\r\n\r\n  const showMediaFullPresentation = (mediaId) => {\r\n    setMediaId(mediaId);\r\n    showComponent(routerIds.mediaPresentationPage);\r\n  }\r\n\r\n  const goToPreviousComponent = () => {\r\n    showComponent(routerPreviousComponentId);\r\n  }\r\n\r\n  const onMediaFullPresentationClose = () => {\r\n    setLoadFullListGenrefromCache(true);\r\n    setLoadFullListPlatformfromCache(true);\r\n    setCenterToLastClickedBookmark(true);\r\n    setCenterToLastClickedWatchedMedia(true);\r\n    setLoadResearchfromCache(true);\r\n    goToPreviousComponent();\r\n  }\r\n\r\n  const routerIds = {\r\n    homePage: 'homePage',\r\n    mediasListGenrePage: 'mediasOfGenre',\r\n    mediasListPlatformPage: 'mediasOfPlatform',\r\n    mediaPresentationPage: 'mediaPresentationPage',\r\n    watchedMediasListPage: 'watchedMediasListPage',\r\n    bookmarkedMediasListPage: 'bookmarkedMediasListPage',\r\n    researchPage: 'researchPage',\r\n    torrentLinkPage: 'torrentLinkPage'\r\n  }\r\n\r\n  const router = {\r\n    components: [\r\n      {\r\n        id: routerIds.homePage,\r\n        render: (<HomePage\r\n          onReady={() => { setSplashscreenVisible(false) }}\r\n          onFail={() => { setHomePageFailed(true)}}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.mediasListGenrePage,\r\n        render: (<MediaListGenrePage\r\n          genre={selectedGenre}\r\n          loadFromCache={loadFullListGenrefromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n          containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediasListPlatformPage,\r\n        render: (<MediaListPlatformPage\r\n          platform={selectedPlatform}\r\n          loadFromCache={loadFullListPlatformfromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n          containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediaPresentationPage,\r\n        containerStyle: { height: '100%'},\r\n        render: (<MediaPresentationPage\r\n          mediaId={mediaId}\r\n          onCloseClick={() => onMediaFullPresentationClose()} />)\r\n      },\r\n      {\r\n        id: routerIds.watchedMediasListPage,\r\n        render: (<WatchedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedWatchedMedia}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.bookmarkedMediasListPage,\r\n        render: (<BookmarkedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedBookmark}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.researchPage,\r\n        render: (<ResearchPage loadFromCache={loadResearchfromCache}  onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.torrentLinkPage,\r\n        render: (<TorrentLinkPage />)\r\n      }\r\n    ]\r\n  };\r\n  const [routerActiveComponentId, setRouterActiveComponentId] = useState(routerIds.homePage);\r\n  const [routerPreviousComponentId, setRouterPreviousComponentId] = useState(routerIds.homePage);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <SplashScreen visible={splashscreenVisible} showErrorMessage={homePageFailed}/>\r\n      <ModalCategories\r\n        visible={modalListCategoriesVisible}\r\n        onGenreClick={(genre) => { setModalListCategoriesVisible(false); showMediasFullListofGenre(genre) }}\r\n        onPlatformClick={(platform) => { setModalListCategoriesVisible(false); showMediasFullListofPlatform(platform) }}\r\n        onCloseClick={() => setModalListCategoriesVisible(false)}\r\n      />\r\n      <NavBar\r\n        onSearchClick={() => { setLoadResearchfromCache(false); setRouterActiveComponentId(routerIds.researchPage) }}\r\n        onHomeClick={() => setRouterActiveComponentId(routerIds.homePage)}\r\n        onGenreMenuClick={() => setModalListCategoriesVisible(true)}\r\n        onWatchedMediasClick={() => { setCenterToLastClickedWatchedMedia(false); setRouterActiveComponentId(routerIds.watchedMediasListPage) }}\r\n        onBookmarkedMediasClick={() => { setCenterToLastClickedBookmark(false); setRouterActiveComponentId(routerIds.bookmarkedMediasListPage) }}\r\n        onTorrentLinkClick={()=>{ setRouterActiveComponentId(routerIds.torrentLinkPage) }}\r\n        onAppModeSwitch={()=> {setRouterActiveComponentId(routerIds.homePage)}}/>\r\n      <div className=\"app-content\">\r\n        <Router components={router.components} activeComponentId={routerActiveComponentId} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}
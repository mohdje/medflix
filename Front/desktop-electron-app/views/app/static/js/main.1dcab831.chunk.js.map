{"version":3,"sources":["assets/logo.png","services/appMode.js","components/navbar/NavBar.js","services/customStyles.js","components/common/CircularProgressBar.js","components/SplashScreen.js","components/modal/ModalWindow.js","services/api/baseApiService.js","services/api/searchMediaApiService.js","services/api/bookmarkApiService.js","services/api/watchedMediaApiService.js","services/api/torrentApiService.js","services/api/subtitlesApiService.js","services/api/appInfoApiService.js","services/AppServices.js","components/modal/ModalListGenre.js","components/common/Rating.js","components/media/presentation/MediaLitePresentation.js","pages/MediaListGenrePage.js","components/modal/ModalMediaTrailer.js","components/common/TitleAndContent.js","components/common/ProgressionBar.js","components/common/text/SecondaryInfo.js","components/common/text/Paragraph.js","components/common/buttons/BaseButton.js","services/customHooks.js","components/common/DropDown.js","components/modal/ModalEpisodeSelector.js","components/video/videoPlayerComponents/VideoSubtitles.js","components/video/videoPlayerComponents/Slider.js","components/video/videoPlayerComponents/TimeController.js","components/video/videoPlayerComponents/LeftControlsGroup.js","components/video/videoPlayerComponents/Options.js","components/video/videoPlayerComponents/RightControlsGroup.js","components/video/videoPlayerComponents/Controls.js","components/video/VideoPlayer.js","components/video/VideoPlayerWindow.js","components/common/buttons/TrailerButton.js","components/common/text/Title.js","components/common/buttons/CopyButton.js","components/common/buttons/PlayWithVLCButton.js","components/common/buttons/BookmarkButton.js","components/common/buttons/PlayButton.js","components/media/list/MediasListLite.js","components/media/list/MediasListLiteWithTitle.js","pages/MediaPresentationPage.js","components/media/presentation/MediaPicturesPresentation.js","components/media/list/MediasOfTodayList.js","services/cacheService.js","pages/HomePage.js","components/media/presentation/MediaIntermediatePresentation.js","components/media/list/MediasIntermediatePresentationList.js","pages/WatchedMediasPage.js","pages/BookmarkedMediasPage.js","components/common/TextInput.js","pages/ResearchPage.js","components/common/buttons/OpenButton.js","pages/TorrentLinkPage.js","components/Router.js","App.js","reportWebVitals.js","index.js"],"names":["AppMode","onAppModeChanged","callback","eventName","this","modeChangedEvent","Event","document","addEventListener","e","modes","label","urlKey","isActive","getActiveMode","find","mode","switchActiveMode","forEach","dispatchEvent","NavBar","onSearchClick","onHomeClick","onGenreMenuClick","onWatchedMediasClick","onBookmarkedMediasClick","onTorrentLinkClick","onAppModeSwitch","useState","setModes","useEffect","navBarIconStyle","color","width","height","className","map","onClick","updatedModes","switchAppMode","alt","src","logo","style","fadeTransition","visible","speedTransition","zIndex","transitionStyle","visibility","opacity","transition","CircularProgressBar","position","size","text","positionStyle","setpositionStyle","displayedText","setDisplayedText","top","left","transform","textAlign","fontSize","fontWeigth","CircularProgress","SplashScreen","showErrorMessage","display","ModalWindow","content","onCloseClick","BaseApiService","_apiBaseUrl","relativePath","url","parameters","deserializeResult","onSuccess","onFail","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","result","response","JSON","parse","length","i","parameter","name","value","open","send","setRequestHeader","obj","stringify","Boolean","SearchMediaApiService","buildUrl","buildSearchUrl","getRequest","genreId","page","id","mediaId","serieId","seasonNumber","BookmarkApiService","buildBookmarkUrl","mediaDto","putRequest","deleteRequest","WatchedMediaApiService","buildWatchedMediaUrl","episodeNumber","mediaDetails","currentTime","duration","watchedMedia","totalDuration","TorrentApiService","fileName","buildTorrentUrl","title","year","imdbid","streamUrl","URLSearchParams","replace","get","torrentUrl","SubtitlesApiService","imdbCode","buildSubtitlesUrl","subtitlesSourceUrl","AppInfoApiService","isDesktopApp","self","buildAppInfoUrl","isDesktopApplication","btoa","AppServices","init","searchMediaService","bookmarkApiService","watchedMediaApiService","torrentApiService","subtitlesApiService","appInfoApiService","ModalListGenre","onGenreClick","loading","setLoading","listGenres","setListGenres","loadGenres","getMediaGenres","genres","genre","Rating","rating","fontWeight","margin","backgroundColor","borderRadius","alignItems","justifyContent","MediaLitePresentation","maxLength","media","onMediaClick","hoverEffect","dataLoaded","setDataLoaded","coverImageUrl","setTimeout","backgroundImage","toString","substring","cache","update","medias","pageIndex","elemId","mediaElementId","clear","MediasListGenrePage","loadFromCache","setMedias","setPageIndex","searchInProgress","setSearchInProgress","performSearch","getMediasByGenre","mediasOfGenre","concat","cacheMedias","scrollToMedia","elem","getElementById","scrollIntoView","block","inline","handleMediaClick","elementId","index","ModalMediaTrailer","youtubeTrailerUrl","trailerStyle","border","boxShadow","TitleAndContent","containerStyle","justify","marginRight","ProgressionBar","progressionStyle","SecondaryInfo","center","Paragraph","BaseButton","centered","rounded","showRippleEffect","setShowRippleEffect","handleClick","computeClass","useOnClickOutside","ref","handler","listener","event","current","contains","target","removeEventListener","DropDown","values","onValueChanged","textAlignement","showList","setShowList","selectedValue","setSelectedValue","dropDownValues","setDropDownValues","dropdownRef","useRef","shouldUpdateDropDownValues","nbDifferentValues","v","listStyle","bottom","maxHeight","overflowY","buttonContentStyle","buttonContent","listElementStyle","padding","cursor","onMouseOver","onMouseOut","ModalEpisodeSelector","numberOfSeasons","onEpisodeSelected","selectedSeasonNumber","setSelectedSeasonNumber","episodes","setEpisodes","isLoading","setIsLoading","noEpisodeMessageVisible","setNoEpisodeMessageVisible","episodeListRef","seasonNumberList","push","getEpisodes","scrollTop","loadEpisodesProgress","episodesOfSeason","getWatchedEpisodes","watchedEpisodes","newTab","watchedEpisode","episode","ep","progression","selectedIndex","Episode","imagePath","runTime","totalHours","hours","Math","trunc","minutes","timeFormat","ToTimeFormat","overview","VideoSubtitles","videoCurrentTime","urlSource","subtitlesAdjustTime","currentSubtitles","setCurrentSubtitles","subtitles","setSubtitles","textItalic","setTextItalic","responseText","subtitle","s","startTime","endTime","includes","applySubtitles","fontStyle","Slider","progressColor","cursorColor","tooltip","onCursorMoved","onCursorEndMove","onMouseOverSlider","cursorPosition","setCursorPosition","showToolTip","setShowToolTip","positionToPercentage","XPosition","railBoundings","right","moveCursor","percentage","clientX","parentElement","getBoundingClientRect","endMove","onSliderClick","onMouseMove","onMouseMoveOverSlider","onMouseLeave","onMouseDown","TimeController","videoDuration","onTimeChanged","videoCurrentTimeLabel","setVideoCurrentTimeLabel","videoTotalTimeLabel","setVideoTotalTimeLabel","currentPourcentageTimeVideo","setcurrentPourcentageTimeVideo","setTooltip","totalTime","setTotalTime","getTimeLabel","floor","seconds","hourValues","time","newTime","changeTimeVideo","setTimeControllerTooltip","LeftControlsGroup","videoIsPlaying","onPlayClick","onPauseClick","onVolumeChanged","onPlayBackwardClick","onPlayForwardClick","showPlayButton","setShowPlayButton","VolumeController","newVolume","currentVolumeRef","previousVolume","setPreviousVolume","changeVolume","onKeyboardPress","keyCode","VideoOptions","options","icon","onOptionChanged","menuOptions","setMenuOptions","menuSubOptions","setMenuSubOptions","showMenu","setShowMenu","showSubMenu","setShowSubMenu","selectedOption","setSelectedOption","selectedSubOption","setSelectedSubOption","updateMenuOptions","oldSelectedOption","op","selected","oldSelectedSubOption","subOptions","subOp","updatedOptions","updatedOption","data","updatedSubOptions","updatedsubOption","option","onMouseEnter","getOptionDisplay","subOption","getSubOptionDisplay","VideoOptionsButton","hide","RightControlsGroup","subtitlesOptions","qualityOptions","onSubtitleSizeChange","onSubtitlesChange","onAdjustSubtitleTimeChange","onVideoQualityChange","isFullScreen","onFullScreenStateChanged","videoInFullscreen","setVideoInFullscreen","changeFullScreenState","fullscreen","AdjustSubtitleTimeOption","menuRef","type","step","onChange","valueAsNumber","Controls","videoSubtitlesOptions","videoQualitiesOptions","pixelsToAdd","newUrlSource","VideoPlayer","onWatchedTimeUpdate","videoTime","videoRef","videoPlayerContainerRef","watchedTimeUpdateTriggeredRef","setIsFullScreen","setCurrentTime","errorMessage","setErrorMessage","checkDownloadStateRef","videoDownloadState","setVideoDownloadState","videoSource","setVideoSource","videoIsLoading","setVideoIsLoading","setVideoIsPlaying","subtitlesUrl","setSubtitlesUrl","subtitlesSize","setSubtitlesSize","setSubtitlesAdjustTime","showVideoControls","setShowVideoControls","lastTimeMouseMovedRef","checkMovieDownloadState","getDownloadState","decodeURIComponent","error","message","changeVideoSource","autoplay","paused","load","changeVideoTime","displayControls","Date","now","waitingTime","playVideo","play","pauseVideo","pause","videoErrorHandler","attributes","onVideoReady","onVideoPaused","onVideoWaiting","onTimeUpdated","round","onFullScreenChange","fullscreenElement","videoQuality","volume","changeVideoVolume","fullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","VideoPlayerWindow","sources","goToTime","setSubtitlesOptions","setVideoQualitiesOptions","resumeMessageVisible","setResumeMessageVisible","setVideoTime","source","qualities","filter","o","startsWith","quality","buildStreamUrl","downloadUrl","buildVideoQualitiesOptions","newSubtitlesOptions","sub","subtitlesOption","language","subtitlesSourceUrls","sourceUrl","getSubtitlesApiUrl","buildSubtitlesOptions","ResumeMessage","resumeTime","onNoClick","onYesClick","VideoPlayerContainer","totalMinutes","TrailerButton","marginLeft","Title","CopyButton","PlayWithVLCButton","videoUrl","showModal","setShowModal","ModalForVlc","container","background","ModalContent","launchPlay","setIsDesktopApp","inputLinkUrlRef","playWithVlc","checkState","checkVideoDownloadState","handleCloseClick","centerStyle","vertical","flexDirection","outline","textOverflow","readOnly","select","execCommand","window","getSelection","removeAllRanges","AddBookmarkButton","BookmarkButton","insideIcon","RemoveBookmarkButton","PlayButton","MediasListLite","alignLeft","listRef","hideBackArrow","setHideBackArrow","hideForwardArrow","setHideForwardArrow","onscroll","showHideNavArrows","isElementVisible","boundings","elemBoundings","getVisibleRange","indexes","listBoundings","children","max","min","visibleRange","goToIndex","minIndex","count","behavior","navToLeft","maxIndex","navToRight","MediasListLiteWithTitle","listTitle","MediaFullPresentation","setMediaDetails","mediaProgression","setMediaProgression","versionsSources","voSourcesSearching","setVoSourcesSearching","vfSourcesSearching","setVfSourcesSearching","selectedVersionSources","setSelectedVersionSources","selectedVersionSourceLink","setSelectedVersionSourceLink","mediaSubtitlesSources","setMediaSubtitlesSources","loadingSubtitles","setLoadingSubtitles","showMediaPlayer","setShowMediaPlayer","showMediaTrailer","setShowMediaTrailer","addBookmarkButtonVisible","setAddBookmarkButtonVisible","recommandedMedias","setRecommandedMedias","navHistory","selectedEpisode","loadPage","imdbId","getAvailableSubtitles","clearVersionSources","searchVfSources","searchVoSources","getElementsByClassName","changeSelectedSource","getMediaDetails","details","isMediaBookmarked","getMediaProgression","getRecommandedMedias","setVersionSources","versionLabel","setFirst","newVersionSources","unshift","mediaTitle","mediaYear","searchVFSources","searchVOSources","getWatchedMedia","remainingTime","availableSubtitles","saveWacthedMedia","lastMediaId","pop","onBackClick","backgroundImageUrl","logoImageUrl","MediaProgression","addBookmarkedMedia","deleteBookmarkedMedia","EpisodeSelector","seasonsCount","AvailableSubtitles","availableSubtitlesSources","AvailableVersions","availableVersionsSources","onVersionSelected","versionSources","QualitySelector","onQualityChanged","director","cast","synopsis","onRecommandedMediaClick","join","setSelectedIndex","nbSameQualities","q","modalVisible","setModalVisible","selectedEpisodeNumber","setSelectedEpisodeNumber","handleEpisodeSelected","MediaPicturesPresentation","MediasOfToday","mediaIndexVisible","setMediaIndexVisible","carouselPlay","setCarouselPlay","changeMedia","clearTimeout","MediaPicturesCarousel","nbMedias","onNavElementClick","navElements","CacheService","cacheCollection","setCache","getCache","c","clearCache","HomePage","onReady","mediaListref","cacheIdRef","mediaLists","setMediaLists","todayTrendingTitle","addMedias","insertAtBeginning","newArray","loadContent","appMode","buildCacheId","getMediasOfToday","getPopularMedias","toLocaleLowerCase","getPopularNetflixMedias","getPopularDisneyPlusMedias","getPopularAmazonPrimeMedias","list","mediasList","MediaIntermediatePresentation","MediasIntermediatePresentationList","centerToMedia","loadingProgressVisible","findIndex","m","watchedMediaLastClicked","WatchedMediasPage","centerToLastClickedMedia","loadingVisible","setLoadingVisible","getWatchedMedias","mediaLabel","toLowerCase","lastClickedMedia","BookmarkedMediasPage","mediasBookmarks","setMediasBookmarks","getBookmarkedMedias","bookmarkedMedias","TextInput","placeHolder","onTextChanged","large","setText","TextField","placeholder","cacheResearch","searchValue","save","clean","ResearchPage","setSearchValue","searchValueRef","useReducer","state","mediasLength","searchResultLabel","searchResultLabelDispatch","searchMedias","OpenButton","TorrentLinkPage","torrentLink","setTorrentLink","torrentLinkRef","openingTorrentLink","setOpeningTorrentLink","openingHistory","setOpeningHistory","torrentHistory","setTorrentHistory","torrentFiles","setTorrentFiles","selectedFile","setSelectedFile","loadingMessage","setLoadingMessage","showMoviePlayer","setShowMoviePlayer","movieSources","setMovieSources","getTorrentHistory","files","changeTorrentLink","torrentFilesAreLoadingOrLoaded","getTorrentFiles","link","TorrentHistory","TorrentFilesList","onPlayFileClick","file","FilesList","contentType","onFileClick","selectedFileIndex","setSelectedFileIndex","textStyle","selectedTextStyle","titleStyle","getComponent","FileFromTorrent","isSelected","TorrentLink","onMouseHover","enter","playButtons","fullDateTime","today","yesterday","setDate","getDate","date","day","toDateString","toLocaleString","month","toLocaleTimeString","navigator","hour","minute","hour12","formateDate","lastOpenedDateTime","Router","components","activeComponentId","activeComponent","setActiveComponent","component","render","App","selectedGenre","setSelectedGenre","loadFullListGenrefromCache","setLoadFullListGenrefromCache","loadResearchfromCache","setLoadResearchfromCache","centerToLastClickedBookmark","setCenterToLastClickedBookmark","centerToLastClickedWatchedMedia","setCenterToLastClickedWatchedMedia","splashscreenVisible","setSplashscreenVisible","homePageFailed","setHomePageFailed","modalListGenresVisible","setModalListGenresVisible","setMediaId","showComponent","componentId","setRouterPreviousComponentId","routerActiveComponentId","setRouterActiveComponentId","showMediaFullPresentation","routerIds","mediaPresentationPage","onMediaFullPresentationClose","routerPreviousComponentId","homePage","mediasListGenrePage","watchedMediasListPage","bookmarkedMediasListPage","researchPage","torrentLinkPage","router","MediaListGenrePage","MediaPresentationPage","showMediasFullListofGenre","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.1dcab831.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARQAAAAlCAMAAAC0/+b3AAACdlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qNy/4AAAA0XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFxgaGxwdHh8gIiMkJSYnKCkqKywtLzAxMzQ3ODk7PT9AQUJDRUZHSElLTE1OT1JUVVZXWFlaW1xdXl9gYWJjZGVmaGlqa2xvcHFydHV2eHl6fH1+f4CCg4SGh4iKi42Oj5OUlZeYmZucnZ+hoqOkpaanqKmqq6ytrq+xsrO1uLm6u72+v8HCw8TFx8jJysvMzc7P0NHT1NbZ2tzd3uDh4uPk5ebn6Orr7O3u7/Dx8vP09fb3+Pn6+/z9/jaJQ6QAAAABYktHRNF50f8KAAAE2ElEQVRo3u2a6WNMVxTAz0xEQhASYxe7WCKaVBCEStrQVitVVbWFLqqIXWOX2lpp7TShpUVXiSpKS1AqsiCduf9RM/ecO+++ee+Nl8w1uR96vrx3z7nb+82ce8599wH8LzaSu4PLh/bWRWjNpOLGHY6yUWo1vELIif1ri4Y6D+6yP4AtXJfr/rEyyrlk2JjexQG2drZYVqIFYAlDmWbX9Yt+brvUjsq3maPclpplmU23SrMdpu6yP4BGrlviHkoe9pJnYxr0CG27ww1vo77egPKHFRwkXOYmfzZEBaVZfnrFow0UmEND5JvVA2pRvdCAwkqtrVejZRtEDYWxs0O1gQLlaKzxycq4c6g96ZGg+C3/8VFPcXpdVUBhdbO1gdLtBloPy8qPUHevF0hQWHV7c9O4C6h/DZRAYYFPdIECObhWsiJDNeYJqgrBBIWFTXopar+WVNMLHWW6VC0pk2Ts1DdLzv8bGqAkfHIu+1MOBdai+Z/+QpFYjZq9EAblcbpp3anjysZB0Qb9lFUPxQhzW9uHaijxF9F+xkuKTyncJIdDYee8RjNPBeo+VpALpR6iARrTNYECgykuF1O2FsB1dQJYoLAFlrh1ub2KDNFTQgOc9mgCRSQl+DN1u4mlTWAD5WEf0abn37g45mASFzWWzTTCFF2gwJeUQcU33x/A+6pEM5Tv8XIsLJSX8cI7JVFD8Z7CDiu0gZJyM7T6v4p3T0aDGcrYGrzOQO1LFLR5epNWGz0UGIFRMJCmCxQYh2GxKas3egX7AMKgpBVSlpcSVCb/haW3+I98himAAl9gl+9rAwXWYZ0rlXj91muBIhyGb5N2UorCl8VipgRKPmXR+kBpd15eTx9JuUcIiu8O/r+b9+fjMUDdD2a8MKzBgNJ/gIO4iFFJj3mntXL8cd3fc4ECQ+okKHPABgqQA/3escMVvHuD47wgpaKOaflIF/OkfKm3mzR/ZEygwFxjRNM+yIAiHGjDerwe4fYVTBWUY1g1SyMo8FVoq+VzgEIO1NTEL3d78H3SU2VQdmHVSTpBSSUHCpjfsUlQhANJ28W4KqYMyh6sOlknKPNpvO3gCEU4UFA+54pOTB0USt+yNYIyvB6rXe0cAQo5UNDHuttBOVjhIG5Ssmp5JBlK5bP7ez5QEn5hlL9BBCiGAxWAHZRopCfG+QavBUpiG+UpsIkedjVEhCIcaA8oh1KEXX0D2kCZjD8T+yG4J4TX5zlCQQf6s6t6KN9hVyu0geK7hXUahvFErrZusBMUKAiWpoJyKLTFDAzUBspRcp5F/HXkz4z9GO8EJehAO0E5lOTf7F4dtCWU94jJKb7v2GZ6TAuU7jXXuyiH4j1OU8jVBUo6ReMHfY0A489xggIFE0A1lCR6zWU6GmhTKAm/0oxm8uI+LFzr4gRFFjVQMi7RDOqH6AJFvB7dR+5Bi+5nMYLifeFgQGQ/RaAJlCk0pRsizOYF5DePLYIS4fBK3tKkCuWsxWvK7xnJuyVJaiGUMuuwL7cKio/2F/6JIVUpau73aTGUCMecVVIrh2NT6xFSC6HYSGNroHjEsr/Z0HXALyxYpTeWUB4Ugi5QFojTc3nkTPycgC2LIZTj/UAXKCMa6EhjjEm9nA6PR8cKSqX9l1ltAiVBxMKwT9riztL/5z/xk1pSPhmQ0AAAAABJRU5ErkJggg==\"","const AppMode = {\r\n    onAppModeChanged(callback){\r\n        const eventName = 'appModeChanged';\r\n        if(!this.modeChangedEvent)\r\n            this.modeChangedEvent = new Event(eventName);\r\n        document.addEventListener(eventName, (e) => { \r\n            if(callback)\r\n                callback() \r\n        }, false);\r\n    },\r\n    modeChangedEvent: null,\r\n    modes: [\r\n        {\r\n            label: 'Films',\r\n            urlKey: 'movies',\r\n            isActive: true\r\n        },\r\n        {\r\n            label: 'Series',\r\n            urlKey: 'series',\r\n            isActive: false\r\n        }\r\n    ],\r\n    getActiveMode(){\r\n        return this.modes.find(mode => mode.isActive);\r\n    },\r\n    switchActiveMode(){\r\n        this.modes.forEach(mode => {\r\n            mode.isActive = !mode.isActive;\r\n        });\r\n        if(this.modeChangedEvent)\r\n            document.dispatchEvent(this.modeChangedEvent);\r\n    }\r\n}\r\n\r\nexport default AppMode;","import \"../../style/nav-bar.css\";\r\nimport logo from '../../assets/logo.png';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from '../../services/appMode';\r\n\r\nfunction NavBar({ onSearchClick, onHomeClick, onGenreMenuClick, onWatchedMediasClick, onBookmarkedMediasClick, onTorrentLinkClick, onAppModeSwitch }) {\r\n\r\n    const [modes, setModes] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        setModes(AppMode.modes);\r\n    },[]);\r\n\r\n    const switchAppMode = () => {\r\n        AppMode.switchActiveMode();\r\n        const updatedModes = [...AppMode.modes];\r\n        setModes(updatedModes);\r\n        onAppModeSwitch(AppMode.getActiveMode());\r\n    }\r\n\r\n    const navBarIconStyle = {\r\n        color: 'white',\r\n        width: '30px',\r\n        height: '30px'\r\n    }\r\n\r\n    return (\r\n        <div className=\"nav-bar-container\">\r\n            <div className=\"nav-bar-left\">\r\n                {modes.map(mode => <div key={mode.label} className={\"mode \" + (mode.isActive ? 'active' : '')} onClick={()=> {if(!mode.isActive)switchAppMode()}}>{mode.label}</div>)}\r\n            </div>\r\n            <img className=\"nav-bar-logo\" alt=\"\" src={logo} />\r\n            <div className=\"nav-bar-right\">\r\n                <div className=\"nav-bar-btn\" onClick={() => onHomeClick()}>\r\n                    <HomeIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onWatchedMediasClick()}>\r\n                    <VisibilityIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onBookmarkedMediasClick()}>\r\n                    <BookmarkIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onGenreMenuClick()}>\r\n                    <ViewModuleIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onSearchClick()}>\r\n                    <SearchIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onTorrentLinkClick()}>\r\n                    <LinkIcon style={navBarIconStyle} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default NavBar;","function fadeTransition(visible, speedTransition, zIndex){\r\n    var speed = speedTransition ? speedTransition + 's' : '0.5s';\r\n\r\n    const transitionStyle = {\r\n            visibility: visible ? 'visible' : 'hidden',\r\n            opacity: visible ? '1' : '0',\r\n            transition: \"all \" + speed\r\n    }\r\n\r\n    if(zIndex)\r\n        transitionStyle.zIndex = visible ? zIndex : '-1';\r\n    \r\n\r\n    return transitionStyle;\r\n}\r\n\r\nexport default fadeTransition;","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useEffect, useState } from 'react';\r\nimport fadeTransition from \"../../services/customStyles.js\";\r\n\r\nfunction CircularProgressBar({ position, color, size, visible, text }) {\r\n\r\n    const [positionStyle, setpositionStyle] = useState({});\r\n    const [displayedText, setDisplayedText] = useState();\r\n\r\n    const textStyle = {\r\n        color: 'white',\r\n        fontSize: '20px',\r\n        fontWeigth: 'bold'\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (position === 'center') {\r\n            setpositionStyle({\r\n                position: 'fixed',\r\n                top: '50%',\r\n                left: '50%',\r\n                transform: 'translate(-50%, -50%)',\r\n                textAlign: 'center'\r\n            })\r\n        }\r\n    }, [position]);\r\n\r\n    useEffect(()=>{\r\n        setDisplayedText(text);\r\n    },[text]);\r\n\r\n    return (\r\n        <div style={fadeTransition(visible)}>\r\n            <div style={positionStyle}>\r\n                <div style={textStyle}>{displayedText}</div>\r\n                <CircularProgress style={{ color: color, width: size, height: 'auto' }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CircularProgressBar;","\r\nimport \"../style/splashscreen.css\";\r\nimport logo from '../assets/logo.png';\r\nimport CircularProgressBar from \"./common/CircularProgressBar\";\r\n\r\nfunction SplashScreen({visible, showErrorMessage}) {\r\n    \r\n    return (\r\n        <div className={\"splash-screen-container\" + (visible ? '' : ' hidden')}>\r\n           <img alt=\"\" src={logo} />\r\n           <CircularProgressBar color='white' size='40px' visible={!showErrorMessage}/>\r\n           <div className=\"error-message\" style={{display: showErrorMessage ? '' : 'none'}}>\r\n                The application failed to load, try to relaunch it\r\n           </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SplashScreen;","import \"../../style/modal-window.css\";\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../services/customStyles.js\";\r\n\r\nfunction ModalWindow({ visible, content, onCloseClick }) {\r\n    return (\r\n        <div style={fadeTransition(visible)} className={\"modal-window-container\" + (visible ? \" visible\": \"\")}>\r\n            <div className=\"modal-window-content\">\r\n                <div className=\"modal-window-close-btn\" style={{ display: onCloseClick ? '' : \"none\" }} onClick={() => onCloseClick()}>\r\n                    <ClearIcon className=\"close-cross\" />\r\n                </div>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ModalWindow;","class BaseApiService {\r\n    constructor() {\r\n        this._apiBaseUrl = 'http://localhost:5000/';\r\n      }\r\n    \r\n    buildUrl(relativePath){\r\n        return this._apiBaseUrl + relativePath;\r\n    }\r\n\r\n    getRequest(url, parameters, deserializeResult, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    var result = deserializeResult && this.response ? JSON.parse(this.response) : this.response;\r\n                    if (onSuccess)\r\n                        onSuccess(result);\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n\r\n        if (parameters && parameters.length > 0) {\r\n            url += '?';\r\n            for (let i = 0; i < parameters.length; i++) {\r\n                const parameter = parameters[i];\r\n                url += parameter.name + '=' + parameter.value;\r\n                if (i !== parameters.length - 1)\r\n                    url += '&'\r\n            }\r\n        }\r\n\r\n        xhttp.open(\"GET\", url, true);\r\n        xhttp.send();\r\n    }\r\n\r\n    postRequest(url, parameters, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    if (onSuccess)\r\n                        onSuccess();\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n        xhttp.open(\"POST\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n        xhttp.send(parameters);\r\n    }\r\n\r\n    putRequest(url, obj, onSuccess){\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"PUT\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4 && this.status === 200 && Boolean(onSuccess))\r\n                onSuccess();\r\n        }\r\n    }\r\n\r\n    deleteRequest(url, obj, onSuccess) {\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"DELETE\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4)\r\n                if (this.status === 200)\r\n                    onSuccess();\r\n        }\r\n    }\r\n  }\r\n\r\nexport default BaseApiService;","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SearchMediaApiService extends BaseApiService {\r\n    buildSearchUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/' + url);\r\n    }\r\n\r\n    getMediaGenres(onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genres');\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMediasByGenre(genreId, onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genre/' + genreId);\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasOfToday(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('mediasoftoday')\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByGenre(genreId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('genre/' + genreId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaDetails(id, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('details/' + id);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    searchMedias(text, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('search');\r\n        var parameters = [\r\n            {\r\n                name: 't',\r\n                value: text\r\n            }\r\n        ]\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularNetflixMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('netflix');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularDisneyPlusMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('disneyplus');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAmazonPrimeMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('amazonprime');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('popular');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getRecommandedMedias(mediaId, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('recommandations');\r\n        var parameters = [\r\n            {\r\n                name: 'id',\r\n                value: mediaId ? mediaId : ''\r\n            }\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getEpisodes(serieId, seasonNumber, onSuccess, onFail){\r\n        var url = this.buildSearchUrl('episodes/'+ serieId + '/' + seasonNumber);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n}\r\n\r\nexport default SearchMediaApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass BookmarkApiService extends BaseApiService {\r\n    buildBookmarkUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/bookmarks/' + (url ? url : ''));\r\n    }\r\n\r\n    getBookmarkedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildBookmarkUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    addBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.putRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    deleteBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.deleteRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    isMediaBookmarked(mediaId, onSuccess, onFail) {\r\n        var parameters = [\r\n            {\r\n                name: 'id',\r\n                value: mediaId\r\n            }\r\n        ];\r\n        this.getRequest(this.buildBookmarkUrl('exists'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default BookmarkApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass WatchedMediaApiService extends BaseApiService {\r\n    buildWatchedMediaUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/watchedmedia/' + (url ? url : ''));\r\n    }\r\n\r\n    getWatchedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedMedia(mediaId, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        const parameters = [\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ]\r\n\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedEpisodes(mediaId, seasonNumber, onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId + '/' + seasonNumber), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    saveWacthedMedia(mediaDetails, currentTime, duration, seasonNumber, episodeNumber) {\r\n        const watchedMedia = {... mediaDetails};\r\n        watchedMedia.currentTime = currentTime ? currentTime : 0;\r\n        watchedMedia.totalDuration = duration ? duration : 0;\r\n\r\n        if(AppMode.getActiveMode().urlKey === 'series'){\r\n            watchedMedia.seasonNumber = seasonNumber;\r\n            watchedMedia.episodeNumber = episodeNumber;\r\n        }\r\n\r\n        this.putRequest(this.buildWatchedMediaUrl(), watchedMedia);\r\n    }\r\n}\r\n\r\nexport default WatchedMediaApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass TorrentApiService extends BaseApiService {\r\n    buildTorrentUrl(url){\r\n        return this.buildUrl('torrent/' + (url ? url : ''));\r\n    }\r\n\r\n    buildStreamUrl(url, fileName, seasonNumber, episodeNumber){\r\n        if(fileName)\r\n            return this.buildTorrentUrl('stream/file?url=' + url + '&fileName=' + fileName);\r\n        else if(AppMode.getActiveMode().urlKey === \"series\")\r\n            return this.buildTorrentUrl('stream/series?url=' + url + '&seasonNumber=' + seasonNumber + '&episodeNumber=' + episodeNumber);\r\n        else\r\n            return this.buildTorrentUrl('stream/movies?url=' + url);\r\n    }\r\n\r\n    searchVFSources(mediaId, title, year, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildTorrentUrl(AppMode.getActiveMode().urlKey + '/vf');\r\n      \r\n        var parameters = [\r\n            {\r\n                name: 'mediaId',\r\n                value: mediaId\r\n            },\r\n            {\r\n                name: 'title',\r\n                value: title\r\n            },\r\n            {\r\n                name: 'year',\r\n                value: year\r\n            },\r\n            {\r\n                name: 'season',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episode',\r\n                value: episodeNumber\r\n            },\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    searchVOSources(title, year, imdbid, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildTorrentUrl(AppMode.getActiveMode().urlKey + '/vo');\r\n        var parameters = [\r\n            {\r\n                name: 'title',\r\n                value: title\r\n            },\r\n            {\r\n                name: 'year',\r\n                value: year\r\n            },\r\n            {\r\n                name: 'season',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episode',\r\n                value: episodeNumber\r\n            },\r\n            {\r\n                name: 'imdbid',\r\n                value: imdbid\r\n            }\r\n        ];\r\n\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getDownloadState(streamUrl, onSuccess, onFail) {\r\n        const streamUrlParams = new URLSearchParams(streamUrl.replace(this.buildTorrentUrl('stream/'+ AppMode.getActiveMode().urlKey)+'?',''));\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'torrentUrl',\r\n                value: streamUrlParams.get('url')\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('streamdownloadstate'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentFiles(torrentUrl, onSuccess, onFail){\r\n        var parameters = [\r\n            {\r\n                name: 'torrentUrl',\r\n                value: torrentUrl\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('files'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentHistory(onSuccess, onFail) {\r\n        this.getRequest(this.buildTorrentUrl('history'), null, true, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default TorrentApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SubtitlesApiService extends BaseApiService {\r\n    buildSubtitlesUrl(url){\r\n        return this.buildUrl('subtitles/' + (url ? url : ''));\r\n    }\r\n\r\n    getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildSubtitlesUrl(AppMode.getActiveMode().urlKey);\r\n        var parameters = [\r\n            {\r\n                name: 'imdbCode',\r\n                value: imdbCode\r\n            },\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n    \r\n    getSubtitlesApiUrl(subtitlesSourceUrl) {\r\n        return this.buildSubtitlesUrl(\"?sourceUrl=\" + subtitlesSourceUrl);\r\n    }\r\n}\r\n\r\nexport default SubtitlesApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\n\r\nclass AppInfoApiService extends BaseApiService {\r\n    buildAppInfoUrl(url){\r\n        return this.buildUrl('application/' + (url ? url : ''));\r\n    }\r\n\r\n    isDesktopApplication(onSuccess, onFail) {\r\n        if (this.isDesktopApp) onSuccess(this.isDesktopApp);\r\n        else {\r\n            const self = this;\r\n            this.getRequest(this.buildAppInfoUrl('platform'), null, true, (response) => {\r\n                self.isDesktopApp = response.isDesktopApplication;\r\n                onSuccess(response.isDesktopApplication);\r\n            }, onFail);\r\n        }\r\n    }\r\n\r\n    playWithVlc(streamUrl, onSuccess, onFail){\r\n        var parameters = [\r\n            {\r\n                name: 'data',\r\n                value: btoa(streamUrl)\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildAppInfoUrl('startvlc'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default AppInfoApiService;\r\n  ","import SearchMediaApiService from './api/searchMediaApiService';\r\nimport BookmarkApiService from './api/bookmarkApiService';\r\nimport WatchedMediaApiService from './api/watchedMediaApiService';\r\nimport TorrentApiService from './api/torrentApiService';\r\nimport SubtitlesApiService from './api/subtitlesApiService';\r\nimport AppInfoApiService from './api/appInfoApiService';\r\n\r\nconst AppServices = {\r\n    init(){\r\n        this.searchMediaService = new SearchMediaApiService();\r\n        this.bookmarkApiService = new BookmarkApiService();\r\n        this.watchedMediaApiService = new WatchedMediaApiService();\r\n        this.torrentApiService = new TorrentApiService();\r\n        this.subtitlesApiService = new SubtitlesApiService();\r\n        this.appInfoApiService = new AppInfoApiService();\r\n    }\r\n}\r\n\r\nexport default AppServices;","import \"../../style/list-genres-view.css\";\r\nimport ModalWindow from \"./ModalWindow\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport AppMode from \"../../services/appMode\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction ModalListGenre({ visible, onCloseClick, onGenreClick }) {\r\n    const [loading, setLoading] = useState(true);\r\n    const [listGenres, setListGenres] = useState([]);\r\n\r\n    const loadGenres = () => {\r\n        setListGenres([]);\r\n        AppServices.searchMediaService.getMediaGenres(\r\n            (genres) => {\r\n              if (genres && genres.length > 0) {\r\n                setListGenres(genres);\r\n              }\r\n            }\r\n          );\r\n    }\r\n    useEffect(() => {\r\n        loadGenres();\r\n        AppMode.onAppModeChanged(()=>{\r\n            loadGenres();\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setLoading(!listGenres || listGenres.length === 0);\r\n    }, [listGenres]);\r\n\r\n    const listGenresView = () => {\r\n        return (\r\n            <div className=\"list-genres-view-container\">\r\n                <CircularProgressBar color={'white'} size={'60px'} position={'center'} visible={loading} />\r\n                <div className=\"list-genres\">\r\n                    {listGenres.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onGenreClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={listGenresView()} onCloseClick={() => onCloseClick()} />\r\n    )\r\n}\r\n\r\nexport default ModalListGenre;","function Rating({ rating, size }) {\r\n\r\n    const style = {\r\n        color: \"white\",\r\n        fontSize: size === \"small\" ? \"15px\" : \"20px\",\r\n        fontWeight: \"bold\",\r\n        margin: \"0 auto\",\r\n        backgroundColor: \"#52525263\",\r\n        borderRadius: \"50%\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: size === \"small\" ? \"35px\" : \"50px\",\r\n        width: size === \"small\" ? \"35px\" : \"50px\",\r\n    };\r\n\r\n    return (\r\n        <div style={style}>{rating}</div>\r\n    );\r\n}\r\n\r\nexport default Rating;","\r\nimport \"../../../style/media-lite-presentation.css\";\r\n\r\nimport Rating from \"../../common/Rating\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport fadeTransition from \"../../../services/customStyles.js\";\r\n\r\nfunction MediaLitePresentation({ media, onMediaClick, hoverEffect }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setDataLoaded(media?.coverImageUrl);\r\n    }, [media]);\r\n\r\n    if(!Boolean(media?.coverImageUrl))\r\n        return null;\r\n\r\n    const truncate = (text, maxLength) => {\r\n        if (text && text.length > maxLength)\r\n            return text.substring(0, maxLength) + '...';\r\n        else return text;\r\n    }\r\n\r\n    const handleClick = () => {\r\n        setTimeout(()=>{\r\n            if(onMediaClick)\r\n                onMediaClick(media?.id);\r\n        }, 150);   \r\n    }\r\n\r\n    const formatMediaRating = (rating) => {\r\n        return rating ? rating.toString().replace(',', '.') : '';\r\n    };\r\n\r\n    return (\r\n        <div style={fadeTransition(dataLoaded)}>\r\n            <div className={\"media-lite-presentation \" + (hoverEffect ? \"hover-effect\": \"\")} onClick={() => handleClick()}>\r\n                <div className={\"media-lite-presentation-img\"}  style={{ backgroundImage: 'url(' + media.coverImageUrl + ')' }}>                \r\n                    <div className=\"rating\">\r\n                        <Rating rating={formatMediaRating(media.rating)} size=\"small\"/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"infos\">\r\n                    <div className=\"title\">{truncate(media.title, 25)}</div>\r\n                    <div className=\"year\">{media.year}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediaLitePresentation;","import \"../style/media-lite-presentation.css\";\r\nimport \"../style/medias-list.css\";\r\nimport \"../style/button.css\";\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\n\r\nimport MediaLitePresentation from \"../components/media/presentation/MediaLitePresentation\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst cache = {\r\n    update(genreId, medias, pageIndex, elemId) {\r\n        this.genreId = genreId;\r\n        this.medias = medias;\r\n        this.pageIndex = pageIndex;\r\n        this.mediaElementId = elemId;\r\n    },\r\n    get(genreId) {\r\n        return this.genreId === genreId ?\r\n            {\r\n                medias: this.medias,\r\n                pageIndex: this.pageIndex,\r\n                mediaElementId: this.mediaElementId\r\n            }\r\n            : null;\r\n    },\r\n    clear() {\r\n        this.genreId = '';\r\n        this.medias = null;\r\n    },\r\n    genreId: '',\r\n    medias: null,\r\n    pageIndex: 0,\r\n    mediaElementId: ''\r\n}\r\n\r\nfunction MediasListGenrePage({ genre, loadFromCache, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [pageIndex, setPageIndex] = useState(0);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n\r\n    const addIconStyle = {\r\n        width: '60px',\r\n        height: '60px',\r\n        color: 'white',\r\n        margin: 'auto'\r\n    };\r\n\r\n    const performSearch = () => {\r\n        setSearchInProgress(true);\r\n        AppServices.searchMediaService.getMediasByGenre(genre.id, pageIndex,\r\n            (mediasOfGenre) => {\r\n                setSearchInProgress(false);\r\n                if (mediasOfGenre && mediasOfGenre.length > 0) {\r\n                    if (pageIndex === 1) setMedias(mediasOfGenre);\r\n                    else setMedias(medias.concat(mediasOfGenre));\r\n                }\r\n            },\r\n            () => setSearchInProgress(false));\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const cacheMedias = cache.get(genre.id);\r\n        if (loadFromCache && cacheMedias) \r\n            setPageIndex(cacheMedias.pageIndex);\r\n        else {           \r\n            setPageIndex(1); \r\n            if(pageIndex === 1) performSearch(); \r\n        }\r\n    }, [genre.id]);\r\n\r\n    useEffect(() => {\r\n        if (pageIndex > 0) {       \r\n            const cacheMedias = cache.get(genre.id);\r\n            if (cacheMedias) setMedias(cacheMedias.medias);\r\n            else performSearch();\r\n        }\r\n    }, [pageIndex]);\r\n\r\n    useEffect(() => {\r\n        if (medias && medias.length > 0) {\r\n            if (loadFromCache) {\r\n                const cacheMedias = cache.get(genre.id);\r\n                if (cacheMedias) {\r\n                    scrollToMedia(cacheMedias.mediaElementId);\r\n                    cache.clear();\r\n                }\r\n            }\r\n            else if(pageIndex === 1)  scrollToMedia(\"medialite0\");\r\n        }\r\n    }, [medias]);\r\n\r\n    const scrollToMedia = (elemId) => {\r\n        var elem = document.getElementById(elemId);\r\n        if (elem) {\r\n            elem.scrollIntoView({\r\n                block: \"nearest\",\r\n                inline: \"nearest\"\r\n            });\r\n        }\r\n    }\r\n\r\n    const handleMediaClick = (mediaId, elementId) => {\r\n        cache.update(genre.id, medias, pageIndex, elementId);\r\n        onMediaClick(mediaId);\r\n    }\r\n\r\n    return (\r\n        <div className=\"medias-list-by-genre-container\">\r\n            <div className=\"medias-list-by-genre-header\">\r\n                <div className=\"medias-list-genre\">{genre.name}</div>\r\n                <CircularProgressBar size={'30px'} color={'white'} visible={searchInProgress} />\r\n            </div>\r\n            <div className=\"medias-list-container full\">\r\n                <div className=\"medias-list wrap-content\">\r\n                    {medias.map((media, index) =>\r\n                    (<div id={\"medialite\" + index} key={index}>\r\n                        <MediaLitePresentation media={media} hoverEffect={true} onMediaClick={(mediaId) => handleMediaClick(mediaId, \"medialite\" + index)} />\r\n                    </div>))}\r\n                    <div className=\"medias-list-more\">\r\n                        <div className=\"round-btn grey\"\r\n                            style={{ visibility: !searchInProgress ? 'visible' : 'hidden' }}\r\n                            onClick={() => { if (!searchInProgress) setPageIndex(pageIndex + 1) }}>\r\n                            <AddIcon style={addIconStyle} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","import ModalWindow from \"./ModalWindow\";\r\n\r\nfunction ModalMediaTrailer({visible, youtubeTrailerUrl, onCloseClick}){\r\n\r\n\r\n    const trailerStyle = {      \r\n            width: '800px',\r\n            height: '500px',\r\n            margin: 'auto 0',\r\n            backgroundColor: 'black',\r\n            border: 'none',\r\n            boxShadow: '1px 1px 14px 7px #101010c9'       \r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <iframe style={trailerStyle} src={visible ? youtubeTrailerUrl : ''}></iframe>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalMediaTrailer; ","function TitleAndContent({ title, content, justify }) {\r\n    let justifyContent;\r\n    if(justify === 'left')\r\n        justifyContent = 'flex-start';\r\n    else \r\n        justifyContent = 'center';\r\n\r\n    const containerStyle = {\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: justifyContent,\r\n        margin: '10px 0',\r\n    }\r\n\r\n    const titleStyle = {\r\n        color: 'white',\r\n        marginRight : '15px'\r\n    }\r\n\r\n    const contentStyle = {\r\n        color: \"#959595\",\r\n        display: \"flex\"\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={titleStyle}>{title}</div>\r\n            <div style={contentStyle}>{content}</div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default TitleAndContent;","function ProgressionBar({value, width}){\r\n\r\n    const containerStyle = {\r\n        width: width,\r\n        backgroundColor: '#423737',\r\n        height: '5px',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    const progressionStyle = {\r\n        width: value + '%',\r\n        backgroundColor: '#e91919',\r\n        height: '100%',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={progressionStyle}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProgressionBar;","\r\n\r\nfunction SecondaryInfo({text, center}){\r\n    const style = {\r\n        fontSize: \"18px\",\r\n        fontWeight: \"500\",\r\n        color: \"#959595\",\r\n        textAlign: center ? \"center\" : \"left\",\r\n        margin: '10px 0'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default SecondaryInfo;","function Paragraph({text, visible}){\r\n\r\n    if(visible === false)\r\n        return null;\r\n        \r\n    const style = {\r\n        fontSize: '17px',\r\n        fontWeight: '500',\r\n        color: 'white'\r\n    }\r\n\r\n    return(\r\n        <p style={style}>{text}</p>\r\n    )\r\n}\r\n\r\nexport default Paragraph;","import \"../../../style/button.css\";\r\nimport { useState } from 'react';\r\n\r\nfunction BaseButton({ color, content, centered, rounded, onClick }) {\r\n\r\n    const [showRippleEffect, setShowRippleEffect] = useState(false);\r\n\r\n    const handleClick = () => {\r\n        setShowRippleEffect(true)\r\n        setTimeout(() => {\r\n            setShowRippleEffect(false);\r\n            onClick();\r\n        }, 300);\r\n    };\r\n\r\n    const computeClass = () => {\r\n        let className = \"standard-button\";\r\n        if (color) className += \" \" + color;\r\n        if (centered) className += \" center\";\r\n        if(rounded) className += \" rounded\";\r\n        return className;\r\n    }\r\n\r\n    return (\r\n        <div className={computeClass()} onClick={() => handleClick()}>\r\n            <div className={\"ripple-effect \" + (showRippleEffect ? 'visible' : '')}></div>\r\n            {content}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BaseButton;","\r\nimport { useEffect } from 'react';\r\n// Hook\r\nfunction useOnClickOutside(ref, handler) {\r\n    useEffect(\r\n      () => {\r\n        const listener = event => {\r\n          if (!ref.current || ref.current.contains(event.target)) {\r\n            return;\r\n          }\r\n          handler(event);         \r\n        };\r\n  \r\n        document.addEventListener('mousedown', listener);\r\n        document.addEventListener('touchstart', listener);\r\n  \r\n        return () => {\r\n          document.removeEventListener('mousedown', listener);\r\n          document.removeEventListener('touchstart', listener);\r\n        };\r\n      },\r\n      [ref, handler]\r\n    );\r\n  }\r\n\r\n  export { useOnClickOutside };","import BaseButton from './buttons/BaseButton';\r\nimport ArrowDropDownOutlinedIcon  from '@material-ui/icons/ArrowDropDownOutlined';\r\nimport { useOnClickOutside } from '../../services/customHooks';\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction DropDown({values, width, onValueChanged, textAlignement}){\r\n\r\n    const [showList, setShowList] = useState(false);\r\n    const [selectedValue, setSelectedValue] = useState('');\r\n    const [dropDownValues, setDropDownValues] = useState([]);\r\n    const dropdownRef = useRef(null);\r\n\r\n    useEffect(()=>{\r\n        if(shouldUpdateDropDownValues(values)){\r\n            setDropDownValues(values);\r\n            setSelectedValue(values[0]);\r\n        }\r\n    },[values])\r\n\r\n    useOnClickOutside(dropdownRef, () => setShowList(false));\r\n\r\n    const shouldUpdateDropDownValues = (values) => {\r\n        if (dropDownValues.length !== values.length)\r\n            return true;\r\n\r\n        let nbDifferentValues = 0;\r\n        dropDownValues.forEach((v, i) => {\r\n            if(values[i] !== v) \r\n                nbDifferentValues += 1;\r\n        });\r\n\r\n        return nbDifferentValues > 0;\r\n    }\r\n\r\n    const containerStyle = {    \r\n        position: 'relative'\r\n    }\r\n\r\n    const listStyle = {\r\n        display: showList ? 'block' : 'none',\r\n        position: 'absolute',\r\n        bottom: '0',\r\n        left: '50%',\r\n        transform: 'translate(-50%, 100%)',\r\n        borderRadius: '5px',\r\n        boxShadow: 'rgb(0 0 0 / 91%) 0px 19px 20px 8px, rgb(0 0 0) 0px 15px 20px 0px',\r\n        backgroundColor: '#141414',\r\n        color: 'white',\r\n        fontSize: '16px',\r\n        fontWeight: '500',\r\n        maxHeight: '100px',\r\n        width: width,\r\n        overflowY: 'scroll',\r\n        zIndex: '5',\r\n        textAlign: textAlignement ? textAlignement : 'left' \r\n    }\r\n\r\n    const buttonContentStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: width,\r\n    }\r\n\r\n    const buttonContent = (\r\n    <div style={buttonContentStyle}>\r\n        <div>{selectedValue}</div>\r\n        <ArrowDropDownOutlinedIcon />\r\n    </div>)\r\n\r\n    const listElementStyle = {\r\n        padding: '5px',\r\n        cursor: 'pointer'\r\n    }\r\n\r\n    const onElementMouseHover = (element) =>{\r\n        element.style.backgroundColor = '#959595';\r\n    }\r\n\r\n    const onElementMouseOut = (element) =>{\r\n        element.style.backgroundColor = '';\r\n    }\r\n\r\n    const OnElementClick = (index) => {\r\n        setShowList(false);\r\n        setSelectedValue(values[index]);\r\n        onValueChanged(index);\r\n    }\r\n\r\n    return (\r\n        <div ref={dropdownRef} style={containerStyle}>\r\n            <BaseButton color=\"red\" content={buttonContent} onClick={() => setShowList(!showList)}/>\r\n            <div style={listStyle}>\r\n                {dropDownValues.map((v,i) => <div \r\n                    key={v} \r\n                    style={listElementStyle}\r\n                    onMouseOver={(e)=> onElementMouseHover(e.target)}\r\n                    onMouseOut={(e)=> onElementMouseOut(e.target)} \r\n                    onClick={()=> OnElementClick(i)}>\r\n                        {v}\r\n                </div>)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropDown;","import ModalWindow from \"./ModalWindow\";\r\nimport TitleAndContent from \"../common/TitleAndContent\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport ProgressionBar from \"../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../common/text/SecondaryInfo\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport DropDown from \"../common/DropDown\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport fadeTransition from \"../../services/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\n\r\nimport \"../../style/modal-episode-selector.css\";\r\n\r\nfunction ModalEpisodeSelector({visible, serieId, numberOfSeasons, onEpisodeSelected, onCloseClick}){\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1);\r\n    const [episodes, setEpisodes] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [noEpisodeMessageVisible, setNoEpisodeMessageVisible] = useState(false);\r\n    const episodeListRef = useRef(null);\r\n\r\n    const seasonNumberList = [];\r\n    for (let i = 1; i <= numberOfSeasons; i++) {\r\n        seasonNumberList.push(\"Season \" + i);\r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <div className=\"modal-episode-selector-container\">\r\n                <div className=\"season-selector-container\">\r\n                    <DropDown values={seasonNumberList}  width=\"120px\" textAlignement={\"center\"} onValueChanged={(selectedIndex) => setSelectedSeasonNumber(selectedIndex + 1)}/>\r\n                </div>\r\n                <div ref={episodeListRef} className=\"episode-list-container\">\r\n                    <div className=\"loading-container\">\r\n                        <CircularProgressBar color={\"white\"} size={\"50px\"} visible={isLoading}/>\r\n                        <Paragraph text={\"No episodes found\"} visible={noEpisodeMessageVisible}/>\r\n                    </div>\r\n                   <div style={fadeTransition(episodes && episodes.length > 0)}>\r\n                        {episodes.map(episode => \r\n                                <Episode \r\n                                    key={episode.episodeNumber} \r\n                                    episode={episode}\r\n                                    onClick={()=>onEpisodeSelected(selectedSeasonNumber, episode.episodeNumber)}/>)}\r\n                   </div>\r\n                    \r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    useEffect(()=>{\r\n        if(serieId){\r\n            setEpisodes([]);\r\n            setIsLoading(true);\r\n            setNoEpisodeMessageVisible(false)\r\n            AppServices.searchMediaService.getEpisodes(serieId, selectedSeasonNumber,\r\n                (episodes)=>{\r\n                    if(episodeListRef.current)\r\n                        episodeListRef.current.scrollTop = 0;\r\n\r\n                    setIsLoading(false);\r\n                    if(episodes && episodes.length > 0){\r\n                        loadEpisodesProgress(episodes, selectedSeasonNumber);\r\n                    }\r\n                    else \r\n                        setNoEpisodeMessageVisible(true)\r\n                },\r\n                ()=>{\r\n                    setIsLoading(false);\r\n                    setNoEpisodeMessageVisible(true)\r\n                }) \r\n        }\r\n    },[serieId, selectedSeasonNumber]);\r\n\r\n    const loadEpisodesProgress = (episodesOfSeason, seasonNumber) => {\r\n        AppServices.watchedMediaApiService.getWatchedEpisodes(serieId, seasonNumber,  \r\n            (watchedEpisodes) => {\r\n                const newTab = [...episodesOfSeason]\r\n                if(watchedEpisodes && watchedEpisodes.length > 0){\r\n                    watchedEpisodes.forEach(watchedEpisode => {\r\n                        const episode = newTab.find(ep => ep.episodeNumber === watchedEpisode.episodeNumber);\r\n                        if(episode)\r\n                            episode.progression = watchedEpisode.currentTime/watchedEpisode.totalDuration; \r\n                    }); \r\n                }\r\n                setEpisodes(newTab);\r\n            }, \r\n            () => {\r\n                setEpisodes(episodesOfSeason);\r\n            });\r\n    }\r\n        \r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalEpisodeSelector; \r\n\r\nfunction Episode({episode, onClick}){\r\n\r\n    const ToTimeFormat = (runTime) => {\r\n        const totalHours = runTime / 60;\r\n\r\n        const hours = Math.trunc(totalHours);\r\n        const minutes = Math.trunc((totalHours - hours) * 60);\r\n    \r\n        let timeFormat = '';\r\n        if (hours > 0)\r\n            timeFormat += hours + 'h ';\r\n    \r\n        if (minutes > 0)\r\n            timeFormat += minutes + 'min';\r\n    \r\n        return timeFormat;\r\n    }\r\n\r\n    return <div className=\"episode-container\" onClick={()=> onClick()}>\r\n                <div style={{margin: 'auto 0'}}>\r\n                    <img src={episode.imagePath}/>\r\n                    {episode.progression ? <ProgressionBar value={episode.progression * 100} width=\"98%\"/> : null }\r\n                </div>\r\n                \r\n                <div>\r\n                    <TitleAndContent title={episode.episodeNumber + '.' + episode.name} content={ToTimeFormat(episode.runTime)} justify=\"left\" />\r\n                    <SecondaryInfo text={episode.overview.substring(0, 300)}/>\r\n                </div>\r\n            </div>\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\nfunction VideoSubtitles({ videoCurrentTime, urlSource, size, subtitlesAdjustTime }) {\r\n    const [currentSubtitles, setCurrentSubtitles] = useState('');\r\n    const [subtitles, setSubtitles] = useState([]);\r\n    const [textItalic, setTextItalic] = useState(false);\r\n\r\n    const applySubtitles = (currentTime) => {\r\n        if (!subtitles || subtitles.length === 0)\r\n            return;\r\n        \r\n        var subtitle = subtitles.find(s =>\r\n            (s.startTime + subtitlesAdjustTime) <= currentTime && currentTime <= (s.endTime + subtitlesAdjustTime));\r\n\r\n        if (subtitle?.text) {\r\n            var text = subtitle.text;\r\n            setTextItalic(false);\r\n            if (text.includes('<i>') || text.includes('</i>')) {\r\n                setTextItalic(true);\r\n                text = text.replace('<i>', '').replace('</i>', '');\r\n            }\r\n            setCurrentSubtitles(text);\r\n        }\r\n        else setCurrentSubtitles('');\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (urlSource) {\r\n            var xhttp = new XMLHttpRequest();\r\n            xhttp.onreadystatechange = function () {\r\n                if (this.readyState == 4 && this.status == 200 && this.responseText) {\r\n                    setSubtitles(JSON.parse(this.response));\r\n                }\r\n            };\r\n            xhttp.open(\"GET\", urlSource, true);\r\n            xhttp.send();\r\n        }\r\n\r\n        return () => {\r\n            setSubtitles([]);\r\n            setCurrentSubtitles('');\r\n        }\r\n    }, [urlSource]);\r\n\r\n    useEffect(() => {\r\n        if(videoCurrentTime)\r\n            applySubtitles(videoCurrentTime);\r\n    }, [videoCurrentTime, subtitles, subtitlesAdjustTime]);\r\n\r\n    return (<div className=\"video-player-subtitles\"\r\n        style={{ fontSize: size + 'px', fontStyle: textItalic ? 'italic' : '' }}>\r\n        {currentSubtitles}\r\n    </div>);\r\n}\r\n\r\nexport default VideoSubtitles;","import { useEffect, useState } from 'react';\r\n\r\nfunction Slider({ value, width, height, progressColor, cursorColor, tooltip, onCursorMoved, onCursorEndMove, onMouseOverSlider }) {\r\n    const [cursorPosition, setCursorPosition] = useState(0);\r\n    const [showToolTip, setShowToolTip] = useState(false);\r\n\r\n    const positionToPercentage = (XPosition, railBoundings) => {\r\n        if (XPosition < railBoundings.left)\r\n            return 0;\r\n        else if (XPosition > railBoundings.right)\r\n            return 100;\r\n        else\r\n            return (XPosition - railBoundings.left) * 100 / (railBoundings.right - railBoundings.left);\r\n    }\r\n\r\n    const initiateCursorMove = () => {\r\n        document.addEventListener('mousemove', moveCursor);\r\n        document.addEventListener('mouseup', endMove);\r\n    }\r\n\r\n    const moveCursor = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorMoved) onCursorMoved(percentage);\r\n    }\r\n\r\n    const endMove = (event) => {\r\n        if (onCursorEndMove) {\r\n            var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n            onCursorEndMove(percentage);\r\n        }\r\n        document.removeEventListener('mouseup', endMove);\r\n        document.removeEventListener('mousemove', moveCursor);\r\n    }\r\n\r\n    const onSliderClick = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorEndMove) onCursorEndMove(percentage);\r\n    }\r\n\r\n    const onMouseMoveOverSlider = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        if (onMouseOverSlider) onMouseOverSlider(percentage);\r\n    }\r\n\r\n    const onMouseLeaveSlider = () => {\r\n        setShowToolTip(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setCursorPosition(value);\r\n    }, [value])\r\n\r\n    useEffect(() => {\r\n        if (tooltip) setShowToolTip(true);\r\n    }, [tooltip])\r\n\r\n    return (\r\n        <div className=\"video-player-slider-container\"\r\n            style={{ width: width, height: height }}\r\n            onClick={(event) => onSliderClick(event)}\r\n            onMouseMove={(event) => onMouseMoveOverSlider(event)}\r\n            onMouseLeave={() => onMouseLeaveSlider()}>\r\n            <div className=\"complete-part\" style={{ width: cursorPosition + \"%\", backgroundColor: progressColor }}></div>\r\n            <div className=\"remaining-part\" style={{ width: (100 - cursorPosition) + \"%\" }}></div>\r\n            <div className=\"cursor\" style={{ left: cursorPosition + '%', backgroundColor: cursorColor }} onMouseDown={() => initiateCursorMove()}></div>\r\n            <div className=\"tooltip\" style={{ left: tooltip?.position + '%', display: showToolTip ? '' : 'none' }}>{tooltip?.text}</div>\r\n        </div>)\r\n}\r\n\r\n\r\nexport default Slider;","\r\nimport VideoPlayerSlider from './Slider';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction TimeController({ videoDuration, videoCurrentTime, onTimeChanged }) {\r\n    const [videoCurrentTimeLabel, setVideoCurrentTimeLabel] = useState('00:00');\r\n    const [videoTotalTimeLabel, setVideoTotalTimeLabel] = useState('00:00');\r\n    const [currentPourcentageTimeVideo, setcurrentPourcentageTimeVideo] = useState(0);\r\n    const [tooltip, setTooltip] = useState(null);\r\n    const [totalTime, setTotalTime] = useState(0);\r\n\r\n    const getTimeLabel = (duration) => {\r\n        let hours = Math.floor(duration / 3600);\r\n        let minutes = Math.floor((duration - (hours * 3600)) / 60);\r\n        let seconds = Math.floor(duration - (hours * 3600) - (minutes * 60));\r\n\r\n        let hourValues = '';\r\n        if (hours > 0) {\r\n            hourValues = hours < 10 ? '0' + hours : hours;\r\n            hourValues += ':';\r\n        }\r\n        let minuteValue = minutes < 10 ? '0' + minutes : minutes;\r\n        let secondValue = seconds < 10 ? '0' + seconds : seconds;\r\n        return hourValues + minuteValue + ':' + secondValue;\r\n    };\r\n\r\n    const changeTimeVideo = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            var newTime = Math.floor((percentage * totalTime) / 100)\r\n            setVideoCurrentTimeLabel(getTimeLabel(newTime));\r\n            onTimeChanged(newTime);\r\n        }\r\n    }\r\n\r\n    const updateTimeVideo = (time) => {\r\n        setVideoCurrentTimeLabel(getTimeLabel(time));\r\n        if(totalTime && totalTime > 0)\r\n            setcurrentPourcentageTimeVideo((time) * 100 / totalTime);\r\n        else\r\n            setcurrentPourcentageTimeVideo(0);\r\n    }\r\n\r\n    const setTimeControllerTooltip = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            setTooltip({\r\n                text: getTimeLabel(Math.floor((percentage * totalTime) / 100)),\r\n                position: percentage\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (videoCurrentTime)\r\n            updateTimeVideo(videoCurrentTime);\r\n    }, [videoCurrentTime]);\r\n\r\n    useEffect(() => {\r\n        if (videoDuration){\r\n            setTotalTime(videoDuration);\r\n            setVideoTotalTimeLabel(getTimeLabel(videoDuration));\r\n        }\r\n        else\r\n            setTotalTime(0);\r\n            \r\n    }, [videoDuration]);\r\n\r\n    return (\r\n        <div className=\"video-time-controller-container\">\r\n            <div className=\"video-time-label\">{videoCurrentTimeLabel}</div>\r\n            <VideoPlayerSlider value={currentPourcentageTimeVideo}\r\n                onCursorEndMove={(percentage) => changeTimeVideo(percentage)}\r\n                onMouseOverSlider={(percentage) => setTimeControllerTooltip(percentage)}\r\n                tooltip={tooltip}\r\n                progressColor={'#ed0f0f'}\r\n                cursorColor={'#b59e9e'} />\r\n            <div className=\"video-time-label\">{videoTotalTimeLabel}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TimeController;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport VolumeUp from '@material-ui/icons/VolumeUp';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\r\nimport Forward10Icon from '@material-ui/icons/Forward10';\r\nimport Replay10Icon from '@material-ui/icons/Replay10';\r\n\r\nimport Slider from './Slider';\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction LeftControlsGroup({ videoIsPlaying, onPlayClick, onPauseClick, onVolumeChanged, onPlayBackwardClick, onPlayForwardClick }) {\r\n    const [showPlayButton, setShowPlayButton] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setShowPlayButton(!videoIsPlaying);\r\n    }, [videoIsPlaying]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <PlayArrowIcon className=\"icon\" style={{ display: showPlayButton ? '' : 'none' }} onClick={() => onPlayClick()} />\r\n            <PauseIcon className=\"icon\" style={{ display: showPlayButton ? 'none' : '' }} onClick={() => onPauseClick()} />\r\n            <VolumeController onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)} />\r\n            <Replay10Icon className=\"icon\" onClick={() => onPlayBackwardClick()}/>\r\n            <Forward10Icon className=\"icon\" onClick={() => onPlayForwardClick()}/>\r\n        </div>)\r\n}\r\n\r\nexport default LeftControlsGroup;\r\n\r\n\r\nfunction VolumeController({ onVolumeChanged }) {\r\n    const defaultVolume = 70;\r\n    const currentVolumeRef = useRef(0);\r\n    const [previousVolume, setPreviousVolume] = useState(defaultVolume);\r\n\r\n    const changeVolume = (percentage) => {\r\n        currentVolumeRef.current = percentage;\r\n        onVolumeChanged(percentage / 100);\r\n    };\r\n\r\n    const muteVideo = () => {\r\n        setPreviousVolume(currentVolumeRef.current);\r\n        changeVolume(0);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        changeVolume(defaultVolume);\r\n      \r\n        const onKeyboardPress = (e) =>{\r\n            if(e.keyCode === 38 && currentVolumeRef.current < 100)\r\n                changeVolume(currentVolumeRef.current + 10);\r\n            else if(e.keyCode === 40 && currentVolumeRef.current > 0)\r\n                changeVolume(currentVolumeRef.current - 10);\r\n        }\r\n\r\n        document.addEventListener('keyup', onKeyboardPress, false);\r\n\r\n        return () => {\r\n            document.removeEventListener('keyup', onKeyboardPress);\r\n        }\r\n    },[]);\r\n\r\n    return (<div className=\"video-volume-controller\">\r\n        <VolumeUp className=\"icon\" onClick={() => { muteVideo() }} style={{ display: currentVolumeRef.current > 0 ? '' : 'none' }} />\r\n        <VolumeOffIcon className=\"icon\" onClick={() => changeVolume(previousVolume)} style={{ display: currentVolumeRef.current > 0 ? 'none' : '' }} />\r\n        <Slider\r\n            value={currentVolumeRef.current}\r\n            onCursorMoved={(percentage) => changeVolume(percentage)}\r\n            onCursorEndMove={(percentage) => changeVolume(percentage)}\r\n            width={'120px'}\r\n            height={'4px'} />\r\n    </div>)\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\n\r\nexport function VideoOptions({ options, icon, onOptionChanged }) {\r\n\r\n    const [menuOptions, setMenuOptions] = useState([]);\r\n    const [menuSubOptions, setMenuSubOptions] = useState([]);\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const [showSubMenu, setShowSubMenu] = useState(false);\r\n\r\n    const [selectedOption, setSelectedOption] = useState(null);\r\n    const [selectedSubOption, setSelectedSubOption] = useState(null);\r\n\r\n    const updateMenuOptions = (selectedOption, selectedSubOption) => {\r\n\r\n        const oldSelectedOption = menuOptions.find(op => op.selected);\r\n        const oldSelectedSubOption = selectedOption?.subOptions?.find(subOp => subOp.selected);\r\n\r\n        if (selectedOption?.subOptions && !selectedSubOption)\r\n            return;\r\n\r\n        if (selectedOption?.subOptions\r\n            && oldSelectedSubOption?.label === selectedSubOption?.label)\r\n            return;\r\n\r\n        if (!selectedOption?.subOptions && oldSelectedOption?.label === selectedOption.label)\r\n            return;\r\n\r\n        var updatedOptions = [];\r\n        menuOptions.forEach(op => {\r\n            var updatedOption = {\r\n                label: op.label,\r\n                selected: op.label === selectedOption.label,\r\n                data: op.data\r\n            };\r\n            var updatedSubOptions = [];\r\n            if (op.subOptions) {\r\n                op.subOptions.forEach(subOp => {\r\n                    var updatedsubOption =\r\n                    {\r\n                        label: subOp.label,\r\n                        data: subOp.data,\r\n                        selected: subOp.label === selectedSubOption?.label\r\n                    }\r\n                    updatedSubOptions.push(updatedsubOption);\r\n                })\r\n                updatedOption.subOptions = updatedSubOptions;\r\n            }\r\n            updatedOptions.push(updatedOption);\r\n        });\r\n\r\n        setMenuOptions(updatedOptions);\r\n\r\n        setShowMenu(false);\r\n        setShowSubMenu(false);\r\n\r\n        var option = updatedOptions.find(op => op.selected);\r\n        if (option.subOptions) onOptionChanged(option.subOptions.find(subOp => subOp.selected));\r\n        else onOptionChanged(option);\r\n    }\r\n\r\n    const getOptionDisplay = (option) => {\r\n        return  (<div key={option.label} className={\"option \" + (option.selected ? 'selected' : '')}\r\n            onClick={() => {if(!option.subOptions)setSelectedOption(option)}}\r\n            onMouseEnter={() => {if(option.subOptions){setSelectedOption(option);setMenuSubOptions(!option || !option.subOptions ? [] : option.subOptions)}}}\r\n            >\r\n            {option.label}\r\n        </div>)\r\n    }\r\n\r\n    const getSubOptionDisplay = (subOption) => {\r\n        return  (<div key={subOption.label} className={\"option \" + (subOption.selected ? 'selected' : '')}\r\n            onClick={() => setSelectedSubOption(subOption)}\r\n            >\r\n            {subOption.label}\r\n        </div>)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (options) {\r\n            setMenuOptions(options);\r\n        }\r\n    }, [options]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && !selectedOption.subOptions)\r\n            updateMenuOptions(selectedOption, null);\r\n    }, [selectedOption]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && selectedSubOption)\r\n            updateMenuOptions(selectedOption, selectedSubOption);\r\n    }, [selectedSubOption]);\r\n\r\n\r\n    return (\r\n        <div className=\"video-options-container\" onMouseLeave={() => {setShowMenu(false);setShowSubMenu(false)}}>\r\n            <div className={\"video-options-menu \" + (showMenu ? '' : 'hidden')}\r\n                onMouseEnter={() => {setShowSubMenu(true)}}>\r\n                {menuOptions.map(option => getOptionDisplay(option))}\r\n            </div>\r\n            <div className={\"video-options-menu suboptions \" + (showSubMenu && menuSubOptions && menuSubOptions.length > 0 ? '' : 'hidden')}\r\n                onMouseLeave={() => {setShowSubMenu(false)}}>\r\n                {menuSubOptions.map(subOption => getSubOptionDisplay(subOption))}\r\n            </div>\r\n            <VideoOptionsButton icon={icon} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function VideoOptionsButton({ icon, hide, onClick }) {\r\n    return (\r\n        <div className=\"video-options-btn\" style={{ display: hide ? 'none' : '' }} onClick={() => onClick()}>\r\n            {icon}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport SubtitlesIcon from '@material-ui/icons/Subtitles';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport SortByAlphaIcon from '@material-ui/icons/SortByAlpha';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\n\r\nimport { VideoOptions, VideoOptionsButton } from './Options';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useOnClickOutside } from '../../../services/customHooks';\r\n\r\nfunction RightControlsGroup({\r\n    subtitlesOptions,\r\n    qualityOptions,\r\n    onSubtitleSizeChange,\r\n    onSubtitlesChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged}) {\r\n\r\n    const [videoInFullscreen, setVideoInFullscreen] = useState(false);\r\n\r\n    const changeFullScreenState = (fullscreen) => {\r\n        onFullScreenStateChanged(fullscreen);\r\n    };\r\n\r\n    useEffect(()=>{\r\n        setVideoInFullscreen(isFullScreen);\r\n    },[isFullScreen]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <div className=\"controls-sub-group\">\r\n                <VideoOptions options={subtitlesOptions}\r\n                    icon={<SubtitlesIcon className=\"icon\" />}\r\n                    onOptionChanged={(option) => onSubtitlesChange(option?.data?.url ? option.data.url : '')}\r\n                />\r\n                <AdjustSubtitleTimeOption onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon big\" />} onClick={() => onSubtitleSizeChange(2)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon small\" />} onClick={() => onSubtitleSizeChange(-2)} />\r\n            </div>\r\n\r\n            <VideoOptions options={qualityOptions}\r\n                icon={<SettingsIcon className=\"icon\" />}\r\n                onOptionChanged={(option) => onVideoQualityChange(option?.data?.url ? option.data.url : '')}\r\n            />\r\n\r\n            <VideoOptionsButton icon={<FullscreenIcon className=\"icon big\" />} hide={videoInFullscreen} onClick={() => changeFullScreenState(true)} />\r\n            <VideoOptionsButton icon={<FullscreenExitIcon className=\"icon big\" />} hide={!videoInFullscreen} onClick={() => changeFullScreenState(false)} />\r\n        </div>)\r\n}\r\nexport default RightControlsGroup;\r\n\r\nfunction AdjustSubtitleTimeOption({ onAdjustSubtitleTimeChange }) {\r\n\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const menuRef = useRef(null);\r\n\r\n    useOnClickOutside(menuRef, () => setShowMenu(false));\r\n\r\n    return (\r\n        <div ref={menuRef} className=\"adjust-subtitle-time-container\">\r\n            <div className={\"video-options-menu\" + (showMenu ? '' : ' hidden')}>\r\n                <div className=\"label\">Adj. Sub.</div>\r\n                <div className=\"adjust-subtitle-time-input-container\">\r\n                    <input type=\"number\" step=\"0.01\" onChange={(e) => onAdjustSubtitleTimeChange(e.target.valueAsNumber)} /><span className=\"label\"> s</span>\r\n                </div>\r\n            </div>\r\n            <VideoOptionsButton icon={<RestoreIcon className=\"icon\" />} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","import LeftControlsGroup from \"./LeftControlsGroup\";\r\nimport RightControlsGroup from \"./RightControlsGroup\";\r\n\r\nfunction Controls({\r\n    videoIsPlaying,\r\n    onPlayClick,\r\n    onPauseClick,\r\n    onVolumeChanged,\r\n    onPlayBackwardClick,\r\n    onPlayForwardClick,\r\n    videoSubtitlesOptions, \r\n    videoQualitiesOptions,\r\n    onSubtitlesChange,\r\n    onSubtitleSizeChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged }) {\r\n        \r\n    return (\r\n        <div className=\"video-player-controls\">\r\n            <LeftControlsGroup \r\n                videoIsPlaying = {videoIsPlaying}\r\n                onPlayClick={() => onPlayClick()} \r\n                onPauseClick={() => onPauseClick()} \r\n                onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)}\r\n                onPlayBackwardClick={()=> onPlayBackwardClick()}\r\n                onPlayForwardClick={()=> onPlayForwardClick()}/>\r\n            <RightControlsGroup\r\n                subtitlesOptions={videoSubtitlesOptions}\r\n                qualityOptions={videoQualitiesOptions}\r\n                onSubtitleSizeChange={(pixelsToAdd) => onSubtitleSizeChange(pixelsToAdd)}\r\n                onSubtitlesChange={(newUrlSource) => onSubtitlesChange(newUrlSource)}\r\n                onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)}\r\n                onVideoQualityChange={(newUrlSource) => onVideoQualityChange(newUrlSource)} \r\n                isFullScreen={isFullScreen}\r\n                onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Controls;","import \"../../style/video-player.css\";\r\n\r\nimport fadeTransition from \"../../services/customStyles\";\r\n\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\n\r\nimport VideoSubtitles from './videoPlayerComponents/VideoSubtitles';\r\nimport TimeController from './videoPlayerComponents/TimeController';\r\nimport Controls from './videoPlayerComponents/Controls';\r\n\r\nimport AppServices from \"../../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction VideoPlayer({ videoQualitiesOptions, videoSubtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n    const videoRef = useRef(null);\r\n    const videoPlayerContainerRef = useRef(null);\r\n    const watchedTimeUpdateTriggeredRef = useRef(0);\r\n\r\n    const [isFullScreen, setIsFullScreen] = useState(false);\r\n    const [currentTime, setCurrentTime] = useState(0);\r\n\r\n    const [errorMessage, setErrorMessage] = useState();\r\n\r\n    const checkDownloadStateRef = useRef(false);\r\n    const [videoDownloadState, setVideoDownloadState] =  useState('Loading');\r\n    \r\n    const [videoSource, setVideoSource] = useState('');\r\n    const [videoIsLoading, setVideoIsLoading] = useState(false);\r\n    const [videoIsPlaying, setVideoIsPlaying] = useState(false);\r\n\r\n    const [subtitlesUrl, setSubtitlesUrl] = useState('');\r\n    const [subtitlesSize, setSubtitlesSize] = useState(30);\r\n    const [subtitlesAdjustTime, setSubtitlesAdjustTime] = useState(0);\r\n\r\n    const [showVideoControls, setShowVideoControls] = useState(false);\r\n    const lastTimeMouseMovedRef = useRef(0);\r\n\r\n    const checkMovieDownloadState = (url) => {\r\n        if (checkDownloadStateRef.current && videoRef.current) {      \r\n            AppServices.torrentApiService.getDownloadState(url, (response) => { \r\n                if(decodeURIComponent(url) === decodeURIComponent(videoRef.current?.src)){\r\n                    if(response.error) {\r\n                        checkDownloadStateRef.current = false;\r\n                        setErrorMessage(response.message);\r\n                    }                \r\n                    else{\r\n                        setVideoDownloadState(response.message ? response.message : 'Loading'); \r\n                        setTimeout(() => {\r\n                            checkMovieDownloadState(url);\r\n                        }, 3000);\r\n                    }                \r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    const changeVideoSource = (url) => {       \r\n        var currentTime = videoRef.current.currentTime;\r\n        setVideoSource(url);\r\n\r\n        videoRef.current.autoplay = !videoRef.current.paused;\r\n        videoRef.current.load();\r\n       \r\n        videoRef.current.currentTime = currentTime;\r\n        setCurrentTime(currentTime);\r\n      \r\n        setVideoIsLoading(true);\r\n        checkDownloadStateRef.current = true;\r\n        setErrorMessage('');\r\n        checkMovieDownloadState(url);\r\n    }\r\n\r\n    const changeVideoTime = (newTime) =>{\r\n        videoRef.current.currentTime = newTime;\r\n    }\r\n\r\n    const displayControls = () => {\r\n        setShowVideoControls(true);\r\n        videoPlayerContainerRef.current.style.cursor = 'auto';\r\n        lastTimeMouseMovedRef.current = Date.now();\r\n        const waitingTime = 3000;\r\n        setTimeout(() => {\r\n            if (videoPlayerContainerRef?.current && Date.now() > lastTimeMouseMovedRef.current + waitingTime){\r\n                setShowVideoControls(false);\r\n                videoPlayerContainerRef.current.style.cursor = 'none';\r\n            }\r\n        }, waitingTime + 500);\r\n    };\r\n\r\n    const onFullScreenStateChanged = (fullScreen) => {\r\n        if(fullScreen){\r\n            if (!videoPlayerContainerRef.current) return;\r\n\r\n            if (videoPlayerContainerRef.current.requestFullscreen) videoPlayerContainerRef.current.requestFullscreen();\r\n            else if (videoPlayerContainerRef.current.mozRequestFullScreen) videoPlayerContainerRef.current.mozRequestFullScreen();\r\n            else if (videoPlayerContainerRef.current.webkitRequestFullscreen) videoPlayerContainerRef.current.webkitRequestFullscreen();\r\n            else if (videoPlayerContainerRef.current.msRequestFullscreen) videoPlayerContainerRef.current.msRequestFullscreen();\r\n        }\r\n        else\r\n            document.exitFullscreen();     \r\n    }\r\n\r\n    const playVideo =()=>{\r\n        if(videoRef?.current)\r\n            videoRef.current.play();\r\n    }\r\n\r\n    const pauseVideo = ()=>{\r\n        if(videoRef?.current)\r\n            videoRef.current.pause();\r\n    }\r\n\r\n    const changeVideoVolume = (newVolume) => {\r\n        if(videoRef?.current)\r\n            videoRef.current.volume = newVolume;\r\n    }\r\n\r\n    useEffect(() => {\r\n        videoPlayerContainerRef.current.addEventListener(\"mousemove\", displayControls);\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef?.current) videoPlayerContainerRef.current.removeEventListener(\"mousemove\", displayControls);\r\n        }\r\n    }, [videoPlayerContainerRef]);\r\n\r\n    useEffect(() => {\r\n        if(!Boolean(videoRef?.current))\r\n            return;\r\n            \r\n        const videoErrorHandler = (e) => {\r\n            if (videoRef?.current?.attributes.src.value) {\r\n                setErrorMessage(errorMessage ? errorMessage : \"An error occured\");\r\n                setVideoIsLoading(false);\r\n            }\r\n        }\r\n        videoRef.current.addEventListener('error', videoErrorHandler, true);\r\n\r\n        const onVideoReady = () => {        \r\n            checkDownloadStateRef.current = false;\r\n            setVideoDownloadState('');\r\n            setVideoIsLoading(false);\r\n        };\r\n        videoRef.current.addEventListener('canplay', onVideoReady, true);\r\n\r\n        const onVideoPlaying = () => {        \r\n            onVideoReady();\r\n            setVideoIsPlaying(true);\r\n        };\r\n        videoRef.current.addEventListener('playing', onVideoPlaying, true);\r\n\r\n        const onVideoPaused = () => {        \r\n            setVideoIsPlaying(false);\r\n        };\r\n        videoRef.current.addEventListener('pause', onVideoPaused, true);\r\n\r\n        const onVideoWaiting = () => {     \r\n            setVideoIsLoading(true);\r\n        };\r\n        videoRef.current.addEventListener('waiting', onVideoWaiting, true);\r\n\r\n        const onTimeUpdated = (e) =>{\r\n            if (videoRef.current?.currentTime){\r\n                setCurrentTime(videoRef.current?.currentTime);\r\n\r\n                let currentTime = Math.round(videoRef.current?.currentTime);\r\n                if(currentTime - watchedTimeUpdateTriggeredRef.current > 10){\r\n                    watchedTimeUpdateTriggeredRef.current = currentTime;\r\n                    onWatchedTimeUpdate(videoRef.current.currentTime, videoRef.current.duration);\r\n                }\r\n            }\r\n        };\r\n        videoRef.current.addEventListener('timeupdate', onTimeUpdated);\r\n\r\n        return () => {\r\n            if (videoRef?.current) {\r\n                videoRef.current.removeEventListener(\"error\", videoErrorHandler);\r\n                videoRef.current.removeEventListener('playing', onVideoReady);\r\n                videoRef.current.removeEventListener('canplay', onVideoReady);\r\n                videoRef.current.removeEventListener('waiting', onVideoWaiting);\r\n                videoRef.current.removeEventListener('pause', onVideoPaused);\r\n                videoRef.current.removeEventListener('timeupdate', onTimeUpdated);\r\n            }\r\n        }\r\n    }, [videoRef]);\r\n\r\n    useEffect(()=>{\r\n        const onFullScreenChange = (e) => {\r\n            setIsFullScreen(document.fullscreenElement);\r\n        };\r\n\r\n        const onKeyboardPress = (e) =>{\r\n\r\n            if(!videoRef?.current) return;\r\n\r\n            displayControls();\r\n\r\n            if(e.keyCode === 32){\r\n                if(videoRef.current.paused) playVideo();\r\n                else pauseVideo();\r\n            }\r\n            else if(e.keyCode === 37)\r\n                changeVideoTime(videoRef.current?.currentTime - 10);\r\n            else if(e.keyCode === 39)\r\n                changeVideoTime(videoRef.current?.currentTime + 10);\r\n        }\r\n        if (videoPlayerContainerRef.current){\r\n            videoPlayerContainerRef.current.addEventListener('fullscreenchange', onFullScreenChange);\r\n            document.addEventListener('keyup', onKeyboardPress, false);\r\n        }\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef.current){\r\n                document.removeEventListener('keyup', onKeyboardPress);\r\n                videoPlayerContainerRef.current.removeEventListener('fullscreenchange', onFullScreenChange);\r\n            } \r\n        }\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        if (videoQualitiesOptions) {\r\n            const videoQuality = videoQualitiesOptions.find(op => op.selected);\r\n            if (videoQuality?.data?.url) changeVideoSource(videoQuality.data.url);\r\n        }\r\n    }, [videoQualitiesOptions]);\r\n\r\n    useEffect(() => {\r\n        if(videoTime > 0 && videoRef?.current)\r\n            videoRef.current.currentTime = videoTime;\r\n    },[videoTime]);\r\n\r\n    return (\r\n        <div ref={videoPlayerContainerRef} className=\"video-player-content\" >\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={videoSource && videoIsLoading} text={videoDownloadState} />\r\n            <div className=\"video-player-error-message\" style={{ display: errorMessage ? '' : 'none' }}>{errorMessage}</div>\r\n            <video ref={videoRef} className=\"video-player\" src={videoSource}></video>\r\n            <div className=\"video-player-bottom\">\r\n                <VideoSubtitles\r\n                    videoCurrentTime={currentTime}\r\n                    urlSource={subtitlesUrl}\r\n                    size={subtitlesSize}\r\n                    subtitlesAdjustTime={subtitlesAdjustTime} />\r\n                <div className=\"video-player-controls-container\" style={fadeTransition(showVideoControls)}>\r\n                    <TimeController \r\n                        videoDuration={videoRef.current?.duration}\r\n                        videoCurrentTime={currentTime}\r\n                        onTimeChanged={(newTime) => changeVideoTime(newTime)} />\r\n                    <Controls\r\n                        videoIsPlaying={videoIsPlaying}\r\n                        onPlayClick={() => playVideo()}\r\n                        onPauseClick={() => pauseVideo()}\r\n                        onVolumeChanged={(newVolume)=> changeVideoVolume(newVolume)}\r\n                        onPlayBackwardClick={() => changeVideoTime(currentTime - 10)}\r\n                        onPlayForwardClick={() => changeVideoTime(currentTime + 10)}\r\n                        videoSubtitlesOptions={videoSubtitlesOptions}\r\n                        videoQualitiesOptions={videoQualitiesOptions}\r\n                        onSubtitleSizeChange={(pixelsToAdd) => setSubtitlesSize(subtitlesSize + pixelsToAdd <= 60 && subtitlesSize + pixelsToAdd >= 20 ? subtitlesSize + pixelsToAdd : subtitlesSize)}\r\n                        onSubtitlesChange={(newUrlSource) => setSubtitlesUrl(newUrlSource ? newUrlSource : '')}\r\n                        onAdjustSubtitleTimeChange={(time) => setSubtitlesAdjustTime(time ? time : 0)}\r\n                        onVideoQualityChange={(newUrlSource) => changeVideoSource(newUrlSource)}\r\n                        isFullScreen={isFullScreen}\r\n                        onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default VideoPlayer;\r\n","\r\nimport \"../../style/video-player-window.css\";\r\nimport \"../../style/button.css\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport VideoPlayer from \"./VideoPlayer\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport BaseButton from \"../common/buttons/BaseButton\";\r\nimport ModalWindow from \"../modal/ModalWindow\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function VideoPlayerWindow({ sources, subtitles, visible, onCloseClick, onWatchedTimeUpdate, goToTime }) {\r\n    const [subtitlesOptions, setSubtitlesOptions] = useState([]);\r\n    const [videoQualitiesOptions, setVideoQualitiesOptions] = useState([]);\r\n    const [resumeMessageVisible, setResumeMessageVisible] = useState(true);\r\n    const [videoTime, setVideoTime] = useState(0);\r\n\r\n    const buildVideoQualitiesOptions = (sources) => {\r\n        var options = [];\r\n        if (!sources) return;\r\n        sources.forEach(source => {\r\n            var qualities = options.filter(o => o.label.startsWith(source.quality));\r\n\r\n            var option = {\r\n                label: qualities && qualities.length > 0 ? source.quality + ' (' + (qualities.length + 1) + ')' : source.quality,\r\n                selected: source.selected,\r\n                data: {\r\n                    url: AppServices.torrentApiService.buildStreamUrl(source.downloadUrl, source.fileName, source.seasonNumber, source.episodeNumber)\r\n                }\r\n            }\r\n            options.push(option);\r\n        });\r\n\r\n        if (options.filter(o => o.selected).length === 0)\r\n            options[0].selected = true;\r\n\r\n        setVideoQualitiesOptions(options);\r\n    }\r\n\r\n    const buildSubtitlesOptions = (subtitles) => {\r\n        var newSubtitlesOptions = [];\r\n        newSubtitlesOptions.push(\r\n            {\r\n                label: 'Off',\r\n                selected: true\r\n            });\r\n\r\n        if (subtitles && subtitles.length > 0) {\r\n            subtitles.forEach(sub => {\r\n                var subtitlesOption = {\r\n                    label: sub.language,\r\n                    selected: false,\r\n                    subOptions: []\r\n                };\r\n                sub.subtitlesSourceUrls.forEach((sourceUrl, index) => {\r\n                    subtitlesOption.subOptions.push({\r\n                        label: sub.language + ' ' + (index + 1),\r\n                        selected: false,\r\n                        data: {\r\n                            url: AppServices.subtitlesApiService.getSubtitlesApiUrl(sourceUrl)\r\n                        }\r\n                    });\r\n                })\r\n                newSubtitlesOptions.push(subtitlesOption);\r\n            });\r\n        }\r\n\r\n        setSubtitlesOptions(newSubtitlesOptions);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (visible && sources && sources.length > 0) {\r\n            buildVideoQualitiesOptions(sources);\r\n        }\r\n    }, [sources, visible]);\r\n\r\n    useEffect(() => {\r\n        if (visible && subtitles && subtitles.length > 0) {\r\n            buildSubtitlesOptions(subtitles);\r\n        }\r\n    }, [subtitles, visible]);\r\n\r\n    useEffect(() => {\r\n        if (goToTime > 0) {\r\n            setResumeMessageVisible(true);\r\n        }\r\n    }, [goToTime]);\r\n\r\n\r\n    const content = (\r\n        <div className=\"video-player-window-container\">\r\n            <ResumeMessage \r\n                visible={goToTime > 0 && resumeMessageVisible} \r\n                resumeTime={goToTime} \r\n                onNoClick={() => setResumeMessageVisible(false)} \r\n                onYesClick={() => {setVideoTime(goToTime);setResumeMessageVisible(false)}} />\r\n            <VideoPlayerContainer \r\n                visible={visible}\r\n                videoQualitiesOptions={videoQualitiesOptions} \r\n                subtitlesOptions={subtitlesOptions} \r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)}\r\n                videoTime={videoTime}/>\r\n        </div>\r\n    )\r\n    return (\r\n        <ModalWindow visible={visible} content={content} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport function ToTimeFormat(totalMinutes) {\r\n    const totalHours = totalMinutes / 60;\r\n\r\n    const hours = Math.trunc(totalHours);\r\n    const minutes = Math.trunc((totalHours - hours) * 60);\r\n\r\n    let timeFormat = '';\r\n    if (hours > 0)\r\n        timeFormat += hours + ' h ';\r\n\r\n    timeFormat += minutes + ' min';\r\n\r\n    return timeFormat;\r\n}\r\n\r\n\r\nfunction ResumeMessage({ visible, resumeTime, onYesClick, onNoClick }) {\r\n    const containerStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    }\r\n    if (visible) {\r\n        return (\r\n            <div style={containerStyle}>\r\n                <Paragraph text={\"Do you want to resume the video to \" + ToTimeFormat(resumeTime/60) + \" ?\"} />\r\n                <BaseButton color=\"red\" content=\"Yes\" onClick={() => onYesClick()} />\r\n                <BaseButton color=\"grey\" content=\"No\" onClick={() => onNoClick()} />\r\n            </div>\r\n        );\r\n    }\r\n    else\r\n        return null;\r\n}\r\n\r\nfunction VideoPlayerContainer({ visible, videoQualitiesOptions, subtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n\r\n    if (visible) {\r\n        return <div className=\"video-player-container\">\r\n            <VideoPlayer\r\n                videoQualitiesOptions={videoQualitiesOptions}\r\n                videoSubtitlesOptions={subtitlesOptions}\r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)} \r\n                videoTime={videoTime}/>\r\n        </div>;\r\n    }\r\n    else\r\n        return null;\r\n}","import BaseButton from './BaseButton';\r\nimport TrailerIcon from '@material-ui/icons/LocalMovies';\r\n\r\nfunction TrailerButton({ visible, onClick }) {\r\n    if (visible) {\r\n\r\n        const content = (<div style={{display: 'flex', justifyContent: 'center'}}>\r\n            <TrailerIcon style={{ color: 'black' }}/>\r\n            <div style={{ marginLeft: '5px' }}>Trailer</div>\r\n        </div>);\r\n\r\n        return (\r\n            <BaseButton content={content} color={\"white\"} onClick={() => onClick()}/>\r\n        )\r\n    }\r\n    else return null;\r\n}\r\n\r\nexport default TrailerButton;","function Title({text}){\r\n\r\n    const style={\r\n        fontSize: '28px',\r\n        fontWeight: '500',\r\n        color: 'white',\r\n        textAlign: 'center'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default Title;","import BaseButton from './BaseButton';\r\nimport FilterNoneIcon from '@material-ui/icons/FilterNone';\r\n\r\nfunction CopyButton({ onClick }) {\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <FilterNoneIcon />\r\n        <div style={{ marginLeft: '5px' }}>Copy</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} color={\"grey\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default CopyButton;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nimport ModalWindow from \"../../modal/ModalWindow\";\r\nimport Title from '../text/Title';\r\nimport SecondaryInfo from '../text/SecondaryInfo';\r\nimport CopyButton from \"./CopyButton\";\r\nimport BaseButton from \"./BaseButton\";\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport AppServices from \"../../../services/AppServices\";\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction PlayWithVLCButton({ onClick, videoUrl }) {\r\n    const [showModal, setShowModal] = useState(false);\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n        <div style={{ marginLeft: '5px' }}>Play With VLC</div>\r\n    </div>);\r\n\r\n    const handleClick = () => {\r\n        setShowModal(true);\r\n        if(onClick) onClick();\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <BaseButton content={content} color={\"orange\"} onClick={() => handleClick()} />\r\n            <ModalForVlc visible={showModal} videoUrl={videoUrl} onCloseClick={() => setShowModal(false)} />\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default PlayWithVLCButton;\r\n\r\nfunction ModalForVlc({ visible, videoUrl, onCloseClick }) {\r\n\r\n    const containerStyle = {\r\n        backgroundColor: 'black',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: '300px',\r\n        width: '500px',\r\n        padding: '0 20px',\r\n        margin: 'auto',\r\n        color: 'white',\r\n        borderRadius: '10px',\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)'\r\n    };\r\n\r\n    const container = (\r\n        <div style={containerStyle}>\r\n            <ModalContent videoUrl={videoUrl} launchPlay={visible} onCloseClick={() => onCloseClick()} />\r\n        </div>\r\n    );\r\n\r\n    return <ModalWindow visible={visible} content={container} />;\r\n}\r\n\r\nfunction ModalContent({ videoUrl, launchPlay, onCloseClick }) {\r\n    const [isDesktopApp, setIsDesktopApp] = useState(null);\r\n    const inputLinkUrlRef = useRef(null);\r\n    const [videoDownloadState, setVideoDownloadState] = useState(null);\r\n    const checkDownloadStateRef = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (isDesktopApp === null) {\r\n            AppServices.appInfoApiService.isDesktopApplication((isDesktopApp) => {\r\n                setIsDesktopApp(isDesktopApp);\r\n            });\r\n        }\r\n    }, [isDesktopApp]);\r\n\r\n    useEffect(() => {\r\n        if (launchPlay && isDesktopApp && videoUrl) {\r\n            setVideoDownloadState({\r\n                message: 'Loading'\r\n            });\r\n            AppServices.appInfoApiService.playWithVlc(\r\n                videoUrl,\r\n                () => {\r\n                    setVideoDownloadState({\r\n                        message: 'Loading',\r\n                        url: videoUrl,\r\n                        checkState: true\r\n                    });\r\n                },\r\n                () => {\r\n                    setVideoDownloadState({\r\n                         message: \"Error trying to open VLC. Make sure it is correctly installed.\",\r\n                         checkState: false,\r\n                         error: true\r\n                        });\r\n                });\r\n        }\r\n    }, [launchPlay]);\r\n\r\n    useEffect(()=>{\r\n        checkDownloadStateRef.current = videoDownloadState?.checkState;\r\n        if(videoDownloadState?.checkState)\r\n            setTimeout(()=> checkVideoDownloadState(videoDownloadState.url), 3000);\r\n    },[videoDownloadState]);\r\n\r\n    const onCopyClick = () => {\r\n        if (inputLinkUrlRef?.current) {\r\n            inputLinkUrlRef.current.select();\r\n            document.execCommand(\"copy\");\r\n            window.getSelection().removeAllRanges();\r\n        }\r\n    }\r\n\r\n    const handleCloseClick = () => {\r\n        setVideoDownloadState(null);\r\n        onCloseClick();\r\n    }\r\n\r\n    const checkVideoDownloadState = (url) => {\r\n        AppServices.torrentApiService.getDownloadState(url, (response) => {            \r\n            if(decodeURIComponent(videoDownloadState.url) === decodeURIComponent(url)){\r\n                if(checkDownloadStateRef.current){\r\n                    setVideoDownloadState({\r\n                        message: response.message,\r\n                        checkState: !response.error,\r\n                        error: Boolean(response.error),\r\n                        url: url\r\n                    }); \r\n                }\r\n            }\r\n        })\r\n    };\r\n\r\n    const centerStyle = (vertical) => {\r\n        return {\r\n            display: 'flex', \r\n            alignItems: 'center', \r\n            height: '100%',\r\n            justifyContent: 'space-around',\r\n            flexDirection: vertical ? 'column' : ''\r\n        }\r\n    }\r\n\r\n\r\n    if (isDesktopApp) {\r\n        return (\r\n            <div style={centerStyle(true)}>\r\n                <Title text={\"Play with VLC\"} />\r\n                <SecondaryInfo text={videoDownloadState?.message} center/>\r\n                <CircularProgress style={{display: !videoDownloadState?.error ? '' : 'none', color: \"white\", width: \"50px\", height: 'auto', margin: '40px auto' }} />\r\n                <BaseButton content={\"Close\"} color={\"red\"} onClick={() => handleCloseClick()} />\r\n            </div>);\r\n    }\r\n    else\r\n        return (\r\n            <div>\r\n                <Title text={\"Play with VLC\"} />\r\n                <SecondaryInfo text={\"To play the video in VLC, click on 'Copy', open VLC then open a network stream and paste the copied link.\"} />\r\n                <input ref={inputLinkUrlRef}\r\n                    style={{ background: 'none', border: 'none', outline: 'none', color: 'grey', width: '100%', textAlign: 'center', textOverflow: 'ellipsis', margin: '10px 0' }}\r\n                    type=\"text\"\r\n                    readOnly={true}\r\n                    value={Boolean(videoUrl) ? videoUrl : ''} />\r\n                <div style={centerStyle()}>\r\n                    <CopyButton onClick={() => onCopyClick()} />\r\n                    <BaseButton content={\"Close\"} color={\"red\"} onClick={() => handleCloseClick()} />\r\n                </div>\r\n\r\n            </div>);\r\n\r\n}\r\n\r\n\r\n","import BaseButton from './BaseButton';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\n\r\n\r\nexport function AddBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"grey\"}\r\n                insideIcon={<AddIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n      \r\n}\r\n\r\nexport function RemoveBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"dark-red\"}\r\n                insideIcon={<RemoveIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n\r\n}\r\n\r\nfunction BookmarkButton({ onClick, visible, color, insideIcon }) {\r\n\r\n    if (visible) {\r\n        const contentStyle = {\r\n            position: 'relative',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const insideIconStyle = {\r\n            position: 'absolute',\r\n            top: '-2px',\r\n            right: '-2px',\r\n            padding: '1px',\r\n            zIndex: 3,\r\n            width: '15px',\r\n            height: '15px',\r\n            borderRadius: '100%',\r\n            backgroundColor: 'rgba(45,44,44,0.5)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const content = (\r\n            <div style={contentStyle}>\r\n                <BookmarkIcon style={{ fontSize: 28 }} />\r\n                <div style={insideIconStyle}>{insideIcon}</div>\r\n            </div>\r\n        )\r\n\r\n        return (\r\n            <BaseButton content={content} color={color} onClick={() => onClick()} />\r\n        );\r\n    }\r\n    else return null;\r\n\r\n}\r\n","import BaseButton from './BaseButton';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nfunction PlayButton({center, onClick }) {\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n            <div style={{ marginLeft: '5px' }}>Play</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} centered={center} color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default PlayButton;","import \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport ArrowForwardIosRounded from '@material-ui/icons/ArrowForwardIosRounded';\r\nimport ArrowBackIosRounded from '@material-ui/icons/ArrowBackIosRounded';\r\n\r\nimport fadeTransition from \"../../../services/customStyles.js\";\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nfunction MediasListLite({ medias, alignLeft, onMediaClick }) {\r\n  const listRef = useRef(null);\r\n  const [hideBackArrow, setHideBackArrow] = useState(true);\r\n  const [hideForwardArrow, setHideForwardArrow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    listRef.current.onscroll = () => {\r\n      showHideNavArrows();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!medias || medias.length === 0) {\r\n      setHideForwardArrow(true);\r\n      setHideBackArrow(true);\r\n    }\r\n    else showHideNavArrows();\r\n  }, [medias]);\r\n\r\n  useEffect(()=>{ showHideNavArrows(); }, [hideBackArrow, hideForwardArrow]);\r\n\r\n  const isElementVisible = (elem, boundings) => {\r\n    const elemBoundings = elem.getBoundingClientRect();\r\n    return Math.floor(elemBoundings.right) <= Math.floor(boundings.right)\r\n      && Math.floor(elemBoundings.left) >= Math.floor(boundings.left);\r\n  }\r\n\r\n  const getVisibleRange = () => {\r\n    var indexes = []\r\n    var listBoundings = listRef.current.getBoundingClientRect();\r\n    for (let i = 0; i < listRef.current.children.length; i++) {\r\n      if (isElementVisible(listRef.current.children[i], listBoundings))\r\n        indexes.push(i);\r\n    }\r\n\r\n    return {\r\n      'maxIndex': Math.max(...indexes),\r\n      'minIndex': Math.min(...indexes),\r\n      'count': indexes.length\r\n    }\r\n  }\r\n\r\n  const navToRight = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.maxIndex + visibleRange.count;\r\n      var index = goToIndex > listRef.current.children.length - 1 ? listRef.current.children.length - 1 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const navToLeft = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.minIndex - visibleRange.count;\r\n      var index = goToIndex < 0 ? 0 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const showHideNavArrows = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var listBoundings = listRef.current.getBoundingClientRect();\r\n      setHideBackArrow(isElementVisible(listRef.current.children[0], listBoundings));\r\n      setHideForwardArrow(isElementVisible(listRef.current.children[listRef.current.children.length - 1], listBoundings));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={\"medias-list-container\"}>\r\n      <div style={fadeTransition(!hideBackArrow)} className=\"floating-navigation-btn left\" onClick={() => navToLeft()}>\r\n        <ArrowBackIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div style={fadeTransition(!hideForwardArrow)} className=\"floating-navigation-btn right\" onClick={() => navToRight()}>\r\n        <ArrowForwardIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div ref={listRef} className={\"medias-list\"+ (hideBackArrow && hideForwardArrow && !alignLeft ? ' center' : '')}>\r\n        {medias.map((media, index) => (<MediaLitePresentation key={index} media={media} hoverEffect={true} onMediaClick={(mediaId)=>onMediaClick(mediaId)}/>))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default MediasListLite;","import \"../../../style/medias-list.css\";\r\nimport MediasListLite from \"./MediasListLite\";\r\nimport fadeTransition from \"../../../services/customStyles.js\";\r\n\r\nfunction MediasListLiteWithTitle({ listTitle, medias, alignLeft, visible, onMediaClick}) {\r\n    return (\r\n        <div style={fadeTransition(medias && medias.length > 0  && visible, 1)} className=\"medias-list-genre-container\">\r\n            <div className=\"medias-list-header\">\r\n                <div className=\"medias-list-genre\">{listTitle}</div>\r\n            </div>\r\n            <MediasListLite medias={medias} alignLeft={alignLeft} onMediaClick={(mediaId)=>onMediaClick(mediaId)}/>\r\n        </div>\r\n    );\r\n}\r\nexport default MediasListLiteWithTitle;\r\n\r\n","\r\nimport \"../style/media-presentation-page.css\";\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport ModalMediaTrailer from '../components/modal/ModalMediaTrailer';\r\nimport ModalEpisodeSelector from '../components/modal/ModalEpisodeSelector';\r\n\r\nimport { VideoPlayerWindow, ToTimeFormat } from '../components/video/VideoPlayerWindow';\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport ProgressionBar from \"../components/common/ProgressionBar\";\r\n\r\nimport BaseButton from \"../components/common/buttons/BaseButton\";\r\nimport TrailerButton from \"../components/common/buttons/TrailerButton\";\r\nimport PlayWithVLCButton from \"../components/common/buttons/PlayWithVLCButton\";\r\nimport {AddBookmarkButton, RemoveBookmarkButton} from \"../components/common/buttons/BookmarkButton\";\r\nimport PlayButton from \"../components/common/buttons/PlayButton\";\r\n\r\nimport SecondaryInfo from \"../components/common/text/SecondaryInfo\";\r\nimport Paragraph from \"../components/common/text/Paragraph\";\r\nimport Title from \"../components/common/text/Title\";\r\nimport TitleAndContent from \"../components/common/TitleAndContent\";\r\nimport Rating from \"../components/common/Rating\";\r\nimport DropDown from \"../components/common/DropDown\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\n\r\nimport AppServices from \"../services/AppServices\";\r\nimport fadeTransition from \"../services/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\n\r\nfunction MediaFullPresentation({ mediaId, onCloseClick }) {\r\n\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n    const [mediaDetails, setMediaDetails] = useState({});\r\n    const [mediaProgression, setMediaProgression] = useState({});\r\n\r\n    const versionsSources = useRef([]);\r\n    const [voSourcesSearching, setVoSourcesSearching] = useState(false);\r\n    const [vfSourcesSearching, setVfSourcesSearching] = useState(false);\r\n\r\n    const [selectedVersionSources, setSelectedVersionSources] = useState([]);\r\n    const [selectedVersionSourceLink, setSelectedVersionSourceLink] = useState('');\r\n\r\n    const [mediaSubtitlesSources, setMediaSubtitlesSources] = useState([]);\r\n    const [loadingSubtitles, setLoadingSubtitles] = useState(false);\r\n\r\n    const [showMediaPlayer, setShowMediaPlayer] = useState(false);\r\n    const [showMediaTrailer, setShowMediaTrailer] = useState(false);\r\n    const [addBookmarkButtonVisible, setAddBookmarkButtonVisible] = useState(true);\r\n\r\n    const [recommandedMedias, setRecommandedMedias] = useState([]);\r\n    const navHistory = useRef([]);\r\n\r\n    const selectedEpisode = useRef({ \r\n        seasonNumber: 1,\r\n        episodeNumber: 1\r\n    })\r\n\r\n\r\n    useEffect(() => {\r\n        if(mediaId)\r\n            loadPage(mediaId);\r\n    }, [mediaId]);\r\n\r\n    useEffect(() => {\r\n        if (mediaDetails.imdbId) getAvailableSubtitles(mediaDetails.imdbId, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n        if (mediaDetails.id && mediaDetails.title && mediaDetails.year) {\r\n            clearVersionSources();\r\n            searchVfSources(mediaDetails.id, mediaDetails.title, mediaDetails.year, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n            searchVoSources(mediaDetails.title, mediaDetails.year, mediaDetails.imdbId ,selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n        }\r\n\r\n        const topPage = document.getElementsByClassName('back-btn')[0];\r\n        topPage.scrollIntoView();\r\n    }, [mediaDetails]);\r\n\r\n    useEffect(()=>{\r\n        if(!selectedVersionSourceLink && selectedVersionSources.length > 0)\r\n            changeSelectedSource(0);\r\n        \r\n    },[selectedVersionSources]);\r\n\r\n    const loadPage = (mediaId) => {\r\n        setDataLoaded(false);\r\n        setMediaDetails({});\r\n        setRecommandedMedias([]);\r\n        if (mediaId) {\r\n            AppServices.searchMediaService.getMediaDetails(mediaId,\r\n                (details) => {\r\n                    if (details) {\r\n                        setMediaDetails(details);\r\n                        setDataLoaded(true);\r\n                        AppServices.bookmarkApiService.isMediaBookmarked(mediaId, (isMediaBookmarked) => {\r\n                            isMediaBookmarked = isMediaBookmarked === 'true';\r\n                            setAddBookmarkButtonVisible(!isMediaBookmarked);\r\n                        });\r\n                    }\r\n                });\r\n            getMediaProgression(mediaId, 1, 1);               \r\n            AppServices.searchMediaService.getRecommandedMedias(mediaId, (recommandedMedias) => {\r\n                if(recommandedMedias && recommandedMedias.length > 0)\r\n                    setRecommandedMedias(recommandedMedias);\r\n            });\r\n        }\r\n    }\r\n\r\n    const setVersionSources = (versionLabel, sources, setFirst) => {\r\n        if (sources && sources.length > 0) {\r\n            const newVersionSources = {\r\n                versionLabel: versionLabel,\r\n                sources: sources\r\n            };\r\n            if(setFirst) versionsSources.current.unshift(newVersionSources);\r\n            else versionsSources.current.push(newVersionSources);\r\n            setSelectedVersionSources(versionsSources.current[0].sources);\r\n        }\r\n    }\r\n\r\n    const clearVersionSources = () => {\r\n        versionsSources.current = [];\r\n        setSelectedVersionSources([]);\r\n        setSelectedVersionSourceLink('');\r\n    }\r\n\r\n    const changeSelectedSource = (index) => {\r\n        const newTab = [];\r\n        for (let i = 0; i < selectedVersionSources.length; i++) {\r\n            newTab.push(selectedVersionSources[i]);\r\n            newTab[i].selected = index == i;\r\n        }\r\n        setSelectedVersionSourceLink(\r\n            selectedVersionSources.length > 0 ? AppServices.torrentApiService.buildStreamUrl(selectedVersionSources[index].downloadUrl, '', selectedVersionSources[index].seasonNumber, selectedVersionSources[index].episodeNumber) \r\n            : '');\r\n        setSelectedVersionSources(newTab);\r\n    }\r\n\r\n    const searchVfSources = (mediaId, mediaTitle, mediaYear, seasonNumber, episodeNumber) => {\r\n        setVfSourcesSearching(true);\r\n        AppServices.torrentApiService.searchVFSources(mediaId, mediaTitle, mediaYear, seasonNumber, episodeNumber,\r\n            (sources) => {\r\n                setVfSourcesSearching(false);\r\n                if (sources && sources.length > 0) {\r\n                    setVersionSources(\"VF\", sources.map(source => ({...source, seasonNumber: seasonNumber, episodeNumber: episodeNumber})));\r\n                }\r\n\r\n            }, () => {\r\n                setVfSourcesSearching(false);\r\n            }\r\n        );\r\n    }\r\n\r\n    const searchVoSources = (title, year, imdbId, seasonNumber, episodeNumber) => {\r\n        setVoSourcesSearching(true);\r\n        AppServices.torrentApiService.searchVOSources(title, year, imdbId, seasonNumber, episodeNumber,\r\n            (sources) => {\r\n                setVoSourcesSearching(false);\r\n                if (sources && sources.length > 0) {\r\n                    setVersionSources(\"VO\", sources.map(source => ({...source, seasonNumber: seasonNumber, episodeNumber: episodeNumber})), true);\r\n                }\r\n            }, () => {\r\n                setVoSourcesSearching(false);\r\n            }\r\n        );\r\n    }\r\n\r\n    const getMediaProgression = (mediaId, seasonNumber, episodeNumber) => {\r\n        setMediaProgression({});\r\n        AppServices.watchedMediaApiService.getWatchedMedia(\r\n            mediaId,\r\n            seasonNumber,\r\n            episodeNumber,\r\n            (watchedMedia) => {\r\n                if(watchedMedia?.currentTime && watchedMedia?.totalDuration){\r\n                    setMediaProgression({\r\n                        progression: watchedMedia.currentTime/watchedMedia.totalDuration,\r\n                        remainingTime: watchedMedia.totalDuration - watchedMedia.currentTime,\r\n                        currentTime: watchedMedia.currentTime\r\n                    });\r\n                }\r\n            }\r\n        )\r\n    }\r\n    \r\n\r\n    const getAvailableSubtitles = (imdbCode, seasonNumber, episodeNumber) => {\r\n        setLoadingSubtitles(true);\r\n        AppServices.subtitlesApiService.getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber,\r\n            (availableSubtitles) => {\r\n                setMediaSubtitlesSources(availableSubtitles);\r\n                setTimeout(() => setLoadingSubtitles(false), 1000);\r\n            })\r\n    }\r\n\r\n    const bookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.addBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(false);\r\n        });\r\n    }\r\n\r\n    const unbookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.deleteBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(true);\r\n        });\r\n    }\r\n\r\n    const onWatchedTimeUpdate = (currentTime, duration) => {\r\n       AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, currentTime, duration, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n    }\r\n\r\n    const onRecommandedMediaClick = (mediaId) => {\r\n        navHistory.current.push(mediaDetails.id);\r\n        loadPage(mediaId);\r\n    }\r\n\r\n    const onBackClick = () => {      \r\n        if(navHistory.current.length > 0){\r\n            let lastMediaId = navHistory.current.pop();\r\n            loadPage(lastMediaId);\r\n        }\r\n        else \r\n            onCloseClick();\r\n    }\r\n\r\n    const onEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        clearVersionSources();\r\n        selectedEpisode.current = {\r\n            seasonNumber: seasonNumber,\r\n            episodeNumber: episodeNumber\r\n        };\r\n        searchVoSources(mediaDetails.title, mediaDetails.year, mediaDetails.imdbId, seasonNumber, episodeNumber);\r\n        searchVfSources(mediaDetails.id, mediaDetails.title, mediaDetails.year, seasonNumber, episodeNumber);\r\n        getAvailableSubtitles(mediaDetails.imdbId, seasonNumber, episodeNumber);\r\n        getMediaProgression(mediaDetails.id, seasonNumber, episodeNumber);  \r\n    }\r\n\r\n    return (\r\n        <div style={{ height: '100%' }}>          \r\n            <VideoPlayerWindow \r\n                visible={showMediaPlayer} \r\n                sources={selectedVersionSources} \r\n                subtitles={mediaSubtitlesSources} \r\n                onCloseClick={() => setShowMediaPlayer(false)}\r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)} \r\n                goToTime={mediaProgression?.currentTime}/> \r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={!dataLoaded} />\r\n            <ModalMediaTrailer visible={showMediaTrailer} youtubeTrailerUrl={mediaDetails.youtubeTrailerUrl} onCloseClick={() => setShowMediaTrailer(false)}/>\r\n\r\n            <div style={fadeTransition(dataLoaded)} className=\"media-presentation-page-container\">\r\n                <div className=\"back-btn\" onClick={() => onBackClick()}>\r\n                    <ArrowBackIcon className=\"back-arrow\" />\r\n                </div>\r\n                <div className=\"presentation\" style={{ backgroundImage: 'url(' + mediaDetails.backgroundImageUrl + ')' }}>\r\n                    <div className=\"info-container\">\r\n                        <div className=\"info\">\r\n                            <div className=\"title\">\r\n                                {\r\n                                    mediaDetails.logoImageUrl ? <img src={mediaDetails.logoImageUrl} /> : <Title text={mediaDetails.title} />\r\n                                }\r\n                            </div>\r\n                            <div className=\"info-content\">\r\n                                <Rating rating={mediaDetails.rating} size=\"50px\" />\r\n                                <SecondaryInfo center text={mediaDetails.year  + \" | \" + (mediaDetails.duration ? ToTimeFormat(mediaDetails.duration) + \" | \" : '') +  mediaDetails.genre} />\r\n                                <MediaProgression mediaProgression={mediaProgression?.progression} remainingTime={mediaProgression?.remainingTime}/>\r\n                                <div className=\"horizontal\">\r\n                                    <TrailerButton visible={mediaDetails?.youtubeTrailerUrl} onClick={() => setShowMediaTrailer(true)} />\r\n                                    <AddBookmarkButton onClick={() => bookmarkMedia()} visible={addBookmarkButtonVisible} />\r\n                                    <RemoveBookmarkButton onClick={() => unbookmarkMedia()} visible={!addBookmarkButtonVisible} />\r\n                                </div>\r\n                                <div className=\"play-options\">\r\n                                    <EpisodeSelector \r\n                                        serieId={mediaDetails.id} \r\n                                        seasonsCount={mediaDetails.seasonsCount} \r\n                                        onEpisodeSelected={(seasonNumber, episodeNumber) => onEpisodeSelected(seasonNumber, episodeNumber)}/>\r\n                                    <AvailableSubtitles loading={loadingSubtitles} availableSubtitlesSources={mediaSubtitlesSources} />\r\n                                    <AvailableVersions\r\n                                        loading={voSourcesSearching || vfSourcesSearching}\r\n                                        availableVersionsSources={versionsSources.current}\r\n                                        onVersionSelected={(versionSources) =>{setSelectedVersionSourceLink(null);setSelectedVersionSources(versionSources.sources)} } />\r\n                                    <div style={fadeTransition(!(voSourcesSearching || vfSourcesSearching) && Boolean(selectedVersionSources) && selectedVersionSources.length > 0)} >\r\n                                        <QualitySelector versionSources={selectedVersionSources} onQualityChanged={(i) => changeSelectedSource(i)} />\r\n                                        <div className=\"horizontal\">\r\n                                            <PlayButton onClick={() => setShowMediaPlayer(true)} />\r\n                                            <PlayWithVLCButton \r\n                                                videoUrl={selectedVersionSourceLink}\r\n                                                onClick={() => {if(mediaDetails) AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, 0, 0, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber)}} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"extra\">\r\n                            <TitleAndContent title=\"Director\" content={mediaDetails.director} justify=\"left\" />\r\n                            <TitleAndContent title=\"Cast\" content={mediaDetails.cast} justify=\"left\" />\r\n                            <Paragraph text={mediaDetails.synopsis}></Paragraph>\r\n                            <MediasListLiteWithTitle \r\n                                medias={recommandedMedias} \r\n                                alignLeft\r\n                                listTitle=\"You may also like\" \r\n                                visible={recommandedMedias && recommandedMedias.length > 0} \r\n                                onMediaClick={(mediaId) =>  {onRecommandedMediaClick(mediaId)}}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default MediaFullPresentation;\r\n\r\n\r\nfunction MediaProgression({mediaProgression, remainingTime}){\r\n    if(mediaProgression > 0){\r\n        return (\r\n            <div>\r\n                <ProgressionBar width=\"100%\" value={mediaProgression * 100}/>\r\n                <SecondaryInfo  text={ToTimeFormat(remainingTime / 60) + ' remaining'} />\r\n            </div>\r\n        )\r\n    }\r\n    else \r\n        return null;\r\n}\r\n\r\nfunction AvailableSubtitles({ availableSubtitlesSources, loading }) {\r\n    const availableSubtitles = availableSubtitlesSources?.length > 0 ? availableSubtitlesSources.map(s => s.language).join(\", \") : 'No subtitles available';\r\n    const content = loading ? <CircularProgressBar color={'white'} size={'15px'} visible={true} /> : availableSubtitles;\r\n    return (\r\n        <TitleAndContent title=\"Subtitles\" content={content} />\r\n    )\r\n}\r\n\r\nfunction AvailableVersions({ availableVersionsSources, loading, onVersionSelected }) {\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    let content;\r\n\r\n    const onVersionClick = (index) => {\r\n        setSelectedIndex(index);\r\n        onVersionSelected(availableVersionsSources[index]);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(loading)\r\n            setSelectedIndex(0);\r\n    },[loading]);\r\n\r\n    if (loading)\r\n        content = <CircularProgressBar color={'white'} size={'15px'} visible={true} />;\r\n    else {\r\n        if (availableVersionsSources?.length > 0) {\r\n            content = availableVersionsSources.map((v, i) => <BaseButton\r\n                key={i}\r\n                color={selectedIndex == i ? \"red\" : \"grey\"}\r\n                content={v.versionLabel}\r\n                onClick={() => onVersionClick(i)} />);\r\n        }\r\n        else\r\n            content = 'No version available';\r\n    }\r\n\r\n    return (\r\n        <TitleAndContent title=\"Versions\" content={content} />\r\n    )\r\n}\r\n\r\nfunction QualitySelector({ versionSources, onQualityChanged }) {\r\n    if (!versionSources || versionSources.length === 0)\r\n        return null;\r\n\r\n    const qualities = [];\r\n    versionSources.forEach(source => {\r\n\r\n        const nbSameQualities = qualities.filter(q => q.startsWith(source.quality)).length;\r\n        qualities.push(source.quality + (nbSameQualities > 0 ? \" (\" + nbSameQualities + \")\" : \"\"));\r\n    });\r\n\r\n    const content = <DropDown\r\n        values={qualities}\r\n        width=\"120px\"\r\n        onValueChanged={(index) => onQualityChanged(index)} />\r\n\r\n    return <TitleAndContent title=\"Qualities\" content={content} justify=\"left\"/>\r\n\r\n}\r\n\r\nfunction EpisodeSelector({serieId, seasonsCount, onEpisodeSelected}){\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1)\r\n    const [selectedEpisodeNumber, setSelectedEpisodeNumber] = useState(1)\r\n\r\n    useEffect(() => {\r\n        setSelectedSeasonNumber(1);\r\n        setSelectedEpisodeNumber(1);\r\n    },[seasonsCount]);\r\n\r\n    if(!seasonsCount)\r\n        return null;\r\n\r\n    const onButtonClick = () => {\r\n        setModalVisible(true);\r\n    }\r\n\r\n    const containerStyle = {\r\n        margin: '12px auto',\r\n    }\r\n\r\n    const handleEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        setSelectedSeasonNumber(seasonNumber);\r\n        setSelectedEpisodeNumber(episodeNumber);\r\n        onEpisodeSelected(seasonNumber, episodeNumber);\r\n        setModalVisible(false);\r\n    }\r\n\r\n    return <div style={containerStyle}>\r\n            <ModalEpisodeSelector \r\n                visible={modalVisible} \r\n                serieId={serieId} \r\n                numberOfSeasons={seasonsCount} \r\n                onEpisodeSelected={(seasonNumber, episodeNumber)=> handleEpisodeSelected(seasonNumber, episodeNumber)}\r\n                onCloseClick={()=> setModalVisible(false)}/>\r\n            <BaseButton \r\n                color=\"red\" \r\n                content={\"Season \" + selectedSeasonNumber + \" - Episode \" + selectedEpisodeNumber}\r\n                onClick={()=> onButtonClick()}/>\r\n        </div>\r\n}\r\n\r\n\r\n","\r\nfunction MediaPicturesPresentation({ media, visible, onClick }) {\r\n    return (\r\n        <div className={\"media-pictures \" + (!visible ? \"hidden\" : \"\")} onClick={() => onClick(media.id)}>\r\n            <div className=\"logo-title\">\r\n                <img src={media?.logoImageUrl}></img>\r\n            </div>\r\n            <img className=\"background-image\" src={media?.backgroundImageUrl}></img>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediaPicturesPresentation;","\r\n\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport MediaPicturesPresentation from \"../presentation/MediaPicturesPresentation\";\r\nimport { useEffect, useState } from 'react';\r\nimport \"../../../style/media-pictures-presentation.css\";\r\n\r\n\r\nfunction MediasOfToday({ medias, onClick }) {\r\n    const [mediaIndexVisible, setMediaIndexVisible] = useState(0);\r\n    const [carouselPlay, setCarouselPlay] = useState(false);\r\n\r\n    useEffect(() =>{\r\n        if(medias && medias.length > 0)\r\n            setCarouselPlay(true);\r\n    }, [medias]);\r\n\r\n    useEffect(() => {\r\n        var changeMedia;\r\n        if (carouselPlay) {\r\n            changeMedia = setTimeout(() => {\r\n                if (mediaIndexVisible === medias?.length - 1)\r\n                    setMediaIndexVisible(0)\r\n                else setMediaIndexVisible(mediaIndexVisible + 1);\r\n            }, 5000);\r\n        }\r\n\r\n        return () => {\r\n            clearTimeout(changeMedia);\r\n        }\r\n    }, [mediaIndexVisible, carouselPlay]);\r\n\r\n\r\n    return (\r\n        <div className=\"medias-pictures-container\">\r\n            {medias?.map((media, index) =>\r\n                <MediaPicturesPresentation\r\n                    key={index}\r\n                    media={media}\r\n                    visible={index === mediaIndexVisible}\r\n                    onClick={() => onClick(media.id)} />)}\r\n            <div className=\"medias-pictures-nav-controls\">\r\n                <MediaPicturesCarousel\r\n                    nbMedias={medias?.length}\r\n                    selectedIndex={mediaIndexVisible}\r\n                    onNavElementClick={(index) => setMediaIndexVisible(index)} />\r\n                <div className=\"medias-pictures-play-pause\" onClick={() => setCarouselPlay(!carouselPlay)}>\r\n                    <PlayArrowIcon className=\"icon\" style={{ display: carouselPlay ? 'none' : '' }} />\r\n                    <PauseIcon className=\"icon\" style={{ display: !carouselPlay ? 'none' : '' }} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasOfToday;\r\n\r\nfunction MediaPicturesCarousel({ nbMedias, selectedIndex, onNavElementClick }) {\r\n\r\n    const navElements = [];\r\n\r\n    for (let i = 0; i <= nbMedias - 1; i++)\r\n        navElements.push(i);\r\n\r\n    return (\r\n        <div className=\"medias-pictures-nav\">\r\n            {navElements.map((i) =>\r\n                <div key={i}\r\n                    onClick={() => onNavElementClick(i)}\r\n                    className={\"nav-elem\" + (selectedIndex === i ? ' selected' : '')}></div>)}\r\n        </div>\r\n    );\r\n}","const CacheService = {\r\n    cacheCollection: [],\r\n    setCache(id, data){\r\n        let cache = this.getCache(id);\r\n        if(!cache){\r\n            this.cacheCollection.push({\r\n                id: id,\r\n                data: data\r\n            }); \r\n        }\r\n        else\r\n            cache.data = data;\r\n    },\r\n    getCache(id){\r\n        return this.cacheCollection.find(c => c.id === id);\r\n    },\r\n    clearCache(){\r\n        this.cacheCollection = [];\r\n    }\r\n}\r\n\r\nexport default CacheService;","\r\nimport \"../style/home-page.css\";\r\nimport MediasOfToday from \"../components/media/list/MediasOfTodayList\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\n\r\nimport fadeTransition from \"../services/customStyles.js\";\r\nimport AppServices from \"../services/AppServices\";\r\nimport CacheService from \"../services/cacheService\";\r\nimport AppMode from \"../services/appMode\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\nfunction HomePage({ onMediaClick, onReady, onFail }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    const mediaListref = useRef([]);\r\n    const cacheIdRef = useRef(\"\");\r\n\r\n    const [mediaLists, setMediaLists] = useState([]);\r\n\r\n    const buildCacheId = (appMode) => {\r\n        return 'homepage' + appMode;\r\n    }\r\n\r\n    const todayTrendingTitle = \"todayTrending\"\r\n\r\n    const addMedias = (listTitle, medias, insertAtBeginning)=> {\r\n        if(medias && medias.length > 0){ \r\n            let data = {\r\n                title: listTitle,\r\n                medias: medias\r\n            }\r\n            if(insertAtBeginning)mediaListref.current.unshift(data);\r\n            else mediaListref.current.push(data);\r\n            CacheService.setCache(cacheIdRef.current, mediaListref.current);\r\n            const newArray = [...mediaListref.current];\r\n            setMediaLists(newArray);\r\n        }\r\n    };\r\n\r\n    const loadContent = () => {\r\n        cacheIdRef.current = buildCacheId(AppMode.getActiveMode().label);\r\n\r\n        let cache = CacheService.getCache(cacheIdRef.current);\r\n        mediaListref.current = [];\r\n\r\n        if(cache){\r\n            mediaListref.current = cache.data;\r\n            setMediaLists(mediaListref.current);\r\n            setDataLoaded(true);\r\n        }\r\n        else{\r\n            AppServices.searchMediaService.getMediasOfToday(\r\n            (medias) => {\r\n                addMedias(todayTrendingTitle, medias);\r\n                setDataLoaded(true);\r\n                onReady();\r\n            });\r\n            AppServices.searchMediaService.getPopularMedias((medias)=>{\r\n                addMedias(\"Popular \" + AppMode.getActiveMode().label.toLocaleLowerCase(), medias, true);\r\n            }, ()=>{\r\n                onFail();\r\n            });\r\n            AppServices.searchMediaService.getRecommandedMedias(null, (medias)=>{\r\n                addMedias(\"Recommanded for you\", medias, true);\r\n            });\r\n            AppServices.searchMediaService.getPopularNetflixMedias((medias)=>{\r\n                addMedias(\"Popular on Netflix\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularDisneyPlusMedias((medias)=>{\r\n                addMedias(\"Popular on Disney Plus\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAmazonPrimeMedias((medias)=>{\r\n                addMedias(\"Popular on Amazon Prime\", medias);\r\n            });\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadContent();\r\n        AppMode.onAppModeChanged(()=>{\r\n            loadContent();\r\n        });\r\n    },[]);\r\n\r\n    return (\r\n        <div style={{height: '100%'}}>\r\n            <CircularProgressBar position={\"center\"} visible={!dataLoaded} color={\"white\"} size={\"60px\"}/>\r\n            <div className=\"home-page-container\" style={fadeTransition(dataLoaded)}>\r\n                <MediasOfToday medias={mediaLists.find(list => list.title === todayTrendingTitle)?.medias} onClick={(mediaId) => onMediaClick(mediaId)}/>\r\n                <div className=\"blur-divider\"></div>    \r\n                 {mediaLists.filter(list => list.title !== todayTrendingTitle).map((mediasList) =>\r\n                (\r\n                    <MediasListLiteWithTitle\r\n                        key={mediasList.title}\r\n                        visible={true}\r\n                        listTitle={mediasList.title}\r\n                        medias={mediasList.medias}\r\n                        onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                ))}    \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import \"../../../style/media-intermediate-presentation.css\";\r\n\r\nimport MediaLitePresentation from \"./MediaLitePresentation\";\r\nimport ProgressionBar from \"../../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../../common/text/SecondaryInfo\";\r\n\r\nfunction MediaIntermediatePresentation({ media, onClick }) {\r\n    const truncateText = (text) =>{\r\n        if(text && text.length > 400) return text.substring(0, 300) + '...';\r\n        else return text;\r\n    };\r\n\r\n    return (\r\n        <div className=\"media-intermediate-presentation-container\" onClick={() => onClick()}>\r\n            <MediaLitePresentation media={media} />\r\n            <div className=\"media-intermediate-presentation-content\">\r\n                <div className=\"media-intermediate-presentation-info\">\r\n                    <SecondaryInfo text={truncateText(media.synopsis)} />\r\n                    {media.seasonNumber && media.episodeNumber ? <SecondaryInfo text={\"Season \" + media.seasonNumber + \" - Episode \" + media.episodeNumber}/>: null}\r\n                    {media.totalDuration && media.currentTime ? <ProgressionBar value={(media.currentTime/media.totalDuration) * 100} width=\"100%\"/> : null}\r\n                </div>\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default MediaIntermediatePresentation;","import \"../../../style/media-intermediate-list.css\";\r\n\r\nimport MediaIntermediatePresentation from \"../presentation/MediaIntermediatePresentation\";\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\nimport { useEffect } from 'react';\r\n\r\nfunction MediasIntermediatePresentationList({ title, medias, centerToMedia, loadingProgressVisible, onClick }) {\r\n\r\n    useEffect(() => {\r\n        if (centerToMedia) {\r\n            var index = medias.findIndex(m => m.id === centerToMedia.id);\r\n            var elem = document.getElementById(\"mediaintermediatepresentation\" + index);\r\n            if (elem) {\r\n                elem.scrollIntoView({\r\n                    block: \"nearest\",\r\n                    inline: \"nearest\"\r\n                });\r\n            }\r\n        }\r\n    }, [medias, centerToMedia]);\r\n\r\n    return (\r\n        <div>\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={loadingProgressVisible} />          \r\n            <div className=\"media-intermediate-list-title-page\">{title}</div>\r\n            <div className=\"media-intermediate-list-content\">\r\n                {medias.map((media, index) =>\r\n                (<div id={\"mediaintermediatepresentation\" + index} key={index}>\r\n                    <MediaIntermediatePresentation\r\n                        media={media}\r\n                        onClick={() => onClick(media)}/>\r\n                </div>))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediasIntermediatePresentationList;","import AppServices from \"../services/AppServices\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from \"../services/appMode.js\";\r\n\r\nvar watchedMediaLastClicked = null;\r\n\r\nfunction WatchedMediasPage({centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            watchedMediaLastClicked = null;\r\n\r\n            AppServices.watchedMediaApiService.getWatchedMedias((medias) => {\r\n            setLoadingVisible(false);\r\n            if (medias && medias.length > 0)\r\n                setMedias(medias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleClick = (media) => {\r\n        watchedMediaLastClicked = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={medias && medias.length > 0 ? \"You can see here the \" + mediaLabel + \" you have watched\" : \"No \" + mediaLabel + \" watched\"}\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={medias}\r\n            centerToMedia={watchedMediaLastClicked}\r\n            onClick={(media) => handleClick(media)} />\r\n    )\r\n}\r\n\r\n\r\nexport default WatchedMediasPage;","import AppServices from \"../services/AppServices\";\r\nimport AppMode from \"../services/appMode.js\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\n\r\nvar lastClickedMedia = null;\r\n\r\nfunction BookmarkedMediasPage({ centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [mediasBookmarks, setMediasBookmarks] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            lastClickedMedia = null;\r\n\r\n            AppServices.bookmarkApiService.getBookmarkedMedias((bookmarkedMedias) => {\r\n            setLoadingVisible(false);\r\n            if (bookmarkedMedias && bookmarkedMedias.length > 0)\r\n                setMediasBookmarks(bookmarkedMedias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleMediaClick = (media) => {\r\n        lastClickedMedia = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={mediasBookmarks && mediasBookmarks.length > 0 ? \"You can see here the \" + mediaLabel + \" you have bookmarked\" : \"No bookmarked \" + mediaLabel }\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={mediasBookmarks}\r\n            centerToMedia={lastClickedMedia}\r\n            onClick={(media) => handleMediaClick(media)}/>\r\n    )\r\n}\r\n\r\n\r\nexport default BookmarkedMediasPage;","import \"../../style/text-input.css\";\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../services/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nfunction TextInput({ placeHolder, onTextChanged, large, value}){\r\n\r\n    useEffect(()=>{\r\n        setText(value);\r\n    },[value]);\r\n\r\n    const [text, setText] = useState('');\r\n\r\n    const onValueChanged = (value) => {\r\n        setText(value);\r\n        onTextChanged(value);\r\n    }\r\n\r\n    return (\r\n        <div className=\"text-input-container\">\r\n            <div className={\"text-input \" + (large ? 'large' : '')}>\r\n                <TextField value={text} onChange={(e) => { onValueChanged(e.target.value) }} placeholder={ placeHolder } />\r\n                <ClearIcon style={fadeTransition(text)} className='delete-text-cross' onClick={() => { onValueChanged('') }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TextInput;","import \"../style/search-view.css\";\r\n\r\nimport MediasListLite from \"../components/media/list/MediasListLite\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport TextInput from '../components/common/TextInput';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nconst cacheResearch = {\r\n    searchValue: '',\r\n    result: [],\r\n    save(searchValue, medias){\r\n        this.searchValue = searchValue;\r\n        this.result = medias;\r\n    },\r\n    clean(){\r\n        this.searchValue = '';\r\n        this.result = [];\r\n    }\r\n}; \r\n\r\nfunction ResearchPage({ loadFromCache, onMediaClick }) {\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [medias, setMedias] = useState([]);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n\r\n    const searchValueRef = useRef(searchValue);\r\n\r\n    const searchResultLabelReducer = (state, mediasLength) => {\r\n        if (mediasLength === 0) return \"Nothing found\";\r\n        else if (mediasLength === 1) return \"one result\";\r\n        else if (mediasLength > 1) return mediasLength + \" results\";\r\n        else return \"\";\r\n    };\r\n    const [searchResultLabel, searchResultLabelDispatch] = useReducer(searchResultLabelReducer, '');\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache && searchValue === cacheResearch.searchValue)\r\n            return;\r\n\r\n        searchValueRef.current = searchValue;\r\n        if (searchValue && searchValue.length > 2) {\r\n            setTimeout(() => {\r\n                if (searchValue === searchValueRef.current) {\r\n                    setSearchInProgress(true);\r\n                    searchResultLabelDispatch(-1);                \r\n                    setMedias([]);\r\n                    cacheResearch.clean();\r\n                    AppServices.searchMediaService.searchMedias(searchValue,\r\n                        (medias) => {\r\n                            setSearchInProgress(false);\r\n                            if(searchValueRef.current && searchValue === searchValueRef.current){\r\n                                searchResultLabelDispatch(medias.length);\r\n                                if (medias && medias.length > 0){\r\n                                    setMedias(medias);\r\n                                    cacheResearch.save(searchValue, medias);\r\n                                } \r\n                            }\r\n                        },\r\n                        () => {\r\n                            setSearchInProgress(false);\r\n                            searchResultLabelDispatch(0);\r\n                        });\r\n                }\r\n            }, 1000);\r\n        }\r\n        else {\r\n            searchResultLabelDispatch(-1);\r\n            setMedias([]);\r\n        }\r\n    }, [searchValue]);\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache){\r\n            setMedias(cacheResearch.result);\r\n            searchResultLabelDispatch(cacheResearch.result.length);\r\n            setSearchValue(cacheResearch.searchValue);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"search-view-container\">    \r\n            <TextInput placeHolder=\"Type here to start search...\" large onTextChanged={(text) => { setSearchValue(text) }} />\r\n            <CircularProgressBar color={'white'} size={'40px'} visible={searchInProgress} />\r\n            <div className=\"medias-search-result\">\r\n                <MediasListLite medias={medias} onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                <div className=\"label-result\">{searchResultLabel}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ResearchPage;","import BaseButton from './BaseButton';\r\n\r\nfunction OpenButton({ onClick, visible }) {\r\n\r\n    if(!visible)\r\n        return null;\r\n\r\n    const content = <div>Open</div>;\r\n\r\n    return (\r\n        <BaseButton content={content} centered color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default OpenButton;","\r\nimport \"../style/torrent-link-page.css\";\r\n\r\nimport TextInput from '../components/common/TextInput';\r\nimport OpenButton from '../components/common/buttons/OpenButton';\r\nimport CircularProgressBar from '../components/common/CircularProgressBar';\r\nimport PlayButton from '../components/common/buttons/PlayButton';\r\nimport PlayWithVLCButton from '../components/common/buttons/PlayWithVLCButton';\r\nimport { VideoPlayerWindow } from '../components/video/VideoPlayerWindow';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction TorrentLinkPage() {\r\n\r\n    const [torrentLink, setTorrentLink] = useState('');\r\n    const torrentLinkRef = useRef('');\r\n    const [openingTorrentLink, setOpeningTorrentLink] = useState(false);\r\n    const [openingHistory, setOpeningHistory] = useState(false);\r\n    const [torrentHistory, setTorrentHistory] = useState([]);\r\n    const [torrentFiles, setTorrentFiles] = useState([]);\r\n    const [selectedFile, setSelectedFile] = useState('');\r\n    const [loadingMessage, setLoadingMessage] = useState('');\r\n\r\n    const [showMoviePlayer, setShowMoviePlayer] = useState(false);\r\n\r\n    const [movieSources, setMovieSources] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        setMovieSources([{\r\n            quality: 'Movie',\r\n            downloadUrl: torrentLink,\r\n            fileName: selectedFile\r\n        }]);\r\n\r\n        if (!torrentLink)\r\n            getTorrentHistory();\r\n\r\n        torrentLinkRef.current = torrentLink;\r\n            \r\n    }, [torrentLink, selectedFile]);\r\n\r\n    const getTorrentHistory = () => {\r\n        setOpeningHistory(true);\r\n        setLoadingMessage('Loading history');\r\n        AppServices.torrentApiService.getTorrentHistory(\r\n            (files) => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory(files);\r\n            },\r\n            () => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory([]);\r\n            });\r\n    };\r\n\r\n    const changeTorrentLink = (torrentLink) => {\r\n        setOpeningTorrentLink(false);\r\n        setSelectedFile('');\r\n        setTorrentLink(torrentLink);\r\n        setTorrentFiles([]);\r\n    };\r\n\r\n    const openTorrent = () => {\r\n        setTorrentFiles([]);\r\n        setOpeningTorrentLink(true);\r\n        setLoadingMessage('Opening torrent');\r\n        \r\n        AppServices.torrentApiService.getTorrentFiles(torrentLink,\r\n            (response) => {\r\n                if(torrentLinkRef.current === response.link){\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles(response.files);\r\n                }\r\n            },\r\n            (response) => {\r\n                if(torrentLinkRef.current === response?.link){\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles([]);\r\n                }\r\n            });\r\n    };\r\n\r\n    const onPlayFileClick = (file) => {\r\n        setSelectedFile(file);\r\n        setShowMoviePlayer(true);\r\n    }\r\n\r\n    const torrentFilesAreLoadingOrLoaded = () => {\r\n        return openingTorrentLink || (torrentFiles && torrentFiles.length > 0);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"torrent-link-page-container\">\r\n            <div className=\"title\">Enter a torrent url or magnet and click on Open to see the list of files</div>\r\n            <TextInput placeHolder=\"Torrent link or magnet...\" large onTextChanged={(text) => changeTorrentLink(text)} value={torrentLink}/>\r\n\r\n            <div style={{ margin: \"10px 0\" }}>\r\n                <OpenButton visible={!torrentFilesAreLoadingOrLoaded()} onClick={() => openTorrent()} />\r\n                {Boolean(openingTorrentLink) || Boolean(openingHistory) ? <CircularProgressBar visible size=\"30px\" color=\"white\" text={loadingMessage}/> : null}\r\n            </div>\r\n            <TorrentHistory visible={!torrentFilesAreLoadingOrLoaded()} files={torrentHistory} onClick={(torrentLink) => {changeTorrentLink(torrentLink)}}/>\r\n            <TorrentFilesList visible={torrentFilesAreLoadingOrLoaded()} torrentLink={torrentLink} files={torrentFiles} onPlayFileClick={(file) => onPlayFileClick(file)} />\r\n\r\n            <VideoPlayerWindow visible={showMoviePlayer} sources={movieSources} onCloseClick={() => setShowMoviePlayer(false)} onWatchedTimeUpdate={()=> {}}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TorrentLinkPage;\r\n\r\nfunction TorrentFilesList({ visible, torrentLink, files, onPlayFileClick }) {\r\n    if(!visible)\r\n        return null;\r\n\r\n    return <FilesList \r\n        torrentLink={torrentLink}\r\n        files={files}\r\n        onPlayFileClick={(file) => onPlayFileClick(file)}\r\n        contentType=\"fileFromTorrent\"\r\n        listTitle=\"Torrent files\" />\r\n}\r\n\r\nfunction TorrentHistory({ visible, files, onClick }) {\r\n    if(!visible)\r\n        return null;\r\n\r\n    return <FilesList \r\n        files={files}\r\n        onFileClick={(torrentLink) => onClick(torrentLink)}\r\n        contentType=\"torrentFile\"\r\n        listTitle=\"Last opened torrent files\" />\r\n}\r\n\r\nfunction FilesList({ torrentLink, files, onFileClick, onPlayFileClick, contentType, listTitle }) {\r\n\r\n    const [selectedFileIndex, setSelectedFileIndex] = useState(null);\r\n\r\n    useEffect(() => {\r\n        setSelectedFileIndex(null);\r\n    }, [files]);\r\n\r\n\r\n    if (!files || files.length === 0)\r\n        return null;\r\n\r\n    const fileListContainerStyle = {\r\n        width: '50%'\r\n    };\r\n\r\n    const fileListStyle = {\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)',\r\n        borderRadius: '15px',\r\n        padding: '5px 0',\r\n        maxHeight: '300px',\r\n        overflowY: 'auto'\r\n    };\r\n\r\n    const textStyle = {\r\n        padding: '10px 7px',\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        borderRadius: '7px',\r\n        cursor: 'pointer'\r\n    };\r\n\r\n    const selectedTextStyle = {\r\n        ...textStyle,\r\n        background: 'linear-gradient(90deg, rgba(187,0,0,1) 0%, rgba(193,76,76,1) 35%, rgba(0,0,0,1) 100%)'\r\n    };\r\n\r\n    const titleStyle = {\r\n        ...textStyle,\r\n        fontSize: '20px',\r\n        color: '#858585'\r\n    };\r\n\r\n\r\n    const getComponent = (file, index) => {\r\n        if(contentType === 'fileFromTorrent'){\r\n            return <FileFromTorrent \r\n                        torrentLink={torrentLink}\r\n                        file={file} \r\n                        isSelected={index === selectedFileIndex} \r\n                        onClick={()=> setSelectedFileIndex(index)}\r\n                        onPlayFileClick={() => onPlayFileClick(file)}/>\r\n        }\r\n        else if(contentType === 'torrentFile'){\r\n            return <TorrentLink file={file} onClick={(torrentLink) => onFileClick(torrentLink)}/>\r\n        }\r\n    };\r\n\r\n    const onMouseHover = (index, enter) => {\r\n        if (index !== selectedFileIndex){\r\n            const element = document.getElementById('idfile_' + index);\r\n            element.style.background = enter ? '#362b2b' : '';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={fileListContainerStyle}>\r\n            <div style={titleStyle}>{listTitle}</div>\r\n            <div style={fileListStyle}>\r\n            {files.map((file, index) =>\r\n                <div\r\n                    id={'idfile_' + index}\r\n                    key={index}\r\n                    onMouseEnter={() => { onMouseHover(index, true) }}\r\n                    onMouseLeave={() => { onMouseHover(index, false) }} style={index === selectedFileIndex ? selectedTextStyle : textStyle}>\r\n                    {getComponent(file, index)}\r\n                </div>\r\n            )}\r\n            </div>\r\n        </div>\r\n      \r\n    )\r\n}\r\n\r\nfunction FileFromTorrent({ torrentLink, file, isSelected, onClick, onPlayFileClick }) {\r\n    let playButtons = null;\r\n    if (isSelected) {\r\n        playButtons = (\r\n            <div className=\"play-buttons-container\">\r\n                <PlayButton onClick={() => onPlayFileClick()} />\r\n                <PlayWithVLCButton videoUrl={AppServices.torrentApiService.buildStreamUrl(torrentLink, file)} />\r\n            </div>)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            onClick={() => onClick()}>\r\n            {file}\r\n            {playButtons}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction TorrentLink({ file, onClick }) {\r\n    const dateStyle = {\r\n        textAlign: 'left',\r\n        color: 'grey'\r\n    };\r\n\r\n    const formateDate = (fullDateTime) => {\r\n        const today = new Date();\r\n        \r\n        const yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n        const date = new Date(fullDateTime);\r\n\r\n        let day = '';\r\n        if(yesterday.toDateString() === date.toDateString())\r\n            day = 'Yesterday';\r\n        else if(today.toDateString() === date.toDateString())\r\n            day = 'Today';\r\n        else {\r\n            let options = {year: \"numeric\", month: \"long\", day: \"numeric\"};\r\n            day = date.toLocaleString('en-US', options);\r\n        }\r\n          \r\n        const time = date.toLocaleTimeString(navigator.language, {\r\n            hour: '2-digit',\r\n            minute:'2-digit',\r\n            hour12: false\r\n          });\r\n        return day + ', ' + time;\r\n    }\r\n\r\n    return (\r\n        <div onClick={() => onClick(file.link)}>\r\n                <div style={dateStyle}>{formateDate(file.lastOpenedDateTime)}</div>\r\n                <div style={{textAlign: 'left'}}>{file.link}</div>\r\n        </div>\r\n    );\r\n}","\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction Router({ components, activeComponentId }) {\r\n\r\n    const [activeComponent, setActiveComponent] = useState({});\r\n\r\n    useEffect(()=>{\r\n        var component = components.find(c => c.id === activeComponentId);\r\n        if(component) setActiveComponent(component);\r\n    },[components, activeComponentId]);\r\n\r\n    return <div style={activeComponent?.containerStyle}>{activeComponent?.render}</div>;\r\n}\r\n\r\nexport default Router;","import './App.css';\r\nimport NavBar from \"./components/navbar/NavBar\";\r\nimport SplashScreen from \"./components/SplashScreen\";\r\nimport ModalListGenre from \"./components/modal/ModalListGenre.js\";\r\n\r\nimport MediaListGenrePage from \"./pages/MediaListGenrePage\";\r\nimport MediaPresentationPage from \"./pages/MediaPresentationPage\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport WatchedMediasPage from \"./pages/WatchedMediasPage\";\r\nimport BookmarkedMediasPage from \"./pages/BookmarkedMediasPage\";\r\nimport ResearchPage from \"./pages/ResearchPage\";\r\nimport TorrentLinkPage from \"./pages/TorrentLinkPage\";\r\n\r\nimport AppServices from './services/AppServices';\r\nimport Router from \"./components/Router\";\r\nimport { useState } from 'react';\r\n\r\n\r\nfunction App() {\r\n  AppServices.init();\r\n\r\n  const [selectedGenre, setSelectedGenre] = useState(null);\r\n  const [loadFullListGenrefromCache, setLoadFullListGenrefromCache] = useState(false);\r\n\r\n  const [loadResearchfromCache, setLoadResearchfromCache] = useState(false);\r\n\r\n  const [centerToLastClickedBookmark, setCenterToLastClickedBookmark] = useState(false);\r\n  const [centerToLastClickedWatchedMedia, setCenterToLastClickedWatchedMedia] = useState(false);\r\n\r\n  const [splashscreenVisible, setSplashscreenVisible] = useState(true);\r\n  const [homePageFailed, setHomePageFailed] = useState(false);\r\n\r\n  const [modalListGenresVisible, setModalListGenresVisible] = useState(false);\r\n\r\n  const [mediaId, setMediaId] = useState('');\r\n\r\n  const showComponent = (componentId) => {\r\n    setRouterPreviousComponentId(routerActiveComponentId);\r\n    setRouterActiveComponentId(componentId);\r\n  }\r\n\r\n  const showMediasFullListofGenre = (genre) => {\r\n    setSelectedGenre(genre);\r\n    setLoadFullListGenrefromCache(false);\r\n    showComponent(routerIds.mediasListGenrePage);\r\n  }\r\n\r\n  const showMediaFullPresentation = (mediaId) => {\r\n    setMediaId(mediaId);\r\n    showComponent(routerIds.mediaPresentationPage);\r\n  }\r\n\r\n  const goToPreviousComponent = () => {\r\n    showComponent(routerPreviousComponentId);\r\n  }\r\n\r\n  const onMediaFullPresentationClose = () => {\r\n    setLoadFullListGenrefromCache(true);\r\n    setCenterToLastClickedBookmark(true);\r\n    setCenterToLastClickedWatchedMedia(true);\r\n    setLoadResearchfromCache(true);\r\n    goToPreviousComponent();\r\n  }\r\n\r\n  const routerIds = {\r\n    homePage: 'homePage',\r\n    mediasListGenrePage: 'mediasOfGenre',\r\n    mediaPresentationPage: 'mediaPresentationPage',\r\n    watchedMediasListPage: 'watchedMediasListPage',\r\n    bookmarkedMediasListPage: 'bookmarkedMediasListPage',\r\n    researchPage: 'researchPage',\r\n    torrentLinkPage: 'torrentLinkPage'\r\n  }\r\n\r\n  const router = {\r\n    components: [\r\n      {\r\n        id: routerIds.homePage,\r\n        render: (<HomePage\r\n          onReady={() => { setSplashscreenVisible(false) }}\r\n          onFail={() => { setHomePageFailed(true)}}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.mediasListGenrePage,\r\n        render: (<MediaListGenrePage\r\n          genre={selectedGenre}\r\n          loadFromCache={loadFullListGenrefromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n        containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediaPresentationPage,\r\n        containerStyle: { height: '100%'},\r\n        render: (<MediaPresentationPage\r\n          mediaId={mediaId}\r\n          onCloseClick={() => onMediaFullPresentationClose()} />)\r\n      },\r\n      {\r\n        id: routerIds.watchedMediasListPage,\r\n        render: (<WatchedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedWatchedMedia}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.bookmarkedMediasListPage,\r\n        render: (<BookmarkedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedBookmark}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.researchPage,\r\n        render: (<ResearchPage loadFromCache={loadResearchfromCache}  onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.torrentLinkPage,\r\n        render: (<TorrentLinkPage />)\r\n      }\r\n    ]\r\n  };\r\n  const [routerActiveComponentId, setRouterActiveComponentId] = useState(routerIds.homePage);\r\n  const [routerPreviousComponentId, setRouterPreviousComponentId] = useState(routerIds.homePage);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <SplashScreen visible={splashscreenVisible} showErrorMessage={homePageFailed}/>\r\n      <ModalListGenre\r\n        visible={modalListGenresVisible}\r\n        onGenreClick={(genre) => { setModalListGenresVisible(false); showMediasFullListofGenre(genre) }}\r\n        onCloseClick={() => setModalListGenresVisible(false)}\r\n      />\r\n      <NavBar\r\n        onSearchClick={() => { setLoadResearchfromCache(false); setRouterActiveComponentId(routerIds.researchPage) }}\r\n        onHomeClick={() => setRouterActiveComponentId(routerIds.homePage)}\r\n        onGenreMenuClick={() => setModalListGenresVisible(true)}\r\n        onWatchedMediasClick={() => { setCenterToLastClickedWatchedMedia(false); setRouterActiveComponentId(routerIds.watchedMediasListPage) }}\r\n        onBookmarkedMediasClick={() => { setCenterToLastClickedBookmark(false); setRouterActiveComponentId(routerIds.bookmarkedMediasListPage) }}\r\n        onTorrentLinkClick={()=>{ setRouterActiveComponentId(routerIds.torrentLinkPage) }}\r\n        onAppModeSwitch={()=> {setRouterActiveComponentId(routerIds.homePage)}}/>\r\n      <div className=\"app-content\">\r\n        <Router components={router.components} activeComponentId={routerActiveComponentId} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}
{"version":3,"sources":["assets/logo.png","services/appMode.js","components/navbar/NavBar.js","helpers/customStyles.js","components/common/CircularProgressBar.js","components/SplashScreen.js","components/modal/ModalWindow.js","services/api/baseApiService.js","services/api/searchMediaApiService.js","services/api/bookmarkApiService.js","services/api/watchedMediaApiService.js","services/api/torrentApiService.js","services/api/subtitlesApiService.js","services/api/appInfoApiService.js","services/AppServices.js","components/modal/ModalCategories.js","components/common/Rating.js","components/media/presentation/MediaLitePresentation.js","services/cacheService.js","components/media/list/MediasCategorieList.js","pages/MediaListGenrePage.js","pages/MediaListPlatformPage.js","components/modal/ModalMediaTrailer.js","components/common/TitleAndContent.js","components/common/ProgressionBar.js","components/common/text/SecondaryInfo.js","components/common/text/Paragraph.js","components/common/buttons/BaseButton.js","helpers/customHooks.js","components/common/DropDown.js","helpers/timeFormatHelper.js","components/modal/ModalEpisodeSelector.js","components/modal/ModalVersionAndQualitySelector.js","components/video/videoPlayerComponents/VideoSubtitles.js","components/video/videoPlayerComponents/Slider.js","components/video/videoPlayerComponents/TimeController.js","components/video/videoPlayerComponents/LeftControlsGroup.js","components/video/videoPlayerComponents/Options.js","components/video/videoPlayerComponents/RightControlsGroup.js","components/video/videoPlayerComponents/Controls.js","components/video/VideoPlayer.js","components/video/VideoPlayerWindow.js","components/common/buttons/TrailerButton.js","components/common/text/Title.js","components/common/buttons/CopyButton.js","components/common/buttons/PlayWithVLCButton.js","components/common/buttons/BookmarkButton.js","components/common/buttons/PlayButton.js","components/media/list/MediasListLite.js","components/media/list/MediasListLiteWithTitle.js","pages/MediaPresentationPage.js","components/media/presentation/MediaPicturesPresentation.js","components/media/list/MediasOfTodayList.js","pages/HomePage.js","components/media/presentation/MediaIntermediatePresentation.js","components/media/list/MediasIntermediatePresentationList.js","pages/WatchedMediasPage.js","pages/BookmarkedMediasPage.js","components/common/TextInput.js","pages/ResearchPage.js","components/common/buttons/OpenButton.js","pages/TorrentLinkPage.js","components/Router.js","App.js","reportWebVitals.js","index.js"],"names":["AppMode","onAppModeChanged","callback","eventName","this","modeChangedEvent","Event","document","addEventListener","e","modes","label","urlKey","isActive","getActiveMode","find","mode","switchActiveMode","forEach","dispatchEvent","isSeriesMode","console","log","filter","NavBar","_ref","onSearchClick","onHomeClick","onGenreMenuClick","onWatchedMediasClick","onBookmarkedMediasClick","onTorrentLinkClick","onAppModeSwitch","setModes","useState","useEffect","navBarIconStyle","color","width","height","_jsxs","className","children","_jsx","map","onClick","switchAppMode","updatedModes","alt","src","logo","HomeIcon","style","VisibilityIcon","BookmarkIcon","ViewModuleIcon","SearchIcon","LinkIcon","fadeTransition","visible","speedTransition","zIndex","transitionStyle","visibility","opacity","transition","CircularProgressBar","position","size","text","positionStyle","setpositionStyle","displayedText","setDisplayedText","top","left","transform","textAlign","fontSize","fontWeigth","CircularProgress","SplashScreen","showErrorMessage","display","ModalWindow","content","onCloseClick","ClearIcon","BaseApiService","constructor","_apiBaseUrl","buildUrl","relativePath","getRequest","url","parameters","deserializeResult","onSuccess","onFail","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","result","response","JSON","parse","length","i","parameter","name","value","open","send","postRequest","setRequestHeader","putRequest","obj","stringify","Boolean","deleteRequest","SearchMediaApiService","buildSearchUrl","getMediaGenres","getMediaPlatforms","getPopularMediasByGenre","genreId","getMediasOfToday","getMediasByGenre","page","getMediasByPlatform","platformId","getMediaDetails","id","searchMedias","getPopularNetflixMedias","getPopularDisneyPlusMedias","getPopularAmazonPrimeMedias","getPopularAppleTvMedias","getPopularMedias","getRecommandedMedias","getSimilarMedias","mediaId","getEpisodes","serieId","seasonNumber","BookmarkApiService","buildBookmarkUrl","getBookmarkedMedias","addBookmarkedMedia","mediaDto","deleteBookmarkedMedia","isMediaBookmarked","WatchedMediaApiService","buildWatchedMediaUrl","getWatchedMedias","getWatchedMedia","episodeNumber","getWatchedEpisodes","saveWacthedMedia","mediaDetails","currentTime","duration","sourceUrl","watchedMedia","totalDuration","URL","torrentUrl","window","atob","searchParams","get","TorrentApiService","buildTorrentUrl","buildStreamUrl","fileName","base64Url","btoa","searchTorrents","title","year","imdbid","encodeURIComponent","getDownloadState","streamUrl","getTorrentFiles","getTorrentHistory","SubtitlesApiService","buildSubtitlesUrl","getAvailableSubtitles","imdbCode","getSubtitlesApiUrl","subtitlesSourceUrl","AppInfoApiService","buildAppInfoUrl","isDesktopApplication","isDesktopApp","self","playWithVlc","AppServices","init","searchMediaService","bookmarkApiService","watchedMediaApiService","torrentApiService","subtitlesApiService","appInfoApiService","ModalCategories","onGenreClick","onPlatformClick","loading","setLoading","listGenres","setListGenres","listPlatforms","setListPlatforms","loadCategories","genres","platforms","genre","Rating","rating","fontWeight","margin","backgroundColor","borderRadius","alignItems","justifyContent","MediaLitePresentation","media","onMediaClick","hoverEffect","dataLoaded","setDataLoaded","coverImageUrl","setTimeout","backgroundImage","toString","replace","maxLength","substring","truncate","CacheService","cacheCollection","setCache","data","cache","getCache","push","c","clearCache","MediasCategorieList","categorie","searchOperation","loadFromCache","medias","setMedias","pageIndex","setPageIndex","searchInProgress","setSearchInProgress","plusButtonVisible","setPlusButtonVisible","performSearch","mediasOfCategories","concat","getCacheId","categorieId","cacheMedias","scrollToMedia","mediaElementId","elemId","elem","getElementById","scrollIntoView","block","inline","index","handleMediaClick","elementId","AddIcon","MediasListGenrePage","platform","ModalMediaTrailer","youtubeTrailerUrl","trailerStyle","border","boxShadow","TitleAndContent","justify","containerStyle","marginRight","ProgressionBar","progressionStyle","SecondaryInfo","center","Paragraph","BaseButton","centered","rounded","showRippleEffect","setShowRippleEffect","computeClass","useOnClickOutside","ref","handler","listener","event","current","contains","target","removeEventListener","DropDown","values","onValueChanged","textAlignement","showList","setShowList","selectedValue","setSelectedValue","dropDownValues","setDropDownValues","dropdownRef","useRef","shouldUpdateDropDownValues","nbDifferentValues","v","listStyle","bottom","maxHeight","overflowY","buttonContentStyle","buttonContent","ArrowDropDownOutlinedIcon","listElementStyle","padding","cursor","onMouseOver","onMouseOut","OnElementClick","ToTimeFormat","totalMinutes","totalHours","hours","Math","trunc","minutes","timeFormat","ModalEpisodeSelector","numberOfSeasons","onEpisodeSelected","selectedSeasonNumber","setSelectedSeasonNumber","episodes","setEpisodes","isLoading","setIsLoading","noEpisodeMessageVisible","setNoEpisodeMessageVisible","episodeListRef","seasonNumberList","scrollTop","loadEpisodesProgress","episodesOfSeason","watchedEpisodes","newTab","watchedEpisode","episode","ep","progression","selectedIndex","Episode","_ref2","imagePath","runTime","overview","ModalVersionAndQualitySelector","torrents","onQualityClick","setContent","torrentsByLanguage","Set","t","languageVersion","language","sortedTorrents","torrent","sort","t1","t2","quality1","quality2","quality","toLowerCase","trim","computeQualityLabel","torrentIndex","findIndex","downloadUrl","qualityIndex","slice","versionsAndQualitiesTable","l","j","selected","selectedTorrent","VideoSubtitles","videoCurrentTime","urlSource","subtitlesAdjustTime","currentSubtitles","setCurrentSubtitles","subtitles","setSubtitles","textItalic","setTextItalic","responseText","subtitle","s","startTime","endTime","includes","applySubtitles","fontStyle","Slider","progressColor","cursorColor","tooltip","onCursorMoved","onCursorEndMove","onMouseOverSlider","cursorPosition","setCursorPosition","showToolTip","setShowToolTip","positionToPercentage","XPosition","railBoundings","right","moveCursor","percentage","clientX","parentElement","getBoundingClientRect","endMove","onSliderClick","onMouseMove","onMouseMoveOverSlider","onMouseLeave","onMouseDown","TimeController","videoDuration","onTimeChanged","videoCurrentTimeLabel","setVideoCurrentTimeLabel","videoRemainingTimeLabel","setVideoRemainingTimeLabel","currentPourcentageTimeVideo","setcurrentPourcentageTimeVideo","setTooltip","totalTime","setTotalTime","getTimeLabel","floor","seconds","hourValues","time","VideoPlayerSlider","newTime","changeTimeVideo","setTimeControllerTooltip","LeftControlsGroup","videoIsPlaying","onPlayClick","onPauseClick","onVolumeChanged","onPlayBackwardClick","onPlayForwardClick","showPlayButton","setShowPlayButton","PlayArrowIcon","PauseIcon","VolumeController","newVolume","Replay10Icon","Forward10Icon","currentVolumeRef","previousVolume","setPreviousVolume","changeVolume","onKeyboardPress","keyCode","VolumeUp","VolumeOffIcon","VideoOptions","options","icon","onOptionChanged","menuOptions","setMenuOptions","menuSubOptions","setMenuSubOptions","showMenu","setShowMenu","showSubMenu","setShowSubMenu","selectedOption","setSelectedOption","selectedSubOption","setSelectedSubOption","updateMenuOptions","_selectedOption$subOp","oldSelectedOption","op","oldSelectedSubOption","subOptions","subOp","updatedOptions","updatedOption","updatedSubOptions","updatedsubOption","option","onMouseEnter","getOptionDisplay","subOption","getSubOptionDisplay","VideoOptionsButton","hide","RightControlsGroup","subtitlesOptions","qualityOptions","onSubtitleSizeChange","onSubtitlesChange","onAdjustSubtitleTimeChange","onVideoQualityChange","isFullScreen","onFullScreenStateChanged","videoInFullscreen","setVideoInFullscreen","changeFullScreenState","fullscreen","SubtitlesIcon","_option$data","AdjustSubtitleTimeOption","SortByAlphaIcon","SettingsIcon","_option$data2","FullscreenIcon","FullscreenExitIcon","menuRef","type","step","onChange","valueAsNumber","RestoreIcon","Controls","videoSubtitlesOptions","videoQualitiesOptions","pixelsToAdd","newUrlSource","VideoPlayer","_videoRef$current8","onWatchedTimeUpdate","videoTime","videoRef","videoPlayerContainerRef","watchedTimeUpdateTriggeredRef","setIsFullScreen","setCurrentTime","errorMessage","setErrorMessage","checkDownloadStateRef","videoDownloadState","setVideoDownloadState","videoSource","setVideoSource","videoIsLoading","setVideoIsLoading","setVideoIsPlaying","subtitlesUrl","setSubtitlesUrl","subtitlesSize","setSubtitlesSize","setSubtitlesAdjustTime","showVideoControls","setShowVideoControls","lastTimeMouseMovedRef","checkMovieDownloadState","_videoRef$current","decodeURIComponent","error","message","changeVideoSource","autoplay","paused","load","changeVideoTime","displayControls","Date","now","waitingTime","playVideo","play","pauseVideo","pause","videoErrorHandler","_videoRef$current2","attributes","onVideoReady","onVideoPlaying","onVideoPaused","onVideoWaiting","onTimeUpdated","_videoRef$current3","_videoRef$current4","_videoRef$current5","round","onFullScreenChange","fullscreenElement","_videoRef$current6","_videoRef$current7","_videoQuality$data","videoQuality","volume","changeVideoVolume","fullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","VideoPlayerWindow","sources","goToTime","setSubtitlesOptions","setVideoQualitiesOptions","resumeMessageVisible","setResumeMessageVisible","setVideoTime","setIsDesktopApp","showLoadingModal","setShowLoadingModal","source","resumeToTime","synopsis","mediaType","optionsJSON","chrome","webview","onDesktopVideoPlayerClosed","postMessage","webkit","messageHandlers","medflixWebViewHandler","source1","source2","qualities","o","startsWith","buildVideoQualitiesOptions","newSubtitlesOptions","sub","subtitlesOption","subtitlesSourceUrls","buildSubtitlesOptions","ResumeMessage","resumeTime","onNoClick","onYesClick","VideoPlayerContainer","_ref3","TrailerButton","TrailerIcon","marginLeft","Title","CopyButton","FilterNoneIcon","PlayWithVLCButton","videoUrl","showModal","setShowModal","isWebApp","setIsWebApp","ModalForVlc","container","background","ModalContent","launchPlay","inputLinkUrlRef","outline","textOverflow","readOnly","flexDirection","vertical","select","execCommand","getSelection","removeAllRanges","AddBookmarkButton","BookmarkButton","insideIcon","RemoveBookmarkButton","RemoveIcon","contentStyle","insideIconStyle","PlayButton","MediasListLite","alignLeft","listRef","hideBackArrow","setHideBackArrow","hideForwardArrow","setHideForwardArrow","onscroll","showHideNavArrows","isElementVisible","boundings","elemBoundings","getVisibleRange","indexes","listBoundings","max","min","navToLeft","visibleRange","goToIndex","minIndex","count","behavior","ArrowBackIosRounded","navToRight","maxIndex","ArrowForwardIosRounded","MediasListLiteWithTitle","listTitle","MediaFullPresentation","_mediaDetails$genres","_torrents$current2","setMediaDetails","mediaProgression","setMediaProgression","torrentSearching","setTorrentSearching","updateSelectedTorrent","setUpdateSelectedTorrent","selectedVersionSources","setSelectedVersionSources","videoSourceUrl","setVideoSourceUrl","mediaSubtitlesSources","setMediaSubtitlesSources","loadingSubtitles","setLoadingSubtitles","showMediaPlayer","setShowMediaPlayer","showMediaTrailer","setShowMediaTrailer","addBookmarkButtonVisible","setAddBookmarkButtonVisible","similarMedias","setSimilarMedias","navHistory","selectedEpisode","loadPage","imdbId","getElementsByClassName","_torrents$current","torrentToSelect","changeSelectedTorrent","details","getMediaProgression","recommandedMedias","refreshedTorrentsList","remainingTime","availableSubtitles","onBackClick","lastMediaId","pop","ArrowBackIcon","backgroundImageUrl","logoImageUrl","join","MediaProgression","EpisodeSelector","seasonsCount","AvailableItems","itemsList","emptyMessage","QualitySelector","onQualityChanged","director","cast","onRecommandedMediaClick","availableItems","_ref4","modalQualitySelectorVisible","setModalQualitySelectorVisible","selectedVersionAndQuality","setSelectedVersionAndQuality","_ref5","modalVisible","setModalVisible","selectedEpisodeNumber","setSelectedEpisodeNumber","handleEpisodeSelected","MediaPicturesPresentation","MediasOfToday","mediaIndexVisible","setMediaIndexVisible","carouselPlay","setCarouselPlay","changeMedia","clearTimeout","MediaPicturesCarousel","nbMedias","onNavElementClick","navElements","HomePage","_mediaLists$find","onReady","mediaListref","cacheIdRef","mediaLists","setMediaLists","todayTrendingTitle","addMedias","insertAtBeginning","unshift","newArray","loadContent","appMode","buildCacheId","toLocaleLowerCase","list","mediasList","MediaIntermediatePresentation","MediasIntermediatePresentationList","centerToMedia","loadingProgressVisible","m","watchedMediaLastClicked","WatchedMediasPage","centerToLastClickedMedia","loadingVisible","setLoadingVisible","mediaLabel","handleClick","lastClickedMedia","BookmarkedMediasPage","mediasBookmarks","setMediasBookmarks","bookmarkedMedias","TextInput","placeHolder","onTextChanged","large","setText","TextField","placeholder","cacheResearch","searchValue","save","clean","ResearchPage","setSearchValue","searchValueRef","searchResultLabel","searchResultLabelDispatch","useReducer","searchResultLabelReducer","state","mediasLength","OpenButton","TorrentLinkPage","torrentLink","setTorrentLink","torrentLinkRef","openingTorrentLink","setOpeningTorrentLink","openingHistory","setOpeningHistory","torrentHistory","setTorrentHistory","torrentFiles","setTorrentFiles","selectedFile","setSelectedFile","loadingMessage","setLoadingMessage","showMoviePlayer","setShowMoviePlayer","movieSources","setMovieSources","files","changeTorrentLink","torrentFilesAreLoadingOrLoaded","link","TorrentHistory","TorrentFilesList","onPlayFileClick","file","FilesList","contentType","onFileClick","selectedFileIndex","setSelectedFileIndex","textStyle","selectedTextStyle","titleStyle","getComponent","FileFromTorrent","isSelected","TorrentLink","onMouseHover","enter","playButtons","fullDateTime","today","yesterday","setDate","getDate","date","day","toDateString","month","toLocaleString","toLocaleTimeString","navigator","hour","minute","hour12","formateDate","lastOpenedDateTime","Router","components","activeComponentId","activeComponent","setActiveComponent","component","render","App","selectedGenre","setSelectedGenre","loadFullListGenrefromCache","setLoadFullListGenrefromCache","selectedPlatform","setSelectedPlatform","loadFullListPlatformfromCache","setLoadFullListPlatformfromCache","loadResearchfromCache","setLoadResearchfromCache","centerToLastClickedBookmark","setCenterToLastClickedBookmark","centerToLastClickedWatchedMedia","setCenterToLastClickedWatchedMedia","splashscreenVisible","setSplashscreenVisible","homePageFailed","setHomePageFailed","modalListCategoriesVisible","setModalListCategoriesVisible","setMediaId","showComponent","componentId","setRouterPreviousComponentId","routerActiveComponentId","setRouterActiveComponentId","showMediaFullPresentation","routerIds","mediaPresentationPage","onMediaFullPresentationClose","routerPreviousComponentId","homePage","mediasListGenrePage","mediasListPlatformPage","watchedMediasListPage","bookmarkedMediasListPage","researchPage","torrentLinkPage","router","MediaListGenrePage","MediaListPlatformPage","MediaPresentationPage","showMediasFullListofGenre","showMediasFullListofPlatform","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","React","StrictMode"],"mappings":"0MAAe,G,kBAAA,82F,sGCuCAA,MAvCC,CACZC,iBAAiBC,GACb,MAAMC,EAAY,iBACbC,KAAKC,mBACND,KAAKC,iBAAmB,IAAIC,MAAMH,IACtCI,SAASC,iBAAiBL,GAAYM,IAC9BP,GACAA,GAAU,IACf,EACP,EACAG,iBAAkB,KAClBK,MAAO,CACH,CACIC,MAAO,QACPC,OAAQ,SACRC,UAAU,GAEd,CACIF,MAAO,SACPC,OAAQ,SACRC,UAAU,IAGlBC,gBACI,OAAOV,KAAKM,MAAMK,MAAKC,GAAQA,EAAKH,UACxC,EACAI,mBACIb,KAAKM,MAAMQ,SAAQF,IACfA,EAAKH,UAAYG,EAAKH,QAAQ,IAE9BT,KAAKC,kBACLE,SAASY,cAAcf,KAAKC,iBACpC,EACAe,eAEI,OADAC,QAAQC,IAAI,2CAA4ClB,KAAKM,MAAMa,QAAOP,GAAQA,EAAKH,YACzB,WAAvDT,KAAKM,MAAMa,QAAOP,GAAQA,EAAKH,WAAU,GAAGD,MACvD,G,OCyBWY,MAlDf,SAAeC,GAAwI,IAAvI,cAAEC,EAAa,YAAEC,EAAW,iBAAEC,EAAgB,qBAAEC,EAAoB,wBAAEC,EAAuB,mBAAEC,EAAkB,gBAAEC,GAAiBP,EAEhJ,MAAOf,EAAOuB,GAAYC,mBAAS,IAEnCC,qBAAU,KACNF,EAASjC,EAAQU,MAAM,GACzB,IAEF,MAOM0B,EAAkB,CACpBC,MAAO,QACPC,MAAO,OACPC,OAAQ,QAGZ,OACIC,eAAA,OAAKC,UAAU,oBAAmBC,SAAA,CAC9BC,cAAA,OAAKF,UAAU,eAAcC,SACxBhC,EAAMkC,KAAI5B,GAAQ2B,cAAA,OAAsBF,UAAW,SAAWzB,EAAKH,SAAW,SAAW,IAAKgC,QAASA,KAAU7B,EAAKH,UAhB7GiC,MAClB9C,EAAQiB,mBACR,MAAM8B,EAAe,IAAI/C,EAAQU,OACjCuB,EAASc,GACTf,EAAgBhC,EAAQc,gBAAgB,EAYgGgC,EAAe,EAAEJ,SAAE1B,EAAKL,OAA3HK,EAAKL,WAEtCgC,cAAA,OAAKF,UAAU,eAAeO,IAAI,GAAGC,IAAKC,IAC1CV,eAAA,OAAKC,UAAU,gBAAeC,SAAA,CAC1BC,cAAA,OAAKF,UAAU,cAAcI,QAASA,IAAMlB,IAAce,SACtDC,cAACQ,IAAQ,CAACC,MAAOhB,MAErBO,cAAA,OAAKF,UAAU,cAAcI,QAASA,IAAMhB,IAAuBa,SAC/DC,cAACU,IAAc,CAACD,MAAOhB,MAE3BO,cAAA,OAAKF,UAAU,cAAcI,QAASA,IAAMf,IAA0BY,SAClEC,cAACW,IAAY,CAACF,MAAOhB,MAEzBO,cAAA,OAAKF,UAAU,cAAcI,QAASA,IAAMjB,IAAmBc,SAC3DC,cAACY,IAAc,CAACH,MAAOhB,MAE3BO,cAAA,OAAKF,UAAU,cAAcI,QAASA,IAAMnB,IAAgBgB,SACxDC,cAACa,IAAU,CAACJ,MAAOhB,MAEvBO,cAAA,OAAKF,UAAU,cAAcI,QAASA,IAAMd,IAAqBW,SAC7DC,cAACc,IAAQ,CAACL,MAAOhB,WAKrC,E,iBC5CesB,MAhBf,SAAwBC,EAASC,EAAiBC,GAG9C,MAAMC,EAAkB,CAChBC,WAAYJ,EAAU,UAAY,SAClCK,QAASL,EAAU,IAAM,IACzBM,WAAY,QALRL,EAAkBA,EAAkB,IAAM,SAYtD,OAJGC,IACCC,EAAgBD,OAASF,EAAUE,EAAS,MAGzCC,CACX,EC2BeI,MArCf,SAA4BzC,GAA4C,IAA3C,SAAE0C,EAAQ,MAAE9B,EAAK,KAAE+B,EAAI,QAAET,EAAO,KAAEU,GAAM5C,EAEjE,MAAO6C,EAAeC,GAAoBrC,mBAAS,CAAC,IAC7CsC,EAAeC,GAAoBvC,qBAwB1C,OAhBAC,qBAAU,KACW,WAAbgC,GACAI,EAAiB,CACbJ,SAAU,QACVO,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,UAAW,UAEnB,GACD,CAACV,IAEJhC,qBAAU,KACNsC,EAAiBJ,EAAK,GACvB,CAACA,IAGA1B,cAAA,OAAKS,MAAOM,EAAeC,GAASjB,SAChCF,eAAA,OAAKY,MAAOkB,EAAc5B,SAAA,CACtBC,cAAA,OAAKS,MAzBC,CACdf,MAAO,QACPyC,SAAU,OACVC,WAAY,QAsBkBrC,SAAE8B,IACxB7B,cAACqC,IAAgB,CAAC5B,MAAO,CAAEf,MAAOA,EAAOC,MAAO8B,EAAM7B,OAAQ,cAI9E,ECrBe0C,MAbf,SAAqBxD,GAA+B,IAA9B,QAACkC,EAAO,iBAAEuB,GAAiBzD,EAE7C,OACIe,eAAA,OAAKC,UAAW,2BAA6BkB,EAAU,GAAK,WAAWjB,SAAA,CACpEC,cAAA,OAAKK,IAAI,GAAGC,IAAKC,IACjBP,cAACuB,EAAmB,CAAC7B,MAAM,QAAQ+B,KAAK,OAAOT,SAAUuB,IACzDvC,cAAA,OAAKF,UAAU,gBAAgBW,MAAO,CAAC+B,QAASD,EAAmB,GAAK,QAAQxC,SAAC,yDAK5F,E,+BCCe0C,MAbf,SAAoB3D,GAAsC,IAArC,QAAEkC,EAAO,QAAE0B,EAAO,aAAEC,GAAc7D,EACnD,OACIkB,cAAA,OAAKS,MAAOM,EAAeC,GAAUlB,UAAW,0BAA4BkB,EAAU,WAAa,IAAIjB,SACnGF,eAAA,OAAKC,UAAU,uBAAsBC,SAAA,CACjCC,cAAA,OAAKF,UAAU,yBAAyBW,MAAO,CAAE+B,QAASG,EAAe,GAAK,QAAUzC,QAASA,IAAMyC,IAAe5C,SAClHC,cAAC4C,IAAS,CAAC9C,UAAU,kBAExB4C,MAIjB,ECqEeG,MApFf,MACIC,cACIrF,KAAKsF,YAAc,wBACrB,CAEFC,SAASC,GACL,OAAOxF,KAAKsF,YAAcE,CAC9B,CAEAC,WAAWC,EAAKC,EAAYC,EAAmBC,EAAWC,GACtD,MAAMC,EAAQ,IAAIC,eAelB,GAdAD,EAAME,mBAAqB,WACvB,GAAwB,IAApBjG,KAAKkG,WACL,GAAoB,MAAhBlG,KAAKmG,OAAgB,CACrB,IAAIC,EAASR,GAAqB5F,KAAKqG,SAAWC,KAAKC,MAAMvG,KAAKqG,UAAYrG,KAAKqG,SAC/ER,GACAA,EAAUO,EAClB,MAEQN,GACAA,GAGhB,EAEIH,GAAcA,EAAWa,OAAS,EAAG,CACrCd,GAAO,IACP,IAAK,IAAIe,EAAI,EAAGA,EAAId,EAAWa,OAAQC,IAAK,CACxC,MAAMC,EAAYf,EAAWc,GAC7Bf,GAAOgB,EAAUC,KAAO,IAAMD,EAAUE,MACpCH,IAAMd,EAAWa,OAAS,IAC1Bd,GAAO,IACf,CACJ,CAEAK,EAAMc,KAAK,MAAOnB,GAAK,GACvBK,EAAMe,MACV,CAEAC,YAAYrB,EAAKC,EAAYE,EAAWC,GACpC,MAAMC,EAAQ,IAAIC,eAClBD,EAAME,mBAAqB,WACC,IAApBjG,KAAKkG,aACe,MAAhBlG,KAAKmG,OACDN,GACAA,IAGAC,GACAA,IAGhB,EACAC,EAAMc,KAAK,OAAQnB,GAAK,GACxBK,EAAMiB,iBAAiB,eAAgB,qCACvCjB,EAAMe,KAAKnB,EACf,CAEAsB,WAAWvB,EAAKwB,EAAKrB,GACjB,MAAME,EAAQ,IAAIC,eAClBD,EAAMc,KAAK,MAAOnB,GAAK,GACvBK,EAAMiB,iBAAiB,eAAgB,oBACvCjB,EAAMe,KAAKR,KAAKa,UAAUD,IAE1BnB,EAAME,mBAAqB,WACC,IAApBjG,KAAKkG,YAAoC,MAAhBlG,KAAKmG,QAAkBiB,QAAQvB,IACxDA,GACR,CACJ,CAEAwB,cAAc3B,EAAKwB,EAAKrB,GACpB,IAAIE,EAAQ,IAAIC,eAChBD,EAAMc,KAAK,SAAUnB,GAAK,GAC1BK,EAAMiB,iBAAiB,eAAgB,oBACvCjB,EAAMe,KAAKR,KAAKa,UAAUD,IAE1BnB,EAAME,mBAAqB,WACC,IAApBjG,KAAKkG,YACe,MAAhBlG,KAAKmG,QACLN,GACZ,CACJ,GCeWyB,MA7Ff,cAAoClC,EAChCmC,eAAe7B,GACb,OAAO1F,KAAKuF,SAAS3F,EAAQc,gBAAgBF,OAAS,IAAMkF,EAC9D,CAEA8B,eAAe3B,EAAWC,GACxB,IAAIJ,EAAM1F,KAAKuH,eAAe,UAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC5C,CAEA2B,kBAAkB5B,EAAWC,GACzB,IAAIJ,EAAM1F,KAAKuH,eAAe,aAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEA4B,wBAAwBC,EAAS9B,EAAWC,GAC1C,IAAIJ,EAAM1F,KAAKuH,eAAe,SAAWI,GACzC3H,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC5C,CAEA8B,iBAAiB/B,EAAWC,GACxB,IAAIJ,EAAM1F,KAAKuH,eAAe,iBAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEA+B,iBAAiBF,EAASG,EAAMjC,EAAWC,GACvC,IAAIJ,EAAM1F,KAAKuH,eAAe,SAAWI,EAAU,IAAMG,GACzD9H,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEAiC,oBAAoBC,EAAYF,EAAMjC,EAAWC,GAC7C,IAAIJ,EAAM1F,KAAKuH,eAAe,YAAcS,EAAa,IAAMF,GAC/D9H,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEAmC,gBAAgBC,EAAIrC,EAAWC,GAC3B,IAAIJ,EAAM1F,KAAKuH,eAAe,WAAaW,GAC3ClI,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEAqC,aAAalE,EAAM4B,EAAWC,GAC1B,IAAIJ,EAAM1F,KAAKuH,eAAe,UAC1B5B,EAAa,CACb,CACIgB,KAAM,IACNC,MAAO3C,IAGfjE,KAAKyF,WAAWC,EAAKC,GAAY,EAAME,EAAWC,EACtD,CAEAsC,wBAAwBvC,EAAWC,GAC/B,IAAIJ,EAAM1F,KAAKuH,eAAe,WAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEAuC,2BAA2BxC,EAAWC,GAClC,IAAIJ,EAAM1F,KAAKuH,eAAe,cAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEAwC,4BAA4BzC,EAAWC,GACnC,IAAIJ,EAAM1F,KAAKuH,eAAe,eAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEAyC,wBAAwB1C,EAAWC,GAC/B,IAAIJ,EAAM1F,KAAKuH,eAAe,WAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEA0C,iBAAiB3C,EAAWC,GACxB,IAAIJ,EAAM1F,KAAKuH,eAAe,WAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEA2C,qBAAqB5C,EAAWC,GAC5B,IAAIJ,EAAM1F,KAAKuH,eAAe,mBAC9BvH,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEA4C,iBAAiBC,EAAS9C,EAAWC,GACjC,IAAIJ,EAAM1F,KAAKuH,eAAe,WAAYoB,GAC1C3I,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,CAEA8C,YAAYC,EAASC,EAAcjD,EAAWC,GAC1C,IAAIJ,EAAM1F,KAAKuH,eAAe,YAAasB,EAAU,IAAMC,GAC3D9I,KAAKyF,WAAWC,EAAK,IAAI,EAAMG,EAAWC,EAC9C,GC7DWiD,MA5Bf,cAAiC3D,EAC7B4D,iBAAiBtD,GACf,OAAO1F,KAAKuF,SAAS3F,EAAQc,gBAAgBF,OAAS,eAAiBkF,GAAY,IACrF,CAEAuD,oBAAoBpD,EAAWC,GAC3B9F,KAAKyF,WAAWzF,KAAKgJ,mBAAoB,IAAI,EAAMnD,EAAWC,EAClE,CAEAoD,mBAAmBC,EAAUtD,GACzB7F,KAAKiH,WAAWjH,KAAKgJ,mBAAoBG,EAAUtD,EACvD,CAEAuD,sBAAsBD,EAAUtD,GAC5B7F,KAAKqH,cAAcrH,KAAKgJ,mBAAoBG,EAAUtD,EAC1D,CAEAwD,kBAAkBV,EAAS9C,EAAWC,GAClC,IAAIH,EAAa,CACb,CACIgB,KAAM,KACNC,MAAO+B,IAGf3I,KAAKyF,WAAWzF,KAAKgJ,iBAAiB,UAAWrD,GAAY,EAAOE,EAAWC,EACnF,GCoBWwD,MA7Cf,cAAqClE,EACjCmE,qBAAqB7D,GACjB,OAAO1F,KAAKuF,SAAS3F,EAAQc,gBAAgBF,OAAS,kBAAoBkF,GAAY,IAC1F,CAEA8D,iBAAiB3D,EAAWC,GACxB9F,KAAKyF,WAAWzF,KAAKuJ,uBAAwB,IAAI,EAAM1D,EAAWC,EACtE,CAEA2D,gBAAgBd,EAASG,EAAcY,EAAe7D,EAAWC,GAC7D,MAAMH,EAAa,CACf,CACIgB,KAAM,eACNC,MAAOkC,GAEX,CACInC,KAAM,gBACNC,MAAO8C,IAIf1J,KAAKyF,WAAWzF,KAAKuJ,qBAAqBZ,GAAUhD,GAAY,EAAME,EAAWC,EACrF,CAEA6D,mBAAmBhB,EAASG,EAAcjD,EAAWC,GACjD9F,KAAKyF,WAAWzF,KAAKuJ,qBAAqBZ,EAAU,IAAMG,GAAe,IAAI,EAAMjD,EAAWC,EAClG,CAEA8D,iBAAiBC,EAAcC,EAAaC,EAAUjB,EAAcY,EAAeM,GAC/E,MAAMC,EAAe,IAAKJ,GAC1BI,EAAaH,YAAcA,GAA4B,EACvDG,EAAaC,cAAgBH,GAAsB,EAEnD,MAAMrE,EAAM,IAAIyE,IAAIH,GACpBC,EAAaG,WAAaC,OAAOC,KAAK5E,EAAI6E,aAAaC,IAAI,cAEpB,WAAnC5K,EAAQc,gBAAgBF,SACxByJ,EAAanB,aAAeA,EAC5BmB,EAAaP,cAAgBA,GAGjC1J,KAAKiH,WAAWjH,KAAKuJ,uBAAwBU,EACjD,GCqCWQ,MA/Ef,cAAgCrF,EAC5BsF,gBAAgBhF,GACZ,OAAO1F,KAAKuF,SAAS,YAAcG,GAAY,IACnD,CAEAiF,eAAejF,EAAKkF,EAAU9B,EAAcY,GACxC,MAAMmB,EAAYR,OAAOS,KAAKpF,GAE9B,OAAIkF,EACO5K,KAAK0K,gBAAgB,yBAA2BG,EAAY,aAAeD,GAC1C,WAAnChL,EAAQc,gBAAgBF,OACtBR,KAAK0K,gBAAgB,2BAA6BG,EAAY,iBAAmB/B,EAAe,kBAAoBY,GAEpH1J,KAAK0K,gBAAgB,2BAA6BG,EACjE,CAEAE,eAAepC,EAASqC,EAAOC,EAAMC,EAAQpC,EAAcY,EAAe7D,EAAWC,GACjF,IAAIJ,EAAM1F,KAAK0K,gBAAgB9K,EAAQc,gBAAgBF,QACnDmF,EAAa,CACb,CACIgB,KAAM,UACNC,MAAO+B,GAEX,CACIhC,KAAM,QACNC,MAAOuE,mBAAmBH,IAE9B,CACIrE,KAAM,OACNC,MAAOqE,GAEX,CACItE,KAAM,SACNC,MAAOkC,GAEX,CACInC,KAAM,UACNC,MAAO8C,GAEX,CACI/C,KAAM,SACNC,MAAOsE,IAIflL,KAAKyF,WAAWC,EAAKC,GAAY,EAAME,EAAWC,EACtD,CAEAsF,iBAAiBC,EAAWxF,EAAWC,GAGnC,IAAIH,EAAa,CACb,CACIgB,KAAM,mBACNC,MALI,IAAIuD,IAAIkB,GAKDd,aAAaC,IAAI,eAIpCxK,KAAKyF,WAAWzF,KAAK0K,gBAAgB,uBAAwB/E,GAAY,EAAME,EAAWC,EAC9F,CAEAwF,gBAAgBlB,EAAYvE,EAAWC,GAGnC,IAAIH,EAAa,CACb,CACIgB,KAAM,mBACNC,MALUyD,OAAOS,KAAKV,KAS9BpK,KAAKyF,WAAWzF,KAAK0K,gBAAgB,SAAU/E,GAAY,EAAME,EAAWC,EAChF,CAEAyF,kBAAkB1F,EAAWC,GACzB9F,KAAKyF,WAAWzF,KAAK0K,gBAAgB,WAAY,MAAM,EAAM7E,EAAWC,EAC5E,GC/CW0F,MA7Bf,cAAkCpG,EAC9BqG,kBAAkB/F,GACd,OAAO1F,KAAKuF,SAAS,cAAgBG,GAAY,IACrD,CAEAgG,sBAAsBC,EAAU7C,EAAcY,EAAe7D,EAAWC,GACpE,IAAIJ,EAAM1F,KAAKyL,kBAAkB7L,EAAQc,gBAAgBF,QACrDmF,EAAa,CACb,CACIgB,KAAM,WACNC,MAAO+E,GAEX,CACIhF,KAAM,eACNC,MAAOkC,GAEX,CACInC,KAAM,gBACNC,MAAO8C,IAGf1J,KAAKyF,WAAWC,EAAKC,GAAY,EAAME,EAAWC,EACtD,CAEA8F,mBAAmBC,GACf,OAAO7L,KAAKyL,kBAAkB,cAAgBI,EAClD,GCEWC,MA7Bf,cAAgC1G,EAC5B2G,gBAAgBrG,GACZ,OAAO1F,KAAKuF,SAAS,gBAAkBG,GAAY,IACvD,CAEAsG,qBAAqBnG,EAAWC,GAC5B,GAAI9F,KAAKiM,aAAcpG,EAAU7F,KAAKiM,kBACjC,CACD,MAAMC,EAAOlM,KACbA,KAAKyF,WAAWzF,KAAK+L,gBAAgB,YAAa,MAAM,GAAO1F,IAC3D6F,EAAKD,aAAe5F,EAAS2F,qBAC7BnG,EAAUQ,EAAS2F,qBAAqB,GACzClG,EACP,CACJ,CAEAqG,YAAYd,EAAWxF,EAAWC,GAE9B,IAAIH,EAAa,CACb,CACIgB,KAAM,YACNC,MAAOuE,mBAAmBE,KAIlCrL,KAAKyF,WAAWzF,KAAK+L,gBAAgB,YAAapG,GAAY,EAAOE,EAAWC,EACpF,GCVWsG,MAXK,CAChBC,OACIrM,KAAKsM,mBAAqB,IAAIhF,EAC9BtH,KAAKuM,mBAAqB,IAAIxD,EAC9B/I,KAAKwM,uBAAyB,IAAIlD,EAClCtJ,KAAKyM,kBAAoB,IAAIhC,EAC7BzK,KAAK0M,oBAAsB,IAAIlB,EAC/BxL,KAAK2M,kBAAoB,IAAIb,CACjC,GC0DWc,MAjEf,SAAwBvL,GAA4D,IAA3D,QAAEkC,EAAO,aAAE2B,EAAY,aAAE2H,EAAY,gBAAEC,GAAiBzL,EAC7E,MAAO0L,EAASC,GAAclL,oBAAS,IAChCmL,EAAYC,GAAiBpL,mBAAS,KACtCqL,EAAeC,GAAoBtL,mBAAS,IAE7CuL,EAAiBA,KACnBH,EAAc,IACdd,EAAYE,mBAAmB9E,gBAC1B8F,IACOA,GAAUA,EAAO9G,OAAS,GAC1B0G,EAAcI,EAClB,IAIRlB,EAAYE,mBAAmB7E,mBAC1B8F,IACOA,GAAaA,EAAU/G,OAAS,GAChC4G,EAAiBG,EACrB,GAEP,EAuCL,OArCAxL,qBAAU,KACNsL,IACAzN,EAAQC,kBAAiB,KACrBwN,GAAgB,GAClB,GACH,IAEHtL,qBAAU,KACNiL,GAAYC,GAAoC,IAAtBA,EAAWzG,SAAiB2G,GAA0C,IAAzBA,EAAc3G,OAAa,GACnG,CAACyG,EAAYE,IA6BZ5K,cAACyC,EAAW,CAACzB,QAASA,EAAS0B,QAzB3B7C,eAAA,OAAKC,UAAU,iCAAgCC,SAAA,CAC3CC,cAACuB,EAAmB,CAAC7B,MAAO,QAAS+B,KAAM,OAAQD,SAAU,SAAUR,QAASwJ,IAChFxK,cAAA,MAAIF,UAAU,kBAAiBC,SAAC,WAChCC,cAAA,OAAKF,UAAU,kBAAiBC,SAC3B2K,EAAWzK,KAAIgL,GACZjL,cAAA,OACIF,UAAU,QACVI,QAASA,IAAMoK,EAAaW,GAAOlL,SAClCkL,EAAM7G,MAHD6G,EAAMtF,QAMxB3F,cAAA,MAAIF,UAAU,kBAAiBC,SAAC,cAChCC,cAAA,OAAKF,UAAU,kBAAiBC,SAC3B6K,EAAc3K,KAAIgL,GACfjL,cAAA,OACIF,UAAU,QACVI,QAASA,IAAMqK,EAAgBU,GAAOlL,SACrCkL,EAAM7G,MAHD6G,EAAMtF,WAW0BhD,aAAcA,IAAMA,KAEtF,E,qCClDeuI,MArBf,SAAepM,GAAoB,IAAnB,OAAEqM,EAAM,KAAE1J,GAAM3C,EAE5B,MAAM2B,EAAQ,CACVf,MAAO,QACPyC,SAAmB,UAATV,EAAmB,OAAS,OACtC2J,WAAY,OACZC,OAAQ,SACRC,gBAAiB,YACjBC,aAAc,MACd/I,QAAS,OACTgJ,WAAY,SACZC,eAAgB,SAChB7L,OAAiB,UAAT6B,EAAmB,OAAS,OACpC9B,MAAgB,UAAT8B,EAAmB,OAAS,QAGvC,OACIzB,cAAA,OAAKS,MAAOA,EAAMV,SAAEoL,GAE5B,ECiCeO,MA5Cf,SAA8B5M,GAAwC,IAAvC,MAAE6M,EAAK,aAAEC,EAAY,YAAEC,GAAa/M,EAC/D,MAAOgN,EAAYC,GAAiBxM,oBAAS,GAM7C,OAJAC,qBAAU,KACNuM,EAAmB,OAALJ,QAAK,IAALA,OAAK,EAALA,EAAOK,cAAc,GACpC,CAACL,IAEC9G,QAAa,OAAL8G,QAAK,IAALA,OAAK,EAALA,EAAOK,eAqBhBhM,cAAA,OAAKS,MAAOM,EAAe+K,GAAY/L,SACnCF,eAAA,OAAKC,UAAW,4BAA8B+L,EAAc,eAAiB,IAAK3L,QAASA,KAZ/F+L,YAAW,KACHL,GACAA,EAAkB,OAALD,QAAK,IAALA,OAAK,EAALA,EAAOhG,GAAG,GAC5B,IASgH,EAAA5F,SAAA,CAC3GC,cAAA,OAAKF,UAAW,8BAA+BW,MAAO,CAAEyL,gBAAiB,OAASP,EAAMK,cAAgB,KAAMjM,SAC1GC,cAAA,OAAKF,UAAU,SAAQC,SACnBC,cAACkL,EAAM,CAACC,QATDA,EAS2BQ,EAAMR,OARjDA,EAASA,EAAOgB,WAAWC,QAAQ,IAAK,KAAO,IAQW3K,KAAK,cAG9D5B,eAAA,OAAKC,UAAU,QAAOC,SAAA,CAClBC,cAAA,OAAKF,UAAU,QAAOC,UA1BpB2B,EA0B+BiK,EAAMlD,MA1B/B4D,EA0BsC,GAzBtD3K,GAAQA,EAAKuC,OAASoI,EACf3K,EAAK4K,UAAU,EAAGD,GAAa,MAC9B3K,KAwBA1B,cAAA,OAAKF,UAAU,OAAMC,SAAE4L,EAAMjD,eA7BlC,KAEM6D,IAAC7K,EAAM2K,EAaGlB,CAmB/B,EC7BeqB,MArBM,CACjBC,gBAAiB,GACjBC,SAAS/G,EAAIgH,GACT,IAAIC,EAAQnP,KAAKoP,SAASlH,GACtBiH,EAOAA,EAAMD,KAAOA,EANblP,KAAKgP,gBAAgBK,KAAK,CACtBnH,GAAIA,EACJgH,KAAMA,GAKlB,EACAE,SAASlH,GACL,OAAOlI,KAAKgP,gBAAgBrO,MAAK2O,GAAKA,EAAEpH,KAAOA,GACnD,EACAqH,aACIvP,KAAKgP,gBAAkB,EAC3B,GC0GWQ,MA/Gf,SAA4BnO,GAA+D,IAA9D,UAAEoO,EAAS,gBAAEC,EAAe,cAAEC,EAAa,aAAExB,GAAc9M,EAEpF,MAAOuO,EAAQC,GAAa/N,mBAAS,KAC9BgO,EAAWC,GAAgBjO,mBAAS,IACpCkO,EAAkBC,GAAuBnO,oBAAS,IAClDoO,EAAmBC,GAAwBrO,oBAAS,GASrDsO,EAAgBA,KAClBH,GAAoB,GACpBE,GAAqB,GACrBT,EAAgBD,EAAUvH,GAAI4H,GACzBO,IACGJ,GAAoB,GAChBI,GAAsBA,EAAmB7J,OAAS,IAClD2J,GAAqB,GACAN,EAAH,IAAdC,EAA2BO,EAChBT,EAAOU,OAAOD,IACjC,IAEJ,IAAMJ,GAAoB,IAAO,EAGnCM,EAAcC,GAAgB,YAAcA,EAElDzO,qBAAU,KACN,GAAI4N,EAAe,CACf,MAAMc,EAAc1B,EAAaK,SAASmB,EAAWd,EAAUvH,KAC/D6H,EAAaU,EAAYvB,KAAKY,UAClC,MAEIf,EAAaE,SAASsB,EAAWd,EAAUvH,IAAK,MAChD2H,EAAU,IACVE,EAAa,GACI,IAAdD,GAAiBM,GACxB,GACD,CAACX,EAAUvH,KAEdnG,qBAAU,KACN,GAAI+N,EAAY,EAAG,CACf,MAAMW,EAAc1B,EAAaK,SAASmB,EAAWd,EAAUvH,KAC3DuI,GAAeA,EAAYvB,KAAMW,EAAUY,EAAYvB,KAAKU,QAC3DQ,GACT,IACD,CAACN,IAEJ/N,qBAAU,KACN,GAAI6N,GAAUA,EAAOpJ,OAAS,EAC1B,GAAImJ,EAAe,CACf,MAAMc,EAAc1B,EAAaK,SAASmB,EAAWd,EAAUvH,KAC3DuI,GAAeA,EAAYvB,OAC3BiB,GAAqB,GACrBO,EAAcD,EAAYvB,KAAKyB,gBAC/B5B,EAAaE,SAASsB,EAAWd,EAAUvH,IAAK,MAExD,MACsB,IAAd4H,GAAkBY,EAAc,aAC5C,GACD,CAACd,IAEJ,MAAMc,EAAiBE,IACnB,IAAIC,EAAO1Q,SAAS2Q,eAAeF,GAC/BC,GACAA,EAAKE,eAAe,CAChBC,MAAO,UACPC,OAAQ,WAEhB,EAaJ,OACI7O,eAAA,OAAKC,UAAU,qCAAoCC,SAAA,CAC/CF,eAAA,OAAKC,UAAU,kCAAiCC,SAAA,CAC5CC,cAAA,OAAKF,UAAU,wBAAuBC,SAAEmN,EAAU9I,OAClDpE,cAACuB,EAAmB,CAACE,KAAM,OAAQ/B,MAAO,QAASsB,QAASyM,OAEhEzN,cAAA,OAAKF,UAAU,6BAA4BC,SACvCF,eAAA,OAAKC,UAAU,2BAA0BC,SAAA,CACpCsN,EAAOpN,KAAI,CAAC0L,EAAOgD,IACnB3O,cAAA,OAAK2F,GAAI,YAAcgJ,EAAM5O,SAC1BC,cAAC0L,EAAqB,CAACC,MAAOA,EAAOE,aAAa,EAAMD,aAAexF,GApBlEwI,EAACxI,EAASyI,KAC/B,MAAMlC,EAAO,CACTU,OAAQA,EACRE,UAAWA,EACXa,eAAgBS,GAEpBrC,EAAaE,SAASsB,EAAWd,EAAUvH,IAAKgH,GAChDf,EAAaxF,EAAQ,EAa8EwI,CAAiBxI,EAAS,YAAcuI,MAD3FA,KAGpC3O,cAAA,OAAKF,UAAU,mBAAkBC,SAC7BC,cAAA,OAAKF,UAAU,iBACXW,MAAO,CAAEW,WAAYuM,EAAoB,UAAY,UACrDzN,QAASA,KAAYyN,GAAoBH,EAAaD,EAAY,EAAG,EAAIxN,SACzEC,cAAC8O,IAAO,CAACrO,MA/FZ,CACjBd,MAAO,OACPC,OAAQ,OACRF,MAAO,QACP2L,OAAQ,qBAkGhB,ECzGe0D,MAXf,SAA4BjQ,GAA0C,IAAzC,MAAEmM,EAAK,cAAEmC,EAAa,aAAExB,GAAc9M,EAE/D,OACIkB,cAACiN,EAAmB,CAChBC,UAAWjC,EACXmC,cAAeA,EACfD,gBAAiBA,CAAC/H,EAASmI,EAAWjK,EAAWC,IAAWsG,EAAYE,mBAAmBzE,iBAAiBF,EAASmI,EAAWjK,EAAWC,GAC3IqI,aAAexF,GAAYwF,EAAaxF,IAEpD,ECEe2I,MAXf,SAA4BjQ,GAA6C,IAA5C,SAAEkQ,EAAQ,cAAE5B,EAAa,aAAExB,GAAc9M,EAElE,OACIkB,cAACiN,EAAmB,CAChBC,UAAW8B,EACX5B,cAAeA,EACfD,gBAAiBA,CAAC1H,EAAY8H,EAAWjK,EAAWC,IAAWsG,EAAYE,mBAAmBvE,oBAAoBC,EAAY8H,EAAWjK,EAAWC,GACpJqI,aAAexF,GAAYwF,EAAaxF,IAEpD,E,yBCUe6I,MAvBf,SAA0BnQ,GAA6C,IAA5C,QAACkC,EAAO,kBAAEkO,EAAiB,aAAEvM,GAAa7D,EAGjE,MAAMqQ,EAAe,CACbxP,MAAO,QACPC,OAAQ,QACRyL,OAAQ,SACRC,gBAAiB,QACjB8D,OAAQ,OACRC,UAAW,8BASnB,OACIrP,cAACyC,EAAW,CAACzB,QAASA,EAAS0B,QAL3B1C,cAAA,UAAQS,MAAO0O,EAAc7O,IAAKU,EAAUkO,EAAoB,KAKjBvM,aAAcA,IAAMA,KAE/E,ECYe2M,MAnCf,SAAwBxQ,GAA+B,IAC/C2M,GADiB,MAAEhD,EAAK,QAAE/F,EAAO,QAAE6M,GAASzQ,EAG5C2M,EADY,SAAZ8D,EACiB,aAEA,SAErB,MAAMC,EAAiB,CACnBrN,SAAU,OACViJ,WAAY,MACZ5I,QAAWE,EAAU,OAAS,OAC9B8I,WAAY,SACZC,eAAgBA,EAChBJ,OAAQ,oBAaZ,OACIxL,eAAA,OAAKY,MAAO+O,EAAezP,SAAA,CACvBC,cAAA,OAAKS,MAZM,CACff,MAAO,QACP+P,YAAa,QAUc1P,SAAE0I,IACzBzI,cAAA,OAAKS,MARQ,CACjBf,MAAO,UACP8C,QAAS,QAMoBzC,SAAE2C,MAIvC,ECVegN,MAvBf,SAAuB5Q,GAAiB,IAAhB,MAACuF,EAAK,MAAE1E,GAAMb,EAElC,MAAM0Q,EAAiB,CACnB7P,MAAOA,EACP2L,gBAAiB,UACjB1L,OAAQ,MACR2L,aAAc,OAGZoE,EAAmB,CACrBhQ,MAAO0E,EAAQ,IACfiH,gBAAiB,UACjB1L,OAAQ,OACR2L,aAAc,OAGlB,OACIvL,cAAA,OAAKS,MAAO+O,EAAezP,SACvBC,cAAA,OAAKS,MAAOkP,KAGxB,ECLeC,MAdf,SAAsB9Q,GAAiB,IAAhB,KAAC4C,EAAI,OAAEmO,GAAO/Q,EACjC,MAAM2B,EAAQ,CACV0B,SAAU,OACViJ,WAAY,MACZ1L,MAAO,UACPwC,UAAW2N,EAAS,SAAW,OAC/BxE,OAAQ,UAGZ,OACIrL,cAAA,OAAKS,MAAOA,EAAMV,SAAE2B,GAE5B,ECEeoO,MAhBf,SAAkBhR,GAAkB,IAAjB,KAAC4C,EAAI,QAAEV,GAAQlC,EAE9B,OAAe,IAAZkC,EACQ,KASPhB,cAAA,KAAGS,MAPO,CACV0B,SAAU,OACViJ,WAAY,MACZ1L,MAAO,SAISK,SAAE2B,GAE1B,EC2BeqO,OAtCf,SAAmBjR,GAAyD,IAAxD,MAAEY,EAAK,QAAEgD,EAAO,SAAEsN,EAAQ,QAAEC,EAAO,MAAEtQ,EAAK,QAAEO,GAASpB,EAErE,MAAOoR,EAAkBC,GAAuB5Q,oBAAS,GA4BzD,OACIM,eAAA,OAAKC,UAnBYsQ,MACjB,IAAItQ,EAAY,kBAIhB,OAHIJ,IAAOI,GAAa,IAAMJ,GAC1BsQ,IAAUlQ,GAAa,WACxBmQ,IAASnQ,GAAa,YAClBA,CAAS,EAcAsQ,GAAgB3P,MAV7Bd,EACQ,CACHA,MAAOA,GAIJ,KAI4CO,QAASA,KA1BhEiQ,GAAoB,QACpBlE,YAAW,KACPkE,GAAoB,GACpBjQ,GAAS,GACV,MAsBiFH,SAAA,CAChFC,cAAA,OAAKF,UAAW,kBAAoBoQ,EAAmB,UAAY,MAClExN,IAGb,E,oBCpCA,SAAS2N,GAAkBC,EAAKC,GAC5B/Q,qBACE,KACE,MAAMgR,EAAWC,IACVH,EAAII,UAAWJ,EAAII,QAAQC,SAASF,EAAMG,SAG/CL,EAAQE,EAAM,EAMhB,OAHA7S,SAASC,iBAAiB,YAAa2S,GACvC5S,SAASC,iBAAiB,aAAc2S,GAEjC,KACL5S,SAASiT,oBAAoB,YAAaL,GAC1C5S,SAASiT,oBAAoB,aAAcL,EAAS,CACrD,GAEH,CAACF,EAAKC,GAEV,CCmFaO,OArGf,SAAiBhS,GAAqD,IAApD,OAAEiS,EAAM,MAAEpR,EAAK,eAAEqR,EAAc,eAAEC,GAAgBnS,EAE/D,MAAOoS,EAAUC,GAAe5R,oBAAS,IAClC6R,EAAeC,GAAoB9R,mBAAS,KAC5C+R,EAAgBC,GAAqBhS,mBAAS,IAC/CiS,EAAcC,iBAAO,MAE3BjS,qBAAU,KACFkS,EAA2BX,KAC3BQ,EAAkBR,GAClBM,EAAiBN,EAAO,IAC5B,GACD,CAACA,IAEJV,GAAkBmB,GAAa,IAAML,GAAY,KAEjD,MAAMO,EAA8BX,IAChC,GAAIO,EAAerN,SAAW8M,EAAO9M,OACjC,OAAO,EAEX,IAAI0N,EAAoB,EAMxB,OALAL,EAAe/S,SAAQ,CAACqT,EAAG1N,KACnB6M,EAAO7M,KAAO0N,IACdD,GAAqB,EAAC,IAGvBA,EAAoB,CAAC,EAO1BE,EAAY,CACdrP,QAAS0O,EAAW,QAAU,OAC9B1P,SAAU,WACVsQ,OAAQ,IACR9P,KAAM,MACNC,UAAW,wBACXsJ,aAAc,MACd8D,UAAW,mEACX/D,gBAAiB,UACjB5L,MAAO,QACPyC,SAAU,OACViJ,WAAY,MACZ2G,UAAW,QACXpS,MAAOA,EACPqS,UAAW,SACX9Q,OAAQ,IACRgB,UAAW+O,GAAkC,QAG3CgB,EAAqB,CACvBzP,QAAS,OACTgJ,WAAY,SACZC,eAAgB,SAChB9L,MAAOA,GAGLuS,EACFrS,eAAA,OAAKY,MAAOwR,EAAmBlS,SAAA,CAC3BC,cAAA,OAAAD,SAAMqR,IACNpR,cAACmS,KAAyB,OAG5BC,EAAmB,CACrBC,QAAS,MACTC,OAAQ,WAiBZ,OACIzS,eAAA,OAAKyQ,IAAKkB,EAAa/Q,MAxDJ,CACnBe,SAAU,YAuDmCzB,SAAA,CACzCC,cAAC+P,GAAU,CAACrQ,MAAM,MAAMgD,QAASwP,EAAevS,MAAOA,EAAOO,QAASA,IAAMiR,GAAaD,KAC1FlR,cAAA,OAAKS,MAAOoR,EAAU9R,SACjBuR,EAAerR,KAAI,CAAC2R,EAAG1N,IAAMlE,cAAA,OAE1BS,MAAO2R,EACPG,YAAczU,IAA0BA,EAAE8S,OApB9CnQ,MAAM6K,gBAAkB,SAoB8B,EAClDkH,WAAa1U,IAAwBA,EAAE8S,OAjB3CnQ,MAAM6K,gBAAkB,EAiB2B,EAC/CpL,QAASA,KAAMuS,OAfP9D,EAesBzK,EAd1CiN,GAAY,GACZE,EAAiBN,EAAOpC,SACxBqC,EAAerC,GAHKA,KAeyB,EAAA5O,SAChC6R,GALIA,SAUzB,ECxGO,SAASc,GAAaC,GACzB,MAAMC,EAAaD,EAAe,GAE5BE,EAAQC,KAAKC,MAAMH,GACnBI,EAAUF,KAAKC,MAA6B,IAAtBH,EAAaC,IAEzC,IAAII,EAAa,GAMjB,OALIJ,EAAQ,IACRI,GAAcJ,EAAQ,MAE1BI,IAAeD,EAAU,GAAK,IAAMA,EAAUA,GAAW,MAElDC,CACX,C,MCqFeC,OAnFf,SAA6BpU,GAA0E,IAAzE,QAAEkC,EAAO,QAAEsF,EAAO,gBAAE6M,EAAe,kBAAEC,EAAiB,aAAEzQ,GAAc7D,EAChG,MAAOuU,EAAsBC,GAA2B/T,mBAAS,IAC1DgU,EAAUC,GAAejU,mBAAS,KAClCkU,EAAWC,GAAgBnU,oBAAS,IACpCoU,EAAyBC,GAA8BrU,oBAAS,GACjEsU,EAAiBpC,iBAAO,MAExBqC,EAAmB,GACzB,IAAK,IAAI5P,EAAI,EAAGA,GAAKiP,EAAiBjP,IAClC4P,EAAiBhH,KAAK,UAAY5I,GA2BtC1E,qBAAU,KACF8G,IACAkN,EAAY,IACZE,GAAa,GACbE,GAA2B,GAC3B/J,EAAYE,mBAAmB1D,YAAYC,EAAS+M,GAC/CE,IACOM,EAAenD,UACfmD,EAAenD,QAAQqD,UAAY,GAEvCL,GAAa,GACTH,GAAYA,EAAStP,OAAS,EAC9B+P,EAAqBT,EAAUF,GAG/BO,GAA2B,EAAK,IAExC,KACIF,GAAa,GACbE,GAA2B,EAAK,IAE5C,GACD,CAACtN,EAAS+M,IAEb,MAAMW,EAAuBA,CAACC,EAAkB1N,KAC5CsD,EAAYI,uBAAuB7C,mBAAmBd,EAASC,GAC1D2N,IACG,MAAMC,EAAS,IAAIF,GACfC,GAAmBA,EAAgBjQ,OAAS,GAC5CiQ,EAAgB3V,SAAQ6V,IACpB,MAAMC,EAAUF,EAAO/V,MAAKkW,GAAMA,EAAGnN,gBAAkBiN,EAAejN,gBAClEkN,IACAA,EAAQE,YAAcH,EAAe7M,YAAc6M,EAAezM,cAAa,IAG3F6L,EAAYW,EAAO,IAEvB,KACIX,EAAYS,EAAiB,GAC/B,EAGV,OACIjU,cAACyC,EAAW,CAACzB,QAASA,EAAS0B,QAjE3B7C,eAAA,OAAKC,UAAU,mCAAkCC,SAAA,CAC7CC,cAAA,OAAKF,UAAU,4BAA2BC,SACtCC,cAAC8Q,GAAQ,CAACC,OAAQ+C,EAAkBnU,MAAM,QAAQsR,eAAgB,SAAUD,eAAiBwD,GAAkBlB,EAAwBkB,EAAgB,OAE3J3U,eAAA,OAAKyQ,IAAKuD,EAAgB/T,UAAU,yBAAwBC,SAAA,CACxDF,eAAA,OAAKC,UAAU,oBAAmBC,SAAA,CAC9BC,cAACuB,EAAmB,CAAC7B,MAAO,QAAS+B,KAAM,OAAQT,QAASyS,IAC5DzT,cAAC8P,EAAS,CAACpO,KAAM,oBAAqBV,QAAS2S,OAEnD3T,cAAA,OAAKS,MAAOM,EAAewS,GAAYA,EAAStP,OAAS,GAAGlE,SACvDwT,EAAStT,KAAIoU,GACVrU,cAACyU,GAAO,CAEJJ,QAASA,EACTnU,QAASA,IAAMkT,EAAkBC,EAAsBgB,EAAQlN,gBAF1DkN,EAAQlN,yBAqDcxE,aAAcA,IAAMA,KAE/E,EAIA,SAAS8R,GAAOC,GAAwB,IAAvB,QAAEL,EAAO,QAAEnU,GAASwU,EACjC,OAAO7U,eAAA,OAAKC,UAAU,oBAAoBI,QAASA,IAAMA,IAAUH,SAAA,CAC/DF,eAAA,OAAKY,MAAO,CAAE4K,OAAQ,UAAWtL,SAAA,CAC7BC,cAAA,OAAKM,IAAK+T,EAAQM,YACjBN,EAAQE,YAAcvU,cAAC0P,EAAc,CAACrL,MAA6B,IAAtBgQ,EAAQE,YAAmB5U,MAAM,QAAW,QAG9FE,eAAA,OAAAE,SAAA,CACIC,cAACsP,EAAe,CAAC7G,MAAO4L,EAAQlN,cAAgB,IAAMkN,EAAQjQ,KAAM1B,QAASgQ,GAAa2B,EAAQO,SAAUrF,QAAQ,SACpHvP,cAAC4P,EAAa,CAAClO,KAAM2S,EAAQQ,SAASvI,UAAU,EAAG,YAG/D,C,MCxDewI,OApDf,SAAuChW,GAAyC,IAAxC,QAAEkC,EAAO,SAAE+T,EAAQ,eAAEC,GAAgBlW,EACzE,MAAO4D,EAASuS,GAAc1V,mBAAS,MA8CvC,OA5CAC,qBAAU,KACN,IAAY,OAARuV,QAAQ,IAARA,OAAQ,EAARA,EAAU9Q,QAAS,EAAG,CACtB,MAAMiR,EAAqB,GACT,IAAI,IAAIC,IAAIJ,EAAS9U,KAAImV,GAAKA,EAAEC,oBAExC9W,SAAQ+W,IACd,MAAMC,EAAiBR,EAASnW,QAAO4W,GAAWA,EAAQH,kBAAoBC,IAAUG,MAAK,CAACC,EAAIC,KAC9F,MAAOC,EAAUC,GAAY,CAACH,EAAGI,QAAQC,cAAcC,OAAQL,EAAGG,QAAQC,cAAcC,QACxF,OAAOJ,IAAaC,EAAW,EAAKD,EAAWC,GAAY,EAAI,CAAE,IAGrEX,EAAmBpI,KAAK,CACpBuI,gBAAiBC,EACjBP,SAAUQ,GACZ,IAGN,MAAMU,EAAuBT,IACzB,MAAMU,EAAenB,EAASoB,WAAUf,GAAKA,EAAEgB,cAAgBZ,EAAQY,cACjEC,EAAetB,EAASuB,MAAM,EAAGJ,GAActX,QAAOwW,GAAKA,EAAEU,UAAYN,EAAQM,UAAS7R,OAChG,OAAOoS,EAAe,EAAC,GAAAtI,OAAMyH,EAAQM,QAAO,MAAA/H,OAAKsI,EAAY,KAAMb,EAAQM,OAAO,EAGhFS,EAA6BvW,cAAA,OAAKF,UAAU,kCAAiCC,SAC9EmV,EAAmBjV,KAAI,CAACuW,EAAGtS,IACxBrE,eAAA,OAAKC,UAAU,iBAAgBC,SAAA,CAC3BC,cAAA,OAAKF,UAAU,eAAcC,SAAEyW,EAAEnB,kBACjCrV,cAAA,OAAKF,UAAU,iBAAgBC,SAAEyW,EAAEzB,SAAS9U,KAAI,CAACmV,EAAGqB,IAChDzW,cAAA,OAAKF,UAAW,WAAasV,EAAEsB,SAAW,YAAc,IAAaxW,QAASA,IAAM8U,EAAeI,GAAGrV,SAAEkW,EAAoBb,IAA1DqB,SAHrCvS,OAS7C+Q,EAAWsB,EACf,IAED,CAACxB,IAQA/U,cAACyC,EAAW,CAACzB,QAASA,EAAS0B,QAASA,EAASC,aAAcA,IAN9CA,MACjB,MAAMgU,EAAkB5B,EAAS3W,MAAKoX,GAAWA,EAAQkB,WACzD1B,EAAe2B,EAAgB,EAIsChU,IAE7E,E,YCCeiU,OArDf,SAAuB9X,GAA8D,IAA7D,iBAAE+X,EAAgB,UAAEC,EAAS,KAAErV,EAAI,oBAAEsV,GAAqBjY,EAC9E,MAAOkY,EAAkBC,GAAuB1X,mBAAS,KAClD2X,EAAWC,GAAgB5X,mBAAS,KACpC6X,EAAYC,GAAiB9X,oBAAS,GA4C7C,OAvBAC,qBAAU,KACN,GAAIsX,EAAW,CACX,IAAItT,EAAQ,IAAIC,eAChBD,EAAME,mBAAqB,WACA,GAAnBjG,KAAKkG,YAAkC,KAAflG,KAAKmG,QAAiBnG,KAAK6Z,cACnDH,EAAapT,KAAKC,MAAMvG,KAAKqG,UAErC,EACAN,EAAMc,KAAK,MAAOwS,GAAW,GAC7BtT,EAAMe,MACV,CAEA,MAAO,KACH4S,EAAa,IACbF,EAAoB,GAAG,CAC1B,GACF,CAACH,IAEJtX,qBAAU,KACHqX,GAtCiBtP,KACpB,GAAK2P,GAAkC,IAArBA,EAAUjT,OAA5B,CAGA,IAAIsT,EAAWL,EAAU9Y,MAAKoZ,GACzBA,EAAEC,UAAYV,GAAwBxP,GAAeA,GAAgBiQ,EAAEE,QAAUX,IAEtF,GAAY,OAARQ,QAAQ,IAARA,KAAU7V,KAAM,CAChB,IAAIA,EAAO6V,EAAS7V,KACpB2V,GAAc,IACV3V,EAAKiW,SAAS,QAAUjW,EAAKiW,SAAS,WACtCN,GAAc,GACd3V,EAAOA,EAAK0K,QAAQ,MAAO,IAAIA,QAAQ,OAAQ,KAEnD6K,EAAoBvV,EACxB,MACKuV,EAAoB,GAdf,CAckB,EAuBxBW,CAAef,EAAiB,GACrC,CAACA,EAAkBK,EAAWH,IAEzB/W,cAAA,OAAKF,UAAU,yBACnBW,MAAO,CAAE0B,SAAUV,EAAO,KAAMoW,UAAWT,EAAa,SAAW,IAAKrX,SACvEiX,GAET,ECmBec,OAtEf,SAAehZ,GAAoH,IAAnH,MAAEuF,EAAK,MAAE1E,EAAK,OAAEC,EAAM,cAAEmY,EAAa,YAAEC,EAAW,QAAEC,EAAO,cAAEC,EAAa,gBAAEC,EAAe,kBAAEC,GAAmBtZ,EAC5H,MAAOuZ,EAAgBC,GAAqB/Y,mBAAS,IAC9CgZ,EAAaC,GAAkBjZ,oBAAS,GAEzCkZ,EAAuBA,CAACC,EAAWC,IACjCD,EAAYC,EAAc3W,KACnB,EACF0W,EAAYC,EAAcC,MACxB,IAEmC,KAAlCF,EAAYC,EAAc3W,OAAe2W,EAAcC,MAAQD,EAAc3W,MAQvF6W,EAAcpI,IAChB,IAAIqI,EAAaL,EAAqBhI,EAAMsI,QAAStI,EAAMG,OAAOoI,cAAcC,yBAChFX,EAAkBQ,GACdZ,GAAeA,EAAcY,EAAW,EAG1CI,EAAWzI,IACb,GAAI0H,EAAiB,CACjB,IAAIW,EAAaL,EAAqBhI,EAAMsI,QAAStI,EAAMG,OAAOoI,cAAcC,yBAChFd,EAAgBW,EACpB,CACAlb,SAASiT,oBAAoB,UAAWqI,GACxCtb,SAASiT,oBAAoB,YAAagI,EAAW,EA0BzD,OARArZ,qBAAU,KACN8Y,EAAkBjU,EAAM,GACzB,CAACA,IAEJ7E,qBAAU,KACFyY,GAASO,GAAe,EAAK,GAClC,CAACP,IAGApY,eAAA,OAAKC,UAAU,gCACXW,MAAO,CAAEd,MAAOA,EAAOC,OAAQA,GAC/BM,QAAUuQ,GA1BKA,KACnB,IAAIqI,EAAaL,EAAqBhI,EAAMsI,QAAStI,EAAMG,OAAOoI,cAAcC,yBAChFX,EAAkBQ,GACdX,GAAiBA,EAAgBW,EAAW,EAuBxBK,CAAc1I,GAClC2I,YAAc3I,GArBSA,KAC3B,IAAIqI,EAAaL,EAAqBhI,EAAMsI,QAAStI,EAAMG,OAAOoI,cAAcC,yBAC5Eb,GAAmBA,EAAkBU,EAAW,EAmBxBO,CAAsB5I,GAC9C6I,aAAcA,KAhBlBd,GAAe,EAgB8B,EAAAzY,SAAA,CACzCC,cAAA,OAAKF,UAAU,gBAAgBW,MAAO,CAAEd,MAAO0Y,EAAiB,IAAK/M,gBAAiByM,KACtF/X,cAAA,OAAKF,UAAU,iBAAiBW,MAAO,CAAEd,MAAQ,IAAM0Y,EAAkB,OACzErY,cAAA,OAAKF,UAAU,SAASW,MAAO,CAAEuB,KAAMqW,EAAiB,IAAK/M,gBAAiB0M,GAAeuB,YAAaA,KAlD9G3b,SAASC,iBAAiB,YAAagb,QACvCjb,SAASC,iBAAiB,UAAWqb,MAkDjClZ,cAAA,OAAKF,UAAU,UAAUW,MAAO,CAAEuB,MAAa,OAAPiW,QAAO,IAAPA,OAAO,EAAPA,EAASzW,UAAW,IAAKgB,QAAS+V,EAAc,GAAK,QAASxY,SAAS,OAAPkY,QAAO,IAAPA,OAAO,EAAPA,EAASvW,SAE7H,ECce8X,OA9Ef,SAAuB1a,GAAsD,IAArD,cAAE2a,EAAa,iBAAE5C,EAAgB,cAAE6C,GAAe5a,EACtE,MAAO6a,EAAuBC,GAA4Bra,mBAAS,UAC5Dsa,EAAyBC,GAA8Bva,mBAAS,UAChEwa,EAA6BC,GAAkCza,mBAAS,IACxE0Y,EAASgC,GAAc1a,mBAAS,OAChC2a,EAAWC,GAAgB5a,mBAAS,GAErC6a,EAAgB5S,IAClB,IAAIqL,EAAQC,KAAKuH,MAAM7S,EAAW,MAC9BwL,EAAUF,KAAKuH,OAAO7S,EAAoB,KAARqL,GAAiB,IACnDyH,EAAUxH,KAAKuH,MAAM7S,EAAoB,KAARqL,EAA2B,GAAVG,GAElDuH,EAAa,GAOjB,OANI1H,EAAQ,IACR0H,EAAa1H,EAAQ,GAAK,IAAMA,EAAQA,EACxC0H,GAAc,KAIXA,GAFWvH,EAAU,GAAK,IAAMA,EAAUA,GAEf,KADhBsH,EAAU,GAAK,IAAMA,EAAUA,EACE,EA6CvD,OAfA9a,qBAAU,KAnBegb,MAoBjB3D,IAnBJ+C,EAAyBQ,EADJI,EAqBD3D,IAnBpBiD,EAA2BM,EAAaX,EAAgBe,IAGpDR,EADDE,GAAaA,EAAY,EACgB,IAARM,EAAcN,EAEf,GAcE,GACtC,CAACrD,IAEJrX,qBAAU,KACFia,GACAU,EAAaV,GACbK,EAA2BM,EAAaX,KAGxCU,EAAa,EAAE,GAEpB,CAACV,IAGA5Z,eAAA,OAAKC,UAAU,kCAAiCC,SAAA,CAC5CC,cAAA,OAAKF,UAAU,mBAAkBC,SAAE4Z,IACnC3Z,cAACya,GAAiB,CAACpW,MAAO0V,EACtB5B,gBAAkBW,GA9CLA,KACrB,GAAIoB,GAAaA,EAAY,EAAG,CAC5B,IAAIQ,EAAU5H,KAAKuH,MAAOvB,EAAaoB,EAAa,KACpDN,EAAyBQ,EAAaM,IACtChB,EAAcgB,EAClB,GAyCyCC,CAAgB7B,GACjDV,kBAAoBU,GA7BEA,KAC1BoB,GAAaA,EAAY,GACzBD,EAAW,CACPvY,KAAM0Y,EAAatH,KAAKuH,MAAOvB,EAAaoB,EAAa,MACzD1Y,SAAUsX,GAElB,EAuB2C8B,CAAyB9B,GAC5Db,QAASA,EACTF,cAAe,UACfC,YAAa,YACjBhY,cAAA,OAAKF,UAAU,mBAAkBC,SAAE8Z,MAG/C,E,wHCrDegB,OAjBf,SAA0B/b,GAA2G,IAA1G,eAAEgc,EAAc,YAAEC,EAAW,aAAEC,EAAY,gBAAEC,EAAe,oBAAEC,EAAmB,mBAAEC,GAAoBrc,EAC9H,MAAOsc,EAAgBC,GAAqB9b,oBAAS,GAMrD,OAJAC,qBAAU,KACN6b,GAAmBP,EAAe,GACnC,CAACA,IAGAjb,eAAA,OAAKC,UAAU,iBAAgBC,SAAA,CAC3BC,cAACsb,KAAa,CAACxb,UAAU,OAAOW,MAAO,CAAE+B,QAAS4Y,EAAiB,GAAK,QAAUlb,QAASA,IAAM6a,MACjG/a,cAACub,KAAS,CAACzb,UAAU,OAAOW,MAAO,CAAE+B,QAAS4Y,EAAiB,OAAS,IAAMlb,QAASA,IAAM8a,MAC7Fhb,cAACwb,GAAgB,CAACP,gBAAkBQ,GAAcR,EAAgBQ,KAClEzb,cAAC0b,KAAY,CAAC5b,UAAU,OAAOI,QAASA,IAAMgb,MAC9Clb,cAAC2b,KAAa,CAAC7b,UAAU,OAAOI,QAASA,IAAMib,QAE3D,EAKA,SAASK,GAAgB9G,GAAuB,IAAtB,gBAAEuG,GAAiBvG,EACzC,MACMkH,EAAmBnK,iBAAO,IACzBoK,EAAgBC,GAAqBvc,mBAFtB,IAIhBwc,EAAgBjD,IAClB8C,EAAiBlL,QAAUoI,EAC3BmC,EAAgBnC,EAAa,IAAI,EAyBrC,OAjBAtZ,qBAAU,KACNuc,EAfkB,IAiBlB,MAAMC,EAAmBle,IACJ,KAAdA,EAAEme,SAAkBL,EAAiBlL,QAAU,IAC9CqL,EAAaH,EAAiBlL,QAAU,IACtB,KAAd5S,EAAEme,SAAkBL,EAAiBlL,QAAU,GACnDqL,EAAaH,EAAiBlL,QAAU,GAAG,EAKnD,OAFA9S,SAASC,iBAAiB,QAASme,GAAiB,GAE7C,KACHpe,SAASiT,oBAAoB,QAASmL,EAAgB,CACzD,GACH,IAEMnc,eAAA,OAAKC,UAAU,0BAAyBC,SAAA,CAC5CC,cAACkc,KAAQ,CAACpc,UAAU,OAAOI,QAASA,KAtBpC4b,EAAkBF,EAAiBlL,SACnCqL,EAAa,EAqB0C,EAAItb,MAAO,CAAE+B,QAASoZ,EAAiBlL,QAAU,EAAI,GAAK,UACjH1Q,cAACmc,KAAa,CAACrc,UAAU,OAAOI,QAASA,IAAM6b,EAAaF,GAAiBpb,MAAO,CAAE+B,QAASoZ,EAAiBlL,QAAU,EAAI,OAAS,MACvI1Q,cAAC8X,GAAM,CACHzT,MAAOuX,EAAiBlL,QACxBwH,cAAgBY,GAAeiD,EAAajD,GAC5CX,gBAAkBW,GAAeiD,EAAajD,GAC9CnZ,MAAO,QACPC,OAAQ,UAEpB,C,4HCtEO,SAASwc,GAAYtd,GAAsC,IAArC,QAAEud,EAAO,KAAEC,EAAI,gBAAEC,GAAiBzd,EAE3D,MAAO0d,EAAaC,GAAkBld,mBAAS,KACxCmd,EAAgBC,GAAqBpd,mBAAS,KAC9Cqd,EAAUC,GAAetd,oBAAS,IAClCud,EAAaC,GAAkBxd,oBAAS,IAExCyd,EAAgBC,GAAqB1d,mBAAS,OAC9C2d,EAAmBC,GAAwB5d,mBAAS,MAErD6d,EAAoBA,CAACJ,EAAgBE,KAAuB,IAADG,EAE7D,MAAMC,EAAoBd,EAAYpe,MAAKmf,GAAMA,EAAG7G,WAC9C8G,EAAqC,OAAdR,QAAc,IAAdA,GAA0B,QAAZK,EAAdL,EAAgBS,kBAAU,IAAAJ,OAAZ,EAAdA,EAA4Bjf,MAAKsf,GAASA,EAAMhH,WAE7E,IAAkB,OAAdsG,QAAc,IAAdA,MAAgBS,YAAeP,KAGjB,OAAdF,QAAc,IAAdA,MAAgBS,aACO,OAApBD,QAAoB,IAApBA,OAAoB,EAApBA,EAAsBxf,UAA2B,OAAjBkf,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBlf,UAGvC,OAAdgf,QAAc,IAAdA,KAAgBS,aAA+B,OAAjBH,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBtf,SAAUgf,EAAehf,OAA/E,CAGA,IAAI2f,EAAiB,GACrBnB,EAAYje,SAAQgf,IAChB,IAAIK,EAAgB,CAChB5f,MAAOuf,EAAGvf,MACV0Y,SAAU6G,EAAGvf,QAAUgf,EAAehf,MACtC2O,KAAM4Q,EAAG5Q,MAETkR,EAAoB,GACpBN,EAAGE,aACHF,EAAGE,WAAWlf,SAAQmf,IAClB,IAAII,EACJ,CACI9f,MAAO0f,EAAM1f,MACb2O,KAAM+Q,EAAM/Q,KACZ+J,SAAUgH,EAAM1f,SAA2B,OAAjBkf,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBlf,QAEjD6f,EAAkB/Q,KAAKgR,EAAiB,IAE5CF,EAAcH,WAAaI,GAE/BF,EAAe7Q,KAAK8Q,EAAc,IAGtCnB,EAAekB,GAEfd,GAAY,GACZE,GAAe,GAEf,IAAIgB,EAASJ,EAAevf,MAAKmf,GAAMA,EAAG7G,WACtCqH,EAAON,WAAYlB,EAAgBwB,EAAON,WAAWrf,MAAKsf,GAASA,EAAMhH,YACxE6F,EAAgBwB,EAhCX,CAgCkB,EAqChC,OAjBAve,qBAAU,KACF6c,GACAI,EAAeJ,EACnB,GACD,CAACA,IAEJ7c,qBAAU,KACHwd,IAAmBA,EAAeS,YACjCL,EAAkBJ,EAAgB,KAAK,GAC5C,CAACA,IAEJxd,qBAAU,KACHwd,GAAkBE,GACjBE,EAAkBJ,EAAgBE,EAAkB,GACzD,CAACA,IAIArd,eAAA,OAAKC,UAAU,0BAA0BwZ,aAAcA,KAAOuD,GAAY,GAAOE,GAAe,EAAM,EAAEhd,SAAA,CACpGC,cAAA,OAAKF,UAAW,uBAAyB8c,EAAW,GAAK,UACrDoB,aAAcA,KAAOjB,GAAe,EAAK,EAAEhd,SAC1Cyc,EAAYvc,KAAI8d,GAtCHA,IACb/d,cAAA,OAAwBF,UAAW,WAAaie,EAAOrH,SAAW,WAAa,IACpFxW,QAASA,KAAW6d,EAAON,YAAWR,EAAkBc,EAAO,EAC/DC,aAAcA,KAAUD,EAAON,aAAYR,EAAkBc,GAAQpB,EAAmBoB,GAAWA,EAAON,WAAkBM,EAAON,WAAZ,IAAuB,EAAG1d,SAEhJge,EAAO/f,OAJO+f,EAAO/f,OAqCSigB,CAAiBF,OAEhD/d,cAAA,OAAKF,UAAW,kCAAoCgd,GAAeJ,GAAkBA,EAAezY,OAAS,EAAI,GAAK,UAClHqV,aAAcA,KAAOyD,GAAe,EAAM,EAAEhd,SAC3C2c,EAAezc,KAAIie,GAjCHA,IAChBle,cAAA,OAA2BF,UAAW,WAAaoe,EAAUxH,SAAW,WAAa,IAC1FxW,QAASA,IAAMid,EAAqBe,GAAWne,SAE9Cme,EAAUlgB,OAHIkgB,EAAUlgB,OAgCYmgB,CAAoBD,OAEzDle,cAACoe,GAAkB,CAAC9B,KAAMA,EAAMpc,QAASA,IAAM2c,GAAaD,OAGxE,CAEO,SAASwB,GAAkB1J,GAA2B,IAA1B,KAAE4H,EAAI,KAAE+B,EAAI,QAAEne,GAASwU,EACtD,OACI1U,cAAA,OAAKF,UAAU,oBAAoBW,MAAO,CAAE+B,QAAS6b,EAAO,OAAS,IAAMne,QAASA,IAAMA,IAAUH,SAC/Fuc,GAGb,CC9DegC,OAzCf,SAA2Bxf,GAQM,IARL,iBACxByf,EAAgB,eAChBC,EAAc,qBACdC,EAAoB,kBACpBC,EAAiB,2BACjBC,EAA0B,qBAC1BC,EAAoB,aACpBC,EAAY,yBACZC,GAA0BhgB,EAE1B,MAAOigB,EAAmBC,GAAwBzf,oBAAS,GAErD0f,EAAyBC,IAC3BJ,EAAyBI,EAAW,EAOxC,OAJA1f,qBAAU,KACNwf,EAAqBH,EAAa,GACnC,CAACA,IAGAhf,eAAA,OAAKC,UAAU,iBAAgBC,SAAA,CAC3BF,eAAA,OAAKC,UAAU,qBAAoBC,SAAA,CAC/BC,cAACoc,GAAY,CAACC,QAASkC,EACnBjC,KAAMtc,cAACmf,KAAa,CAACrf,UAAU,SAC/Byc,gBAAkBwB,IAAM,IAAAqB,EAAA,OAAKV,EAAwB,OAANX,QAAM,IAANA,GAAY,QAANqB,EAANrB,EAAQpR,YAAI,IAAAyS,GAAZA,EAAcjc,IAAM4a,EAAOpR,KAAKxJ,IAAM,GAAG,IAE5FnD,cAACqf,GAAwB,CAACV,2BAA6BnE,GAASmE,EAA2BnE,KAC3Fxa,cAACoe,GAAkB,CAAC9B,KAAMtc,cAACsf,KAAe,CAACxf,UAAU,aAAeI,QAASA,IAAMue,EAAqB,KACxGze,cAACoe,GAAkB,CAAC9B,KAAMtc,cAACsf,KAAe,CAACxf,UAAU,eAAiBI,QAASA,IAAMue,GAAsB,QAG/Gze,cAACoc,GAAY,CAACC,QAASmC,EACnBlC,KAAMtc,cAACuf,KAAY,CAACzf,UAAU,SAC9Byc,gBAAkBwB,IAAM,IAAAyB,EAAA,OAAKZ,EAA2B,OAANb,QAAM,IAANA,GAAY,QAANyB,EAANzB,EAAQpR,YAAI,IAAA6S,GAAZA,EAAcrc,IAAM4a,EAAOpR,KAAKxJ,IAAM,GAAG,IAG/FnD,cAACoe,GAAkB,CAAC9B,KAAMtc,cAACyf,KAAc,CAAC3f,UAAU,aAAeue,KAAMU,EAAmB7e,QAASA,IAAM+e,GAAsB,KACjIjf,cAACoe,GAAkB,CAAC9B,KAAMtc,cAAC0f,KAAkB,CAAC5f,UAAU,aAAeue,MAAOU,EAAmB7e,QAASA,IAAM+e,GAAsB,OAElJ,EAGA,SAASI,GAAwB3K,GAAkC,IAAjC,2BAAEiK,GAA4BjK,EAE5D,MAAOkI,EAAUC,GAAetd,oBAAS,GACnCogB,EAAUlO,iBAAO,MAIvB,OAFApB,GAAkBsP,GAAS,IAAM9C,GAAY,KAGzChd,eAAA,OAAKyQ,IAAKqP,EAAS7f,UAAU,iCAAgCC,SAAA,CACzDF,eAAA,OAAKC,UAAW,sBAAwB8c,EAAW,GAAK,WAAW7c,SAAA,CAC/DC,cAAA,OAAKF,UAAU,QAAOC,SAAC,cACvBF,eAAA,OAAKC,UAAU,uCAAsCC,SAAA,CACjDC,cAAA,SAAO4f,KAAK,SAASC,KAAK,OAAOC,SAAWhiB,GAAM6gB,EAA2B7gB,EAAE8S,OAAOmP,iBAAkB/f,cAAA,QAAMF,UAAU,QAAOC,SAAC,aAGxIC,cAACoe,GAAkB,CAAC9B,KAAMtc,cAACggB,KAAW,CAAClgB,UAAU,SAAWI,QAASA,IAAM2c,GAAaD,OAGpG,CCjCeqD,OAtCf,SAAiBnhB,GAcgB,IAdf,eACdgc,EAAc,YACdC,EAAW,aACXC,EAAY,gBACZC,EAAe,oBACfC,EAAmB,mBACnBC,EAAkB,sBAClB+E,EAAqB,sBACrBC,EAAqB,kBACrBzB,EAAiB,qBACjBD,EAAoB,2BACpBE,EAA0B,qBAC1BC,EAAoB,aACpBC,EAAY,yBACZC,GAA0BhgB,EAE1B,OACIe,eAAA,OAAKC,UAAU,wBAAuBC,SAAA,CAClCC,cAAC6a,GAAiB,CACdC,eAAkBA,EAClBC,YAAaA,IAAMA,IACnBC,aAAcA,IAAMA,IACpBC,gBAAkBQ,GAAcR,EAAgBQ,GAChDP,oBAAqBA,IAAKA,IAC1BC,mBAAoBA,IAAKA,MAC7Bnb,cAACse,GAAkB,CACfC,iBAAkB2B,EAClB1B,eAAgB2B,EAChB1B,qBAAuB2B,GAAgB3B,EAAqB2B,GAC5D1B,kBAAoB2B,GAAiB3B,EAAkB2B,GACvD1B,2BAA6BnE,GAASmE,EAA2BnE,GACjEoE,qBAAuByB,GAAiBzB,EAAqByB,GAC7DxB,aAAcA,EACdC,yBAA2BI,GAAeJ,EAAyBI,OAGnF,ECoOeoB,OA7Pf,SAAoBxhB,GAAoF,IAADyhB,EAAA,IAAlF,sBAAEJ,EAAqB,sBAAED,EAAqB,oBAAEM,EAAmB,UAAEC,GAAW3hB,EACjG,MAAM4hB,EAAWjP,iBAAO,MAClBkP,EAA0BlP,iBAAO,MACjCmP,EAAgCnP,iBAAO,IAEtCoN,EAAcgC,GAAmBthB,oBAAS,IAC1CgI,EAAauZ,GAAkBvhB,mBAAS,IAExCwhB,EAAcC,GAAmBzhB,qBAElC0hB,EAAwBxP,kBAAO,IAC9ByP,EAAoBC,GAAyB5hB,mBAAS,YAEtD6hB,EAAaC,GAAkB9hB,mBAAS,KACxC+hB,EAAgBC,GAAqBhiB,oBAAS,IAC9Cub,EAAgB0G,GAAqBjiB,oBAAS,IAE9CkiB,EAAcC,GAAmBniB,mBAAS,KAC1CoiB,EAAeC,GAAoBriB,mBAAS,KAC5CwX,EAAqB8K,GAA0BtiB,mBAAS,IAExDuiB,EAAmBC,GAAwBxiB,oBAAS,GACrDyiB,EAAwBvQ,iBAAO,GAE/BwQ,EAA2B9e,IACzB8d,EAAsBvQ,SAAWgQ,EAAShQ,SAC1C7G,EAAYK,kBAAkBrB,iBAAiB1F,GAAMW,IAAc,IAADoe,EAC1DC,mBAAmBhf,KAASgf,mBAAmC,QAAjBD,EAACxB,EAAShQ,eAAO,IAAAwR,OAAA,EAAhBA,EAAkB5hB,OAC7DwD,EAASse,OACTnB,EAAsBvQ,SAAU,EAChCsQ,EAAgBld,EAASue,WAGzBlB,EAAsBrd,EAASue,QAAUve,EAASue,QAAU,WAC5DpW,YAAW,KACPgW,EAAwB9e,EAAI,GAC7B,MAEX,GAER,EAGEmf,EAAqBnf,IACvB,IAAIoE,EAAcmZ,EAAShQ,QAAQnJ,YACnC8Z,EAAele,GAEfud,EAAShQ,QAAQ6R,UAAY7B,EAAShQ,QAAQ8R,OAC9C9B,EAAShQ,QAAQ+R,OAEjB/B,EAAShQ,QAAQnJ,YAAcA,EAC/BuZ,EAAevZ,GAEfga,GAAkB,GAClBN,EAAsBvQ,SAAU,EAChCsQ,EAAgB,IAChBiB,EAAwB9e,EAAI,EAG1Buf,EAAmBhI,IACrBgG,EAAShQ,QAAQnJ,YAAcmT,CAAO,EAGpCiI,EAAkBA,KACpBZ,GAAqB,GACrBpB,EAAwBjQ,QAAQjQ,MAAM6R,OAAS,OAC/C0P,EAAsBtR,QAAUkS,KAAKC,MAErC5W,YAAW,KACoB,OAAvB0U,QAAuB,IAAvBA,KAAyBjQ,SAAWkS,KAAKC,MAAQb,EAAsBtR,QAF3D,MAGZqR,GAAqB,GACrBpB,EAAwBjQ,QAAQjQ,MAAM6R,OAAS,OACnD,GACDwQ,KAAkB,EAgBnBC,EAAYA,KACF,OAARrC,QAAQ,IAARA,KAAUhQ,SACVgQ,EAAShQ,QAAQsS,MAAM,EAGzBC,EAAaA,KACH,OAARvC,QAAQ,IAARA,KAAUhQ,SACVgQ,EAAShQ,QAAQwS,OAAO,EAyHhC,OAjHA1jB,qBAAU,KACNmhB,EAAwBjQ,QAAQ7S,iBAAiB,YAAa8kB,GAEvD,KACwB,OAAvBhC,QAAuB,IAAvBA,KAAyBjQ,SAASiQ,EAAwBjQ,QAAQG,oBAAoB,YAAa8R,EAAgB,IAE5H,CAAChC,IAEJnhB,qBAAU,KACN,IAAKqF,QAAgB,OAAR6b,QAAQ,IAARA,OAAQ,EAARA,EAAUhQ,SACnB,OAEJ,MAAMyS,EAAqBrlB,IAAO,IAADslB,EACjB,OAAR1C,QAAQ,IAARA,GAAiB,QAAT0C,EAAR1C,EAAUhQ,eAAO,IAAA0S,GAAjBA,EAAmBC,WAAW/iB,IAAI+D,QAClC2c,EAAgBD,GAA8B,oBAC9CQ,GAAkB,GACtB,EAEJb,EAAShQ,QAAQ7S,iBAAiB,QAASslB,GAAmB,GAE9D,MAAMG,EAAeA,KACjBrC,EAAsBvQ,SAAU,EAChCyQ,EAAsB,IACtBI,GAAkB,EAAM,EAE5Bb,EAAShQ,QAAQ7S,iBAAiB,UAAWylB,GAAc,GAM3D5C,EAAShQ,QAAQ7S,iBAAiB,WAJX0lB,KACnBD,IACA9B,GAAkB,EAAK,IAEkC,GAE7D,MAAMgC,EAAgBA,KAClBhC,GAAkB,EAAM,EAE5Bd,EAAShQ,QAAQ7S,iBAAiB,QAAS2lB,GAAe,GAE1D,MAAMC,EAAiBA,KACnBlC,GAAkB,EAAK,EAE3Bb,EAAShQ,QAAQ7S,iBAAiB,UAAW4lB,GAAgB,GAE7D,MAAMC,EAAiB5lB,IAAO,IAAD6lB,EACzB,GAAoB,QAApBA,EAAIjD,EAAShQ,eAAO,IAAAiT,GAAhBA,EAAkBpc,YAAa,CAAC,IAADqc,EAAAC,EAC/B/C,EAA+B,QAAjB8C,EAAClD,EAAShQ,eAAO,IAAAkT,OAAA,EAAhBA,EAAkBrc,aAEjC,IAAIA,EAAcuL,KAAKgR,MAAsB,QAAjBD,EAACnD,EAAShQ,eAAO,IAAAmT,OAAA,EAAhBA,EAAkBtc,aAC3CA,EAAcqZ,EAA8BlQ,QAAU,KACtDkQ,EAA8BlQ,QAAUnJ,EACxCiZ,EAAoBE,EAAShQ,QAAQnJ,YAAamZ,EAAShQ,QAAQlJ,SAAUkZ,EAAShQ,QAAQpQ,KAEtG,GAIJ,OAFAogB,EAAShQ,QAAQ7S,iBAAiB,aAAc6lB,GAEzC,KACS,OAARhD,QAAQ,IAARA,KAAUhQ,UACVgQ,EAAShQ,QAAQG,oBAAoB,QAASsS,GAC9CzC,EAAShQ,QAAQG,oBAAoB,UAAWyS,GAChD5C,EAAShQ,QAAQG,oBAAoB,UAAWyS,GAChD5C,EAAShQ,QAAQG,oBAAoB,UAAW4S,GAChD/C,EAAShQ,QAAQG,oBAAoB,QAAS2S,GAC9C9C,EAAShQ,QAAQG,oBAAoB,aAAc6S,GACvD,CACH,GACF,CAAChD,IAEJlhB,qBAAU,KACN,MAAMukB,EAAsBjmB,IACxB+iB,EAAgBjjB,SAASomB,kBAAkB,EAGzChI,EAAmBle,IAAO,IAADmmB,EAAAC,EAEd,OAARxD,QAAQ,IAARA,KAAUhQ,UAEfiS,IAEkB,KAAd7kB,EAAEme,QACEyE,EAAShQ,QAAQ8R,OAAQO,IACxBE,IAEc,KAAdnlB,EAAEme,QACPyG,GAAgC,QAAhBuB,EAAAvD,EAAShQ,eAAO,IAAAuT,OAAA,EAAhBA,EAAkB1c,aAAc,IAC7B,KAAdzJ,EAAEme,SACPyG,GAAgC,QAAhBwB,EAAAxD,EAAShQ,eAAO,IAAAwT,OAAA,EAAhBA,EAAkB3c,aAAc,IAAG,EAO3D,OALIoZ,EAAwBjQ,UACxBiQ,EAAwBjQ,QAAQ7S,iBAAiB,mBAAoBkmB,GACrEnmB,SAASC,iBAAiB,QAASme,GAAiB,IAGjD,KACC2E,EAAwBjQ,UACxB9S,SAASiT,oBAAoB,QAASmL,GACtC2E,EAAwBjQ,QAAQG,oBAAoB,mBAAoBkT,GAC5E,CACH,GACF,IAEHvkB,qBAAU,KACN,GAAI2gB,EAAuB,CAAC,IAADgE,EACvB,MAAMC,EAAejE,EAAsB/hB,MAAKmf,GAAMA,EAAG7G,WACzC,OAAZ0N,QAAY,IAAZA,GAAkB,QAAND,EAAZC,EAAczX,YAAI,IAAAwX,GAAlBA,EAAoBhhB,KAAKmf,EAAkB8B,EAAazX,KAAKxJ,IACrE,IACD,CAACgd,IAEJ3gB,qBAAU,KACFihB,EAAY,GAAa,OAARC,QAAQ,IAARA,KAAUhQ,UAC3BgQ,EAAShQ,QAAQnJ,YAAckZ,EAAS,GAC7C,CAACA,IAGA5gB,eAAA,OAAKyQ,IAAKqQ,EAAyB7gB,UAAU,uBAAsBC,SAAA,CAC/DC,cAACuB,EAAmB,CAAC7B,MAAO,QAAS+B,KAAM,OAAQD,SAAU,SAAUR,QAASogB,GAAeE,EAAgB5f,KAAMwf,IACrHlhB,cAAA,OAAKF,UAAU,6BAA6BW,MAAO,CAAE+B,QAASue,EAAe,GAAK,QAAShhB,SAAEghB,IAC7F/gB,cAAA,SAAOsQ,IAAKoQ,EAAU5gB,UAAU,eAAeQ,IAAK8gB,IACpDvhB,eAAA,OAAKC,UAAU,sBAAqBC,SAAA,CAChCC,cAAC4W,GAAc,CACXC,iBAAkBtP,EAClBuP,UAAW2K,EACXhgB,KAAMkgB,EACN5K,oBAAqBA,IACzBlX,eAAA,OAAKC,UAAU,kCAAkCW,MAAOM,EAAe+gB,GAAmB/hB,SAAA,CACtFC,cAACwZ,GAAc,CACXC,cAA+B,QAAlB8G,EAAEG,EAAShQ,eAAO,IAAA6P,OAAA,EAAhBA,EAAkB/Y,SACjCqP,iBAAkBtP,EAClBmS,cAAgBgB,GAAYgI,EAAgBhI,KAChD1a,cAACigB,GAAQ,CACLnF,eAAgBA,EAChBC,YAAaA,IAAMgI,IACnB/H,aAAcA,IAAMiI,IACpBhI,gBAAkBQ,GA1IXA,KACX,OAARiF,QAAQ,IAARA,KAAUhQ,UACVgQ,EAAShQ,QAAQ2T,OAAS5I,EAAS,EAwIS6I,CAAkB7I,GAClDP,oBAAqBA,IAAMwH,EAAgBnb,EAAc,IACzD4T,mBAAoBA,IAAMuH,EAAgBnb,EAAc,IACxD2Y,sBAAuBA,EACvBC,sBAAuBA,EACvB1B,qBAAuB2B,GAAgBwB,EAAiBD,EAAgBvB,GAAe,IAAMuB,EAAgBvB,GAAe,GAAKuB,EAAgBvB,EAAcuB,GAC/JjD,kBAAoB2B,GAAiBqB,EAAgBrB,GAA8B,IACnF1B,2BAA6BnE,GAASqH,EAAuBrH,GAAc,GAC3EoE,qBAAuByB,GAAiBiC,EAAkBjC,GAC1DxB,aAAcA,EACdC,yBAA2BI,GA3KbqF,KAC9B,GAAIA,EAAY,CACZ,IAAK5D,EAAwBjQ,QAAS,OAElCiQ,EAAwBjQ,QAAQ8T,kBAAmB7D,EAAwBjQ,QAAQ8T,oBAC9E7D,EAAwBjQ,QAAQ+T,qBAAsB9D,EAAwBjQ,QAAQ+T,uBACtF9D,EAAwBjQ,QAAQgU,wBAAyB/D,EAAwBjQ,QAAQgU,0BACzF/D,EAAwBjQ,QAAQiU,qBAAqBhE,EAAwBjQ,QAAQiU,qBAClG,MAEI/mB,SAASgnB,gBAAgB,EAiK6B9F,CAAyBI,aAK3F,EC7PO,SAAS2F,GAAiB/lB,GAA8F,IAA7F,QAAEgmB,EAAO,UAAE5N,EAAS,QAAElW,EAAO,aAAE2B,EAAY,oBAAE6d,EAAmB,SAAEuE,EAAQ,aAAEzd,GAAcxI,EACxH,MAAOyf,EAAkByG,GAAuBzlB,mBAAS,KAClD4gB,EAAuB8E,GAA4B1lB,mBAAS,KAC5D2lB,EAAsBC,GAA2B5lB,oBAAS,IAC1DkhB,EAAW2E,GAAgB7lB,mBAAS,IACpCmK,EAAc2b,GAAmB9lB,oBAAS,IAC1C+lB,EAAkBC,GAAuBhmB,oBAAS,GAGzDC,qBAAU,KACFwB,GACA6I,EAAYO,kBAAkBX,sBAAsBC,IAEhD,GADA2b,EAAgB3b,GACZA,EAAc,CACd,MAAM2S,EAAU,CACZyI,QAASA,EAAQ7kB,KAAIulB,IACV,CACH1P,QAAS0P,EAAO1P,QAAQE,OACxBU,SAAU8O,EAAO9O,SACjBvT,IAAK0G,EAAYK,kBAAkB9B,eAAeod,EAAOpP,YAAaoP,EAAOnd,SAAUmd,EAAOjf,aAAcif,EAAOre,mBAG3H+P,UAAoB,OAATA,QAAS,IAATA,IAAa,GACxBuO,aAAcV,EACdrd,aAAcJ,GAAgB,CAC1BmB,MAAOnB,EAAamB,MACpB9C,GAAI2B,EAAa3B,GACjBoF,OAAQzD,EAAayD,OACrBiB,cAAe1E,EAAa0E,cAC5Bb,OAAQ7D,EAAa6D,OACrBxD,cAAuC,GAAxBL,EAAaE,SAC5Bke,SAAUpe,EAAaoe,SACvBhd,KAAMpB,EAAaoB,KACnBvB,cAAe2d,EAAQ,GAAG3d,cAC1BZ,aAAcue,EAAQ,GAAGve,cAE7Bof,UAAWtoB,EAAQc,gBAAgBF,QAGvC,IAAI2nB,EAAc7hB,KAAKa,UAAUyX,GAE7BvU,OAAO+d,QACPN,GAAoB,GACpBzd,OAAO+d,OAAOC,QAAQjoB,iBAAiB,UAAWkoB,GAClDje,OAAO+d,OAAOC,QAAQE,YAAYJ,IAE7B9d,OAAOme,SACZne,OAAOme,OAAOC,gBAAgBC,sBAAsBH,YAAYJ,GAChEjjB,IAER,IAER,GAED,CAAC3B,IAEJxB,qBAAU,IACC,KACCkK,GACI5B,OAAO+d,QACP/d,OAAO+d,OAAOC,QAAQjV,oBAAoB,UAAWkV,EAE7D,GAEL,IAEH,MAAMA,EAA6BA,KAC/BR,GAAoB,GACpB5iB,GAAc,EA8DlBnD,qBAAU,KACFwB,GAAW8jB,GAAWA,EAAQ7gB,OAAS,GA5DX6gB,KAChC,IAAIzI,EAAU,GACTyI,IAELA,EAAQrP,MAAK,CAAC2Q,EAASC,KACnB,MAAOzQ,EAAUC,GAAY,CAACuQ,EAAQtQ,QAAQC,cAAcC,OAAQqQ,EAAQvQ,QAAQC,cAAcC,QAClG,OAAOJ,IAAaC,EAAW,EAAKD,EAAWC,GAAY,EAAI,CAAE,IAGrEiP,EAAQvmB,SAAQinB,IACZ,IAAIc,EAAYjK,EAAQzd,QAAO2nB,GAAKA,EAAEvoB,MAAMwoB,WAAWhB,EAAO1P,WAE1DiI,EAAS,CACT/f,MAAOsoB,GAAaA,EAAUriB,OAAS,EAAIuhB,EAAO1P,QAAU,MAAQwQ,EAAUriB,OAAS,GAAK,IAAMuhB,EAAO1P,QACzGY,SAAU8O,EAAO9O,SACjB/J,KAAM,CACFxJ,IAAK0G,EAAYK,kBAAkB9B,eAAeod,EAAOpP,YAAaoP,EAAOnd,SAAUmd,EAAOjf,aAAcif,EAAOre,iBAG3HkV,EAAQvP,KAAKiR,EAAO,IAGuB,IAA3C1B,EAAQzd,QAAO2nB,GAAKA,EAAE7P,WAAUzS,SAChCoY,EAAQ,GAAG3F,UAAW,GAE1BuO,EAAyB5I,GAAQ,EAoC7BoK,CAA2B3B,EAC/B,GACD,CAACA,EAAS9jB,IAEbxB,qBAAU,KACFwB,GAAWkW,GAAaA,EAAUjT,OAAS,GAtCpBiT,KAC3B,IAAIwP,EAAsB,GAC1BA,EAAoB5Z,KAChB,CACI9O,MAAO,MACP0Y,UAAU,IAGdQ,GAAaA,EAAUjT,OAAS,GAChCiT,EAAU3Y,SAAQooB,IACd,IAAIC,EAAkB,CAClB5oB,MAAO2oB,EAAIrR,SACXoB,UAAU,EACV+G,WAAY,IAEhBkJ,EAAIE,oBAAoBtoB,SAAQ,CAACkJ,EAAWkH,KACxCiY,EAAgBnJ,WAAW3Q,KAAK,CAC5B9O,MAAO2oB,EAAIrR,SAAW,KAAO3G,EAAQ,GACrC+H,UAAU,EACV/J,KAAM,CACFxJ,IAAK0G,EAAYM,oBAAoBd,mBAAmB5B,KAE9D,IAENif,EAAoB5Z,KAAK8Z,EAAgB,IAIjD5B,EAAoB0B,EAAoB,EAWpCI,CAAsB5P,EAC1B,GACD,CAACA,EAAWlW,IAEfxB,qBAAU,KACFulB,EAAW,GACXI,GAAwB,EAC5B,GACD,CAACJ,IAGJ,MAAMriB,EACF7C,eAAA,OAAKC,UAAU,gCAA+BC,SAAA,CAC1CC,cAAC+mB,GAAa,CACV/lB,QAAS+jB,EAAW,GAAKG,EACzB8B,WAAYjC,EACZkC,UAAWA,IAAM9B,GAAwB,GACzC+B,WAAYA,KAAQ9B,EAAaL,GAAWI,GAAwB,EAAM,IAC9EnlB,cAACmnB,GAAoB,CACjBnmB,QAASA,EACTmf,sBAAuBA,EACvB5B,iBAAkBA,EAClBiC,oBAAqBA,CAACjZ,EAAaC,EAAUC,IAAc+Y,EAAoBjZ,EAAaC,EAAUC,GACtGgZ,UAAWA,OAGvB,OACI/W,EACI1J,cAACyC,EAAW,CAACzB,QAASskB,IACpBtlB,cAACyC,EAAW,CAACzB,QAASA,EAAS0B,QAASA,EAASC,aAAcA,IAAMA,KAEnF,CAEA,SAASokB,GAAarS,GAAkD,IAAjD,QAAE1T,EAAO,WAAEgmB,EAAU,WAAEE,EAAU,UAAED,GAAWvS,EACjE,MAAMlF,EAAiB,CACnBhN,QAAS,OACTgJ,WAAY,SACZC,eAAgB,UAEpB,OAAIzK,EAEInB,eAAA,OAAKY,MAAO+O,EAAezP,SAAA,CACvBC,cAAC8P,EAAS,CAACpO,KAAM,sCAAwCgR,GAAasU,EAAa,IAAM,OACzFhnB,cAAC+P,GAAU,CAACrQ,MAAM,MAAMgD,QAAQ,MAAMxC,QAASA,IAAMgnB,MACrDlnB,cAAC+P,GAAU,CAACrQ,MAAM,OAAOgD,QAAQ,KAAKxC,QAASA,IAAM+mB,SAKtD,IACf,CAEA,SAASE,GAAoBC,GAAwF,IAAvF,QAAEpmB,EAAO,sBAAEmf,EAAqB,iBAAE5B,EAAgB,oBAAEiC,EAAmB,UAAEC,GAAW2G,EAE9G,OAAIpmB,EACOhB,cAAA,OAAKF,UAAU,yBAAwBC,SAC1CC,cAACsgB,GAAW,CACRH,sBAAuBA,EACvBD,sBAAuB3B,EACvBiC,oBAAqBA,CAACjZ,EAAaC,EAAUC,IAAc+Y,EAAoBjZ,EAAaC,EAAUC,GACtGgZ,UAAWA,MAIZ,IACf,C,wBCtMe4G,OAff,SAAsBvoB,GAAwB,IAAvB,QAAEkC,EAAO,QAAEd,GAASpB,EACvC,GAAIkC,EAAS,CAET,MAAM0B,EAAW7C,eAAA,OAAKY,MAAO,CAAC+B,QAAS,OAAQiJ,eAAgB,UAAU1L,SAAA,CACrEC,cAACsnB,KAAW,CAAC7mB,MAAO,CAAEf,MAAO,WAC7BM,cAAA,OAAKS,MAAO,CAAE8mB,WAAY,OAAQxnB,SAAC,eAGvC,OACIC,cAAC+P,GAAU,CAACrN,QAASA,EAAShD,MAAO,QAASQ,QAASA,IAAMA,KAErE,CACK,OAAO,IAChB,ECFesnB,OAdf,SAAc1oB,GAAS,IAAR,KAAC4C,GAAK5C,EASjB,OACIkB,cAAA,OAAKS,MARG,CACR0B,SAAU,OACViJ,WAAY,MACZ1L,MAAO,QACPwC,UAAW,UAIOnC,SAAE2B,GAE5B,E,oBCEe+lB,OAXf,SAAmB3oB,GAAe,IAAd,QAAEoB,GAASpB,EAC3B,MAAM4D,EAAW7C,eAAA,OAAKY,MAAO,CAAE+B,QAAS,OAAQiJ,eAAgB,UAAW1L,SAAA,CACvEC,cAAC0nB,KAAc,IACf1nB,cAAA,OAAKS,MAAO,CAAE8mB,WAAY,OAAQxnB,SAAC,YAGvC,OACIC,cAAC+P,GAAU,CAACrN,QAASA,EAAShD,MAAO,OAAQQ,QAASA,IAAMA,KAEpE,ECgCeynB,OAjCf,SAA0B7oB,GAAyB,IAAxB,QAAEoB,EAAO,SAAE0nB,GAAU9oB,EAC5C,MAAO+oB,EAAWC,GAAgBvoB,oBAAS,IACpCwoB,EAAUC,GAAezoB,mBAAS,MAEzCC,qBAAU,KACW,OAAbuoB,GACAle,EAAYO,kBAAkBX,sBAAsBC,IAChDse,GAAate,EAAa,GAElC,GACD,IAEH,MAAMhH,EAAW7C,eAAA,OAAKY,MAAO,CAAE+B,QAAS,OAAQiJ,eAAgB,UAAW1L,SAAA,CACvEC,cAACsb,KAAa,IACdtb,cAAA,OAAKS,MAAO,CAAE8mB,WAAY,OAAQxnB,SAAC,qBAQvC,OAAIgoB,EAEIloB,eAAA,OAAAE,SAAA,CACIC,cAAC+P,GAAU,CAACrN,QAASA,EAAShD,MAAO,SAAUQ,QAASA,KAPhE4nB,GAAa,QACT5nB,GAASA,QAOLF,cAACioB,GAAW,CAACjnB,QAAS6mB,EAAWD,SAAUA,EAAUjlB,aAAcA,IAAMmlB,GAAa,QAIvF,IACf,EAIA,SAASG,GAAWvT,GAAuC,IAAtC,QAAE1T,EAAO,SAAE4mB,EAAQ,aAAEjlB,GAAc+R,EAEpD,MAcMwT,EACFloB,cAAA,OAAKS,MAfc,CACnB6K,gBAAiB,QACjB9I,QAAS,OACTgJ,WAAY,SACZC,eAAgB,SAChB7L,OAAQ,QACRD,MAAO,QACP0S,QAAS,SACThH,OAAQ,OACR3L,MAAO,QACP6L,aAAc,OACd4c,WAAY,mEAIepoB,SACvBC,cAACooB,GAAY,CAACR,SAAUA,EAAUS,WAAYrnB,EAAS2B,aAAcA,IAAMA,QAInF,OAAO3C,cAACyC,EAAW,CAACzB,QAASA,EAAS0B,QAASwlB,GACnD,CAEA,SAASE,GAAYhB,GAA8B,IAA7B,SAAEQ,EAAQ,aAAEjlB,GAAcykB,EAC5C,MAAMkB,EAAkB7W,iBAAO,MAoB/B,OACI5R,eAAA,OAAAE,SAAA,CACIC,cAACwnB,GAAK,CAAC9lB,KAAM,kBACb1B,cAAC4P,EAAa,CAAClO,KAAM,8GACrB1B,cAAA,SAAOsQ,IAAKgY,EACR7nB,MAAO,CAAE0nB,WAAY,OAAQ/Y,OAAQ,OAAQmZ,QAAS,OAAQ7oB,MAAO,OAAQC,MAAO,OAAQuC,UAAW,SAAUsmB,aAAc,WAAYnd,OAAQ,UACnJuU,KAAK,OACL6I,UAAU,EACVpkB,MAAOQ,QAAQ+iB,GAAYA,EAAW,KAC1C/nB,eAAA,OAAKY,MAlBF,CACH+B,QAAS,OACTgJ,WAAY,SACZ5L,OAAQ,OACR6L,eAAgB,eAChBid,cAAeC,EAAW,SAAW,IAaX5oB,SAAA,CACtBC,cAACynB,GAAU,CAACvnB,QAASA,KA3BV,OAAfooB,QAAe,IAAfA,KAAiB5X,UACjB4X,EAAgB5X,QAAQkY,SACxBhrB,SAASirB,YAAY,QACrB/gB,OAAOghB,eAAeC,kBAwBuB,IACzC/oB,cAAC+P,GAAU,CAACrN,QAAS,QAAShD,MAAO,MAAOQ,QAASA,IAAMyC,YArBlDgmB,KAyBzB,C,wBCrGO,SAASK,GAAiBlqB,GAAwB,IAAvB,QAAEoB,EAAO,QAAEc,GAASlC,EAElD,OAAQkB,cAACipB,GAAc,CACX/oB,QAASA,EACTc,QAASA,EACTtB,MAAO,OACPwpB,WAAYlpB,cAAC8O,IAAO,CAACrO,MAAO,CAAE0B,SAAU,GAAIzC,MAAO,YAEnE,CAEO,SAASypB,GAAoBzU,GAAwB,IAAvB,QAAExU,EAAO,QAAEc,GAAS0T,EAErD,OAAQ1U,cAACipB,GAAc,CACX/oB,QAASA,EACTc,QAASA,EACTtB,MAAO,WACPwpB,WAAYlpB,cAACopB,KAAU,CAAC3oB,MAAO,CAAE0B,SAAU,GAAIzC,MAAO,YAEtE,CAEA,SAASupB,GAAc7B,GAA2C,IAA1C,QAAElnB,EAAO,QAAEc,EAAO,MAAEtB,EAAK,WAAEwpB,GAAY9B,EAE3D,GAAIpmB,EAAS,CACT,MAAMqoB,EAAe,CACjB7nB,SAAU,WACVgB,QAAS,OACTgJ,WAAY,SACZC,eAAgB,UAGd6d,EAAkB,CACpB9nB,SAAU,WACVO,IAAK,OACL6W,MAAO,OACPvG,QAAS,MACTnR,OAAQ,EACRvB,MAAO,OACPC,OAAQ,OACR2L,aAAc,OACdD,gBAAiB,qBACjB9I,QAAS,OACTgJ,WAAY,SACZC,eAAgB,UAGd/I,EACF7C,eAAA,OAAKY,MAAO4oB,EAAatpB,SAAA,CACrBC,cAACW,IAAY,CAACF,MAAO,CAAE0B,SAAU,MACjCnC,cAAA,OAAKS,MAAO6oB,EAAgBvpB,SAAEmpB,OAItC,OACIlpB,cAAC+P,GAAU,CAACrN,QAASA,EAAShD,MAAOA,EAAOQ,QAASA,IAAMA,KAEnE,CACK,OAAO,IAEhB,CCjDeqpB,OAZf,SAAmBzqB,GAAuB,IAAtB,OAAE+Q,EAAM,QAAE3P,GAASpB,EAEnC,MAAM4D,EAAW7C,eAAA,OAAKY,MAAO,CAAE+B,QAAS,OAAQiJ,eAAgB,UAAW1L,SAAA,CACvEC,cAACsb,KAAa,IACdtb,cAAA,OAAKS,MAAO,CAAE8mB,WAAY,OAAQxnB,SAAC,YAGvC,OACIC,cAAC+P,GAAU,CAACrN,QAASA,EAASsN,SAAUH,EAAQnQ,MAAO,MAAOQ,QAASA,IAAMA,KAErF,E,wCC0FespB,OA5Ff,SAAuB1qB,GAAuC,IAAtC,OAAEuO,EAAM,UAAEoc,EAAS,aAAE7d,GAAc9M,EACzD,MAAM4qB,EAAUjY,iBAAO,OAChBkY,EAAeC,GAAoBrqB,oBAAS,IAC5CsqB,EAAkBC,GAAuBvqB,oBAAS,GAEzDC,qBAAU,KACRkqB,EAAQhZ,QAAQqZ,SAAW,KACzBC,GAAmB,CACpB,GACA,IAEHxqB,qBAAU,KACH6N,GAA4B,IAAlBA,EAAOpJ,OAIjB+lB,KAHHF,GAAoB,GACpBF,GAAiB,GAEK,GACvB,CAACvc,IAEJ7N,qBAAU,KAAQwqB,GAAmB,GAAK,CAACL,EAAeE,IAE1D,MAAMI,EAAmBA,CAAC3b,EAAM4b,KAC9B,MAAMC,EAAgB7b,EAAK2K,wBAC3B,OAAOnG,KAAKuH,MAAM8P,EAAcvR,QAAU9F,KAAKuH,MAAM6P,EAAUtR,QAC1D9F,KAAKuH,MAAM8P,EAAcnoB,OAAS8Q,KAAKuH,MAAM6P,EAAUloB,KAAK,EAG7DooB,EAAkBA,KACtB,IAAIC,EAAU,GACVC,EAAgBZ,EAAQhZ,QAAQuI,wBACpC,IAAK,IAAI/U,EAAI,EAAGA,EAAIwlB,EAAQhZ,QAAQ3Q,SAASkE,OAAQC,IAC/C+lB,EAAiBP,EAAQhZ,QAAQ3Q,SAASmE,GAAIomB,IAChDD,EAAQvd,KAAK5I,GAGjB,MAAO,CACL,SAAY4O,KAAKyX,OAAOF,GACxB,SAAYvX,KAAK0X,OAAOH,GACxB,MAASA,EAAQpmB,OAClB,EA+BG+lB,EAAoBA,KACxB,GAAIN,EAAQhZ,QAAQ3Q,UAAY2pB,EAAQhZ,QAAQ3Q,SAASkE,OAAS,EAAG,CACnE,IAAIqmB,EAAgBZ,EAAQhZ,QAAQuI,wBACpC2Q,EAAiBK,EAAiBP,EAAQhZ,QAAQ3Q,SAAS,GAAIuqB,IAC/DR,EAAoBG,EAAiBP,EAAQhZ,QAAQ3Q,SAAS2pB,EAAQhZ,QAAQ3Q,SAASkE,OAAS,GAAIqmB,GACtG,GAGF,OACEzqB,eAAA,OAAKC,UAAW,wBAAwBC,SAAA,CACtCC,cAAA,OAAKS,MAAOM,GAAgB4oB,GAAgB7pB,UAAU,+BAA+BI,QAASA,IAxBhFuqB,MAChB,GAAIf,EAAQhZ,QAAQ3Q,UAAY2pB,EAAQhZ,QAAQ3Q,SAASkE,OAAS,EAAG,CACnE,IAAIymB,EAAeN,IACfO,EAAYD,EAAaE,SAAWF,EAAaG,MACjDlc,EAAQgc,EAAY,EAAI,EAAIA,EAEhCjB,EAAQhZ,QAAQ3Q,SAAS4O,GAAOH,eAAe,CAC7Csc,SAAU,SACVrc,MAAO,UACPC,OAAQ,WAEZ,GAasG+b,GAAY1qB,SAC9GC,cAAC+qB,KAAmB,CAACtqB,MAAO,CAAE0B,SAAU,GAAIzC,MAAO,aAErDM,cAAA,OAAKS,MAAOM,GAAgB8oB,GAAmB/pB,UAAU,gCAAgCI,QAASA,IAzCnF8qB,MACjB,GAAItB,EAAQhZ,QAAQ3Q,UAAY2pB,EAAQhZ,QAAQ3Q,SAASkE,OAAS,EAAG,CACnE,IAAIymB,EAAeN,IACfO,EAAYD,EAAaO,SAAWP,EAAaG,MACjDlc,EAAQgc,EAAYjB,EAAQhZ,QAAQ3Q,SAASkE,OAAS,EAAIylB,EAAQhZ,QAAQ3Q,SAASkE,OAAS,EAAI0mB,EAEpGjB,EAAQhZ,QAAQ3Q,SAAS4O,GAAOH,eAAe,CAC7Csc,SAAU,SACVrc,MAAO,UACPC,OAAQ,WAEZ,GA8B0Gsc,GAAajrB,SACnHC,cAACkrB,KAAsB,CAACzqB,MAAO,CAAE0B,SAAU,GAAIzC,MAAO,aAExDM,cAAA,OAAKsQ,IAAKoZ,EAAS5pB,UAAW,eAAiB6pB,GAAiBE,IAAqBJ,EAAY,UAAY,IAAI1pB,SAC9GsN,EAAOpN,KAAI,CAAC0L,EAAOgD,IAAW3O,cAAC0L,EAAqB,CAAaC,MAAOA,EAAOE,aAAa,EAAMD,aAAexF,GAAYwF,EAAaxF,IAAhFuI,SAInE,ECvFewc,OAZf,SAAgCrsB,GAA2D,IAA1D,UAAEssB,EAAS,OAAE/d,EAAM,UAAEoc,EAAS,QAAEzoB,EAAO,aAAE4K,GAAc9M,EACpF,OAAKkC,EAGDnB,eAAA,OAAKC,UAAU,8BAA6BC,SAAA,CACxCC,cAAA,OAAKF,UAAU,qBAAoBC,SAC/BC,cAAA,OAAKF,UAAU,wBAAuBC,SAAEqrB,MAE5CprB,cAACwpB,GAAc,CAACnc,OAAQA,EAAQoc,UAAWA,EAAW7d,aAAexF,GAAYwF,EAAaxF,QAPjF,IAUzB,ECgSeilB,OA7Qf,SAA8BvsB,GAA6B,IAADwsB,EAAAC,EAAA,IAA3B,QAAEnlB,EAAO,aAAEzD,GAAc7D,EAEpD,MAAOgN,EAAYC,GAAiBxM,oBAAS,IACtC+H,EAAckkB,GAAmBjsB,mBAAS,CAAC,IAC3CksB,EAAkBC,GAAuBnsB,mBAAS,CAAC,GAEpDwV,EAAWtD,iBAAO,KACjBka,EAAkBC,GAAuBrsB,oBAAS,IAClDssB,EAAuBC,GAA4BvsB,oBAAS,IAE5DwsB,EAAwBC,GAA6BzsB,mBAAS,KAC9D0sB,EAAgBC,GAAqB3sB,mBAAS,KAE9C4sB,EAAuBC,GAA4B7sB,mBAAS,KAC5D8sB,EAAkBC,GAAuB/sB,oBAAS,IAElDgtB,EAAiBC,GAAsBjtB,oBAAS,IAChDktB,EAAkBC,GAAuBntB,oBAAS,IAClDotB,EAA0BC,GAA+BrtB,oBAAS,IAElEstB,EAAeC,GAAoBvtB,mBAAS,IAC7CwtB,EAAatb,iBAAO,IAEpBub,EAAkBvb,iBAAO,CAC3BlL,aAAc,EACdY,cAAe,IAGnB3H,qBAAU,KACF4G,GACA6mB,EAAS7mB,EAAQ,GACtB,CAACA,IAEJ5G,qBAAU,KACF8H,EAAa4lB,SACb/jB,EAAsB7B,EAAa4lB,OAAQF,EAAgBtc,QAAQnK,aAAcymB,EAAgBtc,QAAQvJ,eACrGG,EAAa3B,IAAM2B,EAAamB,OAASnB,EAAaoB,MACtDF,EAAelB,IAGP1J,SAASuvB,uBAAuB,YAAY,GACpD3e,gBAAgB,GACzB,CAAClH,IAEJ9H,qBAAU,KAAO,IAAD4tB,EACZ,GAAIvB,GAAyBJ,IAAoC,QAAhB2B,EAAArY,EAASrE,eAAO,IAAA0c,OAAA,EAAhBA,EAAkBnpB,QAAS,EAAG,CAC3E,MAAMopB,EAAkBtY,EAASrE,QAAQtS,MAAKoX,GAAWA,EAAQY,cAAgBqV,EAAiB5jB,aAC9FwlB,IACAC,EAAsBD,GACtBvB,GAAyB,GAEjC,IACD,CAACL,EAAkB1W,EAASrE,UAE/B,MAAMlI,EAAkBlB,IACpByN,EAASrE,QAAU,GACnBwb,EAAkB,IAClBN,GAAoB,GACpB/hB,EAAYK,kBAAkB1B,eAAelB,EAAa3B,GAAI2B,EAAamB,MAAOnB,EAAaoB,KAAMpB,EAAa4lB,OAAQF,EAAgBtc,QAAQnK,aAAcymB,EAAgBtc,QAAQvJ,eACnLtD,IACG+nB,GAAoB,GAChB/nB,GAAUA,EAAOI,OAAS,IAC1B8Q,EAASrE,QAAU7M,EAAO5D,KAAIuV,IAAO,IAAUA,EAASjP,aAAcymB,EAAgBtc,QAAQnK,aAAcY,cAAe6lB,EAAgBtc,QAAQvJ,kBACnJmmB,EAAsBvY,EAASrE,QAAQ,IAC3C,IACD,KACCkb,GAAoB,EAAM,GAEjC,EAGCqB,EAAY7mB,IACd2F,GAAc,GACdyf,EAAgB,CAAC,GACjBsB,EAAiB,IACb1mB,IACAyD,EAAYE,mBAAmBrE,gBAAgBU,GAC1CmnB,IACG,GAAIA,EACA/B,EAAgB+B,GAChBxhB,GAAc,GACdlC,EAAYG,mBAAmBlD,kBAAkBV,GAAUU,IAEvD8lB,IADA9lB,EAA0C,SAAtBA,GAC2B,QAGlD,CACDiF,GAAc,GACEnO,SAASuvB,uBAAuB,4BAA4B,GACpE3e,gBACZ,KAERgf,EAAoBpnB,EAAS,EAAG,GAChCyD,EAAYE,mBAAmB5D,iBAAiBC,GAAUqnB,IAClDA,GAAqBA,EAAkBxpB,OAAS,GAChD6oB,EAAiBW,EAAkB,IAE/C,EAGEH,EAAyB3W,IAC3B,MAAM+W,EAAwB,GAC9B,IAAK,IAAIxpB,EAAI,EAAGA,EAAI6Q,EAASrE,QAAQzM,OAAQC,IAAK,CAC9C,MAAMsR,EAAUT,EAASrE,QAAQxM,GACjCsR,EAAQkB,SAAWlB,EAAQY,aAAeO,EAAgBP,YAC1DsX,EAAsB5gB,KAAK0I,EAC/B,CACAT,EAASrE,QAAUgd,EAEnBxB,EACIvV,EAAkB9M,EAAYK,kBAAkB9B,eAAeuO,EAAgBP,YAAa,GAAIO,EAAgBpQ,aAAcoQ,EAAgBxP,eACxI,IAEV6kB,EAA0BjX,EAASrE,QAAQ9R,QAAOwW,GAAKA,EAAEC,kBAAoBsB,EAAgBtB,kBAAiB,EAG5GmY,EAAsBA,CAACpnB,EAASG,EAAcY,KAChDukB,EAAoB,CAAC,GACrB7hB,EAAYI,uBAAuB/C,gBAC/Bd,EACAG,EACAY,GACCO,IACmB,OAAZA,QAAY,IAAZA,KAAcH,aAA2B,OAAZG,QAAY,IAAZA,KAAcC,eAC3C+jB,EAAoB,CAChBnX,YAAa7M,EAAaH,YAAcG,EAAaC,cACrDgmB,cAAejmB,EAAaC,cAAgBD,EAAaH,YACzDA,YAAaG,EAAaH,YAC1BM,WAAYH,EAAaG,YAEjC,GAEP,EAGCsB,EAAwBA,CAACC,EAAU7C,EAAcY,KACnDmlB,GAAoB,GACpBziB,EAAYM,oBAAoBhB,sBAAsBC,EAAU7C,EAAcY,GACzEymB,IACGxB,EAAyBwB,GACzB3hB,YAAW,IAAMqgB,GAAoB,IAAQ,IAAK,GACpD,EAwBJuB,EAAcA,KAChB,GAAId,EAAWrc,QAAQzM,OAAS,EAAG,CAC/B,IAAI6pB,EAAcf,EAAWrc,QAAQqd,MACrCd,EAASa,EACb,MAEInrB,GAAc,EAatB,OACI9C,eAAA,OAAKY,MAAO,CAAEb,OAAQ,QAASG,SAAA,CAC3BC,cAAC6kB,GAAiB,CACd7jB,QAASurB,EACTzH,QAASiH,EACT7U,UAAWiV,EACXxpB,aAAcA,IAAM6pB,GAAmB,GACvChM,oBAAqBA,CAACjZ,EAAaC,EAAUC,IAnC7B+Y,EAACjZ,EAAaC,EAAUC,KAChDoC,EAAYI,uBAAuB5C,iBAAiBC,EAAcC,EAAaC,EAAUwlB,EAAgBtc,QAAQnK,aAAcymB,EAAgBtc,QAAQvJ,cAAeM,EAAU,EAkC7G+Y,CAAoBjZ,EAAaC,EAAUC,GACtGsd,SAA0B,OAAhB0G,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBlkB,YAC5BD,aAAcA,IAClBtH,cAACuB,EAAmB,CAAC7B,MAAO,QAAS+B,KAAM,OAAQD,SAAU,SAAUR,SAAU8K,IACjF9L,cAACiP,EAAiB,CAACjO,QAASyrB,EAAkBvd,kBAAmB5H,EAAa4H,kBAAmBvM,aAAcA,IAAM+pB,GAAoB,KACzI7sB,eAAA,OAAKY,MAAO,CAAE+B,QAASsJ,IAAexE,EAAamB,MAAQ,OAAS,QAAU3I,UAAU,2BAA0BC,SAAA,CAC9GC,cAAC8P,EAAS,CAACpO,KAAM,iCACjB1B,cAAC+P,GAAU,CAACrQ,MAAM,MAAMgD,QAAS,OAAQxC,QAASA,IAAM2tB,SAE5DhuB,eAAA,OAAKY,MAAOM,EAAe+K,GAAcxE,EAAamB,OAAQ3I,UAAU,oCAAmCC,SAAA,CACvGC,cAAA,OAAKF,UAAU,WAAWI,QAASA,IAAM2tB,IAAc9tB,SACnDC,cAACguB,IAAa,CAACluB,UAAU,iBAE7BE,cAAA,OAAKF,UAAU,eAAeW,MAAO,CAAEyL,gBAAiB,OAAS5E,EAAa2mB,mBAAqB,KAAMluB,SACrGF,eAAA,OAAKC,UAAU,iBAAgBC,SAAA,CAC3BF,eAAA,OAAKC,UAAU,OAAMC,SAAA,CACjBC,cAAA,OAAKF,UAAU,QAAOC,SAEduH,EAAa4mB,aAAeluB,cAAA,OAAKM,IAAKgH,EAAa4mB,eAAmBluB,cAACwnB,GAAK,CAAC9lB,KAAM4F,EAAamB,UAGxG5I,eAAA,OAAKC,UAAU,eAAcC,SAAA,CACzBC,cAACkL,EAAM,CAACC,OAAQ7D,EAAa6D,OAAQ1J,KAAK,SAC1CzB,cAAC4P,EAAa,CAACC,QAAM,EAACnO,KAAM4F,EAAaoB,KAAO,OAASpB,EAAaE,SAAWkL,GAAapL,EAAaE,UAAY,MAAQ,KAAyB,QAAtB8jB,EAAGhkB,EAAayD,cAAM,IAAAugB,OAAA,EAAnBA,EAAqBrrB,KAAIgL,GAASA,EAAM7G,OAAM+pB,KAAK,SACxLnuB,cAACouB,GAAgB,CAAC3C,iBAAkC,OAAhBA,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBlX,YAAaoZ,cAA+B,OAAhBlC,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBkC,gBACpG9tB,eAAA,OAAKC,UAAU,aAAYC,SAAA,CACvBC,cAACqnB,GAAa,CAACrmB,QAAqB,OAAZsG,QAAY,IAAZA,OAAY,EAAZA,EAAc4H,kBAAmBhP,QAASA,IAAMwsB,GAAoB,KAC5F1sB,cAACquB,GAAe,CACZ/nB,QAASgB,EAAa3B,GACtB2oB,aAAchnB,EAAagnB,aAC3Blb,kBAAmBA,CAAC7M,EAAcY,IA/C5CiM,EAAC7M,EAAcY,KACrC6lB,EAAgBtc,QAAU,CACtBnK,aAAcA,EACdY,cAAeA,GAEnBqB,EAAelB,GACf6B,EAAsB7B,EAAa4lB,OAAQ3mB,EAAcY,GACzDqmB,EAAoBlmB,EAAa3B,GAAIY,EAAcY,EAAc,EAwCmBiM,CAAkB7M,EAAcY,KACxFnH,cAACgpB,GAAiB,CAAC9oB,QAASA,KA7ExD2J,EAAYG,mBAAmBrD,mBAAmBW,GAAc,KAC5DslB,GAA4B,EAAM,GA4EwC,EAAC5rB,QAAS2rB,IAC5D3sB,cAACmpB,GAAoB,CAACjpB,QAASA,KAxE3D2J,EAAYG,mBAAmBnD,sBAAsBS,GAAc,KAC/DslB,GAA4B,EAAK,GAuE8C,EAAC5rB,SAAU2rB,aAK9E9sB,eAAA,OAAKC,UAAU,eAAcC,SAAA,CACzBC,cAACuuB,GAAc,CACX9lB,MAAM,YACNgL,UAAW4Y,EACXmC,UAAWrC,GAAyBA,EAAsBlsB,KAAIuX,GAAKA,EAAElC,WACrEmZ,aAAc,2BAClB5uB,eAAA,OAAKC,UAAU,aAAYC,SAAA,CACvBC,cAACuuB,GAAc,CACX9lB,MAAM,WACNgL,UAAWkY,EACX6C,UAAWzZ,EAASrE,SAAW,IAAI,IAAIyE,IAAIJ,EAASrE,QAAQzQ,KAAImV,GAAKA,EAAEC,oBACvEoZ,aAAc,yBAClB5uB,eAAA,OAAKY,MAAOM,GAAgB4qB,IAAoC,QAAhBJ,EAAAxW,EAASrE,eAAO,IAAA6a,OAAA,EAAhBA,EAAkBtnB,QAAS,GAAInE,UAAU,aAAYC,SAAA,CACjGC,cAAC0uB,GAAe,CAAC3Z,SAAUA,EAASrE,QAASie,iBAAmBnZ,GAAY8X,EAAsB9X,KAClGxV,cAACupB,GAAU,CAACrpB,QAASA,IAAMssB,GAAmB,KAC9CxsB,cAAC2nB,GAAiB,CACdC,SAAUqE,EACV/rB,QAASA,KAAYoH,GAAcuC,EAAYI,uBAAuB5C,iBAAiBC,EAAc,EAAG,EAAG0lB,EAAgBtc,QAAQnK,aAAcymB,EAAgBtc,QAAQvJ,cAAc,aAIvMtH,eAAA,OAAKC,UAAU,QAAOC,SAAA,CAClBF,eAAA,OAAKC,UAAU,gBAAeC,SAAA,CAC1BC,cAACsP,EAAe,CAAC7G,MAAM,WAAW/F,QAAS4E,EAAasnB,SAAUrf,QAAQ,SAC1EvP,cAACsP,EAAe,CAAC7G,MAAM,OAAO/F,QAAS4E,EAAaunB,KAAMtf,QAAQ,SAClEvP,cAAC8P,EAAS,CAACpO,KAAM4F,EAAaoe,cAGlC1lB,cAACmrB,GAAuB,CACpB9d,OAAQwf,EACRpD,WAAS,EACT2B,UAAU,oBACVpqB,QAAS6rB,GAAiBA,EAAc5oB,OAAS,EACjD2H,aAAexF,IArGVA,KAC7B2mB,EAAWrc,QAAQ5D,KAAKxF,EAAa3B,IACrCsnB,EAAS7mB,EAAQ,EAmGoC0oB,CAAwB1oB,EAAQ,iBAO7F,EAIA,SAASgoB,GAAgB1Z,GAAuC,IAAtC,iBAAE+W,EAAgB,cAAEkC,GAAejZ,EACzD,OAAI+W,EAAmB,EAEf5rB,eAAA,OAAAE,SAAA,CACIC,cAAC0P,EAAc,CAAC/P,MAAM,OAAO0E,MAA0B,IAAnBonB,IACpCzrB,cAAC4P,EAAa,CAAClO,KAAMgR,GAAaib,EAAgB,IAAM,kBAKzD,IACf,CAEA,SAASY,GAAcnH,GAAiD,IAAhD,MAAE3e,EAAK,UAAE+lB,EAAS,aAAEC,EAAY,UAAEhb,GAAW2T,EACjE,MAAM2H,GAA0B,OAATP,QAAS,IAATA,OAAS,EAATA,EAAWvqB,QAAS,EAAIuqB,EAAUL,KAAK,MAAQM,EAChE/rB,EAAU+Q,EAAYzT,cAACuB,EAAmB,CAAC7B,MAAO,QAAS+B,KAAM,OAAQT,SAAS,IAAW+tB,EACnG,OACI/uB,cAACsP,EAAe,CAAC7G,MAAOA,EAAO/F,QAASA,GAEhD,CAEA,SAASgsB,GAAeM,GAAkC,IAAjC,SAAEja,EAAQ,iBAAE4Z,GAAkBK,EACnD,MAAOC,EAA6BC,GAAkC3vB,oBAAS,IACxE4vB,EAA2BC,GAAgC7vB,oBAAS,GAE3EC,qBAAU,KACN,IAAY,OAARuV,QAAQ,IAARA,OAAQ,EAARA,EAAU9Q,QAAS,EAAG,CACtB,MAAM0S,EAAkB5B,EAAS3W,MAAKgX,GAAKA,EAAEsB,WACzCC,GACAyY,EAA6BzY,EAAgBtB,gBAAkB,MAAQsB,EAAgBb,QAE/F,IAED,CAACf,IAUJ,OAAOlV,eAAA,OAAAE,SAAA,CACHC,cAAC+P,GAAU,CAACrQ,MAAM,OAAOgD,QAASysB,EAA2BjvB,QAASA,IAAMgvB,GAA+B,KAC3GlvB,cAAC8U,GAA8B,CAC3B9T,QAASiuB,EACTla,SAAUA,EACVC,eAAiBQ,GAZDA,KACpB0Z,GAA+B,GACPna,EAAS3W,MAAKgX,GAAKA,EAAEsB,WACzBN,cAAgBZ,EAAQY,aACxCuY,EAAiBnZ,EAAQ,EAQIR,CAAeQ,OAExD,CAEA,SAAS6Y,GAAegB,GAAgD,IAA/C,QAAE/oB,EAAO,aAAEgoB,EAAY,kBAAElb,GAAmBic,EACjE,MAAOC,EAAcC,GAAmBhwB,oBAAS,IAC1C8T,EAAsBC,GAA2B/T,mBAAS,IAC1DiwB,EAAuBC,GAA4BlwB,mBAAS,GAOnE,GALAC,qBAAU,KACN8T,EAAwB,GACxBmc,EAAyB,EAAE,GAC5B,CAACnB,KAECA,EACD,OAAO,KAaX,OAAOzuB,eAAA,OAAAE,SAAA,CACHC,cAACkT,GAAoB,CACjBlS,QAASsuB,EACThpB,QAASA,EACT6M,gBAAiBmb,EACjBlb,kBAAmBA,CAAC7M,EAAcY,IAZZuoB,EAACnpB,EAAcY,KACzCmM,EAAwB/M,GACxBkpB,EAAyBtoB,GACzBiM,EAAkB7M,EAAcY,GAChCooB,GAAgB,EAAM,EAQkCG,CAAsBnpB,EAAcY,GACxFxE,aAAcA,IAAM4sB,GAAgB,KACxCvvB,cAAC+P,GAAU,CACPrQ,MAAM,MACNgD,QAAS,UAAY2Q,EAAuB,cAAgBmc,EAC5DtvB,QAASA,KApBbqvB,GAAgB,EAoBmB,MAE3C,C,MC7XeI,OAXf,SAAkC7wB,GAA+B,IAA9B,MAAE6M,EAAK,QAAE3K,EAAO,QAAEd,GAASpB,EAC1D,OACIe,eAAA,OAAKC,UAAW,mBAAsBkB,EAAqB,GAAX,UAAgBd,QAASA,IAAMA,EAAQyL,EAAMhG,IAAI5F,SAAA,CAC7FC,cAAA,OAAKF,UAAU,aAAYC,SACvBC,cAAA,OAAKM,IAAU,OAALqL,QAAK,IAALA,OAAK,EAALA,EAAOuiB,iBAErBluB,cAAA,OAAKF,UAAU,mBAAmBQ,IAAU,OAALqL,QAAK,IAALA,OAAK,EAALA,EAAOsiB,uBAG1D,E,MC8Ce2B,OA/Cf,SAAsB9wB,GAAuB,IAAtB,OAAEuO,EAAM,QAAEnN,GAASpB,EACtC,MAAO+wB,EAAmBC,GAAwBvwB,mBAAS,IACpDwwB,EAAcC,GAAmBzwB,oBAAS,GAuBjD,OArBAC,qBAAU,KACH6N,GAAUA,EAAOpJ,OAAS,GACzB+rB,GAAgB,EAAK,GAC1B,CAAC3iB,IAEJ7N,qBAAU,KACN,IAAIywB,EASJ,OARIF,IACAE,EAAchkB,YAAW,KACjB4jB,KAA4B,OAANxiB,QAAM,IAANA,OAAM,EAANA,EAAQpJ,QAAS,EACvC6rB,EAAqB,GACpBA,EAAqBD,EAAoB,EAAE,GACjD,MAGA,KACHK,aAAaD,EAAY,CAC5B,GACF,CAACJ,EAAmBE,IAInBlwB,eAAA,OAAKC,UAAU,4BAA2BC,SAAA,CAC/B,OAANsN,QAAM,IAANA,OAAM,EAANA,EAAQpN,KAAI,CAAC0L,EAAOgD,IACjB3O,cAAC2vB,GAAyB,CAEtBhkB,MAAOA,EACP3K,QAAS2N,IAAUkhB,EACnB3vB,QAASA,IAAMA,EAAQyL,EAAMhG,KAHxBgJ,KAIb9O,eAAA,OAAKC,UAAU,+BAA8BC,SAAA,CACzCC,cAACmwB,GAAqB,CAClBC,SAAgB,OAAN/iB,QAAM,IAANA,OAAM,EAANA,EAAQpJ,OAClBuQ,cAAeqb,EACfQ,kBAAoB1hB,GAAUmhB,EAAqBnhB,KACvD9O,eAAA,OAAKC,UAAU,6BAA6BI,QAASA,IAAM8vB,GAAiBD,GAAchwB,SAAA,CACtFC,cAACsb,KAAa,CAACxb,UAAU,OAAOW,MAAO,CAAE+B,QAASutB,EAAe,OAAS,MAC1E/vB,cAACub,KAAS,CAACzb,UAAU,OAAOW,MAAO,CAAE+B,QAAUutB,EAAwB,GAAT,kBAKlF,EAIA,SAASI,GAAqBzb,GAAkD,IAAjD,SAAE0b,EAAQ,cAAE5b,EAAa,kBAAE6b,GAAmB3b,EAEzE,MAAM4b,EAAc,GAEpB,IAAK,IAAIpsB,EAAI,EAAGA,GAAKksB,EAAW,EAAGlsB,IAC/BosB,EAAYxjB,KAAK5I,GAErB,OACIlE,cAAA,OAAKF,UAAU,sBAAqBC,SAC/BuwB,EAAYrwB,KAAKiE,GACdlE,cAAA,OACIE,QAASA,IAAMmwB,EAAkBnsB,GACjCpE,UAAW,YAAc0U,IAAkBtQ,EAAI,YAAc,KAFvDA,MAK1B,CCoCeqsB,OAhGf,SAAiBzxB,GAAqC,IAAD0xB,EAAA,IAAnC,aAAE5kB,EAAY,QAAE6kB,EAAO,OAAEltB,GAAQzE,EAC/C,MAAOgN,EAAYC,GAAiBxM,oBAAS,GAEvCmxB,EAAejf,iBAAO,IACtBkf,EAAalf,iBAAO,KAEnBmf,EAAYC,GAAiBtxB,mBAAS,IAMvCuxB,EAAqB,gBAErBC,EAAYA,CAAC3F,EAAW/d,EAAQ2jB,KAClC,GAAI3jB,GAAUA,EAAOpJ,OAAS,EAAG,CAC7B,IAAI0I,EAAO,CACPlE,MAAO2iB,EACP/d,OAAQA,GAER2jB,EAAmBN,EAAahgB,QAAQugB,QAAQtkB,GAC/C+jB,EAAahgB,QAAQ5D,KAAKH,GAC/BH,EAAaE,SAASikB,EAAWjgB,QAASggB,EAAahgB,SACvD,MAAMwgB,EAAW,IAAIR,EAAahgB,SAClCmgB,EAAcK,EAClB,GAGEC,EAAcA,KAChBR,EAAWjgB,QArBO0gB,IACX,WAAaA,EAoBCC,CAAah0B,EAAQc,gBAAgBH,OAE1D,IAAI4O,EAAQJ,EAAaK,SAAS8jB,EAAWjgB,SAC7CggB,EAAahgB,QAAU,GAEnB9D,GACA8jB,EAAahgB,QAAU9D,EAAMD,KAC7BkkB,EAAcH,EAAahgB,SAC3B3E,GAAc,KAGdlC,EAAYE,mBAAmB1E,kBAC1BgI,IACG0jB,EAAUD,EAAoBzjB,GAC9BtB,GAAc,GACd0kB,GAAS,IACV,KACCltB,GAAQ,IAEhBsG,EAAYE,mBAAmB9D,kBAAkBoH,IAC7C0jB,EAAU,WAAa1zB,EAAQc,gBAAgBH,MAAMszB,oBAAqBjkB,GAAQ,EAAK,IAE3FxD,EAAYE,mBAAmB7D,sBAAsBmH,IACjD0jB,EAAU,sBAAuB1jB,GAAQ,EAAK,IAElDxD,EAAYE,mBAAmBlE,yBAAyBwH,IACpD0jB,EAAU,qBAAsB1jB,EAAO,IAE3CxD,EAAYE,mBAAmBjE,4BAA4BuH,IACvD0jB,EAAU,yBAA0B1jB,EAAO,IAE/CxD,EAAYE,mBAAmBhE,6BAA6BsH,IACxD0jB,EAAU,0BAA2B1jB,EAAO,IAEhDxD,EAAYE,mBAAmB/D,yBAAyBqH,IACpD0jB,EAAU,qBAAsB1jB,EAAO,IAE/C,EAUJ,OAPA7N,qBAAU,KACN2xB,IACA9zB,EAAQC,kBAAiB,KACrB6zB,GAAa,GACf,GACH,IAGCtxB,eAAA,OAAKY,MAAO,CAAEb,OAAQ,QAASG,SAAA,CAC3BC,cAACuB,EAAmB,CAACC,SAAU,SAAUR,SAAU8K,EAAYpM,MAAO,QAAS+B,KAAM,SACrF5B,eAAA,OAAKC,UAAU,sBAAsBW,MAAOM,EAAe+K,GAAY/L,SAAA,CACnEC,cAAC4vB,GAAa,CAACviB,OAAkE,QAA5DmjB,EAAEI,EAAWxyB,MAAKmzB,GAAQA,EAAK9oB,QAAUqoB,WAAmB,IAAAN,OAAA,EAA1DA,EAA4DnjB,OAAQnN,QAAUkG,GAAYwF,EAAaxF,KAC9HpG,cAAA,OAAKF,UAAU,iBACd8wB,EAAWhyB,QAAO2yB,GAAQA,EAAK9oB,QAAUqoB,IAAoB7wB,KAAKuxB,GAE/DxxB,cAACmrB,GAAuB,CAEpBnqB,SAAS,EACToqB,UAAWoG,EAAW/oB,MACtB4E,OAAQmkB,EAAWnkB,OACnBzB,aAAexF,GAAYwF,EAAaxF,IAJnCorB,EAAW/oB,cASxC,E,YCjFegpB,OAnBf,SAAsC3yB,GAAsB,IAArB,MAAE6M,EAAK,QAAEzL,GAASpB,EAMrD,OACIe,eAAA,OAAKC,UAAU,4CAA4CI,QAASA,IAAMA,IAAUH,SAAA,CAChFC,cAAC0L,EAAqB,CAACC,MAAOA,IAC9B3L,cAAA,OAAKF,UAAU,0CAAyCC,SACpDF,eAAA,OAAKC,UAAU,uCAAsCC,SAAA,CACjDC,cAAC4P,EAAa,CAAClO,MAVTA,EAU4BiK,EAAM+Z,SAThDhkB,GAAQA,EAAKuC,OAAS,IAAYvC,EAAK4K,UAAU,EAAG,KAAO,MACnD5K,KASCrE,EAAQoB,eAAiBuB,cAAC4P,EAAa,CAAClO,KAAM,UAAYiK,EAAMpF,aAAe,cAAgBoF,EAAMxE,gBAAoB,KACzHwE,EAAMhE,eAAiBgE,EAAMpE,YAAcvH,cAAC0P,EAAc,CAACrL,MAAQsH,EAAMpE,YAAcoE,EAAMhE,cAAiB,IAAKhI,MAAM,SAAY,aAZhI+B,KAgB1B,ECaegwB,OA/Bf,SAA2C5yB,GAAqE,IAApE,MAAE2J,EAAK,OAAE4E,EAAM,cAAEskB,EAAa,uBAAEC,EAAsB,QAAE1xB,GAASpB,EAezG,OAbAU,qBAAU,KACN,GAAImyB,EAAe,CACf,IAAIhjB,EAAQtB,EAAO8I,WAAU0b,GAAKA,EAAElsB,KAAOgsB,EAAchsB,KACrD2I,EAAO1Q,SAAS2Q,eAAe,gCAAkCI,GACjEL,GACAA,EAAKE,eAAe,CAChBC,MAAO,UACPC,OAAQ,WAGpB,IACD,CAACrB,EAAQskB,IAGR9xB,eAAA,OAAAE,SAAA,CACIC,cAACuB,EAAmB,CAAC7B,MAAO,QAAS+B,KAAM,OAAQD,SAAU,SAAUR,QAAS4wB,IAChF5xB,cAAA,OAAKF,UAAU,qCAAoCC,SAAE0I,IACrDzI,cAAA,OAAKF,UAAU,kCAAiCC,SAC3CsN,EAAOpN,KAAI,CAAC0L,EAAOgD,IACnB3O,cAAA,OAAK2F,GAAI,gCAAkCgJ,EAAM5O,SAC9CC,cAACyxB,GAA6B,CAC1B9lB,MAAOA,EACPzL,QAASA,IAAMA,EAAQyL,MAHyBgD,SAQxE,EC9BImjB,GAA0B,KAsCfC,OApCf,SAA0BjzB,GAA6C,IAA5C,yBAACkzB,EAAwB,aAAEpmB,GAAc9M,EAEhE,MAAOuO,EAAQC,GAAa/N,mBAAS,KAC9B0yB,EAAgBC,GAAqB3yB,oBAAS,GAErDC,qBAAU,KACFwyB,IACAF,GAA0B,MAE1BjoB,EAAYI,uBAAuBhD,kBAAkBoG,IACrD6kB,GAAkB,GACd7kB,GAAUA,EAAOpJ,OAAS,GAC1BqJ,EAAUD,EAAO,IACtB,KACC6kB,GAAkB,EAAM,GAC1B,GACH,IAEH,MAKMC,EAAa90B,EAAQc,gBAAgBH,MAAM+X,cAEjD,OACI/V,cAAC0xB,GAAkC,CAC/BjpB,MAAO4E,GAAUA,EAAOpJ,OAAS,EAAI,wBAA0BkuB,EAAa,oBAAsB,MAAQA,EAAa,WACvHP,uBAAwBK,EACxB5kB,OAAQA,EACRskB,cAAeG,GACf5xB,QAAUyL,GAbGA,KACjBmmB,GAA0BnmB,EAC1BC,EAAaD,EAAMhG,GAAG,EAWEysB,CAAYzmB,IAE5C,ECnCI0mB,GAAmB,KAsCRC,OApCf,SAA6BxzB,GAA8C,IAA7C,yBAAEkzB,EAAwB,aAAEpmB,GAAc9M,EAEpE,MAAOyzB,EAAiBC,GAAsBjzB,mBAAS,KAChD0yB,EAAgBC,GAAqB3yB,oBAAS,GAErDC,qBAAU,KACFwyB,IACAK,GAAmB,MAEnBxoB,EAAYG,mBAAmBtD,qBAAqB+rB,IACpDP,GAAkB,GACdO,GAAoBA,EAAiBxuB,OAAS,GAC9CuuB,EAAmBC,EAAiB,IACzC,KACCP,GAAkB,EAAM,GAC1B,GACH,IAEH,MAKMC,EAAa90B,EAAQc,gBAAgBH,MAAM+X,cAEjD,OACI/V,cAAC0xB,GAAkC,CAC/BjpB,MAAO8pB,GAAmBA,EAAgBtuB,OAAS,EAAI,wBAA0BkuB,EAAa,uBAAyB,iBAAmBA,EAC1IP,uBAAwBK,EACxB5kB,OAAQklB,EACRZ,cAAeU,GACfnyB,QAAUyL,GAbQA,KACtB0mB,GAAmB1mB,EACnBC,EAAaD,EAAMhG,GAAG,EAWEiJ,CAAiBjD,IAEjD,E,wBCTe+mB,OAvBf,SAAkB5zB,GAAgD,IAA/C,YAAE6zB,EAAW,cAAEC,EAAa,MAAEC,EAAK,MAAExuB,GAAOvF,EAE3DU,qBAAU,KACNszB,EAAQzuB,EAAM,GACf,CAACA,IAEJ,MAAO3C,EAAMoxB,GAAWvzB,mBAAS,IAE3ByR,EAAkB3M,IACpByuB,EAAQzuB,GACRuuB,EAAcvuB,EAAM,EAGxB,OACIrE,cAAA,OAAKF,UAAU,uBAAsBC,SACjCF,eAAA,OAAKC,UAAW,eAAiB+yB,EAAQ,QAAU,IAAI9yB,SAAA,CACnDC,cAAC+yB,KAAS,CAAC1uB,MAAO3C,EAAMoe,SAAWhiB,IAAQkT,EAAelT,EAAE8S,OAAOvM,MAAM,EAAI2uB,YAAaL,IAC1F3yB,cAAC4C,IAAS,CAACnC,MAAOM,EAAeW,GAAO5B,UAAU,oBAAoBI,QAASA,KAAQ8Q,EAAe,GAAG,QAIzH,ECpBA,MAAMiiB,GAAgB,CAClBC,YAAa,GACbrvB,OAAQ,GACRsvB,KAAKD,EAAa7lB,GACd5P,KAAKy1B,YAAcA,EACnBz1B,KAAKoG,OAASwJ,CAClB,EACA+lB,QACI31B,KAAKy1B,YAAc,GACnBz1B,KAAKoG,OAAS,EAClB,GA0EWwvB,OAvEf,SAAqBv0B,GAAmC,IAAlC,cAAEsO,EAAa,aAAExB,GAAc9M,EACjD,MAAOo0B,EAAaI,GAAkB/zB,mBAAS,KACxC8N,EAAQC,GAAa/N,mBAAS,KAC9BkO,EAAkBC,GAAuBnO,oBAAS,GAEnDg0B,EAAiB9hB,iBAAOyhB,IAQvBM,EAAmBC,GAA6BC,sBANtBC,CAACC,EAAOC,IAChB,IAAjBA,EAA2B,gBACL,IAAjBA,EAA2B,aAC3BA,EAAe,EAAUA,EAAe,WACrC,IAE4E,IA8C5F,OA5CAr0B,qBAAU,KACH4N,GAAiB8lB,IAAgBD,GAAcC,cAGlDK,EAAe7iB,QAAUwiB,EACrBA,GAAeA,EAAYjvB,OAAS,EACpCgI,YAAW,KACHinB,IAAgBK,EAAe7iB,UAC/BhD,GAAoB,GACpB+lB,GAA2B,GAC3BnmB,EAAU,IACV2lB,GAAcG,QACdvpB,EAAYE,mBAAmBnE,aAAastB,GACvC7lB,IACGK,GAAoB,GACjB6lB,EAAe7iB,SAAWwiB,IAAgBK,EAAe7iB,UACxD+iB,EAA0BpmB,EAAOpJ,QAC7BoJ,GAAUA,EAAOpJ,OAAS,IAC1BqJ,EAAUD,GACV4lB,GAAcE,KAAKD,EAAa7lB,IAExC,IAEJ,KACIK,GAAoB,GACpB+lB,EAA0B,EAAE,IAExC,GACD,MAGHA,GAA2B,GAC3BnmB,EAAU,KACd,GACD,CAAC4lB,IAEJ1zB,qBAAU,KACH4N,IACCE,EAAU2lB,GAAcpvB,QACxB4vB,EAA0BR,GAAcpvB,OAAOI,QAC/CqvB,EAAeL,GAAcC,aACjC,GACD,IAGCrzB,eAAA,OAAKC,UAAU,wBAAuBC,SAAA,CAClCC,cAAC0yB,GAAS,CAACC,YAAY,+BAA+BE,OAAK,EAACD,cAAgBlxB,IAAW4xB,EAAe5xB,EAAK,IAC3G1B,cAACuB,EAAmB,CAAC7B,MAAO,QAAS+B,KAAM,OAAQT,QAASyM,IAC5D5N,eAAA,OAAKC,UAAU,uBAAsBC,SAAA,CACjCC,cAACwpB,GAAc,CAACnc,OAAQA,EAAQzB,aAAexF,GAAYwF,EAAaxF,KACxEpG,cAAA,OAAKF,UAAU,eAAcC,SAAEyzB,SAI/C,E,OC7EeM,OAZf,SAAmBh1B,GAAwB,IAAvB,QAAEoB,EAAO,QAAEc,GAASlC,EAEpC,IAAIkC,EACA,OAAO,KAEX,MAAM0B,EAAU1C,cAAA,OAAAD,SAAK,SAErB,OACIC,cAAC+P,GAAU,CAACrN,QAASA,EAASsN,UAAQ,EAACtQ,MAAO,MAAOQ,QAASA,IAAMA,KAE5E,ECmGe6zB,OAlGf,WAEI,MAAOC,EAAaC,GAAkB10B,mBAAS,IACzC20B,EAAiBziB,iBAAO,KACvB0iB,EAAoBC,GAAyB70B,oBAAS,IACtD80B,EAAgBC,GAAqB/0B,oBAAS,IAC9Cg1B,EAAgBC,GAAqBj1B,mBAAS,KAC9Ck1B,EAAcC,GAAmBn1B,mBAAS,KAC1Co1B,EAAcC,GAAmBr1B,mBAAS,KAC1Cs1B,EAAgBC,GAAqBv1B,mBAAS,KAE9Cw1B,EAAiBC,GAAsBz1B,oBAAS,IAEhD01B,EAAcC,GAAmB31B,mBAAS,IAGjDC,qBAAU,KACN01B,EAAgB,CAAC,CACbpf,QAAS,QACTM,YAAa4d,EACb3rB,SAAUssB,KAGTX,GACDhrB,IAEJkrB,EAAexjB,QAAUsjB,CAAW,GAErC,CAACA,EAAaW,IAEjB,MAAM3rB,EAAoBA,KACtBsrB,GAAkB,GAClBQ,EAAkB,mBAClBjrB,EAAYK,kBAAkBlB,mBACzBmsB,IACGb,GAAkB,GAClBE,EAAkBW,EAAM,IAE5B,KACIb,GAAkB,GAClBE,EAAkB,GAAG,GACvB,EAGJY,EAAqBpB,IACvBI,GAAsB,GACtBQ,EAAgB,IAChBX,EAAeD,GACfU,EAAgB,GAAG,EA4BjBW,EAAiCA,IAC5BlB,GAAuBM,GAAgBA,EAAaxwB,OAAS,EAIxE,OACIpE,eAAA,OAAKC,UAAU,8BAA6BC,SAAA,CACxCC,cAAA,OAAKF,UAAU,QAAOC,SAAC,6EACvBC,cAAC0yB,GAAS,CAACC,YAAY,4BAA4BE,OAAK,EAACD,cAAgBlxB,GAAS0zB,EAAkB1zB,GAAO2C,MAAO2vB,IAElHn0B,eAAA,OAAKY,MAAO,CAAE4K,OAAQ,UAAWtL,SAAA,CAC7BC,cAAC8zB,GAAU,CAAC9yB,SAAUq0B,IAAkCn1B,QAASA,KAnCzEw0B,EAAgB,IAChBN,GAAsB,GACtBU,EAAkB,wBAElBjrB,EAAYK,kBAAkBnB,gBAAgBirB,GACzClwB,IACOqe,mBAAmB+R,EAAexjB,WAAayR,mBAAmBre,EAASwxB,QAC3ElB,GAAsB,GACtBM,EAAgB5wB,EAASqxB,OAC7B,IAEHrxB,IACOqe,mBAAmB+R,EAAexjB,WAAayR,mBAAmBre,EAASwxB,QAC3ElB,GAAsB,GACtBM,EAAgB,IACpB,OAqBC7vB,QAAQsvB,IAAuBtvB,QAAQwvB,GAAkBr0B,cAACuB,EAAmB,CAACP,SAAO,EAACS,KAAK,OAAO/B,MAAM,QAAQgC,KAAMmzB,IAAqB,QAEhJ70B,cAACu1B,GAAc,CAACv0B,SAAUq0B,IAAkCF,MAAOZ,EAAgBr0B,QAAU8zB,IAAkBoB,EAAkBpB,EAAY,IAC7Ih0B,cAACw1B,GAAgB,CAACx0B,QAASq0B,IAAkCrB,YAAaA,EAAamB,MAAOV,EAAcgB,gBAAkBC,GApB7GA,KACrBd,EAAgBc,GAChBV,GAAmB,EAAK,EAkBmHS,CAAgBC,KAEvJ11B,cAAC6kB,GAAiB,CAAC7jB,QAAS+zB,EAAiBjQ,QAASmQ,EAActyB,aAAcA,IAAMqyB,GAAmB,GAAQxU,oBAAqBA,WAGpJ,EAIA,SAASgV,GAAgB12B,GAAoD,IAAnD,QAAEkC,EAAO,YAAEgzB,EAAW,MAAEmB,EAAK,gBAAEM,GAAiB32B,EACtE,OAAKkC,EAGEhB,cAAC21B,GAAS,CACb3B,YAAaA,EACbmB,MAAOA,EACPM,gBAAkBC,GAASD,EAAgBC,GAC3CE,YAAY,kBACZxK,UAAU,kBAPH,IAQf,CAEA,SAASmK,GAAc7gB,GAA+B,IAA9B,QAAE1T,EAAO,MAAEm0B,EAAK,QAAEj1B,GAASwU,EAC/C,OAAK1T,EAGEhB,cAAC21B,GAAS,CACbR,MAAOA,EACPU,YAAc7B,GAAgB9zB,EAAQ8zB,GACtC4B,YAAY,cACZxK,UAAU,8BANH,IAOf,CAEA,SAASuK,GAASvO,GAAgF,IAA/E,YAAE4M,EAAW,MAAEmB,EAAK,YAAEU,EAAW,gBAAEJ,EAAe,YAAEG,EAAW,UAAExK,GAAWhE,EAE3F,MAAO0O,EAAmBC,GAAwBx2B,mBAAS,MAO3D,GALAC,qBAAU,KACNu2B,EAAqB,KAAK,GAC3B,CAACZ,KAGCA,GAA0B,IAAjBA,EAAMlxB,OAChB,OAAO,KAEX,MAYM+xB,EAAY,CACd3jB,QAAS,WACTlQ,SAAU,OACViJ,WAAY,MACZG,aAAc,MACd+G,OAAQ,WAGN2jB,EAAoB,IACnBD,EACH7N,WAAY,yFAGV+N,EAAa,IACZF,EACH7zB,SAAU,OACVzC,MAAO,WAILy2B,EAAeA,CAACT,EAAM/mB,IACJ,oBAAhBinB,EACO51B,cAACo2B,GAAe,CACnBpC,YAAaA,EACb0B,KAAMA,EACNW,WAAY1nB,IAAUmnB,EACtB51B,QAASA,IAAM61B,EAAqBpnB,GACpC8mB,gBAAiBA,IAAMA,EAAgBC,KAEtB,gBAAhBE,EACE51B,cAACs2B,GAAW,CAACZ,KAAMA,EAAMx1B,QAAU8zB,GAAgB6B,EAAY7B,UADrE,EAKHuC,EAAeA,CAAC5nB,EAAO6nB,KACzB,GAAI7nB,IAAUmnB,EAAmB,CACbl4B,SAAS2Q,eAAe,UAAYI,GAC5ClO,MAAM0nB,WAAaqO,EAAQ,UAAY,EACnD,GAGJ,OACI32B,eAAA,OAAKY,MAtDsB,CAC3Bd,MAAO,OAqD4BI,SAAA,CAC/BC,cAAA,OAAKS,MAAOy1B,EAAWn2B,SAAEqrB,IACzBprB,cAAA,OAAKS,MApDS,CAClB0nB,WAAY,kEACZ5c,aAAc,OACd8G,QAAS,QACTN,UAAW,QACXC,UAAW,QA+CmBjS,SACrBo1B,EAAMl1B,KAAI,CAACy1B,EAAM/mB,IACd3O,cAAA,OACI2F,GAAI,UAAYgJ,EAEhBqP,aAAcA,KAAQuY,EAAa5nB,GAAO,EAAK,EAC/C2K,aAAcA,KAAQid,EAAa5nB,GAAO,EAAM,EAAIlO,MAAOkO,IAAUmnB,EAAoBG,EAAoBD,EAAUj2B,SACtHo2B,EAAaT,EAAM/mB,IAHfA,SAU7B,CAEA,SAASynB,GAAepH,GAA+D,IAA9D,YAAEgF,EAAW,KAAE0B,EAAI,WAAEW,EAAU,QAAEn2B,EAAO,gBAAEu1B,GAAiBzG,EAC5EyH,EAAc,KASlB,OARIJ,IACAI,EACI52B,eAAA,OAAKC,UAAU,yBAAwBC,SAAA,CACnCC,cAACupB,GAAU,CAACrpB,QAASA,IAAMu1B,MAC3Bz1B,cAAC2nB,GAAiB,CAACC,SAAU/d,EAAYK,kBAAkB9B,eAAe4rB,EAAa0B,SAK/F71B,eAAA,OACIK,QAASA,IAAMA,IAAUH,SAAA,CACxB21B,EACAe,IAGb,CAEA,SAASH,GAAWjH,GAAqB,IAApB,KAAEqG,EAAI,QAAEx1B,GAASmvB,EAgClC,OACIxvB,eAAA,OAAKK,QAASA,IAAMA,EAAQw1B,EAAKJ,MAAMv1B,SAAA,CACnCC,cAAA,OAAKS,MAjCK,CACdyB,UAAW,OACXxC,MAAO,QA+BmBK,SA5BT22B,KACjB,MAAMC,EAAQ,IAAI/T,KAEZgU,EAAY,IAAIhU,KACtBgU,EAAUC,QAAQD,EAAUE,UAAY,GAExC,MAAMC,EAAO,IAAInU,KAAK8T,GAEtB,IAAIM,EAAM,GACV,GAAIJ,EAAUK,iBAAmBF,EAAKE,eAClCD,EAAM,iBACL,GAAIL,EAAMM,iBAAmBF,EAAKE,eACnCD,EAAM,YACL,CACD,IAAI3a,EAAU,CAAE3T,KAAM,UAAWwuB,MAAO,OAAQF,IAAK,WACrDA,EAAMD,EAAKI,eAAe,QAAS9a,EACvC,CAOA,OAAO2a,EAAM,KALAD,EAAKK,mBAAmBC,UAAU/hB,SAAU,CACrDgiB,KAAM,UACNC,OAAQ,UACRC,QAAQ,GAEY,EAKIC,CAAY/B,EAAKgC,sBACzC13B,cAAA,OAAKS,MAAO,CAAEyB,UAAW,QAASnC,SAAE21B,EAAKJ,SAGrD,CCtQeqC,OAZf,SAAe74B,GAAqC,IAApC,WAAE84B,EAAU,kBAAEC,GAAmB/4B,EAE7C,MAAOg5B,EAAiBC,GAAsBx4B,mBAAS,CAAC,GAOxD,OALAC,qBAAU,KACN,IAAIw4B,EAAYJ,EAAWx5B,MAAK2O,GAAKA,EAAEpH,KAAOkyB,IAC3CG,GAAWD,EAAmBC,EAAU,GAC7C,CAACJ,EAAYC,IAER73B,cAAA,OAAKS,MAAsB,OAAfq3B,QAAe,IAAfA,OAAe,EAAfA,EAAiBtoB,eAAezP,SAAiB,OAAf+3B,QAAe,IAAfA,OAAe,EAAfA,EAAiBG,QAC1E,EC0JeC,OApJf,WACEruB,EAAYC,OAEZ,MAAOquB,EAAeC,GAAoB74B,mBAAS,OAC5C84B,EAA4BC,GAAiC/4B,oBAAS,IAEtEg5B,EAAkBC,GAAuBj5B,mBAAS,OAClDk5B,EAA+BC,GAAoCn5B,oBAAS,IAE5Eo5B,EAAuBC,GAA4Br5B,oBAAS,IAE5Ds5B,EAA6BC,GAAkCv5B,oBAAS,IACxEw5B,EAAiCC,GAAsCz5B,oBAAS,IAEhF05B,EAAqBC,GAA0B35B,oBAAS,IACxD45B,EAAgBC,GAAqB75B,oBAAS,IAE9C85B,EAA4BC,GAAiC/5B,oBAAS,IAEtE6G,EAASmzB,GAAch6B,mBAAS,IAEjCi6B,EAAiBC,IACrBC,EAA6BC,GAC7BC,EAA2BH,EAAY,EAenCI,EAA6BzzB,IACjCmzB,EAAWnzB,GACXozB,EAAcM,EAAUC,sBAAsB,EAO1CC,EAA+BA,KACnC1B,GAA8B,GAC9BI,GAAiC,GACjCI,GAA+B,GAC/BE,GAAmC,GACnCJ,GAAyB,GARzBY,EAAcS,EASS,EAGnBH,EAAY,CAChBI,SAAU,WACVC,oBAAqB,gBACrBC,uBAAwB,mBACxBL,sBAAuB,wBACvBM,sBAAuB,wBACvBC,yBAA0B,2BAC1BC,aAAc,eACdC,gBAAiB,mBAGbC,EAAS,CACb7C,WAAY,CACV,CACEjyB,GAAIm0B,EAAUI,SACdjC,OAASj4B,cAACuwB,GAAQ,CAChBE,QAASA,KAAQyI,GAAuB,EAAM,EAC9C31B,OAAQA,KAAQ61B,GAAkB,EAAK,EACvCxtB,aAAexF,GAAYyzB,EAA0BzzB,MAEzD,CACET,GAAIm0B,EAAUK,oBACdlC,OAASj4B,cAAC06B,EAAkB,CAC1BzvB,MAAOktB,EACP/qB,cAAeirB,EACfzsB,aAAexF,GAAYyzB,EAA0BzzB,KACrDoJ,eAAgB,CAAE5P,OAAQ,SAE9B,CACE+F,GAAIm0B,EAAUM,uBACdnC,OAASj4B,cAAC26B,EAAqB,CAC7B3rB,SAAUupB,EACVnrB,cAAeqrB,EACf7sB,aAAexF,GAAYyzB,EAA0BzzB,KACrDoJ,eAAgB,CAAE5P,OAAQ,SAE9B,CACE+F,GAAIm0B,EAAUC,sBACdvqB,eAAgB,CAAE5P,OAAQ,QAC1Bq4B,OAASj4B,cAAC46B,GAAqB,CAC7Bx0B,QAASA,EACTzD,aAAcA,IAAMq3B,OAExB,CACEr0B,GAAIm0B,EAAUO,sBACdpC,OAASj4B,cAAC+xB,GAAiB,CACzBC,yBAA0B+G,EAC1BntB,aAAexF,GAAYyzB,EAA0BzzB,MAEzD,CACET,GAAIm0B,EAAUQ,yBACdrC,OAASj4B,cAACsyB,GAAoB,CAC5BN,yBAA0B6G,EAC1BjtB,aAAexF,GAAYyzB,EAA0BzzB,MAEzD,CACET,GAAIm0B,EAAUS,aACdtC,OAASj4B,cAACqzB,GAAY,CAACjmB,cAAeurB,EAAwB/sB,aAAexF,GAAYyzB,EAA0BzzB,MAErH,CACET,GAAIm0B,EAAUU,gBACdvC,OAASj4B,cAAC+zB,GAAe,QAIxB4F,EAAyBC,GAA8Br6B,mBAASu6B,EAAUI,WAC1ED,EAA2BP,GAAgCn6B,mBAASu6B,EAAUI,UAErF,OACEr6B,eAAA,OAAKC,UAAU,MAAKC,SAAA,CAClBC,cAACsC,EAAY,CAACtB,QAASi4B,EAAqB12B,iBAAkB42B,IAC9Dn5B,cAACqK,EAAe,CACdrJ,QAASq4B,EACT/uB,aAAeW,IAAYquB,GAA8B,GAvG5BruB,KACjCmtB,EAAiBntB,GACjBqtB,GAA8B,GAC9BkB,EAAcM,EAAUK,oBAAoB,EAoGyBU,CAA0B5vB,EAAM,EACjGV,gBAAkByE,IAAesqB,GAA8B,GAlG/BtqB,KACpCwpB,EAAoBxpB,GACpB0pB,GAAiC,GACjCc,EAAcM,EAAUM,uBAAuB,EA+F4BU,CAA6B9rB,EAAS,EAC7GrM,aAAcA,IAAM22B,GAA8B,KAEpDt5B,cAACnB,EAAM,CACLE,cAAeA,KAAQ65B,GAAyB,GAAQgB,EAA2BE,EAAUS,aAAa,EAC1Gv7B,YAAaA,IAAM46B,EAA2BE,EAAUI,UACxDj7B,iBAAkBA,IAAMq6B,GAA8B,GACtDp6B,qBAAsBA,KAAQ85B,GAAmC,GAAQY,EAA2BE,EAAUO,sBAAsB,EACpIl7B,wBAAyBA,KAAQ25B,GAA+B,GAAQc,EAA2BE,EAAUQ,yBAAyB,EACtIl7B,mBAAoBA,KAAMw6B,EAA2BE,EAAUU,gBAAgB,EAC/En7B,gBAAiBA,KAAMu6B,EAA2BE,EAAUI,SAAS,IACvEl6B,cAAA,OAAKF,UAAU,cAAaC,SAC1BC,cAAC23B,GAAM,CAACC,WAAY6C,EAAO7C,WAAYC,kBAAmB8B,QAIlE,ECzJeoB,OAZSC,IAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAKp8B,IAAkD,IAAjD,OAAEq8B,EAAM,OAAEC,EAAM,OAAEC,EAAM,OAAEC,EAAM,QAAEC,GAASz8B,EACpEq8B,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,EAAY,GAExB,ECHFQ,IAASvD,OACPj4B,cAACy7B,IAAMC,WAAU,CAAA37B,SACfC,cAACk4B,GAAG,MAENt6B,SAAS2Q,eAAe,SAM1BwsB,I","file":"static/js/main.fecdf36d.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARQAAAAlCAMAAAC0/+b3AAACdlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qNy/4AAAA0XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFxgaGxwdHh8gIiMkJSYnKCkqKywtLzAxMzQ3ODk7PT9AQUJDRUZHSElLTE1OT1JUVVZXWFlaW1xdXl9gYWJjZGVmaGlqa2xvcHFydHV2eHl6fH1+f4CCg4SGh4iKi42Oj5OUlZeYmZucnZ+hoqOkpaanqKmqq6ytrq+xsrO1uLm6u72+v8HCw8TFx8jJysvMzc7P0NHT1NbZ2tzd3uDh4uPk5ebn6Orr7O3u7/Dx8vP09fb3+Pn6+/z9/jaJQ6QAAAABYktHRNF50f8KAAAE2ElEQVRo3u2a6WNMVxTAz0xEQhASYxe7WCKaVBCEStrQVitVVbWFLqqIXWOX2lpp7TShpUVXiSpKS1AqsiCduf9RM/ecO+++ee+Nl8w1uR96vrx3z7nb+82ce8599wH8LzaSu4PLh/bWRWjNpOLGHY6yUWo1vELIif1ri4Y6D+6yP4AtXJfr/rEyyrlk2JjexQG2drZYVqIFYAlDmWbX9Yt+brvUjsq3maPclpplmU23SrMdpu6yP4BGrlviHkoe9pJnYxr0CG27ww1vo77egPKHFRwkXOYmfzZEBaVZfnrFow0UmEND5JvVA2pRvdCAwkqtrVejZRtEDYWxs0O1gQLlaKzxycq4c6g96ZGg+C3/8VFPcXpdVUBhdbO1gdLtBloPy8qPUHevF0hQWHV7c9O4C6h/DZRAYYFPdIECObhWsiJDNeYJqgrBBIWFTXopar+WVNMLHWW6VC0pk2Ts1DdLzv8bGqAkfHIu+1MOBdai+Z/+QpFYjZq9EAblcbpp3anjysZB0Qb9lFUPxQhzW9uHaijxF9F+xkuKTyncJIdDYee8RjNPBeo+VpALpR6iARrTNYECgykuF1O2FsB1dQJYoLAFlrh1ub2KDNFTQgOc9mgCRSQl+DN1u4mlTWAD5WEf0abn37g45mASFzWWzTTCFF2gwJeUQcU33x/A+6pEM5Tv8XIsLJSX8cI7JVFD8Z7CDiu0gZJyM7T6v4p3T0aDGcrYGrzOQO1LFLR5epNWGz0UGIFRMJCmCxQYh2GxKas3egX7AMKgpBVSlpcSVCb/haW3+I98himAAl9gl+9rAwXWYZ0rlXj91muBIhyGb5N2UorCl8VipgRKPmXR+kBpd15eTx9JuUcIiu8O/r+b9+fjMUDdD2a8MKzBgNJ/gIO4iFFJj3mntXL8cd3fc4ECQ+okKHPABgqQA/3escMVvHuD47wgpaKOaflIF/OkfKm3mzR/ZEygwFxjRNM+yIAiHGjDerwe4fYVTBWUY1g1SyMo8FVoq+VzgEIO1NTEL3d78H3SU2VQdmHVSTpBSSUHCpjfsUlQhANJ28W4KqYMyh6sOlknKPNpvO3gCEU4UFA+54pOTB0USt+yNYIyvB6rXe0cAQo5UNDHuttBOVjhIG5Ssmp5JBlK5bP7ez5QEn5hlL9BBCiGAxWAHZRopCfG+QavBUpiG+UpsIkedjVEhCIcaA8oh1KEXX0D2kCZjD8T+yG4J4TX5zlCQQf6s6t6KN9hVyu0geK7hXUahvFErrZusBMUKAiWpoJyKLTFDAzUBspRcp5F/HXkz4z9GO8EJehAO0E5lOTf7F4dtCWU94jJKb7v2GZ6TAuU7jXXuyiH4j1OU8jVBUo6ReMHfY0A489xggIFE0A1lCR6zWU6GmhTKAm/0oxm8uI+LFzr4gRFFjVQMi7RDOqH6AJFvB7dR+5Bi+5nMYLifeFgQGQ/RaAJlCk0pRsizOYF5DePLYIS4fBK3tKkCuWsxWvK7xnJuyVJaiGUMuuwL7cKio/2F/6JIVUpau73aTGUCMecVVIrh2NT6xFSC6HYSGNroHjEsr/Z0HXALyxYpTeWUB4Ugi5QFojTc3nkTPycgC2LIZTj/UAXKCMa6EhjjEm9nA6PR8cKSqX9l1ltAiVBxMKwT9riztL/5z/xk1pSPhmQ0AAAAABJRU5ErkJggg==\"","const AppMode = {\r\n    onAppModeChanged(callback) {\r\n        const eventName = 'appModeChanged';\r\n        if (!this.modeChangedEvent)\r\n            this.modeChangedEvent = new Event(eventName);\r\n        document.addEventListener(eventName, (e) => {\r\n            if (callback)\r\n                callback()\r\n        }, false);\r\n    },\r\n    modeChangedEvent: null,\r\n    modes: [\r\n        {\r\n            label: 'Films',\r\n            urlKey: 'movies',\r\n            isActive: true\r\n        },\r\n        {\r\n            label: 'Series',\r\n            urlKey: 'series',\r\n            isActive: false\r\n        }\r\n    ],\r\n    getActiveMode() {\r\n        return this.modes.find(mode => mode.isActive);\r\n    },\r\n    switchActiveMode() {\r\n        this.modes.forEach(mode => {\r\n            mode.isActive = !mode.isActive;\r\n        });\r\n        if (this.modeChangedEvent)\r\n            document.dispatchEvent(this.modeChangedEvent);\r\n    },\r\n    isSeriesMode() {\r\n        console.log(\"this.modes.filter(mode => mode.isActive)\", this.modes.filter(mode => mode.isActive))\r\n        return this.modes.filter(mode => mode.isActive)[0].urlKey === \"series\"\r\n    }\r\n}\r\n\r\nexport default AppMode;","import \"../../style/nav-bar.css\";\r\nimport logo from '../../assets/logo.png';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from '../../services/appMode';\r\n\r\nfunction NavBar({ onSearchClick, onHomeClick, onGenreMenuClick, onWatchedMediasClick, onBookmarkedMediasClick, onTorrentLinkClick, onAppModeSwitch }) {\r\n\r\n    const [modes, setModes] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        setModes(AppMode.modes);\r\n    },[]);\r\n\r\n    const switchAppMode = () => {\r\n        AppMode.switchActiveMode();\r\n        const updatedModes = [...AppMode.modes];\r\n        setModes(updatedModes);\r\n        onAppModeSwitch(AppMode.getActiveMode());\r\n    }\r\n\r\n    const navBarIconStyle = {\r\n        color: 'white',\r\n        width: '30px',\r\n        height: '30px'\r\n    }\r\n\r\n    return (\r\n        <div className=\"nav-bar-container\">\r\n            <div className=\"nav-bar-left\">\r\n                {modes.map(mode => <div key={mode.label} className={\"mode \" + (mode.isActive ? 'active' : '')} onClick={()=> {if(!mode.isActive)switchAppMode()}}>{mode.label}</div>)}\r\n            </div>\r\n            <img className=\"nav-bar-logo\" alt=\"\" src={logo} />\r\n            <div className=\"nav-bar-right\">\r\n                <div className=\"nav-bar-btn\" onClick={() => onHomeClick()}>\r\n                    <HomeIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onWatchedMediasClick()}>\r\n                    <VisibilityIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onBookmarkedMediasClick()}>\r\n                    <BookmarkIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onGenreMenuClick()}>\r\n                    <ViewModuleIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onSearchClick()}>\r\n                    <SearchIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onTorrentLinkClick()}>\r\n                    <LinkIcon style={navBarIconStyle} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default NavBar;","function fadeTransition(visible, speedTransition, zIndex){\r\n    var speed = speedTransition ? speedTransition + 's' : '0.5s';\r\n\r\n    const transitionStyle = {\r\n            visibility: visible ? 'visible' : 'hidden',\r\n            opacity: visible ? '1' : '0',\r\n            transition: \"all \" + speed\r\n    }\r\n\r\n    if(zIndex)\r\n        transitionStyle.zIndex = visible ? zIndex : '-1';\r\n    \r\n\r\n    return transitionStyle;\r\n}\r\n\r\nexport default fadeTransition;","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useEffect, useState } from 'react';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nfunction CircularProgressBar({ position, color, size, visible, text }) {\r\n\r\n    const [positionStyle, setpositionStyle] = useState({});\r\n    const [displayedText, setDisplayedText] = useState();\r\n\r\n    const textStyle = {\r\n        color: 'white',\r\n        fontSize: '20px',\r\n        fontWeigth: 'bold'\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (position === 'center') {\r\n            setpositionStyle({\r\n                position: 'fixed',\r\n                top: '50%',\r\n                left: '50%',\r\n                transform: 'translate(-50%, -50%)',\r\n                textAlign: 'center'\r\n            })\r\n        }\r\n    }, [position]);\r\n\r\n    useEffect(() => {\r\n        setDisplayedText(text);\r\n    }, [text]);\r\n\r\n    return (\r\n        <div style={fadeTransition(visible)}>\r\n            <div style={positionStyle}>\r\n                <div style={textStyle}>{displayedText}</div>\r\n                <CircularProgress style={{ color: color, width: size, height: 'auto' }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CircularProgressBar;","\r\nimport \"../style/splashscreen.css\";\r\nimport logo from '../assets/logo.png';\r\nimport CircularProgressBar from \"./common/CircularProgressBar\";\r\n\r\nfunction SplashScreen({visible, showErrorMessage}) {\r\n    \r\n    return (\r\n        <div className={\"splash-screen-container\" + (visible ? '' : ' hidden')}>\r\n           <img alt=\"\" src={logo} />\r\n           <CircularProgressBar color='white' size='40px' visible={!showErrorMessage}/>\r\n           <div className=\"error-message\" style={{display: showErrorMessage ? '' : 'none'}}>\r\n                The application failed to load, try to relaunch it\r\n           </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SplashScreen;","import \"../../style/modal-window.css\";\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nfunction ModalWindow({ visible, content, onCloseClick }) {\r\n    return (\r\n        <div style={fadeTransition(visible)} className={\"modal-window-container\" + (visible ? \" visible\" : \"\")}>\r\n            <div className=\"modal-window-content\">\r\n                <div className=\"modal-window-close-btn\" style={{ display: onCloseClick ? '' : \"none\" }} onClick={() => onCloseClick()}>\r\n                    <ClearIcon className=\"close-cross\" />\r\n                </div>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ModalWindow;","class BaseApiService {\r\n    constructor() {\r\n        this._apiBaseUrl = 'http://localhost:5000/';\r\n      }\r\n    \r\n    buildUrl(relativePath){\r\n        return this._apiBaseUrl + relativePath;\r\n    }\r\n\r\n    getRequest(url, parameters, deserializeResult, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    var result = deserializeResult && this.response ? JSON.parse(this.response) : this.response;\r\n                    if (onSuccess)\r\n                        onSuccess(result);\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n\r\n        if (parameters && parameters.length > 0) {\r\n            url += '?';\r\n            for (let i = 0; i < parameters.length; i++) {\r\n                const parameter = parameters[i];\r\n                url += parameter.name + '=' + parameter.value;\r\n                if (i !== parameters.length - 1)\r\n                    url += '&'\r\n            }\r\n        }\r\n\r\n        xhttp.open(\"GET\", url, true);\r\n        xhttp.send();\r\n    }\r\n\r\n    postRequest(url, parameters, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    if (onSuccess)\r\n                        onSuccess();\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n        xhttp.open(\"POST\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n        xhttp.send(parameters);\r\n    }\r\n\r\n    putRequest(url, obj, onSuccess){\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"PUT\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4 && this.status === 200 && Boolean(onSuccess))\r\n                onSuccess();\r\n        }\r\n    }\r\n\r\n    deleteRequest(url, obj, onSuccess) {\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"DELETE\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4)\r\n                if (this.status === 200)\r\n                    onSuccess();\r\n        }\r\n    }\r\n  }\r\n\r\nexport default BaseApiService;","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SearchMediaApiService extends BaseApiService {\r\n    buildSearchUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/' + url);\r\n    }\r\n\r\n    getMediaGenres(onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genres');\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaPlatforms(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('platforms');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMediasByGenre(genreId, onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genre/' + genreId);\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasOfToday(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('mediasoftoday')\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByGenre(genreId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('genre/' + genreId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByPlatform(platformId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('platform/' + platformId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaDetails(id, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('details/' + id);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    searchMedias(text, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('search');\r\n        var parameters = [\r\n            {\r\n                name: 't',\r\n                value: text\r\n            }\r\n        ]\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularNetflixMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('netflix');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularDisneyPlusMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('disneyplus');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAmazonPrimeMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('amazonprime');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAppleTvMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('appletv');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('popular');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getRecommandedMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('recommandations');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getSimilarMedias(mediaId, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('similar/'+ mediaId);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getEpisodes(serieId, seasonNumber, onSuccess, onFail){\r\n        var url = this.buildSearchUrl('episodes/'+ serieId + '/' + seasonNumber);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n}\r\n\r\nexport default SearchMediaApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass BookmarkApiService extends BaseApiService {\r\n    buildBookmarkUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/bookmarks/' + (url ? url : ''));\r\n    }\r\n\r\n    getBookmarkedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildBookmarkUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    addBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.putRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    deleteBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.deleteRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    isMediaBookmarked(mediaId, onSuccess, onFail) {\r\n        var parameters = [\r\n            {\r\n                name: 'id',\r\n                value: mediaId\r\n            }\r\n        ];\r\n        this.getRequest(this.buildBookmarkUrl('exists'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default BookmarkApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass WatchedMediaApiService extends BaseApiService {\r\n    buildWatchedMediaUrl(url) {\r\n        return this.buildUrl(AppMode.getActiveMode().urlKey + '/watchedmedia/' + (url ? url : ''));\r\n    }\r\n\r\n    getWatchedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedMedia(mediaId, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        const parameters = [\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ]\r\n\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedEpisodes(mediaId, seasonNumber, onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId + '/' + seasonNumber), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    saveWacthedMedia(mediaDetails, currentTime, duration, seasonNumber, episodeNumber, sourceUrl) {\r\n        const watchedMedia = { ...mediaDetails };\r\n        watchedMedia.currentTime = currentTime ? currentTime : 0;\r\n        watchedMedia.totalDuration = duration ? duration : 0;\r\n\r\n        const url = new URL(sourceUrl);\r\n        watchedMedia.torrentUrl = window.atob(url.searchParams.get('base64Url'));\r\n\r\n        if (AppMode.getActiveMode().urlKey === 'series') {\r\n            watchedMedia.seasonNumber = seasonNumber;\r\n            watchedMedia.episodeNumber = episodeNumber;\r\n        }\r\n\r\n        this.putRequest(this.buildWatchedMediaUrl(), watchedMedia);\r\n    }\r\n}\r\n\r\nexport default WatchedMediaApiService;\r\n","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass TorrentApiService extends BaseApiService {\r\n    buildTorrentUrl(url) {\r\n        return this.buildUrl('torrent/' + (url ? url : ''));\r\n    }\r\n\r\n    buildStreamUrl(url, fileName, seasonNumber, episodeNumber) {\r\n        const base64Url = window.btoa(url);\r\n\r\n        if (fileName)\r\n            return this.buildTorrentUrl('stream/file?base64Url=' + base64Url + '&fileName=' + fileName);\r\n        else if (AppMode.getActiveMode().urlKey === \"series\")\r\n            return this.buildTorrentUrl('stream/series?base64Url=' + base64Url + '&seasonNumber=' + seasonNumber + '&episodeNumber=' + episodeNumber);\r\n        else\r\n            return this.buildTorrentUrl('stream/movies?base64Url=' + base64Url);\r\n    }\r\n\r\n    searchTorrents(mediaId, title, year, imdbid, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildTorrentUrl(AppMode.getActiveMode().urlKey);\r\n        var parameters = [\r\n            {\r\n                name: 'mediaId',\r\n                value: mediaId\r\n            },\r\n            {\r\n                name: 'title',\r\n                value: encodeURIComponent(title)\r\n            },\r\n            {\r\n                name: 'year',\r\n                value: year\r\n            },\r\n            {\r\n                name: 'season',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episode',\r\n                value: episodeNumber\r\n            },\r\n            {\r\n                name: 'imdbid',\r\n                value: imdbid\r\n            }\r\n        ];\r\n\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getDownloadState(streamUrl, onSuccess, onFail) {\r\n        const url = new URL(streamUrl);\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'base64TorrentUrl',\r\n                value: url.searchParams.get('base64Url')\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('streamdownloadstate'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentFiles(torrentUrl, onSuccess, onFail) {\r\n        const base64Url = window.btoa(torrentUrl);\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'base64torrentUrl',\r\n                value: base64Url\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('files'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentHistory(onSuccess, onFail) {\r\n        this.getRequest(this.buildTorrentUrl('history'), null, true, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default TorrentApiService;\r\n","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SubtitlesApiService extends BaseApiService {\r\n    buildSubtitlesUrl(url){\r\n        return this.buildUrl('subtitles/' + (url ? url : ''));\r\n    }\r\n\r\n    getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildSubtitlesUrl(AppMode.getActiveMode().urlKey);\r\n        var parameters = [\r\n            {\r\n                name: 'imdbCode',\r\n                value: imdbCode\r\n            },\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n    \r\n    getSubtitlesApiUrl(subtitlesSourceUrl) {\r\n        return this.buildSubtitlesUrl(\"?sourceUrl=\" + subtitlesSourceUrl);\r\n    }\r\n}\r\n\r\nexport default SubtitlesApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\n\r\nclass AppInfoApiService extends BaseApiService {\r\n    buildAppInfoUrl(url){\r\n        return this.buildUrl('application/' + (url ? url : ''));\r\n    }\r\n\r\n    isDesktopApplication(onSuccess, onFail) {\r\n        if (this.isDesktopApp) onSuccess(this.isDesktopApp);\r\n        else {\r\n            const self = this;\r\n            this.getRequest(this.buildAppInfoUrl('platform'), null, true, (response) => {\r\n                self.isDesktopApp = response.isDesktopApplication;\r\n                onSuccess(response.isDesktopApplication);\r\n            }, onFail);\r\n        }\r\n    }\r\n\r\n    playWithVlc(streamUrl, onSuccess, onFail){\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'streamUrl',\r\n                value: encodeURIComponent(streamUrl)\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildAppInfoUrl('startvlc'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default AppInfoApiService;\r\n  ","import SearchMediaApiService from './api/searchMediaApiService';\r\nimport BookmarkApiService from './api/bookmarkApiService';\r\nimport WatchedMediaApiService from './api/watchedMediaApiService';\r\nimport TorrentApiService from './api/torrentApiService';\r\nimport SubtitlesApiService from './api/subtitlesApiService';\r\nimport AppInfoApiService from './api/appInfoApiService';\r\n\r\nconst AppServices = {\r\n    init(){\r\n        this.searchMediaService = new SearchMediaApiService();\r\n        this.bookmarkApiService = new BookmarkApiService();\r\n        this.watchedMediaApiService = new WatchedMediaApiService();\r\n        this.torrentApiService = new TorrentApiService();\r\n        this.subtitlesApiService = new SubtitlesApiService();\r\n        this.appInfoApiService = new AppInfoApiService();\r\n    }\r\n}\r\n\r\nexport default AppServices;","import \"../../style/list-categories-view.css\";\r\nimport ModalWindow from \"./ModalWindow\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport AppMode from \"../../services/appMode\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction ModalCategories({ visible, onCloseClick, onGenreClick, onPlatformClick }) {\r\n    const [loading, setLoading] = useState(true);\r\n    const [listGenres, setListGenres] = useState([]);\r\n    const [listPlatforms, setListPlatforms] = useState([]);\r\n\r\n    const loadCategories = () => {\r\n        setListGenres([]);\r\n        AppServices.searchMediaService.getMediaGenres(\r\n            (genres) => {\r\n                if (genres && genres.length > 0) {\r\n                    setListGenres(genres);\r\n                }\r\n            }\r\n        );\r\n\r\n        AppServices.searchMediaService.getMediaPlatforms(\r\n            (platforms) => {\r\n                if (platforms && platforms.length > 0) {\r\n                    setListPlatforms(platforms);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    useEffect(() => {\r\n        loadCategories();\r\n        AppMode.onAppModeChanged(() => {\r\n            loadCategories();\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setLoading(!listGenres || listGenres.length === 0 || !listPlatforms || listPlatforms.length === 0);\r\n    }, [listGenres, listPlatforms]);\r\n\r\n    const listGenresView = () => {\r\n        return (\r\n            <div className=\"list-categories-view-container\">\r\n                <CircularProgressBar color={'white'} size={'60px'} position={'center'} visible={loading} />\r\n                <h3 className=\"categorie-title\">Genres</h3>\r\n                <div className=\"list-categories\">\r\n                    {listGenres.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onGenreClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n                <h3 className=\"categorie-title\">Platforms</h3>\r\n                <div className=\"list-categories\">\r\n                    {listPlatforms.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onPlatformClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={listGenresView()} onCloseClick={() => onCloseClick()} />\r\n    )\r\n}\r\n\r\nexport default ModalCategories;","function Rating({ rating, size }) {\r\n\r\n    const style = {\r\n        color: \"white\",\r\n        fontSize: size === \"small\" ? \"15px\" : \"20px\",\r\n        fontWeight: \"bold\",\r\n        margin: \"0 auto\",\r\n        backgroundColor: \"#52525263\",\r\n        borderRadius: \"50%\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: size === \"small\" ? \"35px\" : \"50px\",\r\n        width: size === \"small\" ? \"35px\" : \"50px\",\r\n    };\r\n\r\n    return (\r\n        <div style={style}>{rating}</div>\r\n    );\r\n}\r\n\r\nexport default Rating;","\r\nimport \"../../../style/media-lite-presentation.css\";\r\n\r\nimport Rating from \"../../common/Rating\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport fadeTransition from \"../../../helpers/customStyles.js\";\r\n\r\nfunction MediaLitePresentation({ media, onMediaClick, hoverEffect }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setDataLoaded(media?.coverImageUrl);\r\n    }, [media]);\r\n\r\n    if (!Boolean(media?.coverImageUrl))\r\n        return null;\r\n\r\n    const truncate = (text, maxLength) => {\r\n        if (text && text.length > maxLength)\r\n            return text.substring(0, maxLength) + '...';\r\n        else return text;\r\n    }\r\n\r\n    const handleClick = () => {\r\n        setTimeout(() => {\r\n            if (onMediaClick)\r\n                onMediaClick(media?.id);\r\n        }, 150);\r\n    }\r\n\r\n    const formatMediaRating = (rating) => {\r\n        return rating ? rating.toString().replace(',', '.') : '';\r\n    };\r\n\r\n    return (\r\n        <div style={fadeTransition(dataLoaded)}>\r\n            <div className={\"media-lite-presentation \" + (hoverEffect ? \"hover-effect\" : \"\")} onClick={() => handleClick()}>\r\n                <div className={\"media-lite-presentation-img\"} style={{ backgroundImage: 'url(' + media.coverImageUrl + ')' }}>\r\n                    <div className=\"rating\">\r\n                        <Rating rating={formatMediaRating(media.rating)} size=\"small\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"infos\">\r\n                    <div className=\"title\">{truncate(media.title, 25)}</div>\r\n                    <div className=\"year\">{media.year}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediaLitePresentation;","const CacheService = {\r\n    cacheCollection: [],\r\n    setCache(id, data){\r\n        let cache = this.getCache(id);\r\n        if(!cache){\r\n            this.cacheCollection.push({\r\n                id: id,\r\n                data: data\r\n            }); \r\n        }\r\n        else\r\n            cache.data = data;\r\n    },\r\n    getCache(id){\r\n        return this.cacheCollection.find(c => c.id === id);\r\n    },\r\n    clearCache(){\r\n        this.cacheCollection = [];\r\n    }\r\n}\r\n\r\nexport default CacheService;","import \"../../../style/media-lite-presentation.css\";\r\nimport \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport CacheService from \"../../../services/cacheService\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction MediasCategorieList({ categorie, searchOperation, loadFromCache, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [pageIndex, setPageIndex] = useState(0);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n    const [plusButtonVisible, setPlusButtonVisible] = useState(false);\r\n    \r\n    const addIconStyle = {\r\n        width: '60px',\r\n        height: '60px',\r\n        color: 'white',\r\n        margin: 'auto'\r\n    };\r\n\r\n    const performSearch = () => {\r\n        setSearchInProgress(true);\r\n        setPlusButtonVisible(false); \r\n        searchOperation(categorie.id, pageIndex,\r\n            (mediasOfCategories) => {\r\n                setSearchInProgress(false);\r\n                if (mediasOfCategories && mediasOfCategories.length > 0) {\r\n                    setPlusButtonVisible(true);\r\n                    if (pageIndex === 1) setMedias(mediasOfCategories);\r\n                    else setMedias(medias.concat(mediasOfCategories));\r\n                }\r\n            },\r\n            () => setSearchInProgress(false));\r\n    }\r\n\r\n    const getCacheId = (categorieId) => \"categorie\" + categorieId;\r\n\r\n    useEffect(() => {\r\n        if (loadFromCache) {\r\n            const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n            setPageIndex(cacheMedias.data.pageIndex);\r\n        }\r\n        else {           \r\n            CacheService.setCache(getCacheId(categorie.id), null);\r\n            setMedias([]);\r\n            setPageIndex(1); \r\n            if(pageIndex === 1) performSearch(); \r\n        }\r\n    }, [categorie.id]);\r\n\r\n    useEffect(() => {\r\n        if (pageIndex > 0) {  \r\n            const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n            if (cacheMedias && cacheMedias.data) setMedias(cacheMedias.data.medias);\r\n            else performSearch();\r\n        }\r\n    }, [pageIndex]);\r\n\r\n    useEffect(() => {\r\n        if (medias && medias.length > 0) {\r\n            if (loadFromCache) {\r\n                const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n                if (cacheMedias && cacheMedias.data) {\r\n                    setPlusButtonVisible(true);\r\n                    scrollToMedia(cacheMedias.data.mediaElementId);\r\n                    CacheService.setCache(getCacheId(categorie.id), null);\r\n                }\r\n            }\r\n            else if(pageIndex === 1)  scrollToMedia(\"medialite0\");\r\n        }\r\n    }, [medias]);\r\n\r\n    const scrollToMedia = (elemId) => {\r\n        var elem = document.getElementById(elemId);\r\n        if (elem) {\r\n            elem.scrollIntoView({\r\n                block: \"nearest\",\r\n                inline: \"nearest\"\r\n            });\r\n        }\r\n    }\r\n \r\n    const handleMediaClick = (mediaId, elementId) => {\r\n        const data = {\r\n            medias: medias,\r\n            pageIndex: pageIndex,\r\n            mediaElementId: elementId\r\n        }\r\n        CacheService.setCache(getCacheId(categorie.id), data);\r\n        onMediaClick(mediaId);\r\n    }\r\n\r\n    return (\r\n        <div className=\"medias-list-by-categorie-container\">\r\n            <div className=\"medias-list-by-categorie-header\">\r\n                <div className=\"medias-list-categorie\">{categorie.name}</div>\r\n                <CircularProgressBar size={'30px'} color={'white'} visible={searchInProgress} />\r\n            </div>\r\n            <div className=\"medias-list-container full\">\r\n                <div className=\"medias-list wrap-content\">\r\n                    {medias.map((media, index) =>\r\n                    (<div id={\"medialite\" + index} key={index}>\r\n                        <MediaLitePresentation media={media} hoverEffect={true} onMediaClick={(mediaId) => handleMediaClick(mediaId, \"medialite\" + index)} />\r\n                    </div>))}\r\n                    <div className=\"medias-list-more\">\r\n                        <div className=\"round-btn grey\"\r\n                            style={{ visibility: plusButtonVisible ? 'visible' : 'hidden' }}\r\n                            onClick={() => { if (plusButtonVisible) {setPageIndex(pageIndex + 1);} }}>\r\n                            <AddIcon style={addIconStyle} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasCategorieList;","\r\n\r\nimport MediasCategorieList from \"../components/media/list/MediasCategorieList\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\n\r\nfunction MediasListGenrePage({ genre, loadFromCache, onMediaClick }) {\r\n\r\n    return (\r\n        <MediasCategorieList \r\n            categorie={genre} \r\n            loadFromCache={loadFromCache}\r\n            searchOperation={(genreId, pageIndex, onSuccess, onFail) => AppServices.searchMediaService.getMediasByGenre(genreId, pageIndex, onSuccess, onFail)}\r\n            onMediaClick={(mediaId) => onMediaClick(mediaId)}/>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","\r\n\r\nimport MediasCategorieList from \"../components/media/list/MediasCategorieList\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\n\r\nfunction MediasListGenrePage({ platform, loadFromCache, onMediaClick }) {\r\n\r\n    return (\r\n        <MediasCategorieList \r\n            categorie={platform} \r\n            loadFromCache={loadFromCache}\r\n            searchOperation={(platformId, pageIndex, onSuccess, onFail) => AppServices.searchMediaService.getMediasByPlatform(platformId, pageIndex, onSuccess, onFail)}\r\n            onMediaClick={(mediaId) => onMediaClick(mediaId)}/>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","import ModalWindow from \"./ModalWindow\";\r\n\r\nfunction ModalMediaTrailer({visible, youtubeTrailerUrl, onCloseClick}){\r\n\r\n\r\n    const trailerStyle = {      \r\n            width: '800px',\r\n            height: '500px',\r\n            margin: 'auto 0',\r\n            backgroundColor: 'black',\r\n            border: 'none',\r\n            boxShadow: '1px 1px 14px 7px #101010c9'       \r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <iframe style={trailerStyle} src={visible ? youtubeTrailerUrl : ''}></iframe>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalMediaTrailer; ","function TitleAndContent({ title, content, justify }) {\r\n    let justifyContent;\r\n    if (justify === 'left')\r\n        justifyContent = 'flex-start';\r\n    else\r\n        justifyContent = 'center';\r\n\r\n    const containerStyle = {\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        display: !!content ? 'flex' : 'none',\r\n        alignItems: 'center',\r\n        justifyContent: justifyContent,\r\n        margin: '10px 10px 10px 0'\r\n    }\r\n\r\n    const titleStyle = {\r\n        color: 'white',\r\n        marginRight: '15px'\r\n    }\r\n\r\n    const contentStyle = {\r\n        color: \"#959595\",\r\n        display: \"flex\"\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={titleStyle}>{title}</div>\r\n            <div style={contentStyle}>{content}</div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default TitleAndContent;","function ProgressionBar({value, width}){\r\n\r\n    const containerStyle = {\r\n        width: width,\r\n        backgroundColor: '#423737',\r\n        height: '5px',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    const progressionStyle = {\r\n        width: value + '%',\r\n        backgroundColor: '#e91919',\r\n        height: '100%',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={progressionStyle}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProgressionBar;","\r\n\r\nfunction SecondaryInfo({text, center}){\r\n    const style = {\r\n        fontSize: \"18px\",\r\n        fontWeight: \"500\",\r\n        color: \"#959595\",\r\n        textAlign: center ? \"center\" : \"left\",\r\n        margin: '10px 0'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default SecondaryInfo;","function Paragraph({text, visible}){\r\n\r\n    if(visible === false)\r\n        return null;\r\n        \r\n    const style = {\r\n        fontSize: '17px',\r\n        fontWeight: '500',\r\n        color: 'white'\r\n    }\r\n\r\n    return(\r\n        <p style={style}>{text}</p>\r\n    )\r\n}\r\n\r\nexport default Paragraph;","import \"../../../style/button.css\";\r\nimport { useState } from 'react';\r\n\r\nfunction BaseButton({ color, content, centered, rounded, width, onClick }) {\r\n\r\n    const [showRippleEffect, setShowRippleEffect] = useState(false);\r\n\r\n    const handleClick = () => {\r\n        setShowRippleEffect(true)\r\n        setTimeout(() => {\r\n            setShowRippleEffect(false);\r\n            onClick();\r\n        }, 300);\r\n    };\r\n\r\n    const computeClass = () => {\r\n        let className = \"standard-button\";\r\n        if (color) className += \" \" + color;\r\n        if (centered) className += \" center\";\r\n        if(rounded) className += \" rounded\";\r\n        return className;\r\n    }\r\n\r\n    const computeStyle = () => {\r\n        if(width){\r\n            return {\r\n                width: width\r\n            }\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n\r\n    return (\r\n        <div className={computeClass()} style={computeStyle()} onClick={() => handleClick()}>\r\n            <div className={\"ripple-effect \" + (showRippleEffect ? 'visible' : '')}></div>\r\n            {content}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BaseButton;","\r\nimport { useEffect } from 'react';\r\n// Hook\r\nfunction useOnClickOutside(ref, handler) {\r\n    useEffect(\r\n      () => {\r\n        const listener = event => {\r\n          if (!ref.current || ref.current.contains(event.target)) {\r\n            return;\r\n          }\r\n          handler(event);         \r\n        };\r\n  \r\n        document.addEventListener('mousedown', listener);\r\n        document.addEventListener('touchstart', listener);\r\n  \r\n        return () => {\r\n          document.removeEventListener('mousedown', listener);\r\n          document.removeEventListener('touchstart', listener);\r\n        };\r\n      },\r\n      [ref, handler]\r\n    );\r\n  }\r\n\r\n  export { useOnClickOutside };","import BaseButton from './buttons/BaseButton';\r\nimport ArrowDropDownOutlinedIcon from '@material-ui/icons/ArrowDropDownOutlined';\r\nimport { useOnClickOutside } from '../../helpers/customHooks';\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction DropDown({ values, width, onValueChanged, textAlignement }) {\r\n\r\n    const [showList, setShowList] = useState(false);\r\n    const [selectedValue, setSelectedValue] = useState('');\r\n    const [dropDownValues, setDropDownValues] = useState([]);\r\n    const dropdownRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (shouldUpdateDropDownValues(values)) {\r\n            setDropDownValues(values);\r\n            setSelectedValue(values[0]);\r\n        }\r\n    }, [values])\r\n\r\n    useOnClickOutside(dropdownRef, () => setShowList(false));\r\n\r\n    const shouldUpdateDropDownValues = (values) => {\r\n        if (dropDownValues.length !== values.length)\r\n            return true;\r\n\r\n        let nbDifferentValues = 0;\r\n        dropDownValues.forEach((v, i) => {\r\n            if (values[i] !== v)\r\n                nbDifferentValues += 1;\r\n        });\r\n\r\n        return nbDifferentValues > 0;\r\n    }\r\n\r\n    const containerStyle = {\r\n        position: 'relative'\r\n    }\r\n\r\n    const listStyle = {\r\n        display: showList ? 'block' : 'none',\r\n        position: 'absolute',\r\n        bottom: '0',\r\n        left: '50%',\r\n        transform: 'translate(-50%, 100%)',\r\n        borderRadius: '5px',\r\n        boxShadow: 'rgb(0 0 0 / 91%) 0px 19px 20px 8px, rgb(0 0 0) 0px 15px 20px 0px',\r\n        backgroundColor: '#141414',\r\n        color: 'white',\r\n        fontSize: '16px',\r\n        fontWeight: '500',\r\n        maxHeight: '100px',\r\n        width: width,\r\n        overflowY: 'scroll',\r\n        zIndex: '5',\r\n        textAlign: textAlignement ? textAlignement : 'left'\r\n    }\r\n\r\n    const buttonContentStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: width,\r\n    }\r\n\r\n    const buttonContent = (\r\n        <div style={buttonContentStyle}>\r\n            <div>{selectedValue}</div>\r\n            <ArrowDropDownOutlinedIcon />\r\n        </div>)\r\n\r\n    const listElementStyle = {\r\n        padding: '5px',\r\n        cursor: 'pointer'\r\n    }\r\n\r\n    const onElementMouseHover = (element) => {\r\n        element.style.backgroundColor = '#959595';\r\n    }\r\n\r\n    const onElementMouseOut = (element) => {\r\n        element.style.backgroundColor = '';\r\n    }\r\n\r\n    const OnElementClick = (index) => {\r\n        setShowList(false);\r\n        setSelectedValue(values[index]);\r\n        onValueChanged(index);\r\n    }\r\n\r\n    return (\r\n        <div ref={dropdownRef} style={containerStyle}>\r\n            <BaseButton color=\"red\" content={buttonContent} width={width} onClick={() => setShowList(!showList)} />\r\n            <div style={listStyle}>\r\n                {dropDownValues.map((v, i) => <div\r\n                    key={v}\r\n                    style={listElementStyle}\r\n                    onMouseOver={(e) => onElementMouseHover(e.target)}\r\n                    onMouseOut={(e) => onElementMouseOut(e.target)}\r\n                    onClick={() => OnElementClick(i)}>\r\n                    {v}\r\n                </div>)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropDown;","export function ToTimeFormat(totalMinutes) {\r\n    const totalHours = totalMinutes / 60;\r\n\r\n    const hours = Math.trunc(totalHours);\r\n    const minutes = Math.trunc((totalHours - hours) * 60);\r\n\r\n    let timeFormat = '';\r\n    if (hours > 0)\r\n        timeFormat += hours + 'h ';\r\n\r\n    timeFormat += (minutes < 10 ? \"0\" + minutes : minutes) + 'min';\r\n\r\n    return timeFormat;\r\n}","import ModalWindow from \"./ModalWindow\";\r\nimport TitleAndContent from \"../common/TitleAndContent\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport ProgressionBar from \"../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../common/text/SecondaryInfo\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport DropDown from \"../common/DropDown\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\nimport { ToTimeFormat } from \"../../helpers/timeFormatHelper\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\n\r\nimport \"../../style/modal-episode-selector.css\";\r\n\r\nfunction ModalEpisodeSelector({ visible, serieId, numberOfSeasons, onEpisodeSelected, onCloseClick }) {\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1);\r\n    const [episodes, setEpisodes] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [noEpisodeMessageVisible, setNoEpisodeMessageVisible] = useState(false);\r\n    const episodeListRef = useRef(null);\r\n\r\n    const seasonNumberList = [];\r\n    for (let i = 1; i <= numberOfSeasons; i++) {\r\n        seasonNumberList.push(\"Season \" + i);\r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <div className=\"modal-episode-selector-container\">\r\n                <div className=\"season-selector-container\">\r\n                    <DropDown values={seasonNumberList} width=\"120px\" textAlignement={\"center\"} onValueChanged={(selectedIndex) => setSelectedSeasonNumber(selectedIndex + 1)} />\r\n                </div>\r\n                <div ref={episodeListRef} className=\"episode-list-container\">\r\n                    <div className=\"loading-container\">\r\n                        <CircularProgressBar color={\"white\"} size={\"50px\"} visible={isLoading} />\r\n                        <Paragraph text={\"No episodes found\"} visible={noEpisodeMessageVisible} />\r\n                    </div>\r\n                    <div style={fadeTransition(episodes && episodes.length > 0)}>\r\n                        {episodes.map(episode =>\r\n                            <Episode\r\n                                key={episode.episodeNumber}\r\n                                episode={episode}\r\n                                onClick={() => onEpisodeSelected(selectedSeasonNumber, episode.episodeNumber)} />)}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (serieId) {\r\n            setEpisodes([]);\r\n            setIsLoading(true);\r\n            setNoEpisodeMessageVisible(false)\r\n            AppServices.searchMediaService.getEpisodes(serieId, selectedSeasonNumber,\r\n                (episodes) => {\r\n                    if (episodeListRef.current)\r\n                        episodeListRef.current.scrollTop = 0;\r\n\r\n                    setIsLoading(false);\r\n                    if (episodes && episodes.length > 0) {\r\n                        loadEpisodesProgress(episodes, selectedSeasonNumber);\r\n                    }\r\n                    else\r\n                        setNoEpisodeMessageVisible(true)\r\n                },\r\n                () => {\r\n                    setIsLoading(false);\r\n                    setNoEpisodeMessageVisible(true)\r\n                })\r\n        }\r\n    }, [serieId, selectedSeasonNumber]);\r\n\r\n    const loadEpisodesProgress = (episodesOfSeason, seasonNumber) => {\r\n        AppServices.watchedMediaApiService.getWatchedEpisodes(serieId, seasonNumber,\r\n            (watchedEpisodes) => {\r\n                const newTab = [...episodesOfSeason]\r\n                if (watchedEpisodes && watchedEpisodes.length > 0) {\r\n                    watchedEpisodes.forEach(watchedEpisode => {\r\n                        const episode = newTab.find(ep => ep.episodeNumber === watchedEpisode.episodeNumber);\r\n                        if (episode)\r\n                            episode.progression = watchedEpisode.currentTime / watchedEpisode.totalDuration;\r\n                    });\r\n                }\r\n                setEpisodes(newTab);\r\n            },\r\n            () => {\r\n                setEpisodes(episodesOfSeason);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalEpisodeSelector;\r\n\r\nfunction Episode({ episode, onClick }) {\r\n    return <div className=\"episode-container\" onClick={() => onClick()}>\r\n        <div style={{ margin: 'auto 0' }}>\r\n            <img src={episode.imagePath} />\r\n            {episode.progression ? <ProgressionBar value={episode.progression * 100} width=\"98%\" /> : null}\r\n        </div>\r\n\r\n        <div>\r\n            <TitleAndContent title={episode.episodeNumber + '.' + episode.name} content={ToTimeFormat(episode.runTime)} justify=\"left\" />\r\n            <SecondaryInfo text={episode.overview.substring(0, 300)} />\r\n        </div>\r\n    </div>\r\n}\r\n","import ModalWindow from \"./ModalWindow\";\r\nimport \"../../style/modal-version-quality-selector.css\";\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction ModalVersionAndQualitySelector({ visible, torrents, onQualityClick }) {\r\n    const [content, setContent] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (torrents?.length > 0) {\r\n            const torrentsByLanguage = [];\r\n            const languages = [...new Set(torrents.map(t => t.languageVersion))];\r\n\r\n            languages.forEach(language => {\r\n                const sortedTorrents = torrents.filter(torrent => torrent.languageVersion === language).sort((t1, t2) => {\r\n                    const [quality1, quality2] = [t1.quality.toLowerCase().trim(), t2.quality.toLowerCase().trim()]\r\n                    return quality1 === quality2 ? 0 : (quality1 < quality2 ? -1 : 1);\r\n                });\r\n\r\n                torrentsByLanguage.push({\r\n                    languageVersion: language,\r\n                    torrents: sortedTorrents\r\n                })\r\n            });\r\n\r\n            const computeQualityLabel = (torrent) => {\r\n                const torrentIndex = torrents.findIndex(t => t.downloadUrl === torrent.downloadUrl);\r\n                const qualityIndex = torrents.slice(0, torrentIndex).filter(t => t.quality === torrent.quality).length;\r\n                return qualityIndex > 0 ? `${torrent.quality} (${qualityIndex})` : torrent.quality;\r\n            }\r\n\r\n            const versionsAndQualitiesTable = (<div className=\"modal-version-quality-container\">\r\n                {torrentsByLanguage.map((l, i) => (\r\n                    <div className=\"version-column\" key={i}>\r\n                        <div className=\"version-name\">{l.languageVersion}</div>\r\n                        <div className=\"qualities-list\">{l.torrents.map((t, j) => (\r\n                            <div className={\"quality\" + (t.selected ? \" selected\" : \"\")} key={j} onClick={() => onQualityClick(t)}>{computeQualityLabel(t)}</div>\r\n                        ))}</div>\r\n                    </div>\r\n                ))}\r\n            </div>);\r\n\r\n            setContent(versionsAndQualitiesTable)\r\n        }\r\n\r\n    }, [torrents]);\r\n\r\n    const onCloseClick = () => {\r\n        const selectedTorrent = torrents.find(torrent => torrent.selected);\r\n        onQualityClick(selectedTorrent);\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content} onCloseClick={() => onCloseClick()} />\r\n    )\r\n}\r\n\r\nexport default ModalVersionAndQualitySelector;","import { useEffect, useState } from 'react';\r\n\r\nfunction VideoSubtitles({ videoCurrentTime, urlSource, size, subtitlesAdjustTime }) {\r\n    const [currentSubtitles, setCurrentSubtitles] = useState('');\r\n    const [subtitles, setSubtitles] = useState([]);\r\n    const [textItalic, setTextItalic] = useState(false);\r\n\r\n    const applySubtitles = (currentTime) => {\r\n        if (!subtitles || subtitles.length === 0)\r\n            return;\r\n        \r\n        var subtitle = subtitles.find(s =>\r\n            (s.startTime + subtitlesAdjustTime) <= currentTime && currentTime <= (s.endTime + subtitlesAdjustTime));\r\n\r\n        if (subtitle?.text) {\r\n            var text = subtitle.text;\r\n            setTextItalic(false);\r\n            if (text.includes('<i>') || text.includes('</i>')) {\r\n                setTextItalic(true);\r\n                text = text.replace('<i>', '').replace('</i>', '');\r\n            }\r\n            setCurrentSubtitles(text);\r\n        }\r\n        else setCurrentSubtitles('');\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (urlSource) {\r\n            var xhttp = new XMLHttpRequest();\r\n            xhttp.onreadystatechange = function () {\r\n                if (this.readyState == 4 && this.status == 200 && this.responseText) {\r\n                    setSubtitles(JSON.parse(this.response));\r\n                }\r\n            };\r\n            xhttp.open(\"GET\", urlSource, true);\r\n            xhttp.send();\r\n        }\r\n\r\n        return () => {\r\n            setSubtitles([]);\r\n            setCurrentSubtitles('');\r\n        }\r\n    }, [urlSource]);\r\n\r\n    useEffect(() => {\r\n        if(videoCurrentTime)\r\n            applySubtitles(videoCurrentTime);\r\n    }, [videoCurrentTime, subtitles, subtitlesAdjustTime]);\r\n\r\n    return (<div className=\"video-player-subtitles\"\r\n        style={{ fontSize: size + 'px', fontStyle: textItalic ? 'italic' : '' }}>\r\n        {currentSubtitles}\r\n    </div>);\r\n}\r\n\r\nexport default VideoSubtitles;","import { useEffect, useState } from 'react';\r\n\r\nfunction Slider({ value, width, height, progressColor, cursorColor, tooltip, onCursorMoved, onCursorEndMove, onMouseOverSlider }) {\r\n    const [cursorPosition, setCursorPosition] = useState(0);\r\n    const [showToolTip, setShowToolTip] = useState(false);\r\n\r\n    const positionToPercentage = (XPosition, railBoundings) => {\r\n        if (XPosition < railBoundings.left)\r\n            return 0;\r\n        else if (XPosition > railBoundings.right)\r\n            return 100;\r\n        else\r\n            return (XPosition - railBoundings.left) * 100 / (railBoundings.right - railBoundings.left);\r\n    }\r\n\r\n    const initiateCursorMove = () => {\r\n        document.addEventListener('mousemove', moveCursor);\r\n        document.addEventListener('mouseup', endMove);\r\n    }\r\n\r\n    const moveCursor = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorMoved) onCursorMoved(percentage);\r\n    }\r\n\r\n    const endMove = (event) => {\r\n        if (onCursorEndMove) {\r\n            var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n            onCursorEndMove(percentage);\r\n        }\r\n        document.removeEventListener('mouseup', endMove);\r\n        document.removeEventListener('mousemove', moveCursor);\r\n    }\r\n\r\n    const onSliderClick = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorEndMove) onCursorEndMove(percentage);\r\n    }\r\n\r\n    const onMouseMoveOverSlider = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        if (onMouseOverSlider) onMouseOverSlider(percentage);\r\n    }\r\n\r\n    const onMouseLeaveSlider = () => {\r\n        setShowToolTip(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setCursorPosition(value);\r\n    }, [value])\r\n\r\n    useEffect(() => {\r\n        if (tooltip) setShowToolTip(true);\r\n    }, [tooltip])\r\n\r\n    return (\r\n        <div className=\"video-player-slider-container\"\r\n            style={{ width: width, height: height }}\r\n            onClick={(event) => onSliderClick(event)}\r\n            onMouseMove={(event) => onMouseMoveOverSlider(event)}\r\n            onMouseLeave={() => onMouseLeaveSlider()}>\r\n            <div className=\"complete-part\" style={{ width: cursorPosition + \"%\", backgroundColor: progressColor }}></div>\r\n            <div className=\"remaining-part\" style={{ width: (100 - cursorPosition) + \"%\" }}></div>\r\n            <div className=\"cursor\" style={{ left: cursorPosition + '%', backgroundColor: cursorColor }} onMouseDown={() => initiateCursorMove()}></div>\r\n            <div className=\"tooltip\" style={{ left: tooltip?.position + '%', display: showToolTip ? '' : 'none' }}>{tooltip?.text}</div>\r\n        </div>)\r\n}\r\n\r\n\r\nexport default Slider;","\r\nimport VideoPlayerSlider from './Slider';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction TimeController({ videoDuration, videoCurrentTime, onTimeChanged }) {\r\n    const [videoCurrentTimeLabel, setVideoCurrentTimeLabel] = useState('00:00');\r\n    const [videoRemainingTimeLabel, setVideoRemainingTimeLabel] = useState('00:00');\r\n    const [currentPourcentageTimeVideo, setcurrentPourcentageTimeVideo] = useState(0);\r\n    const [tooltip, setTooltip] = useState(null);\r\n    const [totalTime, setTotalTime] = useState(0);\r\n\r\n    const getTimeLabel = (duration) => {\r\n        let hours = Math.floor(duration / 3600);\r\n        let minutes = Math.floor((duration - (hours * 3600)) / 60);\r\n        let seconds = Math.floor(duration - (hours * 3600) - (minutes * 60));\r\n\r\n        let hourValues = '';\r\n        if (hours > 0) {\r\n            hourValues = hours < 10 ? '0' + hours : hours;\r\n            hourValues += ':';\r\n        }\r\n        let minuteValue = minutes < 10 ? '0' + minutes : minutes;\r\n        let secondValue = seconds < 10 ? '0' + seconds : seconds;\r\n        return hourValues + minuteValue + ':' + secondValue;\r\n    };\r\n\r\n    const changeTimeVideo = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            var newTime = Math.floor((percentage * totalTime) / 100)\r\n            setVideoCurrentTimeLabel(getTimeLabel(newTime));\r\n            onTimeChanged(newTime);\r\n        }\r\n    }\r\n\r\n    const updateTimeVideo = (time) => {\r\n        setVideoCurrentTimeLabel(getTimeLabel(time));\r\n        setVideoRemainingTimeLabel(getTimeLabel(videoDuration - time));\r\n        \r\n        if(totalTime && totalTime > 0)\r\n            setcurrentPourcentageTimeVideo((time) * 100 / totalTime);\r\n        else\r\n            setcurrentPourcentageTimeVideo(0);\r\n    }\r\n\r\n    const setTimeControllerTooltip = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            setTooltip({\r\n                text: getTimeLabel(Math.floor((percentage * totalTime) / 100)),\r\n                position: percentage\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (videoCurrentTime)\r\n            updateTimeVideo(videoCurrentTime);\r\n    }, [videoCurrentTime]);\r\n\r\n    useEffect(() => {\r\n        if (videoDuration){\r\n            setTotalTime(videoDuration);\r\n            setVideoRemainingTimeLabel(getTimeLabel(videoDuration));\r\n        }\r\n        else\r\n            setTotalTime(0);\r\n            \r\n    }, [videoDuration]);\r\n\r\n    return (\r\n        <div className=\"video-time-controller-container\">\r\n            <div className=\"video-time-label\">{videoCurrentTimeLabel}</div>\r\n            <VideoPlayerSlider value={currentPourcentageTimeVideo}\r\n                onCursorEndMove={(percentage) => changeTimeVideo(percentage)}\r\n                onMouseOverSlider={(percentage) => setTimeControllerTooltip(percentage)}\r\n                tooltip={tooltip}\r\n                progressColor={'#ed0f0f'}\r\n                cursorColor={'#b59e9e'} />\r\n            <div className=\"video-time-label\">{videoRemainingTimeLabel}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TimeController;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport VolumeUp from '@material-ui/icons/VolumeUp';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\r\nimport Forward10Icon from '@material-ui/icons/Forward10';\r\nimport Replay10Icon from '@material-ui/icons/Replay10';\r\n\r\nimport Slider from './Slider';\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction LeftControlsGroup({ videoIsPlaying, onPlayClick, onPauseClick, onVolumeChanged, onPlayBackwardClick, onPlayForwardClick }) {\r\n    const [showPlayButton, setShowPlayButton] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setShowPlayButton(!videoIsPlaying);\r\n    }, [videoIsPlaying]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <PlayArrowIcon className=\"icon\" style={{ display: showPlayButton ? '' : 'none' }} onClick={() => onPlayClick()} />\r\n            <PauseIcon className=\"icon\" style={{ display: showPlayButton ? 'none' : '' }} onClick={() => onPauseClick()} />\r\n            <VolumeController onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)} />\r\n            <Replay10Icon className=\"icon\" onClick={() => onPlayBackwardClick()}/>\r\n            <Forward10Icon className=\"icon\" onClick={() => onPlayForwardClick()}/>\r\n        </div>)\r\n}\r\n\r\nexport default LeftControlsGroup;\r\n\r\n\r\nfunction VolumeController({ onVolumeChanged }) {\r\n    const defaultVolume = 70;\r\n    const currentVolumeRef = useRef(0);\r\n    const [previousVolume, setPreviousVolume] = useState(defaultVolume);\r\n\r\n    const changeVolume = (percentage) => {\r\n        currentVolumeRef.current = percentage;\r\n        onVolumeChanged(percentage / 100);\r\n    };\r\n\r\n    const muteVideo = () => {\r\n        setPreviousVolume(currentVolumeRef.current);\r\n        changeVolume(0);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        changeVolume(defaultVolume);\r\n      \r\n        const onKeyboardPress = (e) =>{\r\n            if(e.keyCode === 38 && currentVolumeRef.current < 100)\r\n                changeVolume(currentVolumeRef.current + 10);\r\n            else if(e.keyCode === 40 && currentVolumeRef.current > 0)\r\n                changeVolume(currentVolumeRef.current - 10);\r\n        }\r\n\r\n        document.addEventListener('keyup', onKeyboardPress, false);\r\n\r\n        return () => {\r\n            document.removeEventListener('keyup', onKeyboardPress);\r\n        }\r\n    },[]);\r\n\r\n    return (<div className=\"video-volume-controller\">\r\n        <VolumeUp className=\"icon\" onClick={() => { muteVideo() }} style={{ display: currentVolumeRef.current > 0 ? '' : 'none' }} />\r\n        <VolumeOffIcon className=\"icon\" onClick={() => changeVolume(previousVolume)} style={{ display: currentVolumeRef.current > 0 ? 'none' : '' }} />\r\n        <Slider\r\n            value={currentVolumeRef.current}\r\n            onCursorMoved={(percentage) => changeVolume(percentage)}\r\n            onCursorEndMove={(percentage) => changeVolume(percentage)}\r\n            width={'120px'}\r\n            height={'4px'} />\r\n    </div>)\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\n\r\nexport function VideoOptions({ options, icon, onOptionChanged }) {\r\n\r\n    const [menuOptions, setMenuOptions] = useState([]);\r\n    const [menuSubOptions, setMenuSubOptions] = useState([]);\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const [showSubMenu, setShowSubMenu] = useState(false);\r\n\r\n    const [selectedOption, setSelectedOption] = useState(null);\r\n    const [selectedSubOption, setSelectedSubOption] = useState(null);\r\n\r\n    const updateMenuOptions = (selectedOption, selectedSubOption) => {\r\n\r\n        const oldSelectedOption = menuOptions.find(op => op.selected);\r\n        const oldSelectedSubOption = selectedOption?.subOptions?.find(subOp => subOp.selected);\r\n\r\n        if (selectedOption?.subOptions && !selectedSubOption)\r\n            return;\r\n\r\n        if (selectedOption?.subOptions\r\n            && oldSelectedSubOption?.label === selectedSubOption?.label)\r\n            return;\r\n\r\n        if (!selectedOption?.subOptions && oldSelectedOption?.label === selectedOption.label)\r\n            return;\r\n\r\n        var updatedOptions = [];\r\n        menuOptions.forEach(op => {\r\n            var updatedOption = {\r\n                label: op.label,\r\n                selected: op.label === selectedOption.label,\r\n                data: op.data\r\n            };\r\n            var updatedSubOptions = [];\r\n            if (op.subOptions) {\r\n                op.subOptions.forEach(subOp => {\r\n                    var updatedsubOption =\r\n                    {\r\n                        label: subOp.label,\r\n                        data: subOp.data,\r\n                        selected: subOp.label === selectedSubOption?.label\r\n                    }\r\n                    updatedSubOptions.push(updatedsubOption);\r\n                })\r\n                updatedOption.subOptions = updatedSubOptions;\r\n            }\r\n            updatedOptions.push(updatedOption);\r\n        });\r\n\r\n        setMenuOptions(updatedOptions);\r\n\r\n        setShowMenu(false);\r\n        setShowSubMenu(false);\r\n\r\n        var option = updatedOptions.find(op => op.selected);\r\n        if (option.subOptions) onOptionChanged(option.subOptions.find(subOp => subOp.selected));\r\n        else onOptionChanged(option);\r\n    }\r\n\r\n    const getOptionDisplay = (option) => {\r\n        return  (<div key={option.label} className={\"option \" + (option.selected ? 'selected' : '')}\r\n            onClick={() => {if(!option.subOptions)setSelectedOption(option)}}\r\n            onMouseEnter={() => {if(option.subOptions){setSelectedOption(option);setMenuSubOptions(!option || !option.subOptions ? [] : option.subOptions)}}}\r\n            >\r\n            {option.label}\r\n        </div>)\r\n    }\r\n\r\n    const getSubOptionDisplay = (subOption) => {\r\n        return  (<div key={subOption.label} className={\"option \" + (subOption.selected ? 'selected' : '')}\r\n            onClick={() => setSelectedSubOption(subOption)}\r\n            >\r\n            {subOption.label}\r\n        </div>)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (options) {\r\n            setMenuOptions(options);\r\n        }\r\n    }, [options]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && !selectedOption.subOptions)\r\n            updateMenuOptions(selectedOption, null);\r\n    }, [selectedOption]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && selectedSubOption)\r\n            updateMenuOptions(selectedOption, selectedSubOption);\r\n    }, [selectedSubOption]);\r\n\r\n\r\n    return (\r\n        <div className=\"video-options-container\" onMouseLeave={() => {setShowMenu(false);setShowSubMenu(false)}}>\r\n            <div className={\"video-options-menu \" + (showMenu ? '' : 'hidden')}\r\n                onMouseEnter={() => {setShowSubMenu(true)}}>\r\n                {menuOptions.map(option => getOptionDisplay(option))}\r\n            </div>\r\n            <div className={\"video-options-menu suboptions \" + (showSubMenu && menuSubOptions && menuSubOptions.length > 0 ? '' : 'hidden')}\r\n                onMouseLeave={() => {setShowSubMenu(false)}}>\r\n                {menuSubOptions.map(subOption => getSubOptionDisplay(subOption))}\r\n            </div>\r\n            <VideoOptionsButton icon={icon} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function VideoOptionsButton({ icon, hide, onClick }) {\r\n    return (\r\n        <div className=\"video-options-btn\" style={{ display: hide ? 'none' : '' }} onClick={() => onClick()}>\r\n            {icon}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport SubtitlesIcon from '@material-ui/icons/Subtitles';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport SortByAlphaIcon from '@material-ui/icons/SortByAlpha';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\n\r\nimport { VideoOptions, VideoOptionsButton } from './Options';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useOnClickOutside } from '../../../helpers/customHooks';\r\n\r\nfunction RightControlsGroup({\r\n    subtitlesOptions,\r\n    qualityOptions,\r\n    onSubtitleSizeChange,\r\n    onSubtitlesChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged }) {\r\n\r\n    const [videoInFullscreen, setVideoInFullscreen] = useState(false);\r\n\r\n    const changeFullScreenState = (fullscreen) => {\r\n        onFullScreenStateChanged(fullscreen);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setVideoInFullscreen(isFullScreen);\r\n    }, [isFullScreen]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <div className=\"controls-sub-group\">\r\n                <VideoOptions options={subtitlesOptions}\r\n                    icon={<SubtitlesIcon className=\"icon\" />}\r\n                    onOptionChanged={(option) => onSubtitlesChange(option?.data?.url ? option.data.url : '')}\r\n                />\r\n                <AdjustSubtitleTimeOption onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon big\" />} onClick={() => onSubtitleSizeChange(2)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon small\" />} onClick={() => onSubtitleSizeChange(-2)} />\r\n            </div>\r\n\r\n            <VideoOptions options={qualityOptions}\r\n                icon={<SettingsIcon className=\"icon\" />}\r\n                onOptionChanged={(option) => onVideoQualityChange(option?.data?.url ? option.data.url : '')}\r\n            />\r\n\r\n            <VideoOptionsButton icon={<FullscreenIcon className=\"icon big\" />} hide={videoInFullscreen} onClick={() => changeFullScreenState(true)} />\r\n            <VideoOptionsButton icon={<FullscreenExitIcon className=\"icon big\" />} hide={!videoInFullscreen} onClick={() => changeFullScreenState(false)} />\r\n        </div>)\r\n}\r\nexport default RightControlsGroup;\r\n\r\nfunction AdjustSubtitleTimeOption({ onAdjustSubtitleTimeChange }) {\r\n\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const menuRef = useRef(null);\r\n\r\n    useOnClickOutside(menuRef, () => setShowMenu(false));\r\n\r\n    return (\r\n        <div ref={menuRef} className=\"adjust-subtitle-time-container\">\r\n            <div className={\"video-options-menu\" + (showMenu ? '' : ' hidden')}>\r\n                <div className=\"label\">Adj. Sub.</div>\r\n                <div className=\"adjust-subtitle-time-input-container\">\r\n                    <input type=\"number\" step=\"0.01\" onChange={(e) => onAdjustSubtitleTimeChange(e.target.valueAsNumber)} /><span className=\"label\"> s</span>\r\n                </div>\r\n            </div>\r\n            <VideoOptionsButton icon={<RestoreIcon className=\"icon\" />} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","import LeftControlsGroup from \"./LeftControlsGroup\";\r\nimport RightControlsGroup from \"./RightControlsGroup\";\r\n\r\nfunction Controls({\r\n    videoIsPlaying,\r\n    onPlayClick,\r\n    onPauseClick,\r\n    onVolumeChanged,\r\n    onPlayBackwardClick,\r\n    onPlayForwardClick,\r\n    videoSubtitlesOptions, \r\n    videoQualitiesOptions,\r\n    onSubtitlesChange,\r\n    onSubtitleSizeChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged }) {\r\n        \r\n    return (\r\n        <div className=\"video-player-controls\">\r\n            <LeftControlsGroup \r\n                videoIsPlaying = {videoIsPlaying}\r\n                onPlayClick={() => onPlayClick()} \r\n                onPauseClick={() => onPauseClick()} \r\n                onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)}\r\n                onPlayBackwardClick={()=> onPlayBackwardClick()}\r\n                onPlayForwardClick={()=> onPlayForwardClick()}/>\r\n            <RightControlsGroup\r\n                subtitlesOptions={videoSubtitlesOptions}\r\n                qualityOptions={videoQualitiesOptions}\r\n                onSubtitleSizeChange={(pixelsToAdd) => onSubtitleSizeChange(pixelsToAdd)}\r\n                onSubtitlesChange={(newUrlSource) => onSubtitlesChange(newUrlSource)}\r\n                onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)}\r\n                onVideoQualityChange={(newUrlSource) => onVideoQualityChange(newUrlSource)} \r\n                isFullScreen={isFullScreen}\r\n                onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Controls;","import \"../../style/video-player.css\";\r\n\r\nimport fadeTransition from \"../../helpers/customStyles\";\r\n\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\n\r\nimport VideoSubtitles from './videoPlayerComponents/VideoSubtitles';\r\nimport TimeController from './videoPlayerComponents/TimeController';\r\nimport Controls from './videoPlayerComponents/Controls';\r\n\r\nimport AppServices from \"../../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction VideoPlayer({ videoQualitiesOptions, videoSubtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n    const videoRef = useRef(null);\r\n    const videoPlayerContainerRef = useRef(null);\r\n    const watchedTimeUpdateTriggeredRef = useRef(0);\r\n\r\n    const [isFullScreen, setIsFullScreen] = useState(false);\r\n    const [currentTime, setCurrentTime] = useState(0);\r\n\r\n    const [errorMessage, setErrorMessage] = useState();\r\n\r\n    const checkDownloadStateRef = useRef(false);\r\n    const [videoDownloadState, setVideoDownloadState] = useState('Loading');\r\n\r\n    const [videoSource, setVideoSource] = useState('');\r\n    const [videoIsLoading, setVideoIsLoading] = useState(false);\r\n    const [videoIsPlaying, setVideoIsPlaying] = useState(false);\r\n\r\n    const [subtitlesUrl, setSubtitlesUrl] = useState('');\r\n    const [subtitlesSize, setSubtitlesSize] = useState(30);\r\n    const [subtitlesAdjustTime, setSubtitlesAdjustTime] = useState(0);\r\n\r\n    const [showVideoControls, setShowVideoControls] = useState(false);\r\n    const lastTimeMouseMovedRef = useRef(0);\r\n\r\n    const checkMovieDownloadState = (url) => {\r\n        if (checkDownloadStateRef.current && videoRef.current) {\r\n            AppServices.torrentApiService.getDownloadState(url, (response) => {\r\n                if (decodeURIComponent(url) === decodeURIComponent(videoRef.current?.src)) {\r\n                    if (response.error) {\r\n                        checkDownloadStateRef.current = false;\r\n                        setErrorMessage(response.message);\r\n                    }\r\n                    else {\r\n                        setVideoDownloadState(response.message ? response.message : 'Loading');\r\n                        setTimeout(() => {\r\n                            checkMovieDownloadState(url);\r\n                        }, 3000);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    const changeVideoSource = (url) => {\r\n        var currentTime = videoRef.current.currentTime;\r\n        setVideoSource(url);\r\n\r\n        videoRef.current.autoplay = !videoRef.current.paused;\r\n        videoRef.current.load();\r\n\r\n        videoRef.current.currentTime = currentTime;\r\n        setCurrentTime(currentTime);\r\n\r\n        setVideoIsLoading(true);\r\n        checkDownloadStateRef.current = true;\r\n        setErrorMessage('');\r\n        checkMovieDownloadState(url);\r\n    }\r\n\r\n    const changeVideoTime = (newTime) => {\r\n        videoRef.current.currentTime = newTime;\r\n    }\r\n\r\n    const displayControls = () => {\r\n        setShowVideoControls(true);\r\n        videoPlayerContainerRef.current.style.cursor = 'auto';\r\n        lastTimeMouseMovedRef.current = Date.now();\r\n        const waitingTime = 3000;\r\n        setTimeout(() => {\r\n            if (videoPlayerContainerRef?.current && Date.now() > lastTimeMouseMovedRef.current + waitingTime) {\r\n                setShowVideoControls(false);\r\n                videoPlayerContainerRef.current.style.cursor = 'none';\r\n            }\r\n        }, waitingTime + 500);\r\n    };\r\n\r\n    const onFullScreenStateChanged = (fullScreen) => {\r\n        if (fullScreen) {\r\n            if (!videoPlayerContainerRef.current) return;\r\n\r\n            if (videoPlayerContainerRef.current.requestFullscreen) videoPlayerContainerRef.current.requestFullscreen();\r\n            else if (videoPlayerContainerRef.current.mozRequestFullScreen) videoPlayerContainerRef.current.mozRequestFullScreen();\r\n            else if (videoPlayerContainerRef.current.webkitRequestFullscreen) videoPlayerContainerRef.current.webkitRequestFullscreen();\r\n            else if (videoPlayerContainerRef.current.msRequestFullscreen) videoPlayerContainerRef.current.msRequestFullscreen();\r\n        }\r\n        else\r\n            document.exitFullscreen();\r\n    }\r\n\r\n    const playVideo = () => {\r\n        if (videoRef?.current)\r\n            videoRef.current.play();\r\n    }\r\n\r\n    const pauseVideo = () => {\r\n        if (videoRef?.current)\r\n            videoRef.current.pause();\r\n    }\r\n\r\n    const changeVideoVolume = (newVolume) => {\r\n        if (videoRef?.current)\r\n            videoRef.current.volume = newVolume;\r\n    }\r\n\r\n    useEffect(() => {\r\n        videoPlayerContainerRef.current.addEventListener(\"mousemove\", displayControls);\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef?.current) videoPlayerContainerRef.current.removeEventListener(\"mousemove\", displayControls);\r\n        }\r\n    }, [videoPlayerContainerRef]);\r\n\r\n    useEffect(() => {\r\n        if (!Boolean(videoRef?.current))\r\n            return;\r\n\r\n        const videoErrorHandler = (e) => {\r\n            if (videoRef?.current?.attributes.src.value) {\r\n                setErrorMessage(errorMessage ? errorMessage : \"An error occured\");\r\n                setVideoIsLoading(false);\r\n            }\r\n        }\r\n        videoRef.current.addEventListener('error', videoErrorHandler, true);\r\n\r\n        const onVideoReady = () => {\r\n            checkDownloadStateRef.current = false;\r\n            setVideoDownloadState('');\r\n            setVideoIsLoading(false);\r\n        };\r\n        videoRef.current.addEventListener('canplay', onVideoReady, true);\r\n\r\n        const onVideoPlaying = () => {\r\n            onVideoReady();\r\n            setVideoIsPlaying(true);\r\n        };\r\n        videoRef.current.addEventListener('playing', onVideoPlaying, true);\r\n\r\n        const onVideoPaused = () => {\r\n            setVideoIsPlaying(false);\r\n        };\r\n        videoRef.current.addEventListener('pause', onVideoPaused, true);\r\n\r\n        const onVideoWaiting = () => {\r\n            setVideoIsLoading(true);\r\n        };\r\n        videoRef.current.addEventListener('waiting', onVideoWaiting, true);\r\n\r\n        const onTimeUpdated = (e) => {\r\n            if (videoRef.current?.currentTime) {\r\n                setCurrentTime(videoRef.current?.currentTime);\r\n\r\n                let currentTime = Math.round(videoRef.current?.currentTime);\r\n                if (currentTime - watchedTimeUpdateTriggeredRef.current > 10) {\r\n                    watchedTimeUpdateTriggeredRef.current = currentTime;\r\n                    onWatchedTimeUpdate(videoRef.current.currentTime, videoRef.current.duration, videoRef.current.src);\r\n                }\r\n            }\r\n        };\r\n        videoRef.current.addEventListener('timeupdate', onTimeUpdated);\r\n\r\n        return () => {\r\n            if (videoRef?.current) {\r\n                videoRef.current.removeEventListener(\"error\", videoErrorHandler);\r\n                videoRef.current.removeEventListener('playing', onVideoReady);\r\n                videoRef.current.removeEventListener('canplay', onVideoReady);\r\n                videoRef.current.removeEventListener('waiting', onVideoWaiting);\r\n                videoRef.current.removeEventListener('pause', onVideoPaused);\r\n                videoRef.current.removeEventListener('timeupdate', onTimeUpdated);\r\n            }\r\n        }\r\n    }, [videoRef]);\r\n\r\n    useEffect(() => {\r\n        const onFullScreenChange = (e) => {\r\n            setIsFullScreen(document.fullscreenElement);\r\n        };\r\n\r\n        const onKeyboardPress = (e) => {\r\n\r\n            if (!videoRef?.current) return;\r\n\r\n            displayControls();\r\n\r\n            if (e.keyCode === 32) {\r\n                if (videoRef.current.paused) playVideo();\r\n                else pauseVideo();\r\n            }\r\n            else if (e.keyCode === 37)\r\n                changeVideoTime(videoRef.current?.currentTime - 10);\r\n            else if (e.keyCode === 39)\r\n                changeVideoTime(videoRef.current?.currentTime + 10);\r\n        }\r\n        if (videoPlayerContainerRef.current) {\r\n            videoPlayerContainerRef.current.addEventListener('fullscreenchange', onFullScreenChange);\r\n            document.addEventListener('keyup', onKeyboardPress, false);\r\n        }\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef.current) {\r\n                document.removeEventListener('keyup', onKeyboardPress);\r\n                videoPlayerContainerRef.current.removeEventListener('fullscreenchange', onFullScreenChange);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (videoQualitiesOptions) {\r\n            const videoQuality = videoQualitiesOptions.find(op => op.selected);\r\n            if (videoQuality?.data?.url) changeVideoSource(videoQuality.data.url);\r\n        }\r\n    }, [videoQualitiesOptions]);\r\n\r\n    useEffect(() => {\r\n        if (videoTime > 0 && videoRef?.current)\r\n            videoRef.current.currentTime = videoTime;\r\n    }, [videoTime]);\r\n\r\n    return (\r\n        <div ref={videoPlayerContainerRef} className=\"video-player-content\" >\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={videoSource && videoIsLoading} text={videoDownloadState} />\r\n            <div className=\"video-player-error-message\" style={{ display: errorMessage ? '' : 'none' }}>{errorMessage}</div>\r\n            <video ref={videoRef} className=\"video-player\" src={videoSource}></video>\r\n            <div className=\"video-player-bottom\">\r\n                <VideoSubtitles\r\n                    videoCurrentTime={currentTime}\r\n                    urlSource={subtitlesUrl}\r\n                    size={subtitlesSize}\r\n                    subtitlesAdjustTime={subtitlesAdjustTime} />\r\n                <div className=\"video-player-controls-container\" style={fadeTransition(showVideoControls)}>\r\n                    <TimeController\r\n                        videoDuration={videoRef.current?.duration}\r\n                        videoCurrentTime={currentTime}\r\n                        onTimeChanged={(newTime) => changeVideoTime(newTime)} />\r\n                    <Controls\r\n                        videoIsPlaying={videoIsPlaying}\r\n                        onPlayClick={() => playVideo()}\r\n                        onPauseClick={() => pauseVideo()}\r\n                        onVolumeChanged={(newVolume) => changeVideoVolume(newVolume)}\r\n                        onPlayBackwardClick={() => changeVideoTime(currentTime - 10)}\r\n                        onPlayForwardClick={() => changeVideoTime(currentTime + 10)}\r\n                        videoSubtitlesOptions={videoSubtitlesOptions}\r\n                        videoQualitiesOptions={videoQualitiesOptions}\r\n                        onSubtitleSizeChange={(pixelsToAdd) => setSubtitlesSize(subtitlesSize + pixelsToAdd <= 60 && subtitlesSize + pixelsToAdd >= 20 ? subtitlesSize + pixelsToAdd : subtitlesSize)}\r\n                        onSubtitlesChange={(newUrlSource) => setSubtitlesUrl(newUrlSource ? newUrlSource : '')}\r\n                        onAdjustSubtitleTimeChange={(time) => setSubtitlesAdjustTime(time ? time : 0)}\r\n                        onVideoQualityChange={(newUrlSource) => changeVideoSource(newUrlSource)}\r\n                        isFullScreen={isFullScreen}\r\n                        onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default VideoPlayer;\r\n","\r\nimport \"../../style/video-player-window.css\";\r\nimport \"../../style/button.css\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport AppMode from \"../../services/appMode\";\r\nimport VideoPlayer from \"./VideoPlayer\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport BaseButton from \"../common/buttons/BaseButton\";\r\nimport ModalWindow from \"../modal/ModalWindow\";\r\nimport { ToTimeFormat } from \"../../helpers/timeFormatHelper\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function VideoPlayerWindow({ sources, subtitles, visible, onCloseClick, onWatchedTimeUpdate, goToTime, mediaDetails }) {\r\n    const [subtitlesOptions, setSubtitlesOptions] = useState([]);\r\n    const [videoQualitiesOptions, setVideoQualitiesOptions] = useState([]);\r\n    const [resumeMessageVisible, setResumeMessageVisible] = useState(true);\r\n    const [videoTime, setVideoTime] = useState(0);\r\n    const [isDesktopApp, setIsDesktopApp] = useState(false);\r\n    const [showLoadingModal, setShowLoadingModal] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        if (visible) {\r\n            AppServices.appInfoApiService.isDesktopApplication((isDesktopApp) => {\r\n                setIsDesktopApp(isDesktopApp);\r\n                if (isDesktopApp) {\r\n                    const options = {\r\n                        sources: sources.map(source => {\r\n                            return {\r\n                                quality: source.quality.trim(),\r\n                                selected: source.selected,\r\n                                url: AppServices.torrentApiService.buildStreamUrl(source.downloadUrl, source.fileName, source.seasonNumber, source.episodeNumber)\r\n                            }\r\n                        }),\r\n                        subtitles: subtitles ?? [],\r\n                        resumeToTime: goToTime,\r\n                        watchedMedia: mediaDetails && {\r\n                            title: mediaDetails.title,\r\n                            id: mediaDetails.id,\r\n                            genres: mediaDetails.genres,\r\n                            coverImageUrl: mediaDetails.coverImageUrl,\r\n                            rating: mediaDetails.rating,\r\n                            totalDuration: mediaDetails.duration * 60,\r\n                            synopsis: mediaDetails.synopsis,\r\n                            year: mediaDetails.year,\r\n                            episodeNumber: sources[0].episodeNumber,\r\n                            seasonNumber: sources[0].seasonNumber,\r\n                        },\r\n                        mediaType: AppMode.getActiveMode().urlKey\r\n                    }\r\n\r\n                    var optionsJSON = JSON.stringify(options);\r\n\r\n                    if (window.chrome) {\r\n                        setShowLoadingModal(true);\r\n                        window.chrome.webview.addEventListener(\"message\", onDesktopVideoPlayerClosed);\r\n                        window.chrome.webview.postMessage(optionsJSON);\r\n                    }\r\n                    else if (window.webkit) {\r\n                        window.webkit.messageHandlers.medflixWebViewHandler.postMessage(optionsJSON);\r\n                        onCloseClick();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n    }, [visible]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (isDesktopApp) {\r\n                if (window.chrome) {\r\n                    window.chrome.webview.removeEventListener(\"message\", onDesktopVideoPlayerClosed);\r\n                }\r\n            }\r\n        }\r\n    }, [])\r\n\r\n    const onDesktopVideoPlayerClosed = () => {\r\n        setShowLoadingModal(false);\r\n        onCloseClick();//trigger close click to notify parent that video player is closed\r\n    }\r\n\r\n    const buildVideoQualitiesOptions = (sources) => {\r\n        var options = [];\r\n        if (!sources) return;\r\n\r\n        sources.sort((source1, source2) => {\r\n            const [quality1, quality2] = [source1.quality.toLowerCase().trim(), source2.quality.toLowerCase().trim()]\r\n            return quality1 === quality2 ? 0 : (quality1 < quality2 ? -1 : 1);\r\n        });\r\n\r\n        sources.forEach(source => {\r\n            var qualities = options.filter(o => o.label.startsWith(source.quality));\r\n\r\n            var option = {\r\n                label: qualities && qualities.length > 0 ? source.quality + ' (' + (qualities.length + 1) + ')' : source.quality,\r\n                selected: source.selected,\r\n                data: {\r\n                    url: AppServices.torrentApiService.buildStreamUrl(source.downloadUrl, source.fileName, source.seasonNumber, source.episodeNumber)\r\n                }\r\n            }\r\n            options.push(option);\r\n        });\r\n\r\n        if (options.filter(o => o.selected).length === 0)\r\n            options[0].selected = true;\r\n\r\n        setVideoQualitiesOptions(options);\r\n    }\r\n\r\n    const buildSubtitlesOptions = (subtitles) => {\r\n        var newSubtitlesOptions = [];\r\n        newSubtitlesOptions.push(\r\n            {\r\n                label: 'Off',\r\n                selected: true\r\n            });\r\n\r\n        if (subtitles && subtitles.length > 0) {\r\n            subtitles.forEach(sub => {\r\n                var subtitlesOption = {\r\n                    label: sub.language,\r\n                    selected: false,\r\n                    subOptions: []\r\n                };\r\n                sub.subtitlesSourceUrls.forEach((sourceUrl, index) => {\r\n                    subtitlesOption.subOptions.push({\r\n                        label: sub.language + ' ' + (index + 1),\r\n                        selected: false,\r\n                        data: {\r\n                            url: AppServices.subtitlesApiService.getSubtitlesApiUrl(sourceUrl)\r\n                        }\r\n                    });\r\n                })\r\n                newSubtitlesOptions.push(subtitlesOption);\r\n            });\r\n        }\r\n\r\n        setSubtitlesOptions(newSubtitlesOptions);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (visible && sources && sources.length > 0) {\r\n            buildVideoQualitiesOptions(sources);\r\n        }\r\n    }, [sources, visible]);\r\n\r\n    useEffect(() => {\r\n        if (visible && subtitles && subtitles.length > 0) {\r\n            buildSubtitlesOptions(subtitles);\r\n        }\r\n    }, [subtitles, visible]);\r\n\r\n    useEffect(() => {\r\n        if (goToTime > 0) {\r\n            setResumeMessageVisible(true);\r\n        }\r\n    }, [goToTime]);\r\n\r\n\r\n    const content = (\r\n        <div className=\"video-player-window-container\">\r\n            <ResumeMessage\r\n                visible={goToTime > 0 && resumeMessageVisible}\r\n                resumeTime={goToTime}\r\n                onNoClick={() => setResumeMessageVisible(false)}\r\n                onYesClick={() => { setVideoTime(goToTime); setResumeMessageVisible(false) }} />\r\n            <VideoPlayerContainer\r\n                visible={visible}\r\n                videoQualitiesOptions={videoQualitiesOptions}\r\n                subtitlesOptions={subtitlesOptions}\r\n                onWatchedTimeUpdate={(currentTime, duration, sourceUrl) => onWatchedTimeUpdate(currentTime, duration, sourceUrl)}\r\n                videoTime={videoTime} />\r\n        </div>\r\n    )\r\n    return (\r\n        isDesktopApp ?\r\n            <ModalWindow visible={showLoadingModal} />\r\n            : <ModalWindow visible={visible} content={content} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nfunction ResumeMessage({ visible, resumeTime, onYesClick, onNoClick }) {\r\n    const containerStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    }\r\n    if (visible) {\r\n        return (\r\n            <div style={containerStyle}>\r\n                <Paragraph text={\"Do you want to resume the video to \" + ToTimeFormat(resumeTime / 60) + \" ?\"} />\r\n                <BaseButton color=\"red\" content=\"Yes\" onClick={() => onYesClick()} />\r\n                <BaseButton color=\"grey\" content=\"No\" onClick={() => onNoClick()} />\r\n            </div>\r\n        );\r\n    }\r\n    else\r\n        return null;\r\n}\r\n\r\nfunction VideoPlayerContainer({ visible, videoQualitiesOptions, subtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n\r\n    if (visible) {\r\n        return <div className=\"video-player-container\">\r\n            <VideoPlayer\r\n                videoQualitiesOptions={videoQualitiesOptions}\r\n                videoSubtitlesOptions={subtitlesOptions}\r\n                onWatchedTimeUpdate={(currentTime, duration, sourceUrl) => onWatchedTimeUpdate(currentTime, duration, sourceUrl)}\r\n                videoTime={videoTime} />\r\n        </div>;\r\n    }\r\n    else\r\n        return null;\r\n}","import BaseButton from './BaseButton';\r\nimport TrailerIcon from '@material-ui/icons/LocalMovies';\r\n\r\nfunction TrailerButton({ visible, onClick }) {\r\n    if (visible) {\r\n\r\n        const content = (<div style={{display: 'flex', justifyContent: 'center'}}>\r\n            <TrailerIcon style={{ color: 'black' }}/>\r\n            <div style={{ marginLeft: '5px' }}>Trailer</div>\r\n        </div>);\r\n\r\n        return (\r\n            <BaseButton content={content} color={\"white\"} onClick={() => onClick()}/>\r\n        )\r\n    }\r\n    else return null;\r\n}\r\n\r\nexport default TrailerButton;","function Title({text}){\r\n\r\n    const style={\r\n        fontSize: '28px',\r\n        fontWeight: '500',\r\n        color: 'white',\r\n        textAlign: 'center'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default Title;","import BaseButton from './BaseButton';\r\nimport FilterNoneIcon from '@material-ui/icons/FilterNone';\r\n\r\nfunction CopyButton({ onClick }) {\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <FilterNoneIcon />\r\n        <div style={{ marginLeft: '5px' }}>Copy</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} color={\"grey\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default CopyButton;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nimport ModalWindow from \"../../modal/ModalWindow\";\r\nimport Title from '../text/Title';\r\nimport SecondaryInfo from '../text/SecondaryInfo';\r\nimport CopyButton from \"./CopyButton\";\r\nimport BaseButton from \"./BaseButton\";\r\n\r\nimport AppServices from \"../../../services/AppServices\";\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction PlayWithVLCButton({ onClick, videoUrl }) {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [isWebApp, setIsWebApp] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (isWebApp === null) {\r\n            AppServices.appInfoApiService.isDesktopApplication((isDesktopApp) => {\r\n                setIsWebApp(!isDesktopApp);\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n        <div style={{ marginLeft: '5px' }}>Play With VLC</div>\r\n    </div>);\r\n\r\n    const handleClick = () => {\r\n        setShowModal(true);\r\n        if (onClick) onClick();\r\n    }\r\n\r\n    if (isWebApp)\r\n        return (\r\n            <div>\r\n                <BaseButton content={content} color={\"orange\"} onClick={() => handleClick()} />\r\n                <ModalForVlc visible={showModal} videoUrl={videoUrl} onCloseClick={() => setShowModal(false)} />\r\n            </div>\r\n        );\r\n    else\r\n        return null;\r\n}\r\n\r\nexport default PlayWithVLCButton;\r\n\r\nfunction ModalForVlc({ visible, videoUrl, onCloseClick }) {\r\n\r\n    const containerStyle = {\r\n        backgroundColor: 'black',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: '300px',\r\n        width: '500px',\r\n        padding: '0 20px',\r\n        margin: 'auto',\r\n        color: 'white',\r\n        borderRadius: '10px',\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)'\r\n    };\r\n\r\n    const container = (\r\n        <div style={containerStyle}>\r\n            <ModalContent videoUrl={videoUrl} launchPlay={visible} onCloseClick={() => onCloseClick()} />\r\n        </div>\r\n    );\r\n\r\n    return <ModalWindow visible={visible} content={container} />;\r\n}\r\n\r\nfunction ModalContent({ videoUrl, onCloseClick }) {\r\n    const inputLinkUrlRef = useRef(null);\r\n\r\n    const onCopyClick = () => {\r\n        if (inputLinkUrlRef?.current) {\r\n            inputLinkUrlRef.current.select();\r\n            document.execCommand(\"copy\");\r\n            window.getSelection().removeAllRanges();\r\n        }\r\n    }\r\n\r\n    const centerStyle = (vertical) => {\r\n        return {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            height: '100%',\r\n            justifyContent: 'space-around',\r\n            flexDirection: vertical ? 'column' : ''\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Title text={\"Play with VLC\"} />\r\n            <SecondaryInfo text={\"To play the video in VLC, click on 'Copy', open VLC then open a network stream and paste the copied link.\"} />\r\n            <input ref={inputLinkUrlRef}\r\n                style={{ background: 'none', border: 'none', outline: 'none', color: 'grey', width: '100%', textAlign: 'center', textOverflow: 'ellipsis', margin: '10px 0' }}\r\n                type=\"text\"\r\n                readOnly={true}\r\n                value={Boolean(videoUrl) ? videoUrl : ''} />\r\n            <div style={centerStyle()}>\r\n                <CopyButton onClick={() => onCopyClick()} />\r\n                <BaseButton content={\"Close\"} color={\"red\"} onClick={() => onCloseClick()} />\r\n            </div>\r\n        </div>);\r\n\r\n}\r\n\r\n\r\n","import BaseButton from './BaseButton';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\n\r\n\r\nexport function AddBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"grey\"}\r\n                insideIcon={<AddIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n      \r\n}\r\n\r\nexport function RemoveBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"dark-red\"}\r\n                insideIcon={<RemoveIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n\r\n}\r\n\r\nfunction BookmarkButton({ onClick, visible, color, insideIcon }) {\r\n\r\n    if (visible) {\r\n        const contentStyle = {\r\n            position: 'relative',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const insideIconStyle = {\r\n            position: 'absolute',\r\n            top: '-2px',\r\n            right: '-2px',\r\n            padding: '1px',\r\n            zIndex: 3,\r\n            width: '15px',\r\n            height: '15px',\r\n            borderRadius: '100%',\r\n            backgroundColor: 'rgba(45,44,44,0.5)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const content = (\r\n            <div style={contentStyle}>\r\n                <BookmarkIcon style={{ fontSize: 28 }} />\r\n                <div style={insideIconStyle}>{insideIcon}</div>\r\n            </div>\r\n        )\r\n\r\n        return (\r\n            <BaseButton content={content} color={color} onClick={() => onClick()} />\r\n        );\r\n    }\r\n    else return null;\r\n\r\n}\r\n","import BaseButton from './BaseButton';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nfunction PlayButton({ center, onClick }) {\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n        <div style={{ marginLeft: '5px' }}>Play</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} centered={center} color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default PlayButton;","import \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport ArrowForwardIosRounded from '@material-ui/icons/ArrowForwardIosRounded';\r\nimport ArrowBackIosRounded from '@material-ui/icons/ArrowBackIosRounded';\r\n\r\nimport fadeTransition from \"../../../helpers/customStyles.js\";\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nfunction MediasListLite({ medias, alignLeft, onMediaClick }) {\r\n  const listRef = useRef(null);\r\n  const [hideBackArrow, setHideBackArrow] = useState(true);\r\n  const [hideForwardArrow, setHideForwardArrow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    listRef.current.onscroll = () => {\r\n      showHideNavArrows();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!medias || medias.length === 0) {\r\n      setHideForwardArrow(true);\r\n      setHideBackArrow(true);\r\n    }\r\n    else showHideNavArrows();\r\n  }, [medias]);\r\n\r\n  useEffect(() => { showHideNavArrows(); }, [hideBackArrow, hideForwardArrow]);\r\n\r\n  const isElementVisible = (elem, boundings) => {\r\n    const elemBoundings = elem.getBoundingClientRect();\r\n    return Math.floor(elemBoundings.right) <= Math.floor(boundings.right)\r\n      && Math.floor(elemBoundings.left) >= Math.floor(boundings.left);\r\n  }\r\n\r\n  const getVisibleRange = () => {\r\n    var indexes = []\r\n    var listBoundings = listRef.current.getBoundingClientRect();\r\n    for (let i = 0; i < listRef.current.children.length; i++) {\r\n      if (isElementVisible(listRef.current.children[i], listBoundings))\r\n        indexes.push(i);\r\n    }\r\n\r\n    return {\r\n      'maxIndex': Math.max(...indexes),\r\n      'minIndex': Math.min(...indexes),\r\n      'count': indexes.length\r\n    }\r\n  }\r\n\r\n  const navToRight = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.maxIndex + visibleRange.count;\r\n      var index = goToIndex > listRef.current.children.length - 1 ? listRef.current.children.length - 1 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const navToLeft = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.minIndex - visibleRange.count;\r\n      var index = goToIndex < 0 ? 0 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const showHideNavArrows = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var listBoundings = listRef.current.getBoundingClientRect();\r\n      setHideBackArrow(isElementVisible(listRef.current.children[0], listBoundings));\r\n      setHideForwardArrow(isElementVisible(listRef.current.children[listRef.current.children.length - 1], listBoundings));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={\"medias-list-container\"}>\r\n      <div style={fadeTransition(!hideBackArrow)} className=\"floating-navigation-btn left\" onClick={() => navToLeft()}>\r\n        <ArrowBackIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div style={fadeTransition(!hideForwardArrow)} className=\"floating-navigation-btn right\" onClick={() => navToRight()}>\r\n        <ArrowForwardIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div ref={listRef} className={\"medias-list\" + (hideBackArrow && hideForwardArrow && !alignLeft ? ' center' : '')}>\r\n        {medias.map((media, index) => (<MediaLitePresentation key={index} media={media} hoverEffect={true} onMediaClick={(mediaId) => onMediaClick(mediaId)} />))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default MediasListLite;","import \"../../../style/medias-list.css\";\r\nimport MediasListLite from \"./MediasListLite\";\r\n\r\nfunction MediasListLiteWithTitle({ listTitle, medias, alignLeft, visible, onMediaClick }) {\r\n    if (!visible) return null;\r\n\r\n    return (\r\n        <div className=\"medias-list-genre-container\">\r\n            <div className=\"medias-list-header\">\r\n                <div className=\"medias-list-categorie\">{listTitle}</div>\r\n            </div>\r\n            <MediasListLite medias={medias} alignLeft={alignLeft} onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n        </div>\r\n    );\r\n}\r\nexport default MediasListLiteWithTitle;\r\n\r\n","\r\nimport \"../style/media-presentation-page.css\";\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport ModalMediaTrailer from '../components/modal/ModalMediaTrailer';\r\nimport ModalEpisodeSelector from '../components/modal/ModalEpisodeSelector';\r\nimport ModalVersionAndQualitySelector from '../components/modal/ModalVersionAndQualitySelector';\r\n\r\nimport { VideoPlayerWindow } from '../components/video/VideoPlayerWindow';\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport ProgressionBar from \"../components/common/ProgressionBar\";\r\n\r\nimport BaseButton from \"../components/common/buttons/BaseButton\";\r\nimport TrailerButton from \"../components/common/buttons/TrailerButton\";\r\nimport PlayWithVLCButton from \"../components/common/buttons/PlayWithVLCButton\";\r\nimport { AddBookmarkButton, RemoveBookmarkButton } from \"../components/common/buttons/BookmarkButton\";\r\nimport PlayButton from \"../components/common/buttons/PlayButton\";\r\n\r\nimport SecondaryInfo from \"../components/common/text/SecondaryInfo\";\r\nimport Paragraph from \"../components/common/text/Paragraph\";\r\nimport Title from \"../components/common/text/Title\";\r\nimport TitleAndContent from \"../components/common/TitleAndContent\";\r\nimport Rating from \"../components/common/Rating\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\n\r\nimport AppServices from \"../services/AppServices\";\r\nimport { ToTimeFormat } from \"../helpers/timeFormatHelper\";\r\nimport fadeTransition from \"../helpers/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef, version } from 'react';\r\n\r\n\r\nfunction MediaFullPresentation({ mediaId, onCloseClick }) {\r\n\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n    const [mediaDetails, setMediaDetails] = useState({});\r\n    const [mediaProgression, setMediaProgression] = useState({});\r\n\r\n    const torrents = useRef([]);\r\n    const [torrentSearching, setTorrentSearching] = useState(false);\r\n    const [updateSelectedTorrent, setUpdateSelectedTorrent] = useState(true);\r\n\r\n    const [selectedVersionSources, setSelectedVersionSources] = useState([]);\r\n    const [videoSourceUrl, setVideoSourceUrl] = useState('');\r\n\r\n    const [mediaSubtitlesSources, setMediaSubtitlesSources] = useState([]);\r\n    const [loadingSubtitles, setLoadingSubtitles] = useState(false);\r\n\r\n    const [showMediaPlayer, setShowMediaPlayer] = useState(false);\r\n    const [showMediaTrailer, setShowMediaTrailer] = useState(false);\r\n    const [addBookmarkButtonVisible, setAddBookmarkButtonVisible] = useState(true);\r\n\r\n    const [similarMedias, setSimilarMedias] = useState([]);\r\n    const navHistory = useRef([]);\r\n\r\n    const selectedEpisode = useRef({\r\n        seasonNumber: 1,\r\n        episodeNumber: 1\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (mediaId)\r\n            loadPage(mediaId);\r\n    }, [mediaId]);\r\n\r\n    useEffect(() => {\r\n        if (mediaDetails.imdbId) {\r\n            getAvailableSubtitles(mediaDetails.imdbId, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n            if (mediaDetails.id && mediaDetails.title && mediaDetails.year)\r\n                searchTorrents(mediaDetails);\r\n        }\r\n\r\n        const topPage = document.getElementsByClassName('back-btn')[0];\r\n        topPage.scrollIntoView();\r\n    }, [mediaDetails]);\r\n\r\n    useEffect(() => {\r\n        if (updateSelectedTorrent && mediaProgression && torrents.current?.length > 0) {\r\n            const torrentToSelect = torrents.current.find(torrent => torrent.downloadUrl === mediaProgression.torrentUrl);\r\n            if (torrentToSelect) {\r\n                changeSelectedTorrent(torrentToSelect);\r\n                setUpdateSelectedTorrent(false);\r\n            }\r\n        }\r\n    }, [mediaProgression, torrents.current]);\r\n\r\n    const searchTorrents = (mediaDetails) => {\r\n        torrents.current = [];\r\n        setVideoSourceUrl('');\r\n        setTorrentSearching(true);\r\n        AppServices.torrentApiService.searchTorrents(mediaDetails.id, mediaDetails.title, mediaDetails.year, mediaDetails.imdbId, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber,\r\n            (result) => {\r\n                setTorrentSearching(false);\r\n                if (result && result.length > 0) {\r\n                    torrents.current = result.map(torrent => ({ ...torrent, seasonNumber: selectedEpisode.current.seasonNumber, episodeNumber: selectedEpisode.current.episodeNumber }));\r\n                    changeSelectedTorrent(torrents.current[0]);\r\n                }\r\n            }, () => {\r\n                setTorrentSearching(false);\r\n            }\r\n        );\r\n    }\r\n\r\n    const loadPage = (mediaId) => {\r\n        setDataLoaded(false);\r\n        setMediaDetails({});\r\n        setSimilarMedias([]);\r\n        if (mediaId) {\r\n            AppServices.searchMediaService.getMediaDetails(mediaId,\r\n                (details) => {\r\n                    if (details) {\r\n                        setMediaDetails(details);\r\n                        setDataLoaded(true);\r\n                        AppServices.bookmarkApiService.isMediaBookmarked(mediaId, (isMediaBookmarked) => {\r\n                            isMediaBookmarked = isMediaBookmarked === 'true';\r\n                            setAddBookmarkButtonVisible(!isMediaBookmarked);\r\n                        });\r\n                    }\r\n                    else {\r\n                        setDataLoaded(true);\r\n                        const topPage = document.getElementsByClassName('no-media-details-message')[0];\r\n                        topPage.scrollIntoView();\r\n                    }\r\n                });\r\n            getMediaProgression(mediaId, 1, 1);\r\n            AppServices.searchMediaService.getSimilarMedias(mediaId, (recommandedMedias) => {\r\n                if (recommandedMedias && recommandedMedias.length > 0)\r\n                    setSimilarMedias(recommandedMedias);\r\n            });\r\n        }\r\n    }\r\n\r\n    const changeSelectedTorrent = (selectedTorrent) => {\r\n        const refreshedTorrentsList = [];\r\n        for (let i = 0; i < torrents.current.length; i++) {\r\n            const torrent = torrents.current[i];\r\n            torrent.selected = torrent.downloadUrl == selectedTorrent.downloadUrl;\r\n            refreshedTorrentsList.push(torrent);\r\n        }\r\n        torrents.current = refreshedTorrentsList;\r\n\r\n        setVideoSourceUrl(\r\n            selectedTorrent ? AppServices.torrentApiService.buildStreamUrl(selectedTorrent.downloadUrl, '', selectedTorrent.seasonNumber, selectedTorrent.episodeNumber)\r\n                : '');\r\n\r\n        setSelectedVersionSources(torrents.current.filter(t => t.languageVersion === selectedTorrent.languageVersion));\r\n    }\r\n\r\n    const getMediaProgression = (mediaId, seasonNumber, episodeNumber) => {\r\n        setMediaProgression({});\r\n        AppServices.watchedMediaApiService.getWatchedMedia(\r\n            mediaId,\r\n            seasonNumber,\r\n            episodeNumber,\r\n            (watchedMedia) => {\r\n                if (watchedMedia?.currentTime && watchedMedia?.totalDuration) {\r\n                    setMediaProgression({\r\n                        progression: watchedMedia.currentTime / watchedMedia.totalDuration,\r\n                        remainingTime: watchedMedia.totalDuration - watchedMedia.currentTime,\r\n                        currentTime: watchedMedia.currentTime,\r\n                        torrentUrl: watchedMedia.torrentUrl\r\n                    });\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    const getAvailableSubtitles = (imdbCode, seasonNumber, episodeNumber) => {\r\n        setLoadingSubtitles(true);\r\n        AppServices.subtitlesApiService.getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber,\r\n            (availableSubtitles) => {\r\n                setMediaSubtitlesSources(availableSubtitles);\r\n                setTimeout(() => setLoadingSubtitles(false), 1000);\r\n            })\r\n    }\r\n\r\n    const bookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.addBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(false);\r\n        });\r\n    }\r\n\r\n    const unbookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.deleteBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(true);\r\n        });\r\n    }\r\n\r\n    const onWatchedTimeUpdate = (currentTime, duration, sourceUrl) => {\r\n        AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, currentTime, duration, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber, sourceUrl);\r\n    }\r\n\r\n    const onRecommandedMediaClick = (mediaId) => {\r\n        navHistory.current.push(mediaDetails.id);\r\n        loadPage(mediaId);\r\n    }\r\n\r\n    const onBackClick = () => {\r\n        if (navHistory.current.length > 0) {\r\n            let lastMediaId = navHistory.current.pop();\r\n            loadPage(lastMediaId);\r\n        }\r\n        else\r\n            onCloseClick();\r\n    }\r\n\r\n    const onEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        selectedEpisode.current = {\r\n            seasonNumber: seasonNumber,\r\n            episodeNumber: episodeNumber\r\n        };\r\n        searchTorrents(mediaDetails);\r\n        getAvailableSubtitles(mediaDetails.imdbId, seasonNumber, episodeNumber);\r\n        getMediaProgression(mediaDetails.id, seasonNumber, episodeNumber);\r\n    }\r\n\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <VideoPlayerWindow\r\n                visible={showMediaPlayer}\r\n                sources={selectedVersionSources}\r\n                subtitles={mediaSubtitlesSources}\r\n                onCloseClick={() => setShowMediaPlayer(false)}\r\n                onWatchedTimeUpdate={(currentTime, duration, sourceUrl) => onWatchedTimeUpdate(currentTime, duration, sourceUrl)}\r\n                goToTime={mediaProgression?.currentTime}\r\n                mediaDetails={mediaDetails} />\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={!dataLoaded} />\r\n            <ModalMediaTrailer visible={showMediaTrailer} youtubeTrailerUrl={mediaDetails.youtubeTrailerUrl} onCloseClick={() => setShowMediaTrailer(false)} />\r\n            <div style={{ display: dataLoaded && !mediaDetails.title ? 'flex' : 'none' }} className=\"no-media-details-message\">\r\n                <Paragraph text={\"No info found for this media\"} />\r\n                <BaseButton color=\"red\" content={\"Back\"} onClick={() => onBackClick()} />\r\n            </div>\r\n            <div style={fadeTransition(dataLoaded && mediaDetails.title)} className=\"media-presentation-page-container\">\r\n                <div className=\"back-btn\" onClick={() => onBackClick()}>\r\n                    <ArrowBackIcon className=\"back-arrow\" />\r\n                </div>\r\n                <div className=\"presentation\" style={{ backgroundImage: 'url(' + mediaDetails.backgroundImageUrl + ')' }}>\r\n                    <div className=\"info-container\">\r\n                        <div className=\"info\">\r\n                            <div className=\"title\">\r\n                                {\r\n                                    mediaDetails.logoImageUrl ? <img src={mediaDetails.logoImageUrl} /> : <Title text={mediaDetails.title} />\r\n                                }\r\n                            </div>\r\n                            <div className=\"info-content\">\r\n                                <Rating rating={mediaDetails.rating} size=\"50px\" />\r\n                                <SecondaryInfo center text={mediaDetails.year + \" | \" + (mediaDetails.duration ? ToTimeFormat(mediaDetails.duration) + \" | \" : '') + mediaDetails.genres?.map(genre => genre.name).join(', ')} />\r\n                                <MediaProgression mediaProgression={mediaProgression?.progression} remainingTime={mediaProgression?.remainingTime} />\r\n                                <div className=\"horizontal\">\r\n                                    <TrailerButton visible={mediaDetails?.youtubeTrailerUrl} onClick={() => setShowMediaTrailer(true)} />\r\n                                    <EpisodeSelector\r\n                                        serieId={mediaDetails.id}\r\n                                        seasonsCount={mediaDetails.seasonsCount}\r\n                                        onEpisodeSelected={(seasonNumber, episodeNumber) => onEpisodeSelected(seasonNumber, episodeNumber)} />\r\n                                    <AddBookmarkButton onClick={() => bookmarkMedia()} visible={addBookmarkButtonVisible} />\r\n                                    <RemoveBookmarkButton onClick={() => unbookmarkMedia()} visible={!addBookmarkButtonVisible} />\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"play-options\">\r\n                            <AvailableItems\r\n                                title=\"Subtitles\"\r\n                                isLoading={loadingSubtitles}\r\n                                itemsList={mediaSubtitlesSources && mediaSubtitlesSources.map(s => s.language)}\r\n                                emptyMessage={\"No subtitles available\"} />\r\n                            <div className=\"horizontal\">\r\n                                <AvailableItems\r\n                                    title=\"Versions\"\r\n                                    isLoading={torrentSearching}\r\n                                    itemsList={torrents.current && [...new Set(torrents.current.map(t => t.languageVersion))]}\r\n                                    emptyMessage={\"No version available\"} />\r\n                                <div style={fadeTransition(!torrentSearching && torrents.current?.length > 0)} className=\"horizontal\">\r\n                                    <QualitySelector torrents={torrents.current} onQualityChanged={(torrent) => changeSelectedTorrent(torrent)} />\r\n                                    <PlayButton onClick={() => setShowMediaPlayer(true)} />\r\n                                    <PlayWithVLCButton\r\n                                        videoUrl={videoSourceUrl}\r\n                                        onClick={() => { if (mediaDetails) AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, 0, 0, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber) }} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"extra\">\r\n                            <div className=\"media-details\">\r\n                                <TitleAndContent title=\"Director\" content={mediaDetails.director} justify=\"left\" />\r\n                                <TitleAndContent title=\"Cast\" content={mediaDetails.cast} justify=\"left\" />\r\n                                <Paragraph text={mediaDetails.synopsis}></Paragraph>\r\n                            </div>\r\n\r\n                            <MediasListLiteWithTitle\r\n                                medias={similarMedias}\r\n                                alignLeft\r\n                                listTitle=\"You may also like\"\r\n                                visible={similarMedias && similarMedias.length > 0}\r\n                                onMediaClick={(mediaId) => { onRecommandedMediaClick(mediaId) }} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default MediaFullPresentation;\r\n\r\n\r\nfunction MediaProgression({ mediaProgression, remainingTime }) {\r\n    if (mediaProgression > 0) {\r\n        return (\r\n            <div>\r\n                <ProgressionBar width=\"100%\" value={mediaProgression * 100} />\r\n                <SecondaryInfo text={ToTimeFormat(remainingTime / 60) + ' remaining'} />\r\n            </div>\r\n        )\r\n    }\r\n    else\r\n        return null;\r\n}\r\n\r\nfunction AvailableItems({ title, itemsList, emptyMessage, isLoading }) {\r\n    const availableItems = itemsList?.length > 0 ? itemsList.join(\", \") : emptyMessage;\r\n    const content = isLoading ? <CircularProgressBar color={'white'} size={'15px'} visible={true} /> : availableItems;\r\n    return (\r\n        <TitleAndContent title={title} content={content} />\r\n    )\r\n}\r\n\r\nfunction QualitySelector({ torrents, onQualityChanged }) {\r\n    const [modalQualitySelectorVisible, setModalQualitySelectorVisible] = useState(false);\r\n    const [selectedVersionAndQuality, setSelectedVersionAndQuality] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (torrents?.length > 0) {\r\n            const selectedTorrent = torrents.find(t => t.selected);\r\n            if (selectedTorrent) {\r\n                setSelectedVersionAndQuality(selectedTorrent.languageVersion + \" | \" + selectedTorrent.quality);\r\n            }\r\n        }\r\n\r\n    }, [torrents]);\r\n\r\n\r\n    const onQualityClick = (torrent) => {\r\n        setModalQualitySelectorVisible(false);\r\n        const selectedTorrent = torrents.find(t => t.selected);\r\n        if (selectedTorrent.downloadUrl !== torrent.downloadUrl)\r\n            onQualityChanged(torrent);\r\n    }\r\n\r\n    return <div>\r\n        <BaseButton color=\"grey\" content={selectedVersionAndQuality} onClick={() => setModalQualitySelectorVisible(true)} />\r\n        <ModalVersionAndQualitySelector\r\n            visible={modalQualitySelectorVisible}\r\n            torrents={torrents}\r\n            onQualityClick={(torrent) => onQualityClick(torrent)} />\r\n    </div>\r\n}\r\n\r\nfunction EpisodeSelector({ serieId, seasonsCount, onEpisodeSelected }) {\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1)\r\n    const [selectedEpisodeNumber, setSelectedEpisodeNumber] = useState(1)\r\n\r\n    useEffect(() => {\r\n        setSelectedSeasonNumber(1);\r\n        setSelectedEpisodeNumber(1);\r\n    }, [seasonsCount]);\r\n\r\n    if (!seasonsCount)\r\n        return null;\r\n\r\n    const onButtonClick = () => {\r\n        setModalVisible(true);\r\n    }\r\n\r\n    const handleEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        setSelectedSeasonNumber(seasonNumber);\r\n        setSelectedEpisodeNumber(episodeNumber);\r\n        onEpisodeSelected(seasonNumber, episodeNumber);\r\n        setModalVisible(false);\r\n    }\r\n\r\n    return <div>\r\n        <ModalEpisodeSelector\r\n            visible={modalVisible}\r\n            serieId={serieId}\r\n            numberOfSeasons={seasonsCount}\r\n            onEpisodeSelected={(seasonNumber, episodeNumber) => handleEpisodeSelected(seasonNumber, episodeNumber)}\r\n            onCloseClick={() => setModalVisible(false)} />\r\n        <BaseButton\r\n            color=\"red\"\r\n            content={\"Season \" + selectedSeasonNumber + \" - Episode \" + selectedEpisodeNumber}\r\n            onClick={() => onButtonClick()} />\r\n    </div>\r\n}\r\n\r\n\r\n","\r\nfunction MediaPicturesPresentation({ media, visible, onClick }) {\r\n    return (\r\n        <div className={\"media-pictures \" + (!visible ? \"hidden\" : \"\")} onClick={() => onClick(media.id)}>\r\n            <div className=\"logo-title\">\r\n                <img src={media?.logoImageUrl}></img>\r\n            </div>\r\n            <img className=\"background-image\" src={media?.backgroundImageUrl}></img>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediaPicturesPresentation;","\r\n\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport MediaPicturesPresentation from \"../presentation/MediaPicturesPresentation\";\r\nimport { useEffect, useState } from 'react';\r\nimport \"../../../style/media-pictures-presentation.css\";\r\n\r\n\r\nfunction MediasOfToday({ medias, onClick }) {\r\n    const [mediaIndexVisible, setMediaIndexVisible] = useState(0);\r\n    const [carouselPlay, setCarouselPlay] = useState(false);\r\n\r\n    useEffect(() =>{\r\n        if(medias && medias.length > 0)\r\n            setCarouselPlay(true);\r\n    }, [medias]);\r\n\r\n    useEffect(() => {\r\n        var changeMedia;\r\n        if (carouselPlay) {\r\n            changeMedia = setTimeout(() => {\r\n                if (mediaIndexVisible === medias?.length - 1)\r\n                    setMediaIndexVisible(0)\r\n                else setMediaIndexVisible(mediaIndexVisible + 1);\r\n            }, 5000);\r\n        }\r\n\r\n        return () => {\r\n            clearTimeout(changeMedia);\r\n        }\r\n    }, [mediaIndexVisible, carouselPlay]);\r\n\r\n\r\n    return (\r\n        <div className=\"medias-pictures-container\">\r\n            {medias?.map((media, index) =>\r\n                <MediaPicturesPresentation\r\n                    key={index}\r\n                    media={media}\r\n                    visible={index === mediaIndexVisible}\r\n                    onClick={() => onClick(media.id)} />)}\r\n            <div className=\"medias-pictures-nav-controls\">\r\n                <MediaPicturesCarousel\r\n                    nbMedias={medias?.length}\r\n                    selectedIndex={mediaIndexVisible}\r\n                    onNavElementClick={(index) => setMediaIndexVisible(index)} />\r\n                <div className=\"medias-pictures-play-pause\" onClick={() => setCarouselPlay(!carouselPlay)}>\r\n                    <PlayArrowIcon className=\"icon\" style={{ display: carouselPlay ? 'none' : '' }} />\r\n                    <PauseIcon className=\"icon\" style={{ display: !carouselPlay ? 'none' : '' }} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasOfToday;\r\n\r\nfunction MediaPicturesCarousel({ nbMedias, selectedIndex, onNavElementClick }) {\r\n\r\n    const navElements = [];\r\n\r\n    for (let i = 0; i <= nbMedias - 1; i++)\r\n        navElements.push(i);\r\n\r\n    return (\r\n        <div className=\"medias-pictures-nav\">\r\n            {navElements.map((i) =>\r\n                <div key={i}\r\n                    onClick={() => onNavElementClick(i)}\r\n                    className={\"nav-elem\" + (selectedIndex === i ? ' selected' : '')}></div>)}\r\n        </div>\r\n    );\r\n}","\r\nimport \"../style/home-page.css\";\r\nimport MediasOfToday from \"../components/media/list/MediasOfTodayList\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\n\r\nimport fadeTransition from \"../helpers/customStyles.js\";\r\nimport AppServices from \"../services/AppServices\";\r\nimport CacheService from \"../services/cacheService\";\r\nimport AppMode from \"../services/appMode\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\nfunction HomePage({ onMediaClick, onReady, onFail }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    const mediaListref = useRef([]);\r\n    const cacheIdRef = useRef(\"\");\r\n\r\n    const [mediaLists, setMediaLists] = useState([]);\r\n\r\n    const buildCacheId = (appMode) => {\r\n        return 'homepage' + appMode;\r\n    }\r\n\r\n    const todayTrendingTitle = \"todayTrending\"\r\n\r\n    const addMedias = (listTitle, medias, insertAtBeginning) => {\r\n        if (medias && medias.length > 0) {\r\n            let data = {\r\n                title: listTitle,\r\n                medias: medias\r\n            }\r\n            if (insertAtBeginning) mediaListref.current.unshift(data);\r\n            else mediaListref.current.push(data);\r\n            CacheService.setCache(cacheIdRef.current, mediaListref.current);\r\n            const newArray = [...mediaListref.current];\r\n            setMediaLists(newArray);\r\n        }\r\n    };\r\n\r\n    const loadContent = () => {\r\n        cacheIdRef.current = buildCacheId(AppMode.getActiveMode().label);\r\n\r\n        let cache = CacheService.getCache(cacheIdRef.current);\r\n        mediaListref.current = [];\r\n\r\n        if (cache) {\r\n            mediaListref.current = cache.data;\r\n            setMediaLists(mediaListref.current);\r\n            setDataLoaded(true);\r\n        }\r\n        else {\r\n            AppServices.searchMediaService.getMediasOfToday(\r\n                (medias) => {\r\n                    addMedias(todayTrendingTitle, medias);\r\n                    setDataLoaded(true);\r\n                    onReady();\r\n                }, () => {\r\n                    onFail();\r\n                });\r\n            AppServices.searchMediaService.getPopularMedias((medias) => {\r\n                addMedias(\"Popular \" + AppMode.getActiveMode().label.toLocaleLowerCase(), medias, true);\r\n            });\r\n            AppServices.searchMediaService.getRecommandedMedias((medias) => {\r\n                addMedias(\"Recommanded for you\", medias, true);\r\n            });\r\n            AppServices.searchMediaService.getPopularNetflixMedias((medias) => {\r\n                addMedias(\"Popular on Netflix\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularDisneyPlusMedias((medias) => {\r\n                addMedias(\"Popular on Disney Plus\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAmazonPrimeMedias((medias) => {\r\n                addMedias(\"Popular on Amazon Prime\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAppleTvMedias((medias) => {\r\n                addMedias(\"Popular on AppleTv\", medias);\r\n            });\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadContent();\r\n        AppMode.onAppModeChanged(() => {\r\n            loadContent();\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <CircularProgressBar position={\"center\"} visible={!dataLoaded} color={\"white\"} size={\"60px\"} />\r\n            <div className=\"home-page-container\" style={fadeTransition(dataLoaded)}>\r\n                <MediasOfToday medias={mediaLists.find(list => list.title === todayTrendingTitle)?.medias} onClick={(mediaId) => onMediaClick(mediaId)} />\r\n                <div className=\"blur-divider\"></div>\r\n                {mediaLists.filter(list => list.title !== todayTrendingTitle).map((mediasList) =>\r\n                (\r\n                    <MediasListLiteWithTitle\r\n                        key={mediasList.title}\r\n                        visible={true}\r\n                        listTitle={mediasList.title}\r\n                        medias={mediasList.medias}\r\n                        onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import \"../../../style/media-intermediate-presentation.css\";\r\n\r\nimport MediaLitePresentation from \"./MediaLitePresentation\";\r\nimport ProgressionBar from \"../../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../../common/text/SecondaryInfo\";\r\nimport AppMode from \"../../../services/appMode\";\r\n\r\nfunction MediaIntermediatePresentation({ media, onClick }) {\r\n    const truncateText = (text) => {\r\n        if (text && text.length > 400) return text.substring(0, 300) + '...';\r\n        else return text;\r\n    };\r\n\r\n    return (\r\n        <div className=\"media-intermediate-presentation-container\" onClick={() => onClick()}>\r\n            <MediaLitePresentation media={media} />\r\n            <div className=\"media-intermediate-presentation-content\">\r\n                <div className=\"media-intermediate-presentation-info\">\r\n                    <SecondaryInfo text={truncateText(media.synopsis)} />\r\n                    {AppMode.isSeriesMode() ? <SecondaryInfo text={\"Season \" + media.seasonNumber + \" - Episode \" + media.episodeNumber} /> : null}\r\n                    {media.totalDuration && media.currentTime ? <ProgressionBar value={(media.currentTime / media.totalDuration) * 100} width=\"100%\" /> : null}\r\n                </div>\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default MediaIntermediatePresentation;","import \"../../../style/media-intermediate-list.css\";\r\n\r\nimport MediaIntermediatePresentation from \"../presentation/MediaIntermediatePresentation\";\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\nimport { useEffect } from 'react';\r\n\r\nfunction MediasIntermediatePresentationList({ title, medias, centerToMedia, loadingProgressVisible, onClick }) {\r\n\r\n    useEffect(() => {\r\n        if (centerToMedia) {\r\n            var index = medias.findIndex(m => m.id === centerToMedia.id);\r\n            var elem = document.getElementById(\"mediaintermediatepresentation\" + index);\r\n            if (elem) {\r\n                elem.scrollIntoView({\r\n                    block: \"nearest\",\r\n                    inline: \"nearest\"\r\n                });\r\n            }\r\n        }\r\n    }, [medias, centerToMedia]);\r\n\r\n    return (\r\n        <div>\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={loadingProgressVisible} />          \r\n            <div className=\"media-intermediate-list-title-page\">{title}</div>\r\n            <div className=\"media-intermediate-list-content\">\r\n                {medias.map((media, index) =>\r\n                (<div id={\"mediaintermediatepresentation\" + index} key={index}>\r\n                    <MediaIntermediatePresentation\r\n                        media={media}\r\n                        onClick={() => onClick(media)}/>\r\n                </div>))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediasIntermediatePresentationList;","import AppServices from \"../services/AppServices\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from \"../services/appMode.js\";\r\n\r\nvar watchedMediaLastClicked = null;\r\n\r\nfunction WatchedMediasPage({centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            watchedMediaLastClicked = null;\r\n\r\n            AppServices.watchedMediaApiService.getWatchedMedias((medias) => {\r\n            setLoadingVisible(false);\r\n            if (medias && medias.length > 0)\r\n                setMedias(medias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleClick = (media) => {\r\n        watchedMediaLastClicked = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={medias && medias.length > 0 ? \"You can see here the \" + mediaLabel + \" you have watched\" : \"No \" + mediaLabel + \" watched\"}\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={medias}\r\n            centerToMedia={watchedMediaLastClicked}\r\n            onClick={(media) => handleClick(media)} />\r\n    )\r\n}\r\n\r\n\r\nexport default WatchedMediasPage;","import AppServices from \"../services/AppServices\";\r\nimport AppMode from \"../services/appMode.js\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\n\r\nvar lastClickedMedia = null;\r\n\r\nfunction BookmarkedMediasPage({ centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [mediasBookmarks, setMediasBookmarks] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            lastClickedMedia = null;\r\n\r\n            AppServices.bookmarkApiService.getBookmarkedMedias((bookmarkedMedias) => {\r\n            setLoadingVisible(false);\r\n            if (bookmarkedMedias && bookmarkedMedias.length > 0)\r\n                setMediasBookmarks(bookmarkedMedias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleMediaClick = (media) => {\r\n        lastClickedMedia = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={mediasBookmarks && mediasBookmarks.length > 0 ? \"You can see here the \" + mediaLabel + \" you have bookmarked\" : \"No bookmarked \" + mediaLabel }\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={mediasBookmarks}\r\n            centerToMedia={lastClickedMedia}\r\n            onClick={(media) => handleMediaClick(media)}/>\r\n    )\r\n}\r\n\r\n\r\nexport default BookmarkedMediasPage;","import \"../../style/text-input.css\";\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nfunction TextInput({ placeHolder, onTextChanged, large, value }) {\r\n\r\n    useEffect(() => {\r\n        setText(value);\r\n    }, [value]);\r\n\r\n    const [text, setText] = useState('');\r\n\r\n    const onValueChanged = (value) => {\r\n        setText(value);\r\n        onTextChanged(value);\r\n    }\r\n\r\n    return (\r\n        <div className=\"text-input-container\">\r\n            <div className={\"text-input \" + (large ? 'large' : '')}>\r\n                <TextField value={text} onChange={(e) => { onValueChanged(e.target.value) }} placeholder={placeHolder} />\r\n                <ClearIcon style={fadeTransition(text)} className='delete-text-cross' onClick={() => { onValueChanged('') }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TextInput;","import \"../style/search-view.css\";\r\n\r\nimport MediasListLite from \"../components/media/list/MediasListLite\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport TextInput from '../components/common/TextInput';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nconst cacheResearch = {\r\n    searchValue: '',\r\n    result: [],\r\n    save(searchValue, medias){\r\n        this.searchValue = searchValue;\r\n        this.result = medias;\r\n    },\r\n    clean(){\r\n        this.searchValue = '';\r\n        this.result = [];\r\n    }\r\n}; \r\n\r\nfunction ResearchPage({ loadFromCache, onMediaClick }) {\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [medias, setMedias] = useState([]);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n\r\n    const searchValueRef = useRef(searchValue);\r\n\r\n    const searchResultLabelReducer = (state, mediasLength) => {\r\n        if (mediasLength === 0) return \"Nothing found\";\r\n        else if (mediasLength === 1) return \"one result\";\r\n        else if (mediasLength > 1) return mediasLength + \" results\";\r\n        else return \"\";\r\n    };\r\n    const [searchResultLabel, searchResultLabelDispatch] = useReducer(searchResultLabelReducer, '');\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache && searchValue === cacheResearch.searchValue)\r\n            return;\r\n\r\n        searchValueRef.current = searchValue;\r\n        if (searchValue && searchValue.length > 2) {\r\n            setTimeout(() => {\r\n                if (searchValue === searchValueRef.current) {\r\n                    setSearchInProgress(true);\r\n                    searchResultLabelDispatch(-1);                \r\n                    setMedias([]);\r\n                    cacheResearch.clean();\r\n                    AppServices.searchMediaService.searchMedias(searchValue,\r\n                        (medias) => {\r\n                            setSearchInProgress(false);\r\n                            if(searchValueRef.current && searchValue === searchValueRef.current){\r\n                                searchResultLabelDispatch(medias.length);\r\n                                if (medias && medias.length > 0){\r\n                                    setMedias(medias);\r\n                                    cacheResearch.save(searchValue, medias);\r\n                                } \r\n                            }\r\n                        },\r\n                        () => {\r\n                            setSearchInProgress(false);\r\n                            searchResultLabelDispatch(0);\r\n                        });\r\n                }\r\n            }, 1000);\r\n        }\r\n        else {\r\n            searchResultLabelDispatch(-1);\r\n            setMedias([]);\r\n        }\r\n    }, [searchValue]);\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache){\r\n            setMedias(cacheResearch.result);\r\n            searchResultLabelDispatch(cacheResearch.result.length);\r\n            setSearchValue(cacheResearch.searchValue);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"search-view-container\">    \r\n            <TextInput placeHolder=\"Type here to start search...\" large onTextChanged={(text) => { setSearchValue(text) }} />\r\n            <CircularProgressBar color={'white'} size={'40px'} visible={searchInProgress} />\r\n            <div className=\"medias-search-result\">\r\n                <MediasListLite medias={medias} onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                <div className=\"label-result\">{searchResultLabel}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ResearchPage;","import BaseButton from './BaseButton';\r\n\r\nfunction OpenButton({ onClick, visible }) {\r\n\r\n    if(!visible)\r\n        return null;\r\n\r\n    const content = <div>Open</div>;\r\n\r\n    return (\r\n        <BaseButton content={content} centered color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default OpenButton;","\r\nimport \"../style/torrent-link-page.css\";\r\n\r\nimport TextInput from '../components/common/TextInput';\r\nimport OpenButton from '../components/common/buttons/OpenButton';\r\nimport CircularProgressBar from '../components/common/CircularProgressBar';\r\nimport PlayButton from '../components/common/buttons/PlayButton';\r\nimport PlayWithVLCButton from '../components/common/buttons/PlayWithVLCButton';\r\nimport { VideoPlayerWindow } from '../components/video/VideoPlayerWindow';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction TorrentLinkPage() {\r\n\r\n    const [torrentLink, setTorrentLink] = useState('');\r\n    const torrentLinkRef = useRef('');\r\n    const [openingTorrentLink, setOpeningTorrentLink] = useState(false);\r\n    const [openingHistory, setOpeningHistory] = useState(false);\r\n    const [torrentHistory, setTorrentHistory] = useState([]);\r\n    const [torrentFiles, setTorrentFiles] = useState([]);\r\n    const [selectedFile, setSelectedFile] = useState('');\r\n    const [loadingMessage, setLoadingMessage] = useState('');\r\n\r\n    const [showMoviePlayer, setShowMoviePlayer] = useState(false);\r\n\r\n    const [movieSources, setMovieSources] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        setMovieSources([{\r\n            quality: 'Video',\r\n            downloadUrl: torrentLink,\r\n            fileName: selectedFile\r\n        }]);\r\n\r\n        if (!torrentLink)\r\n            getTorrentHistory();\r\n\r\n        torrentLinkRef.current = torrentLink;\r\n\r\n    }, [torrentLink, selectedFile]);\r\n\r\n    const getTorrentHistory = () => {\r\n        setOpeningHistory(true);\r\n        setLoadingMessage('Loading history');\r\n        AppServices.torrentApiService.getTorrentHistory(\r\n            (files) => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory(files);\r\n            },\r\n            () => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory([]);\r\n            });\r\n    };\r\n\r\n    const changeTorrentLink = (torrentLink) => {\r\n        setOpeningTorrentLink(false);\r\n        setSelectedFile('');\r\n        setTorrentLink(torrentLink);\r\n        setTorrentFiles([]);\r\n    };\r\n\r\n    const openTorrent = () => {\r\n        setTorrentFiles([]);\r\n        setOpeningTorrentLink(true);\r\n        setLoadingMessage('Opening torrent');\r\n\r\n        AppServices.torrentApiService.getTorrentFiles(torrentLink,\r\n            (response) => {\r\n                if (decodeURIComponent(torrentLinkRef.current) === decodeURIComponent(response.link)) {\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles(response.files);\r\n                }\r\n            },\r\n            (response) => {\r\n                if (decodeURIComponent(torrentLinkRef.current) === decodeURIComponent(response.link)) {\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles([]);\r\n                }\r\n            });\r\n    };\r\n\r\n    const onPlayFileClick = (file) => {\r\n        setSelectedFile(file);\r\n        setShowMoviePlayer(true);\r\n    }\r\n\r\n    const torrentFilesAreLoadingOrLoaded = () => {\r\n        return openingTorrentLink || (torrentFiles && torrentFiles.length > 0);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"torrent-link-page-container\">\r\n            <div className=\"title\">Enter a torrent url or magnet and click on Open to see the list of files</div>\r\n            <TextInput placeHolder=\"Torrent link or magnet...\" large onTextChanged={(text) => changeTorrentLink(text)} value={torrentLink} />\r\n\r\n            <div style={{ margin: \"10px 0\" }}>\r\n                <OpenButton visible={!torrentFilesAreLoadingOrLoaded()} onClick={() => openTorrent()} />\r\n                {Boolean(openingTorrentLink) || Boolean(openingHistory) ? <CircularProgressBar visible size=\"30px\" color=\"white\" text={loadingMessage} /> : null}\r\n            </div>\r\n            <TorrentHistory visible={!torrentFilesAreLoadingOrLoaded()} files={torrentHistory} onClick={(torrentLink) => { changeTorrentLink(torrentLink) }} />\r\n            <TorrentFilesList visible={torrentFilesAreLoadingOrLoaded()} torrentLink={torrentLink} files={torrentFiles} onPlayFileClick={(file) => onPlayFileClick(file)} />\r\n\r\n            <VideoPlayerWindow visible={showMoviePlayer} sources={movieSources} onCloseClick={() => setShowMoviePlayer(false)} onWatchedTimeUpdate={() => { }} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TorrentLinkPage;\r\n\r\nfunction TorrentFilesList({ visible, torrentLink, files, onPlayFileClick }) {\r\n    if (!visible)\r\n        return null;\r\n\r\n    return <FilesList\r\n        torrentLink={torrentLink}\r\n        files={files}\r\n        onPlayFileClick={(file) => onPlayFileClick(file)}\r\n        contentType=\"fileFromTorrent\"\r\n        listTitle=\"Torrent files\" />\r\n}\r\n\r\nfunction TorrentHistory({ visible, files, onClick }) {\r\n    if (!visible)\r\n        return null;\r\n\r\n    return <FilesList\r\n        files={files}\r\n        onFileClick={(torrentLink) => onClick(torrentLink)}\r\n        contentType=\"torrentFile\"\r\n        listTitle=\"Last opened torrent files\" />\r\n}\r\n\r\nfunction FilesList({ torrentLink, files, onFileClick, onPlayFileClick, contentType, listTitle }) {\r\n\r\n    const [selectedFileIndex, setSelectedFileIndex] = useState(null);\r\n\r\n    useEffect(() => {\r\n        setSelectedFileIndex(null);\r\n    }, [files]);\r\n\r\n\r\n    if (!files || files.length === 0)\r\n        return null;\r\n\r\n    const fileListContainerStyle = {\r\n        width: '50%'\r\n    };\r\n\r\n    const fileListStyle = {\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)',\r\n        borderRadius: '15px',\r\n        padding: '5px 0',\r\n        maxHeight: '300px',\r\n        overflowY: 'auto'\r\n    };\r\n\r\n    const textStyle = {\r\n        padding: '10px 7px',\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        borderRadius: '7px',\r\n        cursor: 'pointer'\r\n    };\r\n\r\n    const selectedTextStyle = {\r\n        ...textStyle,\r\n        background: 'linear-gradient(90deg, rgba(187,0,0,1) 0%, rgba(193,76,76,1) 35%, rgba(0,0,0,1) 100%)'\r\n    };\r\n\r\n    const titleStyle = {\r\n        ...textStyle,\r\n        fontSize: '20px',\r\n        color: '#858585'\r\n    };\r\n\r\n\r\n    const getComponent = (file, index) => {\r\n        if (contentType === 'fileFromTorrent') {\r\n            return <FileFromTorrent\r\n                torrentLink={torrentLink}\r\n                file={file}\r\n                isSelected={index === selectedFileIndex}\r\n                onClick={() => setSelectedFileIndex(index)}\r\n                onPlayFileClick={() => onPlayFileClick(file)} />\r\n        }\r\n        else if (contentType === 'torrentFile') {\r\n            return <TorrentLink file={file} onClick={(torrentLink) => onFileClick(torrentLink)} />\r\n        }\r\n    };\r\n\r\n    const onMouseHover = (index, enter) => {\r\n        if (index !== selectedFileIndex) {\r\n            const element = document.getElementById('idfile_' + index);\r\n            element.style.background = enter ? '#362b2b' : '';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={fileListContainerStyle}>\r\n            <div style={titleStyle}>{listTitle}</div>\r\n            <div style={fileListStyle}>\r\n                {files.map((file, index) =>\r\n                    <div\r\n                        id={'idfile_' + index}\r\n                        key={index}\r\n                        onMouseEnter={() => { onMouseHover(index, true) }}\r\n                        onMouseLeave={() => { onMouseHover(index, false) }} style={index === selectedFileIndex ? selectedTextStyle : textStyle}>\r\n                        {getComponent(file, index)}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nfunction FileFromTorrent({ torrentLink, file, isSelected, onClick, onPlayFileClick }) {\r\n    let playButtons = null;\r\n    if (isSelected) {\r\n        playButtons = (\r\n            <div className=\"play-buttons-container\">\r\n                <PlayButton onClick={() => onPlayFileClick()} />\r\n                <PlayWithVLCButton videoUrl={AppServices.torrentApiService.buildStreamUrl(torrentLink, file)} />\r\n            </div>)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            onClick={() => onClick()}>\r\n            {file}\r\n            {playButtons}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction TorrentLink({ file, onClick }) {\r\n    const dateStyle = {\r\n        textAlign: 'left',\r\n        color: 'grey'\r\n    };\r\n\r\n    const formateDate = (fullDateTime) => {\r\n        const today = new Date();\r\n\r\n        const yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n        const date = new Date(fullDateTime);\r\n\r\n        let day = '';\r\n        if (yesterday.toDateString() === date.toDateString())\r\n            day = 'Yesterday';\r\n        else if (today.toDateString() === date.toDateString())\r\n            day = 'Today';\r\n        else {\r\n            let options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n            day = date.toLocaleString('en-US', options);\r\n        }\r\n\r\n        const time = date.toLocaleTimeString(navigator.language, {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            hour12: false\r\n        });\r\n        return day + ', ' + time;\r\n    }\r\n\r\n    return (\r\n        <div onClick={() => onClick(file.link)}>\r\n            <div style={dateStyle}>{formateDate(file.lastOpenedDateTime)}</div>\r\n            <div style={{ textAlign: 'left' }}>{file.link}</div>\r\n        </div>\r\n    );\r\n}","\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction Router({ components, activeComponentId }) {\r\n\r\n    const [activeComponent, setActiveComponent] = useState({});\r\n\r\n    useEffect(()=>{\r\n        var component = components.find(c => c.id === activeComponentId);\r\n        if(component) setActiveComponent(component);\r\n    },[components, activeComponentId]);\r\n\r\n    return <div style={activeComponent?.containerStyle}>{activeComponent?.render}</div>;\r\n}\r\n\r\nexport default Router;","import './App.css';\r\nimport NavBar from \"./components/navbar/NavBar\";\r\nimport SplashScreen from \"./components/SplashScreen\";\r\nimport ModalCategories from \"./components/modal/ModalCategories.js\";\r\n\r\nimport MediaListGenrePage from \"./pages/MediaListGenrePage\";\r\nimport MediaListPlatformPage from \"./pages/MediaListPlatformPage\";\r\nimport MediaPresentationPage from \"./pages/MediaPresentationPage\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport WatchedMediasPage from \"./pages/WatchedMediasPage\";\r\nimport BookmarkedMediasPage from \"./pages/BookmarkedMediasPage\";\r\nimport ResearchPage from \"./pages/ResearchPage\";\r\nimport TorrentLinkPage from \"./pages/TorrentLinkPage\";\r\n\r\nimport AppServices from './services/AppServices';\r\nimport Router from \"./components/Router\";\r\nimport { useState } from 'react';\r\n\r\n\r\nfunction App() {\r\n  AppServices.init();\r\n\r\n  const [selectedGenre, setSelectedGenre] = useState(null);\r\n  const [loadFullListGenrefromCache, setLoadFullListGenrefromCache] = useState(false);\r\n\r\n  const [selectedPlatform, setSelectedPlatform] = useState(null);\r\n  const [loadFullListPlatformfromCache, setLoadFullListPlatformfromCache] = useState(false);\r\n\r\n  const [loadResearchfromCache, setLoadResearchfromCache] = useState(false);\r\n\r\n  const [centerToLastClickedBookmark, setCenterToLastClickedBookmark] = useState(false);\r\n  const [centerToLastClickedWatchedMedia, setCenterToLastClickedWatchedMedia] = useState(false);\r\n\r\n  const [splashscreenVisible, setSplashscreenVisible] = useState(true);\r\n  const [homePageFailed, setHomePageFailed] = useState(false);\r\n\r\n  const [modalListCategoriesVisible, setModalListCategoriesVisible] = useState(false);\r\n\r\n  const [mediaId, setMediaId] = useState('');\r\n\r\n  const showComponent = (componentId) => {\r\n    setRouterPreviousComponentId(routerActiveComponentId);\r\n    setRouterActiveComponentId(componentId);\r\n  }\r\n\r\n  const showMediasFullListofGenre = (genre) => {\r\n    setSelectedGenre(genre);\r\n    setLoadFullListGenrefromCache(false);\r\n    showComponent(routerIds.mediasListGenrePage);\r\n  }\r\n\r\n  const showMediasFullListofPlatform = (platform) => {\r\n    setSelectedPlatform(platform);\r\n    setLoadFullListPlatformfromCache(false);\r\n    showComponent(routerIds.mediasListPlatformPage);\r\n  }\r\n\r\n  const showMediaFullPresentation = (mediaId) => {\r\n    setMediaId(mediaId);\r\n    showComponent(routerIds.mediaPresentationPage);\r\n  }\r\n\r\n  const goToPreviousComponent = () => {\r\n    showComponent(routerPreviousComponentId);\r\n  }\r\n\r\n  const onMediaFullPresentationClose = () => {\r\n    setLoadFullListGenrefromCache(true);\r\n    setLoadFullListPlatformfromCache(true);\r\n    setCenterToLastClickedBookmark(true);\r\n    setCenterToLastClickedWatchedMedia(true);\r\n    setLoadResearchfromCache(true);\r\n    goToPreviousComponent();\r\n  }\r\n\r\n  const routerIds = {\r\n    homePage: 'homePage',\r\n    mediasListGenrePage: 'mediasOfGenre',\r\n    mediasListPlatformPage: 'mediasOfPlatform',\r\n    mediaPresentationPage: 'mediaPresentationPage',\r\n    watchedMediasListPage: 'watchedMediasListPage',\r\n    bookmarkedMediasListPage: 'bookmarkedMediasListPage',\r\n    researchPage: 'researchPage',\r\n    torrentLinkPage: 'torrentLinkPage'\r\n  }\r\n\r\n  const router = {\r\n    components: [\r\n      {\r\n        id: routerIds.homePage,\r\n        render: (<HomePage\r\n          onReady={() => { setSplashscreenVisible(false) }}\r\n          onFail={() => { setHomePageFailed(true)}}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.mediasListGenrePage,\r\n        render: (<MediaListGenrePage\r\n          genre={selectedGenre}\r\n          loadFromCache={loadFullListGenrefromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n          containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediasListPlatformPage,\r\n        render: (<MediaListPlatformPage\r\n          platform={selectedPlatform}\r\n          loadFromCache={loadFullListPlatformfromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n          containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediaPresentationPage,\r\n        containerStyle: { height: '100%'},\r\n        render: (<MediaPresentationPage\r\n          mediaId={mediaId}\r\n          onCloseClick={() => onMediaFullPresentationClose()} />)\r\n      },\r\n      {\r\n        id: routerIds.watchedMediasListPage,\r\n        render: (<WatchedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedWatchedMedia}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.bookmarkedMediasListPage,\r\n        render: (<BookmarkedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedBookmark}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.researchPage,\r\n        render: (<ResearchPage loadFromCache={loadResearchfromCache}  onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.torrentLinkPage,\r\n        render: (<TorrentLinkPage />)\r\n      }\r\n    ]\r\n  };\r\n  const [routerActiveComponentId, setRouterActiveComponentId] = useState(routerIds.homePage);\r\n  const [routerPreviousComponentId, setRouterPreviousComponentId] = useState(routerIds.homePage);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <SplashScreen visible={splashscreenVisible} showErrorMessage={homePageFailed}/>\r\n      <ModalCategories\r\n        visible={modalListCategoriesVisible}\r\n        onGenreClick={(genre) => { setModalListCategoriesVisible(false); showMediasFullListofGenre(genre) }}\r\n        onPlatformClick={(platform) => { setModalListCategoriesVisible(false); showMediasFullListofPlatform(platform) }}\r\n        onCloseClick={() => setModalListCategoriesVisible(false)}\r\n      />\r\n      <NavBar\r\n        onSearchClick={() => { setLoadResearchfromCache(false); setRouterActiveComponentId(routerIds.researchPage) }}\r\n        onHomeClick={() => setRouterActiveComponentId(routerIds.homePage)}\r\n        onGenreMenuClick={() => setModalListCategoriesVisible(true)}\r\n        onWatchedMediasClick={() => { setCenterToLastClickedWatchedMedia(false); setRouterActiveComponentId(routerIds.watchedMediasListPage) }}\r\n        onBookmarkedMediasClick={() => { setCenterToLastClickedBookmark(false); setRouterActiveComponentId(routerIds.bookmarkedMediasListPage) }}\r\n        onTorrentLinkClick={()=>{ setRouterActiveComponentId(routerIds.torrentLinkPage) }}\r\n        onAppModeSwitch={()=> {setRouterActiveComponentId(routerIds.homePage)}}/>\r\n      <div className=\"app-content\">\r\n        <Router components={router.components} activeComponentId={routerActiveComponentId} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}
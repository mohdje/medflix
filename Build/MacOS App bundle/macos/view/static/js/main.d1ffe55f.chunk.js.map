{"version":3,"sources":["assets/logo.png","services/appMode.js","components/navbar/NavBar.js","helpers/customStyles.js","components/common/CircularProgressBar.js","components/SplashScreen.js","components/modal/ModalWindow.js","services/api/baseApiService.js","services/api/searchMediaApiService.js","services/api/bookmarkApiService.js","services/api/watchedMediaApiService.js","services/api/torrentApiService.js","services/api/subtitlesApiService.js","services/api/appInfoApiService.js","services/AppServices.js","components/modal/ModalCategories.js","components/common/Rating.js","components/media/presentation/MediaLitePresentation.js","services/cacheService.js","components/media/list/MediasCategorieList.js","pages/MediaListGenrePage.js","pages/MediaListPlatformPage.js","components/modal/ModalMediaTrailer.js","components/common/TitleAndContent.js","components/common/ProgressionBar.js","components/common/text/SecondaryInfo.js","components/common/text/Paragraph.js","components/common/buttons/BaseButton.js","helpers/customHooks.js","components/common/DropDown.js","helpers/timeFormatHelper.js","components/modal/ModalEpisodeSelector.js","components/modal/ModalVersionAndQualitySelector.js","components/video/videoPlayerComponents/VideoSubtitles.js","components/video/videoPlayerComponents/Slider.js","components/video/videoPlayerComponents/TimeController.js","components/video/videoPlayerComponents/LeftControlsGroup.js","components/video/videoPlayerComponents/Options.js","components/video/videoPlayerComponents/RightControlsGroup.js","components/video/videoPlayerComponents/Controls.js","components/video/VideoPlayer.js","components/video/VideoPlayerWindow.js","components/common/buttons/TrailerButton.js","components/common/text/Title.js","components/common/buttons/CopyButton.js","components/common/buttons/PlayWithVLCButton.js","components/common/buttons/BookmarkButton.js","components/common/buttons/PlayButton.js","components/media/list/MediasListLite.js","components/media/list/MediasListLiteWithTitle.js","pages/MediaPresentationPage.js","components/media/presentation/MediaPicturesPresentation.js","components/media/list/MediasOfTodayList.js","pages/HomePage.js","components/media/presentation/MediaIntermediatePresentation.js","components/media/list/MediasIntermediatePresentationList.js","pages/WatchedMediasPage.js","pages/BookmarkedMediasPage.js","components/common/TextInput.js","pages/ResearchPage.js","components/common/buttons/OpenButton.js","pages/TorrentLinkPage.js","components/Router.js","App.js","reportWebVitals.js","index.js"],"names":["AppMode","onAppModeChanged","callback","eventName","this","modeChangedEvent","Event","document","addEventListener","e","modes","label","urlKey","isActive","getActiveMode","find","mode","switchActiveMode","forEach","dispatchEvent","isSeriesMode","console","log","filter","NavBar","onSearchClick","onHomeClick","onGenreMenuClick","onWatchedMediasClick","onBookmarkedMediasClick","onTorrentLinkClick","onAppModeSwitch","useState","setModes","useEffect","navBarIconStyle","color","width","height","className","map","onClick","updatedModes","switchAppMode","alt","src","logo","style","fadeTransition","visible","speedTransition","zIndex","transitionStyle","visibility","opacity","transition","CircularProgressBar","position","size","text","positionStyle","setpositionStyle","displayedText","setDisplayedText","top","left","transform","textAlign","fontSize","fontWeigth","CircularProgress","SplashScreen","showErrorMessage","display","ModalWindow","content","onCloseClick","BaseApiService","_apiBaseUrl","relativePath","url","parameters","deserializeResult","onSuccess","onFail","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","result","response","JSON","parse","length","i","parameter","name","value","open","send","setRequestHeader","obj","stringify","Boolean","SearchMediaApiService","buildUrl","buildSearchUrl","getRequest","genreId","page","platformId","id","mediaId","serieId","seasonNumber","BookmarkApiService","buildBookmarkUrl","mediaDto","putRequest","deleteRequest","WatchedMediaApiService","buildWatchedMediaUrl","episodeNumber","mediaDetails","currentTime","duration","sourceUrl","watchedMedia","totalDuration","URL","torrentUrl","window","atob","searchParams","get","TorrentApiService","fileName","base64Url","btoa","buildTorrentUrl","title","year","imdbid","encodeURIComponent","streamUrl","SubtitlesApiService","imdbCode","buildSubtitlesUrl","subtitlesSourceUrl","AppInfoApiService","isDesktopApp","self","buildAppInfoUrl","isDesktopApplication","AppServices","init","searchMediaService","bookmarkApiService","watchedMediaApiService","torrentApiService","subtitlesApiService","appInfoApiService","ModalCategories","onGenreClick","onPlatformClick","loading","setLoading","listGenres","setListGenres","listPlatforms","setListPlatforms","loadCategories","getMediaGenres","genres","getMediaPlatforms","platforms","genre","Rating","rating","fontWeight","margin","backgroundColor","borderRadius","alignItems","justifyContent","MediaLitePresentation","maxLength","media","onMediaClick","hoverEffect","dataLoaded","setDataLoaded","coverImageUrl","setTimeout","backgroundImage","toString","replace","substring","CacheService","cacheCollection","setCache","data","cache","getCache","push","c","clearCache","MediasCategorieList","categorie","searchOperation","loadFromCache","medias","setMedias","pageIndex","setPageIndex","searchInProgress","setSearchInProgress","plusButtonVisible","setPlusButtonVisible","performSearch","mediasOfCategories","concat","getCacheId","categorieId","cacheMedias","scrollToMedia","mediaElementId","elemId","elem","getElementById","scrollIntoView","block","inline","handleMediaClick","elementId","index","MediasListGenrePage","getMediasByGenre","platform","getMediasByPlatform","ModalMediaTrailer","youtubeTrailerUrl","trailerStyle","border","boxShadow","TitleAndContent","containerStyle","justify","marginRight","ProgressionBar","progressionStyle","SecondaryInfo","center","Paragraph","BaseButton","centered","rounded","showRippleEffect","setShowRippleEffect","handleClick","computeClass","useOnClickOutside","ref","handler","listener","event","current","contains","target","removeEventListener","DropDown","values","onValueChanged","textAlignement","showList","setShowList","selectedValue","setSelectedValue","dropDownValues","setDropDownValues","dropdownRef","useRef","shouldUpdateDropDownValues","nbDifferentValues","v","listStyle","bottom","maxHeight","overflowY","buttonContentStyle","buttonContent","listElementStyle","padding","cursor","onMouseOver","onMouseOut","ToTimeFormat","totalMinutes","totalHours","hours","Math","trunc","minutes","timeFormat","ModalEpisodeSelector","numberOfSeasons","onEpisodeSelected","selectedSeasonNumber","setSelectedSeasonNumber","episodes","setEpisodes","isLoading","setIsLoading","noEpisodeMessageVisible","setNoEpisodeMessageVisible","episodeListRef","seasonNumberList","getEpisodes","scrollTop","loadEpisodesProgress","episodesOfSeason","getWatchedEpisodes","watchedEpisodes","newTab","watchedEpisode","episode","ep","progression","selectedIndex","Episode","imagePath","runTime","overview","ModalVersionAndQualitySelector","torrents","onQualityClick","setContent","torrentsByLanguage","Set","t","languageVersion","language","sortedTorrents","torrent","sort","t1","t2","quality","toLowerCase","trim","quality1","quality2","computeQualityLabel","torrentIndex","findIndex","downloadUrl","qualityIndex","slice","versionsAndQualitiesTable","l","j","selected","selectedTorrent","VideoSubtitles","videoCurrentTime","urlSource","subtitlesAdjustTime","currentSubtitles","setCurrentSubtitles","subtitles","setSubtitles","textItalic","setTextItalic","responseText","subtitle","s","startTime","endTime","includes","applySubtitles","fontStyle","Slider","progressColor","cursorColor","tooltip","onCursorMoved","onCursorEndMove","onMouseOverSlider","cursorPosition","setCursorPosition","showToolTip","setShowToolTip","positionToPercentage","XPosition","railBoundings","right","moveCursor","percentage","clientX","parentElement","getBoundingClientRect","endMove","onSliderClick","onMouseMove","onMouseMoveOverSlider","onMouseLeave","onMouseDown","TimeController","videoDuration","onTimeChanged","videoCurrentTimeLabel","setVideoCurrentTimeLabel","videoRemainingTimeLabel","setVideoRemainingTimeLabel","currentPourcentageTimeVideo","setcurrentPourcentageTimeVideo","setTooltip","totalTime","setTotalTime","getTimeLabel","floor","seconds","hourValues","time","newTime","changeTimeVideo","setTimeControllerTooltip","LeftControlsGroup","videoIsPlaying","onPlayClick","onPauseClick","onVolumeChanged","onPlayBackwardClick","onPlayForwardClick","showPlayButton","setShowPlayButton","VolumeController","newVolume","currentVolumeRef","previousVolume","setPreviousVolume","changeVolume","onKeyboardPress","keyCode","VideoOptions","options","icon","onOptionChanged","menuOptions","setMenuOptions","menuSubOptions","setMenuSubOptions","showMenu","setShowMenu","showSubMenu","setShowSubMenu","selectedOption","setSelectedOption","selectedSubOption","setSelectedSubOption","updateMenuOptions","oldSelectedOption","op","oldSelectedSubOption","subOptions","subOp","updatedOptions","updatedOption","updatedSubOptions","updatedsubOption","option","onMouseEnter","getOptionDisplay","subOption","getSubOptionDisplay","VideoOptionsButton","hide","RightControlsGroup","subtitlesOptions","qualityOptions","onSubtitleSizeChange","onSubtitlesChange","onAdjustSubtitleTimeChange","onVideoQualityChange","isFullScreen","onFullScreenStateChanged","videoInFullscreen","setVideoInFullscreen","changeFullScreenState","fullscreen","AdjustSubtitleTimeOption","menuRef","type","step","onChange","valueAsNumber","Controls","videoSubtitlesOptions","videoQualitiesOptions","pixelsToAdd","newUrlSource","VideoPlayer","onWatchedTimeUpdate","videoTime","videoRef","videoPlayerContainerRef","watchedTimeUpdateTriggeredRef","setIsFullScreen","setCurrentTime","errorMessage","setErrorMessage","checkDownloadStateRef","videoDownloadState","setVideoDownloadState","videoSource","setVideoSource","videoIsLoading","setVideoIsLoading","setVideoIsPlaying","subtitlesUrl","setSubtitlesUrl","subtitlesSize","setSubtitlesSize","setSubtitlesAdjustTime","showVideoControls","setShowVideoControls","lastTimeMouseMovedRef","checkMovieDownloadState","getDownloadState","decodeURIComponent","error","message","changeVideoSource","autoplay","paused","load","changeVideoTime","displayControls","Date","now","waitingTime","playVideo","play","pauseVideo","pause","videoErrorHandler","attributes","onVideoReady","onVideoPaused","onVideoWaiting","onTimeUpdated","round","onFullScreenChange","fullscreenElement","videoQuality","volume","changeVideoVolume","fullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","VideoPlayerWindow","sources","goToTime","setSubtitlesOptions","setVideoQualitiesOptions","resumeMessageVisible","setResumeMessageVisible","setVideoTime","setIsDesktopApp","showLoadingModal","setShowLoadingModal","source","buildStreamUrl","resumeToTime","synopsis","mediaType","optionsJSON","chrome","webview","onDesktopVideoPlayerClosed","postMessage","webkit","__dispatchMessageCallback","messageHandlers","source1","source2","qualities","o","startsWith","buildVideoQualitiesOptions","newSubtitlesOptions","sub","subtitlesOption","subtitlesSourceUrls","getSubtitlesApiUrl","buildSubtitlesOptions","ResumeMessage","resumeTime","onNoClick","onYesClick","VideoPlayerContainer","TrailerButton","marginLeft","Title","CopyButton","PlayWithVLCButton","videoUrl","showModal","setShowModal","isWebApp","setIsWebApp","ModalForVlc","container","background","ModalContent","launchPlay","vertical","inputLinkUrlRef","outline","textOverflow","readOnly","flexDirection","select","execCommand","getSelection","removeAllRanges","AddBookmarkButton","BookmarkButton","insideIcon","RemoveBookmarkButton","PlayButton","MediasListLite","alignLeft","listRef","hideBackArrow","setHideBackArrow","hideForwardArrow","setHideForwardArrow","onscroll","showHideNavArrows","isElementVisible","boundings","elemBoundings","getVisibleRange","indexes","listBoundings","children","max","min","visibleRange","goToIndex","minIndex","count","behavior","navToLeft","maxIndex","navToRight","MediasListLiteWithTitle","listTitle","MediaFullPresentation","setMediaDetails","mediaProgression","setMediaProgression","torrentSearching","setTorrentSearching","updateSelectedTorrent","setUpdateSelectedTorrent","selectedVersionSources","setSelectedVersionSources","videoSourceUrl","setVideoSourceUrl","mediaSubtitlesSources","setMediaSubtitlesSources","loadingSubtitles","setLoadingSubtitles","showMediaPlayer","setShowMediaPlayer","showMediaTrailer","setShowMediaTrailer","addBookmarkButtonVisible","setAddBookmarkButtonVisible","similarMedias","setSimilarMedias","navHistory","selectedEpisode","loadPage","imdbId","getAvailableSubtitles","searchTorrents","getElementsByClassName","torrentToSelect","changeSelectedTorrent","getMediaDetails","details","isMediaBookmarked","getMediaProgression","getSimilarMedias","recommandedMedias","refreshedTorrentsList","getWatchedMedia","remainingTime","availableSubtitles","onBackClick","lastMediaId","pop","saveWacthedMedia","backgroundImageUrl","logoImageUrl","join","MediaProgression","EpisodeSelector","seasonsCount","addBookmarkedMedia","deleteBookmarkedMedia","AvailableItems","itemsList","emptyMessage","QualitySelector","onQualityChanged","director","cast","onRecommandedMediaClick","availableItems","modalQualitySelectorVisible","setModalQualitySelectorVisible","selectedVersionAndQuality","setSelectedVersionAndQuality","modalVisible","setModalVisible","selectedEpisodeNumber","setSelectedEpisodeNumber","handleEpisodeSelected","MediaPicturesPresentation","MediasOfToday","mediaIndexVisible","setMediaIndexVisible","carouselPlay","setCarouselPlay","changeMedia","clearTimeout","MediaPicturesCarousel","nbMedias","onNavElementClick","navElements","HomePage","onReady","mediaListref","cacheIdRef","mediaLists","setMediaLists","todayTrendingTitle","addMedias","insertAtBeginning","unshift","newArray","loadContent","appMode","buildCacheId","getMediasOfToday","getPopularMedias","toLocaleLowerCase","getRecommandedMedias","getPopularNetflixMedias","getPopularDisneyPlusMedias","getPopularAmazonPrimeMedias","getPopularAppleTvMedias","list","mediasList","MediaIntermediatePresentation","MediasIntermediatePresentationList","centerToMedia","loadingProgressVisible","m","watchedMediaLastClicked","WatchedMediasPage","centerToLastClickedMedia","loadingVisible","setLoadingVisible","getWatchedMedias","mediaLabel","lastClickedMedia","BookmarkedMediasPage","mediasBookmarks","setMediasBookmarks","getBookmarkedMedias","bookmarkedMedias","TextInput","placeHolder","onTextChanged","large","setText","TextField","placeholder","cacheResearch","searchValue","save","clean","ResearchPage","setSearchValue","searchValueRef","useReducer","state","mediasLength","searchResultLabel","searchResultLabelDispatch","searchMedias","OpenButton","TorrentLinkPage","torrentLink","setTorrentLink","torrentLinkRef","openingTorrentLink","setOpeningTorrentLink","openingHistory","setOpeningHistory","torrentHistory","setTorrentHistory","torrentFiles","setTorrentFiles","selectedFile","setSelectedFile","loadingMessage","setLoadingMessage","showMoviePlayer","setShowMoviePlayer","movieSources","setMovieSources","getTorrentHistory","files","changeTorrentLink","torrentFilesAreLoadingOrLoaded","getTorrentFiles","link","TorrentHistory","TorrentFilesList","onPlayFileClick","file","FilesList","contentType","onFileClick","selectedFileIndex","setSelectedFileIndex","textStyle","selectedTextStyle","titleStyle","getComponent","FileFromTorrent","isSelected","TorrentLink","onMouseHover","enter","playButtons","fullDateTime","today","yesterday","setDate","getDate","date","day","toDateString","toLocaleString","month","toLocaleTimeString","navigator","hour","minute","hour12","formateDate","lastOpenedDateTime","Router","components","activeComponentId","activeComponent","setActiveComponent","component","render","App","selectedGenre","setSelectedGenre","loadFullListGenrefromCache","setLoadFullListGenrefromCache","selectedPlatform","setSelectedPlatform","loadFullListPlatformfromCache","setLoadFullListPlatformfromCache","loadResearchfromCache","setLoadResearchfromCache","centerToLastClickedBookmark","setCenterToLastClickedBookmark","centerToLastClickedWatchedMedia","setCenterToLastClickedWatchedMedia","splashscreenVisible","setSplashscreenVisible","homePageFailed","setHomePageFailed","modalListCategoriesVisible","setModalListCategoriesVisible","setMediaId","showComponent","componentId","setRouterPreviousComponentId","routerActiveComponentId","setRouterActiveComponentId","showMediaFullPresentation","routerIds","mediaPresentationPage","onMediaFullPresentationClose","routerPreviousComponentId","homePage","mediasListGenrePage","mediasListPlatformPage","watchedMediasListPage","bookmarkedMediasListPage","researchPage","torrentLinkPage","router","MediaListGenrePage","MediaListPlatformPage","MediaPresentationPage","showMediasFullListofGenre","showMediasFullListofPlatform","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.d1ffe55f.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARQAAAAlCAMAAAC0/+b3AAACdlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qNy/4AAAA0XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFxgaGxwdHh8gIiMkJSYnKCkqKywtLzAxMzQ3ODk7PT9AQUJDRUZHSElLTE1OT1JUVVZXWFlaW1xdXl9gYWJjZGVmaGlqa2xvcHFydHV2eHl6fH1+f4CCg4SGh4iKi42Oj5OUlZeYmZucnZ+hoqOkpaanqKmqq6ytrq+xsrO1uLm6u72+v8HCw8TFx8jJysvMzc7P0NHT1NbZ2tzd3uDh4uPk5ebn6Orr7O3u7/Dx8vP09fb3+Pn6+/z9/jaJQ6QAAAABYktHRNF50f8KAAAE2ElEQVRo3u2a6WNMVxTAz0xEQhASYxe7WCKaVBCEStrQVitVVbWFLqqIXWOX2lpp7TShpUVXiSpKS1AqsiCduf9RM/ecO+++ee+Nl8w1uR96vrx3z7nb+82ce8599wH8LzaSu4PLh/bWRWjNpOLGHY6yUWo1vELIif1ri4Y6D+6yP4AtXJfr/rEyyrlk2JjexQG2drZYVqIFYAlDmWbX9Yt+brvUjsq3maPclpplmU23SrMdpu6yP4BGrlviHkoe9pJnYxr0CG27ww1vo77egPKHFRwkXOYmfzZEBaVZfnrFow0UmEND5JvVA2pRvdCAwkqtrVejZRtEDYWxs0O1gQLlaKzxycq4c6g96ZGg+C3/8VFPcXpdVUBhdbO1gdLtBloPy8qPUHevF0hQWHV7c9O4C6h/DZRAYYFPdIECObhWsiJDNeYJqgrBBIWFTXopar+WVNMLHWW6VC0pk2Ts1DdLzv8bGqAkfHIu+1MOBdai+Z/+QpFYjZq9EAblcbpp3anjysZB0Qb9lFUPxQhzW9uHaijxF9F+xkuKTyncJIdDYee8RjNPBeo+VpALpR6iARrTNYECgykuF1O2FsB1dQJYoLAFlrh1ub2KDNFTQgOc9mgCRSQl+DN1u4mlTWAD5WEf0abn37g45mASFzWWzTTCFF2gwJeUQcU33x/A+6pEM5Tv8XIsLJSX8cI7JVFD8Z7CDiu0gZJyM7T6v4p3T0aDGcrYGrzOQO1LFLR5epNWGz0UGIFRMJCmCxQYh2GxKas3egX7AMKgpBVSlpcSVCb/haW3+I98himAAl9gl+9rAwXWYZ0rlXj91muBIhyGb5N2UorCl8VipgRKPmXR+kBpd15eTx9JuUcIiu8O/r+b9+fjMUDdD2a8MKzBgNJ/gIO4iFFJj3mntXL8cd3fc4ECQ+okKHPABgqQA/3escMVvHuD47wgpaKOaflIF/OkfKm3mzR/ZEygwFxjRNM+yIAiHGjDerwe4fYVTBWUY1g1SyMo8FVoq+VzgEIO1NTEL3d78H3SU2VQdmHVSTpBSSUHCpjfsUlQhANJ28W4KqYMyh6sOlknKPNpvO3gCEU4UFA+54pOTB0USt+yNYIyvB6rXe0cAQo5UNDHuttBOVjhIG5Ssmp5JBlK5bP7ez5QEn5hlL9BBCiGAxWAHZRopCfG+QavBUpiG+UpsIkedjVEhCIcaA8oh1KEXX0D2kCZjD8T+yG4J4TX5zlCQQf6s6t6KN9hVyu0geK7hXUahvFErrZusBMUKAiWpoJyKLTFDAzUBspRcp5F/HXkz4z9GO8EJehAO0E5lOTf7F4dtCWU94jJKb7v2GZ6TAuU7jXXuyiH4j1OU8jVBUo6ReMHfY0A489xggIFE0A1lCR6zWU6GmhTKAm/0oxm8uI+LFzr4gRFFjVQMi7RDOqH6AJFvB7dR+5Bi+5nMYLifeFgQGQ/RaAJlCk0pRsizOYF5DePLYIS4fBK3tKkCuWsxWvK7xnJuyVJaiGUMuuwL7cKio/2F/6JIVUpau73aTGUCMecVVIrh2NT6xFSC6HYSGNroHjEsr/Z0HXALyxYpTeWUB4Ugi5QFojTc3nkTPycgC2LIZTj/UAXKCMa6EhjjEm9nA6PR8cKSqX9l1ltAiVBxMKwT9riztL/5z/xk1pSPhmQ0AAAAABJRU5ErkJggg==\"","const AppMode = {\r\n    onAppModeChanged(callback) {\r\n        const eventName = 'appModeChanged';\r\n        if (!this.modeChangedEvent)\r\n            this.modeChangedEvent = new Event(eventName);\r\n        document.addEventListener(eventName, (e) => {\r\n            if (callback)\r\n                callback()\r\n        }, false);\r\n    },\r\n    modeChangedEvent: null,\r\n    modes: [\r\n        {\r\n            label: 'Films',\r\n            urlKey: 'movies',\r\n            isActive: true\r\n        },\r\n        {\r\n            label: 'Series',\r\n            urlKey: 'series',\r\n            isActive: false\r\n        }\r\n    ],\r\n    getActiveMode() {\r\n        return this.modes.find(mode => mode.isActive);\r\n    },\r\n    switchActiveMode() {\r\n        this.modes.forEach(mode => {\r\n            mode.isActive = !mode.isActive;\r\n        });\r\n        if (this.modeChangedEvent)\r\n            document.dispatchEvent(this.modeChangedEvent);\r\n    },\r\n    isSeriesMode() {\r\n        console.log(\"this.modes.filter(mode => mode.isActive)\", this.modes.filter(mode => mode.isActive))\r\n        return this.modes.filter(mode => mode.isActive)[0].urlKey === \"series\"\r\n    }\r\n}\r\n\r\nexport default AppMode;","import \"../../style/nav-bar.css\";\r\nimport logo from '../../assets/logo.png';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from '../../services/appMode';\r\n\r\nfunction NavBar({ onSearchClick, onHomeClick, onGenreMenuClick, onWatchedMediasClick, onBookmarkedMediasClick, onTorrentLinkClick, onAppModeSwitch }) {\r\n\r\n    const [modes, setModes] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        setModes(AppMode.modes);\r\n    },[]);\r\n\r\n    const switchAppMode = () => {\r\n        AppMode.switchActiveMode();\r\n        const updatedModes = [...AppMode.modes];\r\n        setModes(updatedModes);\r\n        onAppModeSwitch(AppMode.getActiveMode());\r\n    }\r\n\r\n    const navBarIconStyle = {\r\n        color: 'white',\r\n        width: '30px',\r\n        height: '30px'\r\n    }\r\n\r\n    return (\r\n        <div className=\"nav-bar-container\">\r\n            <div className=\"nav-bar-left\">\r\n                {modes.map(mode => <div key={mode.label} className={\"mode \" + (mode.isActive ? 'active' : '')} onClick={()=> {if(!mode.isActive)switchAppMode()}}>{mode.label}</div>)}\r\n            </div>\r\n            <img className=\"nav-bar-logo\" alt=\"\" src={logo} />\r\n            <div className=\"nav-bar-right\">\r\n                <div className=\"nav-bar-btn\" onClick={() => onHomeClick()}>\r\n                    <HomeIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onWatchedMediasClick()}>\r\n                    <VisibilityIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onBookmarkedMediasClick()}>\r\n                    <BookmarkIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onGenreMenuClick()}>\r\n                    <ViewModuleIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onSearchClick()}>\r\n                    <SearchIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onTorrentLinkClick()}>\r\n                    <LinkIcon style={navBarIconStyle} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default NavBar;","function fadeTransition(visible, speedTransition, zIndex){\r\n    var speed = speedTransition ? speedTransition + 's' : '0.5s';\r\n\r\n    const transitionStyle = {\r\n            visibility: visible ? 'visible' : 'hidden',\r\n            opacity: visible ? '1' : '0',\r\n            transition: \"all \" + speed\r\n    }\r\n\r\n    if(zIndex)\r\n        transitionStyle.zIndex = visible ? zIndex : '-1';\r\n    \r\n\r\n    return transitionStyle;\r\n}\r\n\r\nexport default fadeTransition;","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useEffect, useState } from 'react';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nfunction CircularProgressBar({ position, color, size, visible, text }) {\r\n\r\n    const [positionStyle, setpositionStyle] = useState({});\r\n    const [displayedText, setDisplayedText] = useState();\r\n\r\n    const textStyle = {\r\n        color: 'white',\r\n        fontSize: '20px',\r\n        fontWeigth: 'bold'\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (position === 'center') {\r\n            setpositionStyle({\r\n                position: 'fixed',\r\n                top: '50%',\r\n                left: '50%',\r\n                transform: 'translate(-50%, -50%)',\r\n                textAlign: 'center'\r\n            })\r\n        }\r\n    }, [position]);\r\n\r\n    useEffect(() => {\r\n        setDisplayedText(text);\r\n    }, [text]);\r\n\r\n    return (\r\n        <div style={fadeTransition(visible)}>\r\n            <div style={positionStyle}>\r\n                <div style={textStyle}>{displayedText}</div>\r\n                <CircularProgress style={{ color: color, width: size, height: 'auto' }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CircularProgressBar;","\r\nimport \"../style/splashscreen.css\";\r\nimport logo from '../assets/logo.png';\r\nimport CircularProgressBar from \"./common/CircularProgressBar\";\r\n\r\nfunction SplashScreen({visible, showErrorMessage}) {\r\n    \r\n    return (\r\n        <div className={\"splash-screen-container\" + (visible ? '' : ' hidden')}>\r\n           <img alt=\"\" src={logo} />\r\n           <CircularProgressBar color='white' size='40px' visible={!showErrorMessage}/>\r\n           <div className=\"error-message\" style={{display: showErrorMessage ? '' : 'none'}}>\r\n                The application failed to load, try to relaunch it\r\n           </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SplashScreen;","import \"../../style/modal-window.css\";\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nfunction ModalWindow({ visible, content, onCloseClick }) {\r\n    return (\r\n        <div style={fadeTransition(visible)} className={\"modal-window-container\" + (visible ? \" visible\" : \"\")}>\r\n            <div className=\"modal-window-content\">\r\n                <div className=\"modal-window-close-btn\" style={{ display: onCloseClick ? '' : \"none\" }} onClick={() => onCloseClick()}>\r\n                    <ClearIcon className=\"close-cross\" />\r\n                </div>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ModalWindow;","class BaseApiService {\r\n    constructor() {\r\n        this._apiBaseUrl = 'http://localhost:5000/';\r\n      }\r\n    \r\n    buildUrl(relativePath){\r\n        return this._apiBaseUrl + relativePath;\r\n    }\r\n\r\n    getRequest(url, parameters, deserializeResult, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    var result = deserializeResult && this.response ? JSON.parse(this.response) : this.response;\r\n                    if (onSuccess)\r\n                        onSuccess(result);\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n\r\n        if (parameters && parameters.length > 0) {\r\n            url += '?';\r\n            for (let i = 0; i < parameters.length; i++) {\r\n                const parameter = parameters[i];\r\n                url += parameter.name + '=' + parameter.value;\r\n                if (i !== parameters.length - 1)\r\n                    url += '&'\r\n            }\r\n        }\r\n\r\n        xhttp.open(\"GET\", url, true);\r\n        xhttp.send();\r\n    }\r\n\r\n    postRequest(url, parameters, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    if (onSuccess)\r\n                        onSuccess();\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n        xhttp.open(\"POST\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n        xhttp.send(parameters);\r\n    }\r\n\r\n    putRequest(url, obj, onSuccess){\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"PUT\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4 && this.status === 200 && Boolean(onSuccess))\r\n                onSuccess();\r\n        }\r\n    }\r\n\r\n    deleteRequest(url, obj, onSuccess) {\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"DELETE\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4)\r\n                if (this.status === 200)\r\n                    onSuccess();\r\n        }\r\n    }\r\n  }\r\n\r\nexport default BaseApiService;","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SearchMediaApiService extends BaseApiService {\r\n    buildSearchUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/' + url);\r\n    }\r\n\r\n    getMediaGenres(onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genres');\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaPlatforms(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('platforms');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMediasByGenre(genreId, onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genre/' + genreId);\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasOfToday(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('mediasoftoday')\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByGenre(genreId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('genre/' + genreId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByPlatform(platformId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('platform/' + platformId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaDetails(id, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('details/' + id);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    searchMedias(text, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('search');\r\n        var parameters = [\r\n            {\r\n                name: 't',\r\n                value: text\r\n            }\r\n        ]\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularNetflixMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('netflix');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularDisneyPlusMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('disneyplus');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAmazonPrimeMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('amazonprime');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAppleTvMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('appletv');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('popular');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getRecommandedMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('recommandations');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getSimilarMedias(mediaId, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('similar/'+ mediaId);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getEpisodes(serieId, seasonNumber, onSuccess, onFail){\r\n        var url = this.buildSearchUrl('episodes/'+ serieId + '/' + seasonNumber);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n}\r\n\r\nexport default SearchMediaApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass BookmarkApiService extends BaseApiService {\r\n    buildBookmarkUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/bookmarks/' + (url ? url : ''));\r\n    }\r\n\r\n    getBookmarkedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildBookmarkUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    addBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.putRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    deleteBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.deleteRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    isMediaBookmarked(mediaId, onSuccess, onFail) {\r\n        var parameters = [\r\n            {\r\n                name: 'id',\r\n                value: mediaId\r\n            }\r\n        ];\r\n        this.getRequest(this.buildBookmarkUrl('exists'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default BookmarkApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass WatchedMediaApiService extends BaseApiService {\r\n    buildWatchedMediaUrl(url) {\r\n        return this.buildUrl(AppMode.getActiveMode().urlKey + '/watchedmedia/' + (url ? url : ''));\r\n    }\r\n\r\n    getWatchedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedMedia(mediaId, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        const parameters = [\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ]\r\n\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedEpisodes(mediaId, seasonNumber, onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId + '/' + seasonNumber), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    saveWacthedMedia(mediaDetails, currentTime, duration, seasonNumber, episodeNumber, sourceUrl) {\r\n        const watchedMedia = { ...mediaDetails };\r\n        watchedMedia.currentTime = currentTime ? currentTime : 0;\r\n        watchedMedia.totalDuration = duration ? duration : 0;\r\n\r\n        const url = new URL(sourceUrl);\r\n        watchedMedia.torrentUrl = window.atob(url.searchParams.get('base64Url'));\r\n\r\n        if (AppMode.getActiveMode().urlKey === 'series') {\r\n            watchedMedia.seasonNumber = seasonNumber;\r\n            watchedMedia.episodeNumber = episodeNumber;\r\n        }\r\n\r\n        this.putRequest(this.buildWatchedMediaUrl(), watchedMedia);\r\n    }\r\n}\r\n\r\nexport default WatchedMediaApiService;\r\n","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass TorrentApiService extends BaseApiService {\r\n    buildTorrentUrl(url) {\r\n        return this.buildUrl('torrent/' + (url ? url : ''));\r\n    }\r\n\r\n    buildStreamUrl(url, fileName, seasonNumber, episodeNumber) {\r\n        const base64Url = window.btoa(url);\r\n\r\n        if (fileName)\r\n            return this.buildTorrentUrl('stream/file?base64Url=' + base64Url + '&fileName=' + fileName);\r\n        else if (AppMode.getActiveMode().urlKey === \"series\")\r\n            return this.buildTorrentUrl('stream/series?base64Url=' + base64Url + '&seasonNumber=' + seasonNumber + '&episodeNumber=' + episodeNumber);\r\n        else\r\n            return this.buildTorrentUrl('stream/movies?base64Url=' + base64Url);\r\n    }\r\n\r\n    searchTorrents(mediaId, title, year, imdbid, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildTorrentUrl(AppMode.getActiveMode().urlKey);\r\n        var parameters = [\r\n            {\r\n                name: 'mediaId',\r\n                value: mediaId\r\n            },\r\n            {\r\n                name: 'title',\r\n                value: encodeURIComponent(title)\r\n            },\r\n            {\r\n                name: 'year',\r\n                value: year\r\n            },\r\n            {\r\n                name: 'season',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episode',\r\n                value: episodeNumber\r\n            },\r\n            {\r\n                name: 'imdbid',\r\n                value: imdbid\r\n            }\r\n        ];\r\n\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getDownloadState(streamUrl, onSuccess, onFail) {\r\n        const url = new URL(streamUrl);\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'base64TorrentUrl',\r\n                value: url.searchParams.get('base64Url')\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('streamdownloadstate'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentFiles(torrentUrl, onSuccess, onFail) {\r\n        const base64Url = window.btoa(torrentUrl);\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'base64torrentUrl',\r\n                value: base64Url\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('files'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentHistory(onSuccess, onFail) {\r\n        this.getRequest(this.buildTorrentUrl('history'), null, true, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default TorrentApiService;\r\n","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SubtitlesApiService extends BaseApiService {\r\n    buildSubtitlesUrl(url){\r\n        return this.buildUrl('subtitles/' + (url ? url : ''));\r\n    }\r\n\r\n    getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildSubtitlesUrl(AppMode.getActiveMode().urlKey);\r\n        var parameters = [\r\n            {\r\n                name: 'imdbCode',\r\n                value: imdbCode\r\n            },\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n    \r\n    getSubtitlesApiUrl(subtitlesSourceUrl) {\r\n        return this.buildSubtitlesUrl(\"?sourceUrl=\" + subtitlesSourceUrl);\r\n    }\r\n}\r\n\r\nexport default SubtitlesApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\n\r\nclass AppInfoApiService extends BaseApiService {\r\n    buildAppInfoUrl(url){\r\n        return this.buildUrl('application/' + (url ? url : ''));\r\n    }\r\n\r\n    isDesktopApplication(onSuccess, onFail) {\r\n        if (this.isDesktopApp) onSuccess(this.isDesktopApp);\r\n        else {\r\n            const self = this;\r\n            this.getRequest(this.buildAppInfoUrl('platform'), null, true, (response) => {\r\n                self.isDesktopApp = response.isDesktopApplication;\r\n                onSuccess(response.isDesktopApplication);\r\n            }, onFail);\r\n        }\r\n    }\r\n\r\n    playWithVlc(streamUrl, onSuccess, onFail){\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'streamUrl',\r\n                value: encodeURIComponent(streamUrl)\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildAppInfoUrl('startvlc'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default AppInfoApiService;\r\n  ","import SearchMediaApiService from './api/searchMediaApiService';\r\nimport BookmarkApiService from './api/bookmarkApiService';\r\nimport WatchedMediaApiService from './api/watchedMediaApiService';\r\nimport TorrentApiService from './api/torrentApiService';\r\nimport SubtitlesApiService from './api/subtitlesApiService';\r\nimport AppInfoApiService from './api/appInfoApiService';\r\n\r\nconst AppServices = {\r\n    init(){\r\n        this.searchMediaService = new SearchMediaApiService();\r\n        this.bookmarkApiService = new BookmarkApiService();\r\n        this.watchedMediaApiService = new WatchedMediaApiService();\r\n        this.torrentApiService = new TorrentApiService();\r\n        this.subtitlesApiService = new SubtitlesApiService();\r\n        this.appInfoApiService = new AppInfoApiService();\r\n    }\r\n}\r\n\r\nexport default AppServices;","import \"../../style/list-categories-view.css\";\r\nimport ModalWindow from \"./ModalWindow\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport AppMode from \"../../services/appMode\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction ModalCategories({ visible, onCloseClick, onGenreClick, onPlatformClick }) {\r\n    const [loading, setLoading] = useState(true);\r\n    const [listGenres, setListGenres] = useState([]);\r\n    const [listPlatforms, setListPlatforms] = useState([]);\r\n\r\n    const loadCategories = () => {\r\n        setListGenres([]);\r\n        AppServices.searchMediaService.getMediaGenres(\r\n            (genres) => {\r\n                if (genres && genres.length > 0) {\r\n                    setListGenres(genres);\r\n                }\r\n            }\r\n        );\r\n\r\n        AppServices.searchMediaService.getMediaPlatforms(\r\n            (platforms) => {\r\n                if (platforms && platforms.length > 0) {\r\n                    setListPlatforms(platforms);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    useEffect(() => {\r\n        loadCategories();\r\n        AppMode.onAppModeChanged(() => {\r\n            loadCategories();\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setLoading(!listGenres || listGenres.length === 0 || !listPlatforms || listPlatforms.length === 0);\r\n    }, [listGenres, listPlatforms]);\r\n\r\n    const listGenresView = () => {\r\n        return (\r\n            <div className=\"list-categories-view-container\">\r\n                <CircularProgressBar color={'white'} size={'60px'} position={'center'} visible={loading} />\r\n                <h3 className=\"categorie-title\">Genres</h3>\r\n                <div className=\"list-categories\">\r\n                    {listGenres.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onGenreClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n                <h3 className=\"categorie-title\">Platforms</h3>\r\n                <div className=\"list-categories\">\r\n                    {listPlatforms.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onPlatformClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={listGenresView()} onCloseClick={() => onCloseClick()} />\r\n    )\r\n}\r\n\r\nexport default ModalCategories;","function Rating({ rating, size }) {\r\n\r\n    const style = {\r\n        color: \"white\",\r\n        fontSize: size === \"small\" ? \"15px\" : \"20px\",\r\n        fontWeight: \"bold\",\r\n        margin: \"0 auto\",\r\n        backgroundColor: \"#52525263\",\r\n        borderRadius: \"50%\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: size === \"small\" ? \"35px\" : \"50px\",\r\n        width: size === \"small\" ? \"35px\" : \"50px\",\r\n    };\r\n\r\n    return (\r\n        <div style={style}>{rating}</div>\r\n    );\r\n}\r\n\r\nexport default Rating;","\r\nimport \"../../../style/media-lite-presentation.css\";\r\n\r\nimport Rating from \"../../common/Rating\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport fadeTransition from \"../../../helpers/customStyles.js\";\r\n\r\nfunction MediaLitePresentation({ media, onMediaClick, hoverEffect }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setDataLoaded(media?.coverImageUrl);\r\n    }, [media]);\r\n\r\n    if (!Boolean(media?.coverImageUrl))\r\n        return null;\r\n\r\n    const truncate = (text, maxLength) => {\r\n        if (text && text.length > maxLength)\r\n            return text.substring(0, maxLength) + '...';\r\n        else return text;\r\n    }\r\n\r\n    const handleClick = () => {\r\n        setTimeout(() => {\r\n            if (onMediaClick)\r\n                onMediaClick(media?.id);\r\n        }, 150);\r\n    }\r\n\r\n    const formatMediaRating = (rating) => {\r\n        return rating ? rating.toString().replace(',', '.') : '';\r\n    };\r\n\r\n    return (\r\n        <div style={fadeTransition(dataLoaded)}>\r\n            <div className={\"media-lite-presentation \" + (hoverEffect ? \"hover-effect\" : \"\")} onClick={() => handleClick()}>\r\n                <div className={\"media-lite-presentation-img\"} style={{ backgroundImage: 'url(' + media.coverImageUrl + ')' }}>\r\n                    <div className=\"rating\">\r\n                        <Rating rating={formatMediaRating(media.rating)} size=\"small\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"infos\">\r\n                    <div className=\"title\">{truncate(media.title, 25)}</div>\r\n                    <div className=\"year\">{media.year}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediaLitePresentation;","const CacheService = {\r\n    cacheCollection: [],\r\n    setCache(id, data){\r\n        let cache = this.getCache(id);\r\n        if(!cache){\r\n            this.cacheCollection.push({\r\n                id: id,\r\n                data: data\r\n            }); \r\n        }\r\n        else\r\n            cache.data = data;\r\n    },\r\n    getCache(id){\r\n        return this.cacheCollection.find(c => c.id === id);\r\n    },\r\n    clearCache(){\r\n        this.cacheCollection = [];\r\n    }\r\n}\r\n\r\nexport default CacheService;","import \"../../../style/media-lite-presentation.css\";\r\nimport \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport CacheService from \"../../../services/cacheService\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction MediasCategorieList({ categorie, searchOperation, loadFromCache, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [pageIndex, setPageIndex] = useState(0);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n    const [plusButtonVisible, setPlusButtonVisible] = useState(false);\r\n    \r\n    const addIconStyle = {\r\n        width: '60px',\r\n        height: '60px',\r\n        color: 'white',\r\n        margin: 'auto'\r\n    };\r\n\r\n    const performSearch = () => {\r\n        setSearchInProgress(true);\r\n        setPlusButtonVisible(false); \r\n        searchOperation(categorie.id, pageIndex,\r\n            (mediasOfCategories) => {\r\n                setSearchInProgress(false);\r\n                if (mediasOfCategories && mediasOfCategories.length > 0) {\r\n                    setPlusButtonVisible(true);\r\n                    if (pageIndex === 1) setMedias(mediasOfCategories);\r\n                    else setMedias(medias.concat(mediasOfCategories));\r\n                }\r\n            },\r\n            () => setSearchInProgress(false));\r\n    }\r\n\r\n    const getCacheId = (categorieId) => \"categorie\" + categorieId;\r\n\r\n    useEffect(() => {\r\n        if (loadFromCache) {\r\n            const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n            setPageIndex(cacheMedias.data.pageIndex);\r\n        }\r\n        else {           \r\n            CacheService.setCache(getCacheId(categorie.id), null);\r\n            setMedias([]);\r\n            setPageIndex(1); \r\n            if(pageIndex === 1) performSearch(); \r\n        }\r\n    }, [categorie.id]);\r\n\r\n    useEffect(() => {\r\n        if (pageIndex > 0) {  \r\n            const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n            if (cacheMedias && cacheMedias.data) setMedias(cacheMedias.data.medias);\r\n            else performSearch();\r\n        }\r\n    }, [pageIndex]);\r\n\r\n    useEffect(() => {\r\n        if (medias && medias.length > 0) {\r\n            if (loadFromCache) {\r\n                const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n                if (cacheMedias && cacheMedias.data) {\r\n                    setPlusButtonVisible(true);\r\n                    scrollToMedia(cacheMedias.data.mediaElementId);\r\n                    CacheService.setCache(getCacheId(categorie.id), null);\r\n                }\r\n            }\r\n            else if(pageIndex === 1)  scrollToMedia(\"medialite0\");\r\n        }\r\n    }, [medias]);\r\n\r\n    const scrollToMedia = (elemId) => {\r\n        var elem = document.getElementById(elemId);\r\n        if (elem) {\r\n            elem.scrollIntoView({\r\n                block: \"nearest\",\r\n                inline: \"nearest\"\r\n            });\r\n        }\r\n    }\r\n \r\n    const handleMediaClick = (mediaId, elementId) => {\r\n        const data = {\r\n            medias: medias,\r\n            pageIndex: pageIndex,\r\n            mediaElementId: elementId\r\n        }\r\n        CacheService.setCache(getCacheId(categorie.id), data);\r\n        onMediaClick(mediaId);\r\n    }\r\n\r\n    return (\r\n        <div className=\"medias-list-by-categorie-container\">\r\n            <div className=\"medias-list-by-categorie-header\">\r\n                <div className=\"medias-list-categorie\">{categorie.name}</div>\r\n                <CircularProgressBar size={'30px'} color={'white'} visible={searchInProgress} />\r\n            </div>\r\n            <div className=\"medias-list-container full\">\r\n                <div className=\"medias-list wrap-content\">\r\n                    {medias.map((media, index) =>\r\n                    (<div id={\"medialite\" + index} key={index}>\r\n                        <MediaLitePresentation media={media} hoverEffect={true} onMediaClick={(mediaId) => handleMediaClick(mediaId, \"medialite\" + index)} />\r\n                    </div>))}\r\n                    <div className=\"medias-list-more\">\r\n                        <div className=\"round-btn grey\"\r\n                            style={{ visibility: plusButtonVisible ? 'visible' : 'hidden' }}\r\n                            onClick={() => { if (plusButtonVisible) {setPageIndex(pageIndex + 1);} }}>\r\n                            <AddIcon style={addIconStyle} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasCategorieList;","\r\n\r\nimport MediasCategorieList from \"../components/media/list/MediasCategorieList\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\n\r\nfunction MediasListGenrePage({ genre, loadFromCache, onMediaClick }) {\r\n\r\n    return (\r\n        <MediasCategorieList \r\n            categorie={genre} \r\n            loadFromCache={loadFromCache}\r\n            searchOperation={(genreId, pageIndex, onSuccess, onFail) => AppServices.searchMediaService.getMediasByGenre(genreId, pageIndex, onSuccess, onFail)}\r\n            onMediaClick={(mediaId) => onMediaClick(mediaId)}/>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","\r\n\r\nimport MediasCategorieList from \"../components/media/list/MediasCategorieList\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\n\r\nfunction MediasListGenrePage({ platform, loadFromCache, onMediaClick }) {\r\n\r\n    return (\r\n        <MediasCategorieList \r\n            categorie={platform} \r\n            loadFromCache={loadFromCache}\r\n            searchOperation={(platformId, pageIndex, onSuccess, onFail) => AppServices.searchMediaService.getMediasByPlatform(platformId, pageIndex, onSuccess, onFail)}\r\n            onMediaClick={(mediaId) => onMediaClick(mediaId)}/>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","import ModalWindow from \"./ModalWindow\";\r\n\r\nfunction ModalMediaTrailer({visible, youtubeTrailerUrl, onCloseClick}){\r\n\r\n\r\n    const trailerStyle = {      \r\n            width: '800px',\r\n            height: '500px',\r\n            margin: 'auto 0',\r\n            backgroundColor: 'black',\r\n            border: 'none',\r\n            boxShadow: '1px 1px 14px 7px #101010c9'       \r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <iframe style={trailerStyle} src={visible ? youtubeTrailerUrl : ''}></iframe>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalMediaTrailer; ","function TitleAndContent({ title, content, justify }) {\r\n    let justifyContent;\r\n    if (justify === 'left')\r\n        justifyContent = 'flex-start';\r\n    else\r\n        justifyContent = 'center';\r\n\r\n    const containerStyle = {\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        display: !!content ? 'flex' : 'none',\r\n        alignItems: 'center',\r\n        justifyContent: justifyContent,\r\n        margin: '10px 10px 10px 0'\r\n    }\r\n\r\n    const titleStyle = {\r\n        color: 'white',\r\n        marginRight: '15px'\r\n    }\r\n\r\n    const contentStyle = {\r\n        color: \"#959595\",\r\n        display: \"flex\"\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={titleStyle}>{title}</div>\r\n            <div style={contentStyle}>{content}</div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default TitleAndContent;","function ProgressionBar({value, width}){\r\n\r\n    const containerStyle = {\r\n        width: width,\r\n        backgroundColor: '#423737',\r\n        height: '5px',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    const progressionStyle = {\r\n        width: value + '%',\r\n        backgroundColor: '#e91919',\r\n        height: '100%',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={progressionStyle}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProgressionBar;","\r\n\r\nfunction SecondaryInfo({text, center}){\r\n    const style = {\r\n        fontSize: \"18px\",\r\n        fontWeight: \"500\",\r\n        color: \"#959595\",\r\n        textAlign: center ? \"center\" : \"left\",\r\n        margin: '10px 0'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default SecondaryInfo;","function Paragraph({text, visible}){\r\n\r\n    if(visible === false)\r\n        return null;\r\n        \r\n    const style = {\r\n        fontSize: '17px',\r\n        fontWeight: '500',\r\n        color: 'white'\r\n    }\r\n\r\n    return(\r\n        <p style={style}>{text}</p>\r\n    )\r\n}\r\n\r\nexport default Paragraph;","import \"../../../style/button.css\";\r\nimport { useState } from 'react';\r\n\r\nfunction BaseButton({ color, content, centered, rounded, width, onClick }) {\r\n\r\n    const [showRippleEffect, setShowRippleEffect] = useState(false);\r\n\r\n    const handleClick = () => {\r\n        setShowRippleEffect(true)\r\n        setTimeout(() => {\r\n            setShowRippleEffect(false);\r\n            onClick();\r\n        }, 300);\r\n    };\r\n\r\n    const computeClass = () => {\r\n        let className = \"standard-button\";\r\n        if (color) className += \" \" + color;\r\n        if (centered) className += \" center\";\r\n        if(rounded) className += \" rounded\";\r\n        return className;\r\n    }\r\n\r\n    const computeStyle = () => {\r\n        if(width){\r\n            return {\r\n                width: width\r\n            }\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n\r\n    return (\r\n        <div className={computeClass()} style={computeStyle()} onClick={() => handleClick()}>\r\n            <div className={\"ripple-effect \" + (showRippleEffect ? 'visible' : '')}></div>\r\n            {content}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BaseButton;","\r\nimport { useEffect } from 'react';\r\n// Hook\r\nfunction useOnClickOutside(ref, handler) {\r\n    useEffect(\r\n      () => {\r\n        const listener = event => {\r\n          if (!ref.current || ref.current.contains(event.target)) {\r\n            return;\r\n          }\r\n          handler(event);         \r\n        };\r\n  \r\n        document.addEventListener('mousedown', listener);\r\n        document.addEventListener('touchstart', listener);\r\n  \r\n        return () => {\r\n          document.removeEventListener('mousedown', listener);\r\n          document.removeEventListener('touchstart', listener);\r\n        };\r\n      },\r\n      [ref, handler]\r\n    );\r\n  }\r\n\r\n  export { useOnClickOutside };","import BaseButton from './buttons/BaseButton';\r\nimport ArrowDropDownOutlinedIcon from '@material-ui/icons/ArrowDropDownOutlined';\r\nimport { useOnClickOutside } from '../../helpers/customHooks';\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction DropDown({ values, width, onValueChanged, textAlignement }) {\r\n\r\n    const [showList, setShowList] = useState(false);\r\n    const [selectedValue, setSelectedValue] = useState('');\r\n    const [dropDownValues, setDropDownValues] = useState([]);\r\n    const dropdownRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (shouldUpdateDropDownValues(values)) {\r\n            setDropDownValues(values);\r\n            setSelectedValue(values[0]);\r\n        }\r\n    }, [values])\r\n\r\n    useOnClickOutside(dropdownRef, () => setShowList(false));\r\n\r\n    const shouldUpdateDropDownValues = (values) => {\r\n        if (dropDownValues.length !== values.length)\r\n            return true;\r\n\r\n        let nbDifferentValues = 0;\r\n        dropDownValues.forEach((v, i) => {\r\n            if (values[i] !== v)\r\n                nbDifferentValues += 1;\r\n        });\r\n\r\n        return nbDifferentValues > 0;\r\n    }\r\n\r\n    const containerStyle = {\r\n        position: 'relative'\r\n    }\r\n\r\n    const listStyle = {\r\n        display: showList ? 'block' : 'none',\r\n        position: 'absolute',\r\n        bottom: '0',\r\n        left: '50%',\r\n        transform: 'translate(-50%, 100%)',\r\n        borderRadius: '5px',\r\n        boxShadow: 'rgb(0 0 0 / 91%) 0px 19px 20px 8px, rgb(0 0 0) 0px 15px 20px 0px',\r\n        backgroundColor: '#141414',\r\n        color: 'white',\r\n        fontSize: '16px',\r\n        fontWeight: '500',\r\n        maxHeight: '100px',\r\n        width: width,\r\n        overflowY: 'scroll',\r\n        zIndex: '5',\r\n        textAlign: textAlignement ? textAlignement : 'left'\r\n    }\r\n\r\n    const buttonContentStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: width,\r\n    }\r\n\r\n    const buttonContent = (\r\n        <div style={buttonContentStyle}>\r\n            <div>{selectedValue}</div>\r\n            <ArrowDropDownOutlinedIcon />\r\n        </div>)\r\n\r\n    const listElementStyle = {\r\n        padding: '5px',\r\n        cursor: 'pointer'\r\n    }\r\n\r\n    const onElementMouseHover = (element) => {\r\n        element.style.backgroundColor = '#959595';\r\n    }\r\n\r\n    const onElementMouseOut = (element) => {\r\n        element.style.backgroundColor = '';\r\n    }\r\n\r\n    const OnElementClick = (index) => {\r\n        setShowList(false);\r\n        setSelectedValue(values[index]);\r\n        onValueChanged(index);\r\n    }\r\n\r\n    return (\r\n        <div ref={dropdownRef} style={containerStyle}>\r\n            <BaseButton color=\"red\" content={buttonContent} width={width} onClick={() => setShowList(!showList)} />\r\n            <div style={listStyle}>\r\n                {dropDownValues.map((v, i) => <div\r\n                    key={v}\r\n                    style={listElementStyle}\r\n                    onMouseOver={(e) => onElementMouseHover(e.target)}\r\n                    onMouseOut={(e) => onElementMouseOut(e.target)}\r\n                    onClick={() => OnElementClick(i)}>\r\n                    {v}\r\n                </div>)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropDown;","export function ToTimeFormat(totalMinutes) {\r\n    const totalHours = totalMinutes / 60;\r\n\r\n    const hours = Math.trunc(totalHours);\r\n    const minutes = Math.trunc((totalHours - hours) * 60);\r\n\r\n    let timeFormat = '';\r\n    if (hours > 0)\r\n        timeFormat += hours + 'h ';\r\n\r\n    timeFormat += (minutes < 10 ? \"0\" + minutes : minutes) + 'min';\r\n\r\n    return timeFormat;\r\n}","import ModalWindow from \"./ModalWindow\";\r\nimport TitleAndContent from \"../common/TitleAndContent\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport ProgressionBar from \"../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../common/text/SecondaryInfo\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport DropDown from \"../common/DropDown\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\nimport { ToTimeFormat } from \"../../helpers/timeFormatHelper\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\n\r\nimport \"../../style/modal-episode-selector.css\";\r\n\r\nfunction ModalEpisodeSelector({ visible, serieId, numberOfSeasons, onEpisodeSelected, onCloseClick }) {\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1);\r\n    const [episodes, setEpisodes] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [noEpisodeMessageVisible, setNoEpisodeMessageVisible] = useState(false);\r\n    const episodeListRef = useRef(null);\r\n\r\n    const seasonNumberList = [];\r\n    for (let i = 1; i <= numberOfSeasons; i++) {\r\n        seasonNumberList.push(\"Season \" + i);\r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <div className=\"modal-episode-selector-container\">\r\n                <div className=\"season-selector-container\">\r\n                    <DropDown values={seasonNumberList} width=\"120px\" textAlignement={\"center\"} onValueChanged={(selectedIndex) => setSelectedSeasonNumber(selectedIndex + 1)} />\r\n                </div>\r\n                <div ref={episodeListRef} className=\"episode-list-container\">\r\n                    <div className=\"loading-container\">\r\n                        <CircularProgressBar color={\"white\"} size={\"50px\"} visible={isLoading} />\r\n                        <Paragraph text={\"No episodes found\"} visible={noEpisodeMessageVisible} />\r\n                    </div>\r\n                    <div style={fadeTransition(episodes && episodes.length > 0)}>\r\n                        {episodes.map(episode =>\r\n                            <Episode\r\n                                key={episode.episodeNumber}\r\n                                episode={episode}\r\n                                onClick={() => onEpisodeSelected(selectedSeasonNumber, episode.episodeNumber)} />)}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (serieId) {\r\n            setEpisodes([]);\r\n            setIsLoading(true);\r\n            setNoEpisodeMessageVisible(false)\r\n            AppServices.searchMediaService.getEpisodes(serieId, selectedSeasonNumber,\r\n                (episodes) => {\r\n                    if (episodeListRef.current)\r\n                        episodeListRef.current.scrollTop = 0;\r\n\r\n                    setIsLoading(false);\r\n                    if (episodes && episodes.length > 0) {\r\n                        loadEpisodesProgress(episodes, selectedSeasonNumber);\r\n                    }\r\n                    else\r\n                        setNoEpisodeMessageVisible(true)\r\n                },\r\n                () => {\r\n                    setIsLoading(false);\r\n                    setNoEpisodeMessageVisible(true)\r\n                })\r\n        }\r\n    }, [serieId, selectedSeasonNumber]);\r\n\r\n    const loadEpisodesProgress = (episodesOfSeason, seasonNumber) => {\r\n        AppServices.watchedMediaApiService.getWatchedEpisodes(serieId, seasonNumber,\r\n            (watchedEpisodes) => {\r\n                const newTab = [...episodesOfSeason]\r\n                if (watchedEpisodes && watchedEpisodes.length > 0) {\r\n                    watchedEpisodes.forEach(watchedEpisode => {\r\n                        const episode = newTab.find(ep => ep.episodeNumber === watchedEpisode.episodeNumber);\r\n                        if (episode)\r\n                            episode.progression = watchedEpisode.currentTime / watchedEpisode.totalDuration;\r\n                    });\r\n                }\r\n                setEpisodes(newTab);\r\n            },\r\n            () => {\r\n                setEpisodes(episodesOfSeason);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalEpisodeSelector;\r\n\r\nfunction Episode({ episode, onClick }) {\r\n    return <div className=\"episode-container\" onClick={() => onClick()}>\r\n        <div style={{ margin: 'auto 0' }}>\r\n            <img src={episode.imagePath} />\r\n            {episode.progression ? <ProgressionBar value={episode.progression * 100} width=\"98%\" /> : null}\r\n        </div>\r\n\r\n        <div>\r\n            <TitleAndContent title={episode.episodeNumber + '.' + episode.name} content={ToTimeFormat(episode.runTime)} justify=\"left\" />\r\n            <SecondaryInfo text={episode.overview.substring(0, 300)} />\r\n        </div>\r\n    </div>\r\n}\r\n","import ModalWindow from \"./ModalWindow\";\r\nimport \"../../style/modal-version-quality-selector.css\";\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction ModalVersionAndQualitySelector({ visible, torrents, onQualityClick }) {\r\n    const [content, setContent] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (torrents?.length > 0) {\r\n            const torrentsByLanguage = [];\r\n            const languages = [...new Set(torrents.map(t => t.languageVersion))];\r\n\r\n            languages.forEach(language => {\r\n                const sortedTorrents = torrents.filter(torrent => torrent.languageVersion === language).sort((t1, t2) => {\r\n                    const [quality1, quality2] = [t1.quality.toLowerCase().trim(), t2.quality.toLowerCase().trim()]\r\n                    return quality1 === quality2 ? 0 : (quality1 < quality2 ? -1 : 1);\r\n                });\r\n\r\n                torrentsByLanguage.push({\r\n                    languageVersion: language,\r\n                    torrents: sortedTorrents\r\n                })\r\n            });\r\n\r\n            const computeQualityLabel = (torrent) => {\r\n                const torrentIndex = torrents.findIndex(t => t.downloadUrl === torrent.downloadUrl);\r\n                const qualityIndex = torrents.slice(0, torrentIndex).filter(t => t.quality === torrent.quality).length;\r\n                return qualityIndex > 0 ? `${torrent.quality} (${qualityIndex})` : torrent.quality;\r\n            }\r\n\r\n            const versionsAndQualitiesTable = (<div className=\"modal-version-quality-container\">\r\n                {torrentsByLanguage.map((l, i) => (\r\n                    <div className=\"version-column\" key={i}>\r\n                        <div className=\"version-name\">{l.languageVersion}</div>\r\n                        <div className=\"qualities-list\">{l.torrents.map((t, j) => (\r\n                            <div className={\"quality\" + (t.selected ? \" selected\" : \"\")} key={j} onClick={() => onQualityClick(t)}>{computeQualityLabel(t)}</div>\r\n                        ))}</div>\r\n                    </div>\r\n                ))}\r\n            </div>);\r\n\r\n            setContent(versionsAndQualitiesTable)\r\n        }\r\n\r\n    }, [torrents]);\r\n\r\n    const onCloseClick = () => {\r\n        const selectedTorrent = torrents.find(torrent => torrent.selected);\r\n        onQualityClick(selectedTorrent);\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content} onCloseClick={() => onCloseClick()} />\r\n    )\r\n}\r\n\r\nexport default ModalVersionAndQualitySelector;","import { useEffect, useState } from 'react';\r\n\r\nfunction VideoSubtitles({ videoCurrentTime, urlSource, size, subtitlesAdjustTime }) {\r\n    const [currentSubtitles, setCurrentSubtitles] = useState('');\r\n    const [subtitles, setSubtitles] = useState([]);\r\n    const [textItalic, setTextItalic] = useState(false);\r\n\r\n    const applySubtitles = (currentTime) => {\r\n        if (!subtitles || subtitles.length === 0)\r\n            return;\r\n        \r\n        var subtitle = subtitles.find(s =>\r\n            (s.startTime + subtitlesAdjustTime) <= currentTime && currentTime <= (s.endTime + subtitlesAdjustTime));\r\n\r\n        if (subtitle?.text) {\r\n            var text = subtitle.text;\r\n            setTextItalic(false);\r\n            if (text.includes('<i>') || text.includes('</i>')) {\r\n                setTextItalic(true);\r\n                text = text.replace('<i>', '').replace('</i>', '');\r\n            }\r\n            setCurrentSubtitles(text);\r\n        }\r\n        else setCurrentSubtitles('');\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (urlSource) {\r\n            var xhttp = new XMLHttpRequest();\r\n            xhttp.onreadystatechange = function () {\r\n                if (this.readyState == 4 && this.status == 200 && this.responseText) {\r\n                    setSubtitles(JSON.parse(this.response));\r\n                }\r\n            };\r\n            xhttp.open(\"GET\", urlSource, true);\r\n            xhttp.send();\r\n        }\r\n\r\n        return () => {\r\n            setSubtitles([]);\r\n            setCurrentSubtitles('');\r\n        }\r\n    }, [urlSource]);\r\n\r\n    useEffect(() => {\r\n        if(videoCurrentTime)\r\n            applySubtitles(videoCurrentTime);\r\n    }, [videoCurrentTime, subtitles, subtitlesAdjustTime]);\r\n\r\n    return (<div className=\"video-player-subtitles\"\r\n        style={{ fontSize: size + 'px', fontStyle: textItalic ? 'italic' : '' }}>\r\n        {currentSubtitles}\r\n    </div>);\r\n}\r\n\r\nexport default VideoSubtitles;","import { useEffect, useState } from 'react';\r\n\r\nfunction Slider({ value, width, height, progressColor, cursorColor, tooltip, onCursorMoved, onCursorEndMove, onMouseOverSlider }) {\r\n    const [cursorPosition, setCursorPosition] = useState(0);\r\n    const [showToolTip, setShowToolTip] = useState(false);\r\n\r\n    const positionToPercentage = (XPosition, railBoundings) => {\r\n        if (XPosition < railBoundings.left)\r\n            return 0;\r\n        else if (XPosition > railBoundings.right)\r\n            return 100;\r\n        else\r\n            return (XPosition - railBoundings.left) * 100 / (railBoundings.right - railBoundings.left);\r\n    }\r\n\r\n    const initiateCursorMove = () => {\r\n        document.addEventListener('mousemove', moveCursor);\r\n        document.addEventListener('mouseup', endMove);\r\n    }\r\n\r\n    const moveCursor = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorMoved) onCursorMoved(percentage);\r\n    }\r\n\r\n    const endMove = (event) => {\r\n        if (onCursorEndMove) {\r\n            var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n            onCursorEndMove(percentage);\r\n        }\r\n        document.removeEventListener('mouseup', endMove);\r\n        document.removeEventListener('mousemove', moveCursor);\r\n    }\r\n\r\n    const onSliderClick = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorEndMove) onCursorEndMove(percentage);\r\n    }\r\n\r\n    const onMouseMoveOverSlider = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        if (onMouseOverSlider) onMouseOverSlider(percentage);\r\n    }\r\n\r\n    const onMouseLeaveSlider = () => {\r\n        setShowToolTip(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setCursorPosition(value);\r\n    }, [value])\r\n\r\n    useEffect(() => {\r\n        if (tooltip) setShowToolTip(true);\r\n    }, [tooltip])\r\n\r\n    return (\r\n        <div className=\"video-player-slider-container\"\r\n            style={{ width: width, height: height }}\r\n            onClick={(event) => onSliderClick(event)}\r\n            onMouseMove={(event) => onMouseMoveOverSlider(event)}\r\n            onMouseLeave={() => onMouseLeaveSlider()}>\r\n            <div className=\"complete-part\" style={{ width: cursorPosition + \"%\", backgroundColor: progressColor }}></div>\r\n            <div className=\"remaining-part\" style={{ width: (100 - cursorPosition) + \"%\" }}></div>\r\n            <div className=\"cursor\" style={{ left: cursorPosition + '%', backgroundColor: cursorColor }} onMouseDown={() => initiateCursorMove()}></div>\r\n            <div className=\"tooltip\" style={{ left: tooltip?.position + '%', display: showToolTip ? '' : 'none' }}>{tooltip?.text}</div>\r\n        </div>)\r\n}\r\n\r\n\r\nexport default Slider;","\r\nimport VideoPlayerSlider from './Slider';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction TimeController({ videoDuration, videoCurrentTime, onTimeChanged }) {\r\n    const [videoCurrentTimeLabel, setVideoCurrentTimeLabel] = useState('00:00');\r\n    const [videoRemainingTimeLabel, setVideoRemainingTimeLabel] = useState('00:00');\r\n    const [currentPourcentageTimeVideo, setcurrentPourcentageTimeVideo] = useState(0);\r\n    const [tooltip, setTooltip] = useState(null);\r\n    const [totalTime, setTotalTime] = useState(0);\r\n\r\n    const getTimeLabel = (duration) => {\r\n        let hours = Math.floor(duration / 3600);\r\n        let minutes = Math.floor((duration - (hours * 3600)) / 60);\r\n        let seconds = Math.floor(duration - (hours * 3600) - (minutes * 60));\r\n\r\n        let hourValues = '';\r\n        if (hours > 0) {\r\n            hourValues = hours < 10 ? '0' + hours : hours;\r\n            hourValues += ':';\r\n        }\r\n        let minuteValue = minutes < 10 ? '0' + minutes : minutes;\r\n        let secondValue = seconds < 10 ? '0' + seconds : seconds;\r\n        return hourValues + minuteValue + ':' + secondValue;\r\n    };\r\n\r\n    const changeTimeVideo = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            var newTime = Math.floor((percentage * totalTime) / 100)\r\n            setVideoCurrentTimeLabel(getTimeLabel(newTime));\r\n            onTimeChanged(newTime);\r\n        }\r\n    }\r\n\r\n    const updateTimeVideo = (time) => {\r\n        setVideoCurrentTimeLabel(getTimeLabel(time));\r\n        setVideoRemainingTimeLabel(getTimeLabel(videoDuration - time));\r\n        \r\n        if(totalTime && totalTime > 0)\r\n            setcurrentPourcentageTimeVideo((time) * 100 / totalTime);\r\n        else\r\n            setcurrentPourcentageTimeVideo(0);\r\n    }\r\n\r\n    const setTimeControllerTooltip = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            setTooltip({\r\n                text: getTimeLabel(Math.floor((percentage * totalTime) / 100)),\r\n                position: percentage\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (videoCurrentTime)\r\n            updateTimeVideo(videoCurrentTime);\r\n    }, [videoCurrentTime]);\r\n\r\n    useEffect(() => {\r\n        if (videoDuration){\r\n            setTotalTime(videoDuration);\r\n            setVideoRemainingTimeLabel(getTimeLabel(videoDuration));\r\n        }\r\n        else\r\n            setTotalTime(0);\r\n            \r\n    }, [videoDuration]);\r\n\r\n    return (\r\n        <div className=\"video-time-controller-container\">\r\n            <div className=\"video-time-label\">{videoCurrentTimeLabel}</div>\r\n            <VideoPlayerSlider value={currentPourcentageTimeVideo}\r\n                onCursorEndMove={(percentage) => changeTimeVideo(percentage)}\r\n                onMouseOverSlider={(percentage) => setTimeControllerTooltip(percentage)}\r\n                tooltip={tooltip}\r\n                progressColor={'#ed0f0f'}\r\n                cursorColor={'#b59e9e'} />\r\n            <div className=\"video-time-label\">{videoRemainingTimeLabel}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TimeController;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport VolumeUp from '@material-ui/icons/VolumeUp';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\r\nimport Forward10Icon from '@material-ui/icons/Forward10';\r\nimport Replay10Icon from '@material-ui/icons/Replay10';\r\n\r\nimport Slider from './Slider';\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction LeftControlsGroup({ videoIsPlaying, onPlayClick, onPauseClick, onVolumeChanged, onPlayBackwardClick, onPlayForwardClick }) {\r\n    const [showPlayButton, setShowPlayButton] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setShowPlayButton(!videoIsPlaying);\r\n    }, [videoIsPlaying]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <PlayArrowIcon className=\"icon\" style={{ display: showPlayButton ? '' : 'none' }} onClick={() => onPlayClick()} />\r\n            <PauseIcon className=\"icon\" style={{ display: showPlayButton ? 'none' : '' }} onClick={() => onPauseClick()} />\r\n            <VolumeController onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)} />\r\n            <Replay10Icon className=\"icon\" onClick={() => onPlayBackwardClick()}/>\r\n            <Forward10Icon className=\"icon\" onClick={() => onPlayForwardClick()}/>\r\n        </div>)\r\n}\r\n\r\nexport default LeftControlsGroup;\r\n\r\n\r\nfunction VolumeController({ onVolumeChanged }) {\r\n    const defaultVolume = 70;\r\n    const currentVolumeRef = useRef(0);\r\n    const [previousVolume, setPreviousVolume] = useState(defaultVolume);\r\n\r\n    const changeVolume = (percentage) => {\r\n        currentVolumeRef.current = percentage;\r\n        onVolumeChanged(percentage / 100);\r\n    };\r\n\r\n    const muteVideo = () => {\r\n        setPreviousVolume(currentVolumeRef.current);\r\n        changeVolume(0);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        changeVolume(defaultVolume);\r\n      \r\n        const onKeyboardPress = (e) =>{\r\n            if(e.keyCode === 38 && currentVolumeRef.current < 100)\r\n                changeVolume(currentVolumeRef.current + 10);\r\n            else if(e.keyCode === 40 && currentVolumeRef.current > 0)\r\n                changeVolume(currentVolumeRef.current - 10);\r\n        }\r\n\r\n        document.addEventListener('keyup', onKeyboardPress, false);\r\n\r\n        return () => {\r\n            document.removeEventListener('keyup', onKeyboardPress);\r\n        }\r\n    },[]);\r\n\r\n    return (<div className=\"video-volume-controller\">\r\n        <VolumeUp className=\"icon\" onClick={() => { muteVideo() }} style={{ display: currentVolumeRef.current > 0 ? '' : 'none' }} />\r\n        <VolumeOffIcon className=\"icon\" onClick={() => changeVolume(previousVolume)} style={{ display: currentVolumeRef.current > 0 ? 'none' : '' }} />\r\n        <Slider\r\n            value={currentVolumeRef.current}\r\n            onCursorMoved={(percentage) => changeVolume(percentage)}\r\n            onCursorEndMove={(percentage) => changeVolume(percentage)}\r\n            width={'120px'}\r\n            height={'4px'} />\r\n    </div>)\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\n\r\nexport function VideoOptions({ options, icon, onOptionChanged }) {\r\n\r\n    const [menuOptions, setMenuOptions] = useState([]);\r\n    const [menuSubOptions, setMenuSubOptions] = useState([]);\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const [showSubMenu, setShowSubMenu] = useState(false);\r\n\r\n    const [selectedOption, setSelectedOption] = useState(null);\r\n    const [selectedSubOption, setSelectedSubOption] = useState(null);\r\n\r\n    const updateMenuOptions = (selectedOption, selectedSubOption) => {\r\n\r\n        const oldSelectedOption = menuOptions.find(op => op.selected);\r\n        const oldSelectedSubOption = selectedOption?.subOptions?.find(subOp => subOp.selected);\r\n\r\n        if (selectedOption?.subOptions && !selectedSubOption)\r\n            return;\r\n\r\n        if (selectedOption?.subOptions\r\n            && oldSelectedSubOption?.label === selectedSubOption?.label)\r\n            return;\r\n\r\n        if (!selectedOption?.subOptions && oldSelectedOption?.label === selectedOption.label)\r\n            return;\r\n\r\n        var updatedOptions = [];\r\n        menuOptions.forEach(op => {\r\n            var updatedOption = {\r\n                label: op.label,\r\n                selected: op.label === selectedOption.label,\r\n                data: op.data\r\n            };\r\n            var updatedSubOptions = [];\r\n            if (op.subOptions) {\r\n                op.subOptions.forEach(subOp => {\r\n                    var updatedsubOption =\r\n                    {\r\n                        label: subOp.label,\r\n                        data: subOp.data,\r\n                        selected: subOp.label === selectedSubOption?.label\r\n                    }\r\n                    updatedSubOptions.push(updatedsubOption);\r\n                })\r\n                updatedOption.subOptions = updatedSubOptions;\r\n            }\r\n            updatedOptions.push(updatedOption);\r\n        });\r\n\r\n        setMenuOptions(updatedOptions);\r\n\r\n        setShowMenu(false);\r\n        setShowSubMenu(false);\r\n\r\n        var option = updatedOptions.find(op => op.selected);\r\n        if (option.subOptions) onOptionChanged(option.subOptions.find(subOp => subOp.selected));\r\n        else onOptionChanged(option);\r\n    }\r\n\r\n    const getOptionDisplay = (option) => {\r\n        return  (<div key={option.label} className={\"option \" + (option.selected ? 'selected' : '')}\r\n            onClick={() => {if(!option.subOptions)setSelectedOption(option)}}\r\n            onMouseEnter={() => {if(option.subOptions){setSelectedOption(option);setMenuSubOptions(!option || !option.subOptions ? [] : option.subOptions)}}}\r\n            >\r\n            {option.label}\r\n        </div>)\r\n    }\r\n\r\n    const getSubOptionDisplay = (subOption) => {\r\n        return  (<div key={subOption.label} className={\"option \" + (subOption.selected ? 'selected' : '')}\r\n            onClick={() => setSelectedSubOption(subOption)}\r\n            >\r\n            {subOption.label}\r\n        </div>)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (options) {\r\n            setMenuOptions(options);\r\n        }\r\n    }, [options]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && !selectedOption.subOptions)\r\n            updateMenuOptions(selectedOption, null);\r\n    }, [selectedOption]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && selectedSubOption)\r\n            updateMenuOptions(selectedOption, selectedSubOption);\r\n    }, [selectedSubOption]);\r\n\r\n\r\n    return (\r\n        <div className=\"video-options-container\" onMouseLeave={() => {setShowMenu(false);setShowSubMenu(false)}}>\r\n            <div className={\"video-options-menu \" + (showMenu ? '' : 'hidden')}\r\n                onMouseEnter={() => {setShowSubMenu(true)}}>\r\n                {menuOptions.map(option => getOptionDisplay(option))}\r\n            </div>\r\n            <div className={\"video-options-menu suboptions \" + (showSubMenu && menuSubOptions && menuSubOptions.length > 0 ? '' : 'hidden')}\r\n                onMouseLeave={() => {setShowSubMenu(false)}}>\r\n                {menuSubOptions.map(subOption => getSubOptionDisplay(subOption))}\r\n            </div>\r\n            <VideoOptionsButton icon={icon} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function VideoOptionsButton({ icon, hide, onClick }) {\r\n    return (\r\n        <div className=\"video-options-btn\" style={{ display: hide ? 'none' : '' }} onClick={() => onClick()}>\r\n            {icon}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport SubtitlesIcon from '@material-ui/icons/Subtitles';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport SortByAlphaIcon from '@material-ui/icons/SortByAlpha';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\n\r\nimport { VideoOptions, VideoOptionsButton } from './Options';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useOnClickOutside } from '../../../helpers/customHooks';\r\n\r\nfunction RightControlsGroup({\r\n    subtitlesOptions,\r\n    qualityOptions,\r\n    onSubtitleSizeChange,\r\n    onSubtitlesChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged }) {\r\n\r\n    const [videoInFullscreen, setVideoInFullscreen] = useState(false);\r\n\r\n    const changeFullScreenState = (fullscreen) => {\r\n        onFullScreenStateChanged(fullscreen);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setVideoInFullscreen(isFullScreen);\r\n    }, [isFullScreen]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <div className=\"controls-sub-group\">\r\n                <VideoOptions options={subtitlesOptions}\r\n                    icon={<SubtitlesIcon className=\"icon\" />}\r\n                    onOptionChanged={(option) => onSubtitlesChange(option?.data?.url ? option.data.url : '')}\r\n                />\r\n                <AdjustSubtitleTimeOption onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon big\" />} onClick={() => onSubtitleSizeChange(2)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon small\" />} onClick={() => onSubtitleSizeChange(-2)} />\r\n            </div>\r\n\r\n            <VideoOptions options={qualityOptions}\r\n                icon={<SettingsIcon className=\"icon\" />}\r\n                onOptionChanged={(option) => onVideoQualityChange(option?.data?.url ? option.data.url : '')}\r\n            />\r\n\r\n            <VideoOptionsButton icon={<FullscreenIcon className=\"icon big\" />} hide={videoInFullscreen} onClick={() => changeFullScreenState(true)} />\r\n            <VideoOptionsButton icon={<FullscreenExitIcon className=\"icon big\" />} hide={!videoInFullscreen} onClick={() => changeFullScreenState(false)} />\r\n        </div>)\r\n}\r\nexport default RightControlsGroup;\r\n\r\nfunction AdjustSubtitleTimeOption({ onAdjustSubtitleTimeChange }) {\r\n\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const menuRef = useRef(null);\r\n\r\n    useOnClickOutside(menuRef, () => setShowMenu(false));\r\n\r\n    return (\r\n        <div ref={menuRef} className=\"adjust-subtitle-time-container\">\r\n            <div className={\"video-options-menu\" + (showMenu ? '' : ' hidden')}>\r\n                <div className=\"label\">Adj. Sub.</div>\r\n                <div className=\"adjust-subtitle-time-input-container\">\r\n                    <input type=\"number\" step=\"0.01\" onChange={(e) => onAdjustSubtitleTimeChange(e.target.valueAsNumber)} /><span className=\"label\"> s</span>\r\n                </div>\r\n            </div>\r\n            <VideoOptionsButton icon={<RestoreIcon className=\"icon\" />} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","import LeftControlsGroup from \"./LeftControlsGroup\";\r\nimport RightControlsGroup from \"./RightControlsGroup\";\r\n\r\nfunction Controls({\r\n    videoIsPlaying,\r\n    onPlayClick,\r\n    onPauseClick,\r\n    onVolumeChanged,\r\n    onPlayBackwardClick,\r\n    onPlayForwardClick,\r\n    videoSubtitlesOptions, \r\n    videoQualitiesOptions,\r\n    onSubtitlesChange,\r\n    onSubtitleSizeChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged }) {\r\n        \r\n    return (\r\n        <div className=\"video-player-controls\">\r\n            <LeftControlsGroup \r\n                videoIsPlaying = {videoIsPlaying}\r\n                onPlayClick={() => onPlayClick()} \r\n                onPauseClick={() => onPauseClick()} \r\n                onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)}\r\n                onPlayBackwardClick={()=> onPlayBackwardClick()}\r\n                onPlayForwardClick={()=> onPlayForwardClick()}/>\r\n            <RightControlsGroup\r\n                subtitlesOptions={videoSubtitlesOptions}\r\n                qualityOptions={videoQualitiesOptions}\r\n                onSubtitleSizeChange={(pixelsToAdd) => onSubtitleSizeChange(pixelsToAdd)}\r\n                onSubtitlesChange={(newUrlSource) => onSubtitlesChange(newUrlSource)}\r\n                onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)}\r\n                onVideoQualityChange={(newUrlSource) => onVideoQualityChange(newUrlSource)} \r\n                isFullScreen={isFullScreen}\r\n                onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Controls;","import \"../../style/video-player.css\";\r\n\r\nimport fadeTransition from \"../../helpers/customStyles\";\r\n\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\n\r\nimport VideoSubtitles from './videoPlayerComponents/VideoSubtitles';\r\nimport TimeController from './videoPlayerComponents/TimeController';\r\nimport Controls from './videoPlayerComponents/Controls';\r\n\r\nimport AppServices from \"../../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction VideoPlayer({ videoQualitiesOptions, videoSubtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n    const videoRef = useRef(null);\r\n    const videoPlayerContainerRef = useRef(null);\r\n    const watchedTimeUpdateTriggeredRef = useRef(0);\r\n\r\n    const [isFullScreen, setIsFullScreen] = useState(false);\r\n    const [currentTime, setCurrentTime] = useState(0);\r\n\r\n    const [errorMessage, setErrorMessage] = useState();\r\n\r\n    const checkDownloadStateRef = useRef(false);\r\n    const [videoDownloadState, setVideoDownloadState] = useState('Loading');\r\n\r\n    const [videoSource, setVideoSource] = useState('');\r\n    const [videoIsLoading, setVideoIsLoading] = useState(false);\r\n    const [videoIsPlaying, setVideoIsPlaying] = useState(false);\r\n\r\n    const [subtitlesUrl, setSubtitlesUrl] = useState('');\r\n    const [subtitlesSize, setSubtitlesSize] = useState(30);\r\n    const [subtitlesAdjustTime, setSubtitlesAdjustTime] = useState(0);\r\n\r\n    const [showVideoControls, setShowVideoControls] = useState(false);\r\n    const lastTimeMouseMovedRef = useRef(0);\r\n\r\n    const checkMovieDownloadState = (url) => {\r\n        if (checkDownloadStateRef.current && videoRef.current) {\r\n            AppServices.torrentApiService.getDownloadState(url, (response) => {\r\n                if (decodeURIComponent(url) === decodeURIComponent(videoRef.current?.src)) {\r\n                    if (response.error) {\r\n                        checkDownloadStateRef.current = false;\r\n                        setErrorMessage(response.message);\r\n                    }\r\n                    else {\r\n                        setVideoDownloadState(response.message ? response.message : 'Loading');\r\n                        setTimeout(() => {\r\n                            checkMovieDownloadState(url);\r\n                        }, 3000);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    const changeVideoSource = (url) => {\r\n        var currentTime = videoRef.current.currentTime;\r\n        setVideoSource(url);\r\n\r\n        videoRef.current.autoplay = !videoRef.current.paused;\r\n        videoRef.current.load();\r\n\r\n        videoRef.current.currentTime = currentTime;\r\n        setCurrentTime(currentTime);\r\n\r\n        setVideoIsLoading(true);\r\n        checkDownloadStateRef.current = true;\r\n        setErrorMessage('');\r\n        checkMovieDownloadState(url);\r\n    }\r\n\r\n    const changeVideoTime = (newTime) => {\r\n        videoRef.current.currentTime = newTime;\r\n    }\r\n\r\n    const displayControls = () => {\r\n        setShowVideoControls(true);\r\n        videoPlayerContainerRef.current.style.cursor = 'auto';\r\n        lastTimeMouseMovedRef.current = Date.now();\r\n        const waitingTime = 3000;\r\n        setTimeout(() => {\r\n            if (videoPlayerContainerRef?.current && Date.now() > lastTimeMouseMovedRef.current + waitingTime) {\r\n                setShowVideoControls(false);\r\n                videoPlayerContainerRef.current.style.cursor = 'none';\r\n            }\r\n        }, waitingTime + 500);\r\n    };\r\n\r\n    const onFullScreenStateChanged = (fullScreen) => {\r\n        if (fullScreen) {\r\n            if (!videoPlayerContainerRef.current) return;\r\n\r\n            if (videoPlayerContainerRef.current.requestFullscreen) videoPlayerContainerRef.current.requestFullscreen();\r\n            else if (videoPlayerContainerRef.current.mozRequestFullScreen) videoPlayerContainerRef.current.mozRequestFullScreen();\r\n            else if (videoPlayerContainerRef.current.webkitRequestFullscreen) videoPlayerContainerRef.current.webkitRequestFullscreen();\r\n            else if (videoPlayerContainerRef.current.msRequestFullscreen) videoPlayerContainerRef.current.msRequestFullscreen();\r\n        }\r\n        else\r\n            document.exitFullscreen();\r\n    }\r\n\r\n    const playVideo = () => {\r\n        if (videoRef?.current)\r\n            videoRef.current.play();\r\n    }\r\n\r\n    const pauseVideo = () => {\r\n        if (videoRef?.current)\r\n            videoRef.current.pause();\r\n    }\r\n\r\n    const changeVideoVolume = (newVolume) => {\r\n        if (videoRef?.current)\r\n            videoRef.current.volume = newVolume;\r\n    }\r\n\r\n    useEffect(() => {\r\n        videoPlayerContainerRef.current.addEventListener(\"mousemove\", displayControls);\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef?.current) videoPlayerContainerRef.current.removeEventListener(\"mousemove\", displayControls);\r\n        }\r\n    }, [videoPlayerContainerRef]);\r\n\r\n    useEffect(() => {\r\n        if (!Boolean(videoRef?.current))\r\n            return;\r\n\r\n        const videoErrorHandler = (e) => {\r\n            if (videoRef?.current?.attributes.src.value) {\r\n                setErrorMessage(errorMessage ? errorMessage : \"An error occured\");\r\n                setVideoIsLoading(false);\r\n            }\r\n        }\r\n        videoRef.current.addEventListener('error', videoErrorHandler, true);\r\n\r\n        const onVideoReady = () => {\r\n            checkDownloadStateRef.current = false;\r\n            setVideoDownloadState('');\r\n            setVideoIsLoading(false);\r\n        };\r\n        videoRef.current.addEventListener('canplay', onVideoReady, true);\r\n\r\n        const onVideoPlaying = () => {\r\n            onVideoReady();\r\n            setVideoIsPlaying(true);\r\n        };\r\n        videoRef.current.addEventListener('playing', onVideoPlaying, true);\r\n\r\n        const onVideoPaused = () => {\r\n            setVideoIsPlaying(false);\r\n        };\r\n        videoRef.current.addEventListener('pause', onVideoPaused, true);\r\n\r\n        const onVideoWaiting = () => {\r\n            setVideoIsLoading(true);\r\n        };\r\n        videoRef.current.addEventListener('waiting', onVideoWaiting, true);\r\n\r\n        const onTimeUpdated = (e) => {\r\n            if (videoRef.current?.currentTime) {\r\n                setCurrentTime(videoRef.current?.currentTime);\r\n\r\n                let currentTime = Math.round(videoRef.current?.currentTime);\r\n                if (currentTime - watchedTimeUpdateTriggeredRef.current > 10) {\r\n                    watchedTimeUpdateTriggeredRef.current = currentTime;\r\n                    onWatchedTimeUpdate(videoRef.current.currentTime, videoRef.current.duration, videoRef.current.src);\r\n                }\r\n            }\r\n        };\r\n        videoRef.current.addEventListener('timeupdate', onTimeUpdated);\r\n\r\n        return () => {\r\n            if (videoRef?.current) {\r\n                videoRef.current.removeEventListener(\"error\", videoErrorHandler);\r\n                videoRef.current.removeEventListener('playing', onVideoReady);\r\n                videoRef.current.removeEventListener('canplay', onVideoReady);\r\n                videoRef.current.removeEventListener('waiting', onVideoWaiting);\r\n                videoRef.current.removeEventListener('pause', onVideoPaused);\r\n                videoRef.current.removeEventListener('timeupdate', onTimeUpdated);\r\n            }\r\n        }\r\n    }, [videoRef]);\r\n\r\n    useEffect(() => {\r\n        const onFullScreenChange = (e) => {\r\n            setIsFullScreen(document.fullscreenElement);\r\n        };\r\n\r\n        const onKeyboardPress = (e) => {\r\n\r\n            if (!videoRef?.current) return;\r\n\r\n            displayControls();\r\n\r\n            if (e.keyCode === 32) {\r\n                if (videoRef.current.paused) playVideo();\r\n                else pauseVideo();\r\n            }\r\n            else if (e.keyCode === 37)\r\n                changeVideoTime(videoRef.current?.currentTime - 10);\r\n            else if (e.keyCode === 39)\r\n                changeVideoTime(videoRef.current?.currentTime + 10);\r\n        }\r\n        if (videoPlayerContainerRef.current) {\r\n            videoPlayerContainerRef.current.addEventListener('fullscreenchange', onFullScreenChange);\r\n            document.addEventListener('keyup', onKeyboardPress, false);\r\n        }\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef.current) {\r\n                document.removeEventListener('keyup', onKeyboardPress);\r\n                videoPlayerContainerRef.current.removeEventListener('fullscreenchange', onFullScreenChange);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (videoQualitiesOptions) {\r\n            const videoQuality = videoQualitiesOptions.find(op => op.selected);\r\n            if (videoQuality?.data?.url) changeVideoSource(videoQuality.data.url);\r\n        }\r\n    }, [videoQualitiesOptions]);\r\n\r\n    useEffect(() => {\r\n        if (videoTime > 0 && videoRef?.current)\r\n            videoRef.current.currentTime = videoTime;\r\n    }, [videoTime]);\r\n\r\n    return (\r\n        <div ref={videoPlayerContainerRef} className=\"video-player-content\" >\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={videoSource && videoIsLoading} text={videoDownloadState} />\r\n            <div className=\"video-player-error-message\" style={{ display: errorMessage ? '' : 'none' }}>{errorMessage}</div>\r\n            <video ref={videoRef} className=\"video-player\" src={videoSource}></video>\r\n            <div className=\"video-player-bottom\">\r\n                <VideoSubtitles\r\n                    videoCurrentTime={currentTime}\r\n                    urlSource={subtitlesUrl}\r\n                    size={subtitlesSize}\r\n                    subtitlesAdjustTime={subtitlesAdjustTime} />\r\n                <div className=\"video-player-controls-container\" style={fadeTransition(showVideoControls)}>\r\n                    <TimeController\r\n                        videoDuration={videoRef.current?.duration}\r\n                        videoCurrentTime={currentTime}\r\n                        onTimeChanged={(newTime) => changeVideoTime(newTime)} />\r\n                    <Controls\r\n                        videoIsPlaying={videoIsPlaying}\r\n                        onPlayClick={() => playVideo()}\r\n                        onPauseClick={() => pauseVideo()}\r\n                        onVolumeChanged={(newVolume) => changeVideoVolume(newVolume)}\r\n                        onPlayBackwardClick={() => changeVideoTime(currentTime - 10)}\r\n                        onPlayForwardClick={() => changeVideoTime(currentTime + 10)}\r\n                        videoSubtitlesOptions={videoSubtitlesOptions}\r\n                        videoQualitiesOptions={videoQualitiesOptions}\r\n                        onSubtitleSizeChange={(pixelsToAdd) => setSubtitlesSize(subtitlesSize + pixelsToAdd <= 60 && subtitlesSize + pixelsToAdd >= 20 ? subtitlesSize + pixelsToAdd : subtitlesSize)}\r\n                        onSubtitlesChange={(newUrlSource) => setSubtitlesUrl(newUrlSource ? newUrlSource : '')}\r\n                        onAdjustSubtitleTimeChange={(time) => setSubtitlesAdjustTime(time ? time : 0)}\r\n                        onVideoQualityChange={(newUrlSource) => changeVideoSource(newUrlSource)}\r\n                        isFullScreen={isFullScreen}\r\n                        onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default VideoPlayer;\r\n","\r\nimport \"../../style/video-player-window.css\";\r\nimport \"../../style/button.css\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport AppMode from \"../../services/appMode\";\r\nimport VideoPlayer from \"./VideoPlayer\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport BaseButton from \"../common/buttons/BaseButton\";\r\nimport ModalWindow from \"../modal/ModalWindow\";\r\nimport { ToTimeFormat } from \"../../helpers/timeFormatHelper\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function VideoPlayerWindow({ sources, subtitles, visible, onCloseClick, onWatchedTimeUpdate, goToTime, mediaDetails }) {\r\n    const [subtitlesOptions, setSubtitlesOptions] = useState([]);\r\n    const [videoQualitiesOptions, setVideoQualitiesOptions] = useState([]);\r\n    const [resumeMessageVisible, setResumeMessageVisible] = useState(true);\r\n    const [videoTime, setVideoTime] = useState(0);\r\n    const [isDesktopApp, setIsDesktopApp] = useState(false);\r\n    const [showLoadingModal, setShowLoadingModal] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        if (visible) {\r\n            AppServices.appInfoApiService.isDesktopApplication((isDesktopApp) => {\r\n                setIsDesktopApp(isDesktopApp);\r\n                if (isDesktopApp) {\r\n                    setShowLoadingModal(true);\r\n\r\n                    const options = {\r\n                        sources: sources.map(source => {\r\n                            return {\r\n                                quality: source.quality.trim(),\r\n                                selected: source.selected,\r\n                                url: AppServices.torrentApiService.buildStreamUrl(source.downloadUrl, source.fileName, source.seasonNumber, source.episodeNumber)\r\n                            }\r\n                        }),\r\n                        subtitles: subtitles ?? [],\r\n                        resumeToTime: goToTime,\r\n                        watchedMedia: mediaDetails && {\r\n                            title: mediaDetails.title,\r\n                            id: mediaDetails.id,\r\n                            coverImageUrl: mediaDetails.coverImageUrl,\r\n                            rating: mediaDetails.rating,\r\n                            totalDuration: mediaDetails.duration * 60,\r\n                            synopsis: mediaDetails.synopsis,\r\n                            year: mediaDetails.year,\r\n                            episodeNumber: sources[0].episodeNumber,\r\n                            seasonNumber: sources[0].seasonNumber,\r\n                            resumeToTime: mediaDetails.currentTime\r\n                        },\r\n                        mediaType: AppMode.getActiveMode().urlKey\r\n                    }\r\n\r\n                    var optionsJSON = JSON.stringify(options);\r\n\r\n                    if (window.chrome) {\r\n                        window.chrome.webview.addEventListener(\"message\", onDesktopVideoPlayerClosed);\r\n                        window.chrome.webview.postMessage(optionsJSON);\r\n                    }\r\n                    else if (window.webkit) {\r\n                        window.__dispatchMessageCallback = () => onDesktopVideoPlayerClosed();\r\n                        window.webkit.messageHandlers.webview.postMessage(optionsJSON);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n    }, [visible]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (isDesktopApp) {\r\n                if (window.chrome) {\r\n                    window.chrome.webview.removeEventListener(\"message\", onDesktopVideoPlayerClosed);\r\n                }\r\n                else if (window.webkit) {\r\n                    window.__dispatchMessageCallback = null;\r\n                }\r\n            }\r\n        }\r\n    }, [])\r\n\r\n    const onDesktopVideoPlayerClosed = () => {\r\n        setShowLoadingModal(false);\r\n        onCloseClick();//trigger close click to notify parent that video player is closed\r\n    }\r\n\r\n    const buildVideoQualitiesOptions = (sources) => {\r\n        var options = [];\r\n        if (!sources) return;\r\n\r\n        sources.sort((source1, source2) => {\r\n            const [quality1, quality2] = [source1.quality.toLowerCase().trim(), source2.quality.toLowerCase().trim()]\r\n            return quality1 === quality2 ? 0 : (quality1 < quality2 ? -1 : 1);\r\n        });\r\n\r\n        sources.forEach(source => {\r\n            var qualities = options.filter(o => o.label.startsWith(source.quality));\r\n\r\n            var option = {\r\n                label: qualities && qualities.length > 0 ? source.quality + ' (' + (qualities.length + 1) + ')' : source.quality,\r\n                selected: source.selected,\r\n                data: {\r\n                    url: AppServices.torrentApiService.buildStreamUrl(source.downloadUrl, source.fileName, source.seasonNumber, source.episodeNumber)\r\n                }\r\n            }\r\n            options.push(option);\r\n        });\r\n\r\n        if (options.filter(o => o.selected).length === 0)\r\n            options[0].selected = true;\r\n\r\n        setVideoQualitiesOptions(options);\r\n    }\r\n\r\n    const buildSubtitlesOptions = (subtitles) => {\r\n        var newSubtitlesOptions = [];\r\n        newSubtitlesOptions.push(\r\n            {\r\n                label: 'Off',\r\n                selected: true\r\n            });\r\n\r\n        if (subtitles && subtitles.length > 0) {\r\n            subtitles.forEach(sub => {\r\n                var subtitlesOption = {\r\n                    label: sub.language,\r\n                    selected: false,\r\n                    subOptions: []\r\n                };\r\n                sub.subtitlesSourceUrls.forEach((sourceUrl, index) => {\r\n                    subtitlesOption.subOptions.push({\r\n                        label: sub.language + ' ' + (index + 1),\r\n                        selected: false,\r\n                        data: {\r\n                            url: AppServices.subtitlesApiService.getSubtitlesApiUrl(sourceUrl)\r\n                        }\r\n                    });\r\n                })\r\n                newSubtitlesOptions.push(subtitlesOption);\r\n            });\r\n        }\r\n\r\n        setSubtitlesOptions(newSubtitlesOptions);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (visible && sources && sources.length > 0) {\r\n            buildVideoQualitiesOptions(sources);\r\n        }\r\n    }, [sources, visible]);\r\n\r\n    useEffect(() => {\r\n        if (visible && subtitles && subtitles.length > 0) {\r\n            buildSubtitlesOptions(subtitles);\r\n        }\r\n    }, [subtitles, visible]);\r\n\r\n    useEffect(() => {\r\n        if (goToTime > 0) {\r\n            setResumeMessageVisible(true);\r\n        }\r\n    }, [goToTime]);\r\n\r\n\r\n    const content = (\r\n        <div className=\"video-player-window-container\">\r\n            <ResumeMessage\r\n                visible={goToTime > 0 && resumeMessageVisible}\r\n                resumeTime={goToTime}\r\n                onNoClick={() => setResumeMessageVisible(false)}\r\n                onYesClick={() => { setVideoTime(goToTime); setResumeMessageVisible(false) }} />\r\n            <VideoPlayerContainer\r\n                visible={visible}\r\n                videoQualitiesOptions={videoQualitiesOptions}\r\n                subtitlesOptions={subtitlesOptions}\r\n                onWatchedTimeUpdate={(currentTime, duration, sourceUrl) => onWatchedTimeUpdate(currentTime, duration, sourceUrl)}\r\n                videoTime={videoTime} />\r\n        </div>\r\n    )\r\n    return (\r\n        isDesktopApp ?\r\n            <ModalWindow visible={showLoadingModal} />\r\n            : <ModalWindow visible={visible} content={content} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nfunction ResumeMessage({ visible, resumeTime, onYesClick, onNoClick }) {\r\n    const containerStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    }\r\n    if (visible) {\r\n        return (\r\n            <div style={containerStyle}>\r\n                <Paragraph text={\"Do you want to resume the video to \" + ToTimeFormat(resumeTime / 60) + \" ?\"} />\r\n                <BaseButton color=\"red\" content=\"Yes\" onClick={() => onYesClick()} />\r\n                <BaseButton color=\"grey\" content=\"No\" onClick={() => onNoClick()} />\r\n            </div>\r\n        );\r\n    }\r\n    else\r\n        return null;\r\n}\r\n\r\nfunction VideoPlayerContainer({ visible, videoQualitiesOptions, subtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n\r\n    if (visible) {\r\n        return <div className=\"video-player-container\">\r\n            <VideoPlayer\r\n                videoQualitiesOptions={videoQualitiesOptions}\r\n                videoSubtitlesOptions={subtitlesOptions}\r\n                onWatchedTimeUpdate={(currentTime, duration, sourceUrl) => onWatchedTimeUpdate(currentTime, duration, sourceUrl)}\r\n                videoTime={videoTime} />\r\n        </div>;\r\n    }\r\n    else\r\n        return null;\r\n}","import BaseButton from './BaseButton';\r\nimport TrailerIcon from '@material-ui/icons/LocalMovies';\r\n\r\nfunction TrailerButton({ visible, onClick }) {\r\n    if (visible) {\r\n\r\n        const content = (<div style={{display: 'flex', justifyContent: 'center'}}>\r\n            <TrailerIcon style={{ color: 'black' }}/>\r\n            <div style={{ marginLeft: '5px' }}>Trailer</div>\r\n        </div>);\r\n\r\n        return (\r\n            <BaseButton content={content} color={\"white\"} onClick={() => onClick()}/>\r\n        )\r\n    }\r\n    else return null;\r\n}\r\n\r\nexport default TrailerButton;","function Title({text}){\r\n\r\n    const style={\r\n        fontSize: '28px',\r\n        fontWeight: '500',\r\n        color: 'white',\r\n        textAlign: 'center'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default Title;","import BaseButton from './BaseButton';\r\nimport FilterNoneIcon from '@material-ui/icons/FilterNone';\r\n\r\nfunction CopyButton({ onClick }) {\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <FilterNoneIcon />\r\n        <div style={{ marginLeft: '5px' }}>Copy</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} color={\"grey\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default CopyButton;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nimport ModalWindow from \"../../modal/ModalWindow\";\r\nimport Title from '../text/Title';\r\nimport SecondaryInfo from '../text/SecondaryInfo';\r\nimport CopyButton from \"./CopyButton\";\r\nimport BaseButton from \"./BaseButton\";\r\n\r\nimport AppServices from \"../../../services/AppServices\";\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction PlayWithVLCButton({ onClick, videoUrl }) {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [isWebApp, setIsWebApp] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (isWebApp === null) {\r\n            AppServices.appInfoApiService.isDesktopApplication((isDesktopApp) => {\r\n                setIsWebApp(!isDesktopApp);\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n        <div style={{ marginLeft: '5px' }}>Play With VLC</div>\r\n    </div>);\r\n\r\n    const handleClick = () => {\r\n        setShowModal(true);\r\n        if (onClick) onClick();\r\n    }\r\n\r\n    if (isWebApp)\r\n        return (\r\n            <div>\r\n                <BaseButton content={content} color={\"orange\"} onClick={() => handleClick()} />\r\n                <ModalForVlc visible={showModal} videoUrl={videoUrl} onCloseClick={() => setShowModal(false)} />\r\n            </div>\r\n        );\r\n    else\r\n        return null;\r\n}\r\n\r\nexport default PlayWithVLCButton;\r\n\r\nfunction ModalForVlc({ visible, videoUrl, onCloseClick }) {\r\n\r\n    const containerStyle = {\r\n        backgroundColor: 'black',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: '300px',\r\n        width: '500px',\r\n        padding: '0 20px',\r\n        margin: 'auto',\r\n        color: 'white',\r\n        borderRadius: '10px',\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)'\r\n    };\r\n\r\n    const container = (\r\n        <div style={containerStyle}>\r\n            <ModalContent videoUrl={videoUrl} launchPlay={visible} onCloseClick={() => onCloseClick()} />\r\n        </div>\r\n    );\r\n\r\n    return <ModalWindow visible={visible} content={container} />;\r\n}\r\n\r\nfunction ModalContent({ videoUrl, onCloseClick }) {\r\n    const inputLinkUrlRef = useRef(null);\r\n\r\n    const onCopyClick = () => {\r\n        if (inputLinkUrlRef?.current) {\r\n            inputLinkUrlRef.current.select();\r\n            document.execCommand(\"copy\");\r\n            window.getSelection().removeAllRanges();\r\n        }\r\n    }\r\n\r\n    const centerStyle = (vertical) => {\r\n        return {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            height: '100%',\r\n            justifyContent: 'space-around',\r\n            flexDirection: vertical ? 'column' : ''\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Title text={\"Play with VLC\"} />\r\n            <SecondaryInfo text={\"To play the video in VLC, click on 'Copy', open VLC then open a network stream and paste the copied link.\"} />\r\n            <input ref={inputLinkUrlRef}\r\n                style={{ background: 'none', border: 'none', outline: 'none', color: 'grey', width: '100%', textAlign: 'center', textOverflow: 'ellipsis', margin: '10px 0' }}\r\n                type=\"text\"\r\n                readOnly={true}\r\n                value={Boolean(videoUrl) ? videoUrl : ''} />\r\n            <div style={centerStyle()}>\r\n                <CopyButton onClick={() => onCopyClick()} />\r\n                <BaseButton content={\"Close\"} color={\"red\"} onClick={() => onCloseClick()} />\r\n            </div>\r\n        </div>);\r\n\r\n}\r\n\r\n\r\n","import BaseButton from './BaseButton';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\n\r\n\r\nexport function AddBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"grey\"}\r\n                insideIcon={<AddIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n      \r\n}\r\n\r\nexport function RemoveBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"dark-red\"}\r\n                insideIcon={<RemoveIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n\r\n}\r\n\r\nfunction BookmarkButton({ onClick, visible, color, insideIcon }) {\r\n\r\n    if (visible) {\r\n        const contentStyle = {\r\n            position: 'relative',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const insideIconStyle = {\r\n            position: 'absolute',\r\n            top: '-2px',\r\n            right: '-2px',\r\n            padding: '1px',\r\n            zIndex: 3,\r\n            width: '15px',\r\n            height: '15px',\r\n            borderRadius: '100%',\r\n            backgroundColor: 'rgba(45,44,44,0.5)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const content = (\r\n            <div style={contentStyle}>\r\n                <BookmarkIcon style={{ fontSize: 28 }} />\r\n                <div style={insideIconStyle}>{insideIcon}</div>\r\n            </div>\r\n        )\r\n\r\n        return (\r\n            <BaseButton content={content} color={color} onClick={() => onClick()} />\r\n        );\r\n    }\r\n    else return null;\r\n\r\n}\r\n","import BaseButton from './BaseButton';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nfunction PlayButton({ center, onClick }) {\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n        <div style={{ marginLeft: '5px' }}>Play</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} centered={center} color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default PlayButton;","import \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport ArrowForwardIosRounded from '@material-ui/icons/ArrowForwardIosRounded';\r\nimport ArrowBackIosRounded from '@material-ui/icons/ArrowBackIosRounded';\r\n\r\nimport fadeTransition from \"../../../helpers/customStyles.js\";\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nfunction MediasListLite({ medias, alignLeft, onMediaClick }) {\r\n  const listRef = useRef(null);\r\n  const [hideBackArrow, setHideBackArrow] = useState(true);\r\n  const [hideForwardArrow, setHideForwardArrow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    listRef.current.onscroll = () => {\r\n      showHideNavArrows();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!medias || medias.length === 0) {\r\n      setHideForwardArrow(true);\r\n      setHideBackArrow(true);\r\n    }\r\n    else showHideNavArrows();\r\n  }, [medias]);\r\n\r\n  useEffect(() => { showHideNavArrows(); }, [hideBackArrow, hideForwardArrow]);\r\n\r\n  const isElementVisible = (elem, boundings) => {\r\n    const elemBoundings = elem.getBoundingClientRect();\r\n    return Math.floor(elemBoundings.right) <= Math.floor(boundings.right)\r\n      && Math.floor(elemBoundings.left) >= Math.floor(boundings.left);\r\n  }\r\n\r\n  const getVisibleRange = () => {\r\n    var indexes = []\r\n    var listBoundings = listRef.current.getBoundingClientRect();\r\n    for (let i = 0; i < listRef.current.children.length; i++) {\r\n      if (isElementVisible(listRef.current.children[i], listBoundings))\r\n        indexes.push(i);\r\n    }\r\n\r\n    return {\r\n      'maxIndex': Math.max(...indexes),\r\n      'minIndex': Math.min(...indexes),\r\n      'count': indexes.length\r\n    }\r\n  }\r\n\r\n  const navToRight = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.maxIndex + visibleRange.count;\r\n      var index = goToIndex > listRef.current.children.length - 1 ? listRef.current.children.length - 1 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const navToLeft = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.minIndex - visibleRange.count;\r\n      var index = goToIndex < 0 ? 0 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const showHideNavArrows = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var listBoundings = listRef.current.getBoundingClientRect();\r\n      setHideBackArrow(isElementVisible(listRef.current.children[0], listBoundings));\r\n      setHideForwardArrow(isElementVisible(listRef.current.children[listRef.current.children.length - 1], listBoundings));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={\"medias-list-container\"}>\r\n      <div style={fadeTransition(!hideBackArrow)} className=\"floating-navigation-btn left\" onClick={() => navToLeft()}>\r\n        <ArrowBackIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div style={fadeTransition(!hideForwardArrow)} className=\"floating-navigation-btn right\" onClick={() => navToRight()}>\r\n        <ArrowForwardIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div ref={listRef} className={\"medias-list\" + (hideBackArrow && hideForwardArrow && !alignLeft ? ' center' : '')}>\r\n        {medias.map((media, index) => (<MediaLitePresentation key={index} media={media} hoverEffect={true} onMediaClick={(mediaId) => onMediaClick(mediaId)} />))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default MediasListLite;","import \"../../../style/medias-list.css\";\r\nimport MediasListLite from \"./MediasListLite\";\r\n\r\nfunction MediasListLiteWithTitle({ listTitle, medias, alignLeft, visible, onMediaClick }) {\r\n    if (!visible) return null;\r\n\r\n    return (\r\n        <div className=\"medias-list-genre-container\">\r\n            <div className=\"medias-list-header\">\r\n                <div className=\"medias-list-categorie\">{listTitle}</div>\r\n            </div>\r\n            <MediasListLite medias={medias} alignLeft={alignLeft} onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n        </div>\r\n    );\r\n}\r\nexport default MediasListLiteWithTitle;\r\n\r\n","\r\nimport \"../style/media-presentation-page.css\";\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport ModalMediaTrailer from '../components/modal/ModalMediaTrailer';\r\nimport ModalEpisodeSelector from '../components/modal/ModalEpisodeSelector';\r\nimport ModalVersionAndQualitySelector from '../components/modal/ModalVersionAndQualitySelector';\r\n\r\nimport { VideoPlayerWindow } from '../components/video/VideoPlayerWindow';\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport ProgressionBar from \"../components/common/ProgressionBar\";\r\n\r\nimport BaseButton from \"../components/common/buttons/BaseButton\";\r\nimport TrailerButton from \"../components/common/buttons/TrailerButton\";\r\nimport PlayWithVLCButton from \"../components/common/buttons/PlayWithVLCButton\";\r\nimport { AddBookmarkButton, RemoveBookmarkButton } from \"../components/common/buttons/BookmarkButton\";\r\nimport PlayButton from \"../components/common/buttons/PlayButton\";\r\n\r\nimport SecondaryInfo from \"../components/common/text/SecondaryInfo\";\r\nimport Paragraph from \"../components/common/text/Paragraph\";\r\nimport Title from \"../components/common/text/Title\";\r\nimport TitleAndContent from \"../components/common/TitleAndContent\";\r\nimport Rating from \"../components/common/Rating\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\n\r\nimport AppServices from \"../services/AppServices\";\r\nimport { ToTimeFormat } from \"../helpers/timeFormatHelper\";\r\nimport fadeTransition from \"../helpers/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef, version } from 'react';\r\n\r\n\r\nfunction MediaFullPresentation({ mediaId, onCloseClick }) {\r\n\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n    const [mediaDetails, setMediaDetails] = useState({});\r\n    const [mediaProgression, setMediaProgression] = useState({});\r\n\r\n    const torrents = useRef([]);\r\n    const [torrentSearching, setTorrentSearching] = useState(false);\r\n    const [updateSelectedTorrent, setUpdateSelectedTorrent] = useState(true);\r\n\r\n    const [selectedVersionSources, setSelectedVersionSources] = useState([]);\r\n    const [videoSourceUrl, setVideoSourceUrl] = useState('');\r\n\r\n    const [mediaSubtitlesSources, setMediaSubtitlesSources] = useState([]);\r\n    const [loadingSubtitles, setLoadingSubtitles] = useState(false);\r\n\r\n    const [showMediaPlayer, setShowMediaPlayer] = useState(false);\r\n    const [showMediaTrailer, setShowMediaTrailer] = useState(false);\r\n    const [addBookmarkButtonVisible, setAddBookmarkButtonVisible] = useState(true);\r\n\r\n    const [similarMedias, setSimilarMedias] = useState([]);\r\n    const navHistory = useRef([]);\r\n\r\n    const selectedEpisode = useRef({\r\n        seasonNumber: 1,\r\n        episodeNumber: 1\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (mediaId)\r\n            loadPage(mediaId);\r\n    }, [mediaId]);\r\n\r\n    useEffect(() => {\r\n        if (mediaDetails.imdbId) {\r\n            getAvailableSubtitles(mediaDetails.imdbId, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n            if (mediaDetails.id && mediaDetails.title && mediaDetails.year)\r\n                searchTorrents(mediaDetails);\r\n        }\r\n\r\n        const topPage = document.getElementsByClassName('back-btn')[0];\r\n        topPage.scrollIntoView();\r\n    }, [mediaDetails]);\r\n\r\n    useEffect(() => {\r\n        if (updateSelectedTorrent && mediaProgression && torrents.current?.length > 0) {\r\n            const torrentToSelect = torrents.current.find(torrent => torrent.downloadUrl === mediaProgression.torrentUrl);\r\n            if (torrentToSelect) {\r\n                changeSelectedTorrent(torrentToSelect);\r\n                setUpdateSelectedTorrent(false);\r\n            }\r\n        }\r\n    }, [mediaProgression, torrents.current]);\r\n\r\n    const searchTorrents = (mediaDetails) => {\r\n        torrents.current = [];\r\n        setVideoSourceUrl('');\r\n        setTorrentSearching(true);\r\n        AppServices.torrentApiService.searchTorrents(mediaDetails.id, mediaDetails.title, mediaDetails.year, mediaDetails.imdbId, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber,\r\n            (result) => {\r\n                setTorrentSearching(false);\r\n                if (result && result.length > 0) {\r\n                    torrents.current = result.map(torrent => ({ ...torrent, seasonNumber: selectedEpisode.current.seasonNumber, episodeNumber: selectedEpisode.current.episodeNumber }));\r\n                    changeSelectedTorrent(torrents.current[0]);\r\n                }\r\n            }, () => {\r\n                setTorrentSearching(false);\r\n            }\r\n        );\r\n    }\r\n\r\n    const loadPage = (mediaId) => {\r\n        setDataLoaded(false);\r\n        setMediaDetails({});\r\n        setSimilarMedias([]);\r\n        if (mediaId) {\r\n            AppServices.searchMediaService.getMediaDetails(mediaId,\r\n                (details) => {\r\n                    if (details) {\r\n                        setMediaDetails(details);\r\n                        setDataLoaded(true);\r\n                        AppServices.bookmarkApiService.isMediaBookmarked(mediaId, (isMediaBookmarked) => {\r\n                            isMediaBookmarked = isMediaBookmarked === 'true';\r\n                            setAddBookmarkButtonVisible(!isMediaBookmarked);\r\n                        });\r\n                    }\r\n                    else {\r\n                        setDataLoaded(true);\r\n                        const topPage = document.getElementsByClassName('no-media-details-message')[0];\r\n                        topPage.scrollIntoView();\r\n                    }\r\n                });\r\n            getMediaProgression(mediaId, 1, 1);\r\n            AppServices.searchMediaService.getSimilarMedias(mediaId, (recommandedMedias) => {\r\n                if (recommandedMedias && recommandedMedias.length > 0)\r\n                    setSimilarMedias(recommandedMedias);\r\n            });\r\n        }\r\n    }\r\n\r\n    const changeSelectedTorrent = (selectedTorrent) => {\r\n        const refreshedTorrentsList = [];\r\n        for (let i = 0; i < torrents.current.length; i++) {\r\n            const torrent = torrents.current[i];\r\n            torrent.selected = torrent.downloadUrl == selectedTorrent.downloadUrl;\r\n            refreshedTorrentsList.push(torrent);\r\n        }\r\n        torrents.current = refreshedTorrentsList;\r\n\r\n        setVideoSourceUrl(\r\n            selectedTorrent ? AppServices.torrentApiService.buildStreamUrl(selectedTorrent.downloadUrl, '', selectedTorrent.seasonNumber, selectedTorrent.episodeNumber)\r\n                : '');\r\n\r\n        setSelectedVersionSources(torrents.current.filter(t => t.languageVersion === selectedTorrent.languageVersion));\r\n    }\r\n\r\n    const getMediaProgression = (mediaId, seasonNumber, episodeNumber) => {\r\n        setMediaProgression({});\r\n        AppServices.watchedMediaApiService.getWatchedMedia(\r\n            mediaId,\r\n            seasonNumber,\r\n            episodeNumber,\r\n            (watchedMedia) => {\r\n                if (watchedMedia?.currentTime && watchedMedia?.totalDuration) {\r\n                    setMediaProgression({\r\n                        progression: watchedMedia.currentTime / watchedMedia.totalDuration,\r\n                        remainingTime: watchedMedia.totalDuration - watchedMedia.currentTime,\r\n                        currentTime: watchedMedia.currentTime,\r\n                        torrentUrl: watchedMedia.torrentUrl\r\n                    });\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    const getAvailableSubtitles = (imdbCode, seasonNumber, episodeNumber) => {\r\n        setLoadingSubtitles(true);\r\n        AppServices.subtitlesApiService.getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber,\r\n            (availableSubtitles) => {\r\n                setMediaSubtitlesSources(availableSubtitles);\r\n                setTimeout(() => setLoadingSubtitles(false), 1000);\r\n            })\r\n    }\r\n\r\n    const bookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.addBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(false);\r\n        });\r\n    }\r\n\r\n    const unbookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.deleteBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(true);\r\n        });\r\n    }\r\n\r\n    const onWatchedTimeUpdate = (currentTime, duration, sourceUrl) => {\r\n        AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, currentTime, duration, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber, sourceUrl);\r\n    }\r\n\r\n    const onRecommandedMediaClick = (mediaId) => {\r\n        navHistory.current.push(mediaDetails.id);\r\n        loadPage(mediaId);\r\n    }\r\n\r\n    const onBackClick = () => {\r\n        if (navHistory.current.length > 0) {\r\n            let lastMediaId = navHistory.current.pop();\r\n            loadPage(lastMediaId);\r\n        }\r\n        else\r\n            onCloseClick();\r\n    }\r\n\r\n    const onEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        selectedEpisode.current = {\r\n            seasonNumber: seasonNumber,\r\n            episodeNumber: episodeNumber\r\n        };\r\n        searchTorrents(mediaDetails);\r\n        getAvailableSubtitles(mediaDetails.imdbId, seasonNumber, episodeNumber);\r\n        getMediaProgression(mediaDetails.id, seasonNumber, episodeNumber);\r\n    }\r\n\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <VideoPlayerWindow\r\n                visible={showMediaPlayer}\r\n                sources={selectedVersionSources}\r\n                subtitles={mediaSubtitlesSources}\r\n                onCloseClick={() => setShowMediaPlayer(false)}\r\n                onWatchedTimeUpdate={(currentTime, duration, sourceUrl) => onWatchedTimeUpdate(currentTime, duration, sourceUrl)}\r\n                goToTime={mediaProgression?.currentTime}\r\n                mediaDetails={mediaDetails} />\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={!dataLoaded} />\r\n            <ModalMediaTrailer visible={showMediaTrailer} youtubeTrailerUrl={mediaDetails.youtubeTrailerUrl} onCloseClick={() => setShowMediaTrailer(false)} />\r\n            <div style={{ display: dataLoaded && !mediaDetails.title ? 'flex' : 'none' }} className=\"no-media-details-message\">\r\n                <Paragraph text={\"No info found for this media\"} />\r\n                <BaseButton color=\"red\" content={\"Back\"} onClick={() => onBackClick()} />\r\n            </div>\r\n            <div style={fadeTransition(dataLoaded && mediaDetails.title)} className=\"media-presentation-page-container\">\r\n                <div className=\"back-btn\" onClick={() => onBackClick()}>\r\n                    <ArrowBackIcon className=\"back-arrow\" />\r\n                </div>\r\n                <div className=\"presentation\" style={{ backgroundImage: 'url(' + mediaDetails.backgroundImageUrl + ')' }}>\r\n                    <div className=\"info-container\">\r\n                        <div className=\"info\">\r\n                            <div className=\"title\">\r\n                                {\r\n                                    mediaDetails.logoImageUrl ? <img src={mediaDetails.logoImageUrl} /> : <Title text={mediaDetails.title} />\r\n                                }\r\n                            </div>\r\n                            <div className=\"info-content\">\r\n                                <Rating rating={mediaDetails.rating} size=\"50px\" />\r\n                                <SecondaryInfo center text={mediaDetails.year + \" | \" + (mediaDetails.duration ? ToTimeFormat(mediaDetails.duration) + \" | \" : '') + mediaDetails.genres?.map(genre => genre.name).join(', ')} />\r\n                                <MediaProgression mediaProgression={mediaProgression?.progression} remainingTime={mediaProgression?.remainingTime} />\r\n                                <div className=\"horizontal\">\r\n                                    <TrailerButton visible={mediaDetails?.youtubeTrailerUrl} onClick={() => setShowMediaTrailer(true)} />\r\n                                    <EpisodeSelector\r\n                                        serieId={mediaDetails.id}\r\n                                        seasonsCount={mediaDetails.seasonsCount}\r\n                                        onEpisodeSelected={(seasonNumber, episodeNumber) => onEpisodeSelected(seasonNumber, episodeNumber)} />\r\n                                    <AddBookmarkButton onClick={() => bookmarkMedia()} visible={addBookmarkButtonVisible} />\r\n                                    <RemoveBookmarkButton onClick={() => unbookmarkMedia()} visible={!addBookmarkButtonVisible} />\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"play-options\">\r\n                            <AvailableItems\r\n                                title=\"Subtitles\"\r\n                                isLoading={loadingSubtitles}\r\n                                itemsList={mediaSubtitlesSources && mediaSubtitlesSources.map(s => s.language)}\r\n                                emptyMessage={\"No subtitles available\"} />\r\n                            <div className=\"horizontal\">\r\n                                <AvailableItems\r\n                                    title=\"Versions\"\r\n                                    isLoading={torrentSearching}\r\n                                    itemsList={torrents.current && [...new Set(torrents.current.map(t => t.languageVersion))]}\r\n                                    emptyMessage={\"No version available\"} />\r\n                                <div style={fadeTransition(!torrentSearching && torrents.current?.length > 0)} className=\"horizontal\">\r\n                                    <QualitySelector torrents={torrents.current} onQualityChanged={(torrent) => changeSelectedTorrent(torrent)} />\r\n                                    <PlayButton onClick={() => setShowMediaPlayer(true)} />\r\n                                    <PlayWithVLCButton\r\n                                        videoUrl={videoSourceUrl}\r\n                                        onClick={() => { if (mediaDetails) AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, 0, 0, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber) }} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"extra\">\r\n                            <div className=\"media-details\">\r\n                                <TitleAndContent title=\"Director\" content={mediaDetails.director} justify=\"left\" />\r\n                                <TitleAndContent title=\"Cast\" content={mediaDetails.cast} justify=\"left\" />\r\n                                <Paragraph text={mediaDetails.synopsis}></Paragraph>\r\n                            </div>\r\n\r\n                            <MediasListLiteWithTitle\r\n                                medias={similarMedias}\r\n                                alignLeft\r\n                                listTitle=\"You may also like\"\r\n                                visible={similarMedias && similarMedias.length > 0}\r\n                                onMediaClick={(mediaId) => { onRecommandedMediaClick(mediaId) }} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default MediaFullPresentation;\r\n\r\n\r\nfunction MediaProgression({ mediaProgression, remainingTime }) {\r\n    if (mediaProgression > 0) {\r\n        return (\r\n            <div>\r\n                <ProgressionBar width=\"100%\" value={mediaProgression * 100} />\r\n                <SecondaryInfo text={ToTimeFormat(remainingTime / 60) + ' remaining'} />\r\n            </div>\r\n        )\r\n    }\r\n    else\r\n        return null;\r\n}\r\n\r\nfunction AvailableItems({ title, itemsList, emptyMessage, isLoading }) {\r\n    const availableItems = itemsList?.length > 0 ? itemsList.join(\", \") : emptyMessage;\r\n    const content = isLoading ? <CircularProgressBar color={'white'} size={'15px'} visible={true} /> : availableItems;\r\n    return (\r\n        <TitleAndContent title={title} content={content} />\r\n    )\r\n}\r\n\r\nfunction QualitySelector({ torrents, onQualityChanged }) {\r\n    const [modalQualitySelectorVisible, setModalQualitySelectorVisible] = useState(false);\r\n    const [selectedVersionAndQuality, setSelectedVersionAndQuality] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (torrents?.length > 0) {\r\n            const selectedTorrent = torrents.find(t => t.selected);\r\n            if (selectedTorrent) {\r\n                setSelectedVersionAndQuality(selectedTorrent.languageVersion + \" | \" + selectedTorrent.quality);\r\n            }\r\n        }\r\n\r\n    }, [torrents]);\r\n\r\n\r\n    const onQualityClick = (torrent) => {\r\n        setModalQualitySelectorVisible(false);\r\n        const selectedTorrent = torrents.find(t => t.selected);\r\n        if (selectedTorrent.downloadUrl !== torrent.downloadUrl)\r\n            onQualityChanged(torrent);\r\n    }\r\n\r\n    return <div>\r\n        <BaseButton color=\"grey\" content={selectedVersionAndQuality} onClick={() => setModalQualitySelectorVisible(true)} />\r\n        <ModalVersionAndQualitySelector\r\n            visible={modalQualitySelectorVisible}\r\n            torrents={torrents}\r\n            onQualityClick={(torrent) => onQualityClick(torrent)} />\r\n    </div>\r\n}\r\n\r\nfunction EpisodeSelector({ serieId, seasonsCount, onEpisodeSelected }) {\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1)\r\n    const [selectedEpisodeNumber, setSelectedEpisodeNumber] = useState(1)\r\n\r\n    useEffect(() => {\r\n        setSelectedSeasonNumber(1);\r\n        setSelectedEpisodeNumber(1);\r\n    }, [seasonsCount]);\r\n\r\n    if (!seasonsCount)\r\n        return null;\r\n\r\n    const onButtonClick = () => {\r\n        setModalVisible(true);\r\n    }\r\n\r\n    const handleEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        setSelectedSeasonNumber(seasonNumber);\r\n        setSelectedEpisodeNumber(episodeNumber);\r\n        onEpisodeSelected(seasonNumber, episodeNumber);\r\n        setModalVisible(false);\r\n    }\r\n\r\n    return <div>\r\n        <ModalEpisodeSelector\r\n            visible={modalVisible}\r\n            serieId={serieId}\r\n            numberOfSeasons={seasonsCount}\r\n            onEpisodeSelected={(seasonNumber, episodeNumber) => handleEpisodeSelected(seasonNumber, episodeNumber)}\r\n            onCloseClick={() => setModalVisible(false)} />\r\n        <BaseButton\r\n            color=\"red\"\r\n            content={\"Season \" + selectedSeasonNumber + \" - Episode \" + selectedEpisodeNumber}\r\n            onClick={() => onButtonClick()} />\r\n    </div>\r\n}\r\n\r\n\r\n","\r\nfunction MediaPicturesPresentation({ media, visible, onClick }) {\r\n    return (\r\n        <div className={\"media-pictures \" + (!visible ? \"hidden\" : \"\")} onClick={() => onClick(media.id)}>\r\n            <div className=\"logo-title\">\r\n                <img src={media?.logoImageUrl}></img>\r\n            </div>\r\n            <img className=\"background-image\" src={media?.backgroundImageUrl}></img>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediaPicturesPresentation;","\r\n\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport MediaPicturesPresentation from \"../presentation/MediaPicturesPresentation\";\r\nimport { useEffect, useState } from 'react';\r\nimport \"../../../style/media-pictures-presentation.css\";\r\n\r\n\r\nfunction MediasOfToday({ medias, onClick }) {\r\n    const [mediaIndexVisible, setMediaIndexVisible] = useState(0);\r\n    const [carouselPlay, setCarouselPlay] = useState(false);\r\n\r\n    useEffect(() =>{\r\n        if(medias && medias.length > 0)\r\n            setCarouselPlay(true);\r\n    }, [medias]);\r\n\r\n    useEffect(() => {\r\n        var changeMedia;\r\n        if (carouselPlay) {\r\n            changeMedia = setTimeout(() => {\r\n                if (mediaIndexVisible === medias?.length - 1)\r\n                    setMediaIndexVisible(0)\r\n                else setMediaIndexVisible(mediaIndexVisible + 1);\r\n            }, 5000);\r\n        }\r\n\r\n        return () => {\r\n            clearTimeout(changeMedia);\r\n        }\r\n    }, [mediaIndexVisible, carouselPlay]);\r\n\r\n\r\n    return (\r\n        <div className=\"medias-pictures-container\">\r\n            {medias?.map((media, index) =>\r\n                <MediaPicturesPresentation\r\n                    key={index}\r\n                    media={media}\r\n                    visible={index === mediaIndexVisible}\r\n                    onClick={() => onClick(media.id)} />)}\r\n            <div className=\"medias-pictures-nav-controls\">\r\n                <MediaPicturesCarousel\r\n                    nbMedias={medias?.length}\r\n                    selectedIndex={mediaIndexVisible}\r\n                    onNavElementClick={(index) => setMediaIndexVisible(index)} />\r\n                <div className=\"medias-pictures-play-pause\" onClick={() => setCarouselPlay(!carouselPlay)}>\r\n                    <PlayArrowIcon className=\"icon\" style={{ display: carouselPlay ? 'none' : '' }} />\r\n                    <PauseIcon className=\"icon\" style={{ display: !carouselPlay ? 'none' : '' }} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasOfToday;\r\n\r\nfunction MediaPicturesCarousel({ nbMedias, selectedIndex, onNavElementClick }) {\r\n\r\n    const navElements = [];\r\n\r\n    for (let i = 0; i <= nbMedias - 1; i++)\r\n        navElements.push(i);\r\n\r\n    return (\r\n        <div className=\"medias-pictures-nav\">\r\n            {navElements.map((i) =>\r\n                <div key={i}\r\n                    onClick={() => onNavElementClick(i)}\r\n                    className={\"nav-elem\" + (selectedIndex === i ? ' selected' : '')}></div>)}\r\n        </div>\r\n    );\r\n}","\r\nimport \"../style/home-page.css\";\r\nimport MediasOfToday from \"../components/media/list/MediasOfTodayList\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\n\r\nimport fadeTransition from \"../helpers/customStyles.js\";\r\nimport AppServices from \"../services/AppServices\";\r\nimport CacheService from \"../services/cacheService\";\r\nimport AppMode from \"../services/appMode\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\nfunction HomePage({ onMediaClick, onReady, onFail }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    const mediaListref = useRef([]);\r\n    const cacheIdRef = useRef(\"\");\r\n\r\n    const [mediaLists, setMediaLists] = useState([]);\r\n\r\n    const buildCacheId = (appMode) => {\r\n        return 'homepage' + appMode;\r\n    }\r\n\r\n    const todayTrendingTitle = \"todayTrending\"\r\n\r\n    const addMedias = (listTitle, medias, insertAtBeginning) => {\r\n        if (medias && medias.length > 0) {\r\n            let data = {\r\n                title: listTitle,\r\n                medias: medias\r\n            }\r\n            if (insertAtBeginning) mediaListref.current.unshift(data);\r\n            else mediaListref.current.push(data);\r\n            CacheService.setCache(cacheIdRef.current, mediaListref.current);\r\n            const newArray = [...mediaListref.current];\r\n            setMediaLists(newArray);\r\n        }\r\n    };\r\n\r\n    const loadContent = () => {\r\n        cacheIdRef.current = buildCacheId(AppMode.getActiveMode().label);\r\n\r\n        let cache = CacheService.getCache(cacheIdRef.current);\r\n        mediaListref.current = [];\r\n\r\n        if (cache) {\r\n            mediaListref.current = cache.data;\r\n            setMediaLists(mediaListref.current);\r\n            setDataLoaded(true);\r\n        }\r\n        else {\r\n            AppServices.searchMediaService.getMediasOfToday(\r\n                (medias) => {\r\n                    addMedias(todayTrendingTitle, medias);\r\n                    setDataLoaded(true);\r\n                    onReady();\r\n                }, () => {\r\n                    onFail();\r\n                });\r\n            AppServices.searchMediaService.getPopularMedias((medias) => {\r\n                addMedias(\"Popular \" + AppMode.getActiveMode().label.toLocaleLowerCase(), medias, true);\r\n            });\r\n            AppServices.searchMediaService.getRecommandedMedias((medias) => {\r\n                addMedias(\"Recommanded for you\", medias, true);\r\n            });\r\n            AppServices.searchMediaService.getPopularNetflixMedias((medias) => {\r\n                addMedias(\"Popular on Netflix\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularDisneyPlusMedias((medias) => {\r\n                addMedias(\"Popular on Disney Plus\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAmazonPrimeMedias((medias) => {\r\n                addMedias(\"Popular on Amazon Prime\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAppleTvMedias((medias) => {\r\n                addMedias(\"Popular on AppleTv\", medias);\r\n            });\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadContent();\r\n        AppMode.onAppModeChanged(() => {\r\n            loadContent();\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <CircularProgressBar position={\"center\"} visible={!dataLoaded} color={\"white\"} size={\"60px\"} />\r\n            <div className=\"home-page-container\" style={fadeTransition(dataLoaded)}>\r\n                <MediasOfToday medias={mediaLists.find(list => list.title === todayTrendingTitle)?.medias} onClick={(mediaId) => onMediaClick(mediaId)} />\r\n                <div className=\"blur-divider\"></div>\r\n                {mediaLists.filter(list => list.title !== todayTrendingTitle).map((mediasList) =>\r\n                (\r\n                    <MediasListLiteWithTitle\r\n                        key={mediasList.title}\r\n                        visible={true}\r\n                        listTitle={mediasList.title}\r\n                        medias={mediasList.medias}\r\n                        onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import \"../../../style/media-intermediate-presentation.css\";\r\n\r\nimport MediaLitePresentation from \"./MediaLitePresentation\";\r\nimport ProgressionBar from \"../../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../../common/text/SecondaryInfo\";\r\nimport AppMode from \"../../../services/appMode\";\r\n\r\nfunction MediaIntermediatePresentation({ media, onClick }) {\r\n    const truncateText = (text) => {\r\n        if (text && text.length > 400) return text.substring(0, 300) + '...';\r\n        else return text;\r\n    };\r\n\r\n    return (\r\n        <div className=\"media-intermediate-presentation-container\" onClick={() => onClick()}>\r\n            <MediaLitePresentation media={media} />\r\n            <div className=\"media-intermediate-presentation-content\">\r\n                <div className=\"media-intermediate-presentation-info\">\r\n                    <SecondaryInfo text={truncateText(media.synopsis)} />\r\n                    {AppMode.isSeriesMode() ? <SecondaryInfo text={\"Season \" + media.seasonNumber + \" - Episode \" + media.episodeNumber} /> : null}\r\n                    {media.totalDuration && media.currentTime ? <ProgressionBar value={(media.currentTime / media.totalDuration) * 100} width=\"100%\" /> : null}\r\n                </div>\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default MediaIntermediatePresentation;","import \"../../../style/media-intermediate-list.css\";\r\n\r\nimport MediaIntermediatePresentation from \"../presentation/MediaIntermediatePresentation\";\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\nimport { useEffect } from 'react';\r\n\r\nfunction MediasIntermediatePresentationList({ title, medias, centerToMedia, loadingProgressVisible, onClick }) {\r\n\r\n    useEffect(() => {\r\n        if (centerToMedia) {\r\n            var index = medias.findIndex(m => m.id === centerToMedia.id);\r\n            var elem = document.getElementById(\"mediaintermediatepresentation\" + index);\r\n            if (elem) {\r\n                elem.scrollIntoView({\r\n                    block: \"nearest\",\r\n                    inline: \"nearest\"\r\n                });\r\n            }\r\n        }\r\n    }, [medias, centerToMedia]);\r\n\r\n    return (\r\n        <div>\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={loadingProgressVisible} />          \r\n            <div className=\"media-intermediate-list-title-page\">{title}</div>\r\n            <div className=\"media-intermediate-list-content\">\r\n                {medias.map((media, index) =>\r\n                (<div id={\"mediaintermediatepresentation\" + index} key={index}>\r\n                    <MediaIntermediatePresentation\r\n                        media={media}\r\n                        onClick={() => onClick(media)}/>\r\n                </div>))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediasIntermediatePresentationList;","import AppServices from \"../services/AppServices\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from \"../services/appMode.js\";\r\n\r\nvar watchedMediaLastClicked = null;\r\n\r\nfunction WatchedMediasPage({centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            watchedMediaLastClicked = null;\r\n\r\n            AppServices.watchedMediaApiService.getWatchedMedias((medias) => {\r\n            setLoadingVisible(false);\r\n            if (medias && medias.length > 0)\r\n                setMedias(medias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleClick = (media) => {\r\n        watchedMediaLastClicked = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={medias && medias.length > 0 ? \"You can see here the \" + mediaLabel + \" you have watched\" : \"No \" + mediaLabel + \" watched\"}\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={medias}\r\n            centerToMedia={watchedMediaLastClicked}\r\n            onClick={(media) => handleClick(media)} />\r\n    )\r\n}\r\n\r\n\r\nexport default WatchedMediasPage;","import AppServices from \"../services/AppServices\";\r\nimport AppMode from \"../services/appMode.js\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\n\r\nvar lastClickedMedia = null;\r\n\r\nfunction BookmarkedMediasPage({ centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [mediasBookmarks, setMediasBookmarks] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            lastClickedMedia = null;\r\n\r\n            AppServices.bookmarkApiService.getBookmarkedMedias((bookmarkedMedias) => {\r\n            setLoadingVisible(false);\r\n            if (bookmarkedMedias && bookmarkedMedias.length > 0)\r\n                setMediasBookmarks(bookmarkedMedias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleMediaClick = (media) => {\r\n        lastClickedMedia = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={mediasBookmarks && mediasBookmarks.length > 0 ? \"You can see here the \" + mediaLabel + \" you have bookmarked\" : \"No bookmarked \" + mediaLabel }\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={mediasBookmarks}\r\n            centerToMedia={lastClickedMedia}\r\n            onClick={(media) => handleMediaClick(media)}/>\r\n    )\r\n}\r\n\r\n\r\nexport default BookmarkedMediasPage;","import \"../../style/text-input.css\";\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nfunction TextInput({ placeHolder, onTextChanged, large, value }) {\r\n\r\n    useEffect(() => {\r\n        setText(value);\r\n    }, [value]);\r\n\r\n    const [text, setText] = useState('');\r\n\r\n    const onValueChanged = (value) => {\r\n        setText(value);\r\n        onTextChanged(value);\r\n    }\r\n\r\n    return (\r\n        <div className=\"text-input-container\">\r\n            <div className={\"text-input \" + (large ? 'large' : '')}>\r\n                <TextField value={text} onChange={(e) => { onValueChanged(e.target.value) }} placeholder={placeHolder} />\r\n                <ClearIcon style={fadeTransition(text)} className='delete-text-cross' onClick={() => { onValueChanged('') }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TextInput;","import \"../style/search-view.css\";\r\n\r\nimport MediasListLite from \"../components/media/list/MediasListLite\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport TextInput from '../components/common/TextInput';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nconst cacheResearch = {\r\n    searchValue: '',\r\n    result: [],\r\n    save(searchValue, medias){\r\n        this.searchValue = searchValue;\r\n        this.result = medias;\r\n    },\r\n    clean(){\r\n        this.searchValue = '';\r\n        this.result = [];\r\n    }\r\n}; \r\n\r\nfunction ResearchPage({ loadFromCache, onMediaClick }) {\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [medias, setMedias] = useState([]);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n\r\n    const searchValueRef = useRef(searchValue);\r\n\r\n    const searchResultLabelReducer = (state, mediasLength) => {\r\n        if (mediasLength === 0) return \"Nothing found\";\r\n        else if (mediasLength === 1) return \"one result\";\r\n        else if (mediasLength > 1) return mediasLength + \" results\";\r\n        else return \"\";\r\n    };\r\n    const [searchResultLabel, searchResultLabelDispatch] = useReducer(searchResultLabelReducer, '');\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache && searchValue === cacheResearch.searchValue)\r\n            return;\r\n\r\n        searchValueRef.current = searchValue;\r\n        if (searchValue && searchValue.length > 2) {\r\n            setTimeout(() => {\r\n                if (searchValue === searchValueRef.current) {\r\n                    setSearchInProgress(true);\r\n                    searchResultLabelDispatch(-1);                \r\n                    setMedias([]);\r\n                    cacheResearch.clean();\r\n                    AppServices.searchMediaService.searchMedias(searchValue,\r\n                        (medias) => {\r\n                            setSearchInProgress(false);\r\n                            if(searchValueRef.current && searchValue === searchValueRef.current){\r\n                                searchResultLabelDispatch(medias.length);\r\n                                if (medias && medias.length > 0){\r\n                                    setMedias(medias);\r\n                                    cacheResearch.save(searchValue, medias);\r\n                                } \r\n                            }\r\n                        },\r\n                        () => {\r\n                            setSearchInProgress(false);\r\n                            searchResultLabelDispatch(0);\r\n                        });\r\n                }\r\n            }, 1000);\r\n        }\r\n        else {\r\n            searchResultLabelDispatch(-1);\r\n            setMedias([]);\r\n        }\r\n    }, [searchValue]);\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache){\r\n            setMedias(cacheResearch.result);\r\n            searchResultLabelDispatch(cacheResearch.result.length);\r\n            setSearchValue(cacheResearch.searchValue);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"search-view-container\">    \r\n            <TextInput placeHolder=\"Type here to start search...\" large onTextChanged={(text) => { setSearchValue(text) }} />\r\n            <CircularProgressBar color={'white'} size={'40px'} visible={searchInProgress} />\r\n            <div className=\"medias-search-result\">\r\n                <MediasListLite medias={medias} onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                <div className=\"label-result\">{searchResultLabel}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ResearchPage;","import BaseButton from './BaseButton';\r\n\r\nfunction OpenButton({ onClick, visible }) {\r\n\r\n    if(!visible)\r\n        return null;\r\n\r\n    const content = <div>Open</div>;\r\n\r\n    return (\r\n        <BaseButton content={content} centered color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default OpenButton;","\r\nimport \"../style/torrent-link-page.css\";\r\n\r\nimport TextInput from '../components/common/TextInput';\r\nimport OpenButton from '../components/common/buttons/OpenButton';\r\nimport CircularProgressBar from '../components/common/CircularProgressBar';\r\nimport PlayButton from '../components/common/buttons/PlayButton';\r\nimport PlayWithVLCButton from '../components/common/buttons/PlayWithVLCButton';\r\nimport { VideoPlayerWindow } from '../components/video/VideoPlayerWindow';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction TorrentLinkPage() {\r\n\r\n    const [torrentLink, setTorrentLink] = useState('');\r\n    const torrentLinkRef = useRef('');\r\n    const [openingTorrentLink, setOpeningTorrentLink] = useState(false);\r\n    const [openingHistory, setOpeningHistory] = useState(false);\r\n    const [torrentHistory, setTorrentHistory] = useState([]);\r\n    const [torrentFiles, setTorrentFiles] = useState([]);\r\n    const [selectedFile, setSelectedFile] = useState('');\r\n    const [loadingMessage, setLoadingMessage] = useState('');\r\n\r\n    const [showMoviePlayer, setShowMoviePlayer] = useState(false);\r\n\r\n    const [movieSources, setMovieSources] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        setMovieSources([{\r\n            quality: 'Video',\r\n            downloadUrl: torrentLink,\r\n            fileName: selectedFile\r\n        }]);\r\n\r\n        if (!torrentLink)\r\n            getTorrentHistory();\r\n\r\n        torrentLinkRef.current = torrentLink;\r\n\r\n    }, [torrentLink, selectedFile]);\r\n\r\n    const getTorrentHistory = () => {\r\n        setOpeningHistory(true);\r\n        setLoadingMessage('Loading history');\r\n        AppServices.torrentApiService.getTorrentHistory(\r\n            (files) => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory(files);\r\n            },\r\n            () => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory([]);\r\n            });\r\n    };\r\n\r\n    const changeTorrentLink = (torrentLink) => {\r\n        setOpeningTorrentLink(false);\r\n        setSelectedFile('');\r\n        setTorrentLink(torrentLink);\r\n        setTorrentFiles([]);\r\n    };\r\n\r\n    const openTorrent = () => {\r\n        setTorrentFiles([]);\r\n        setOpeningTorrentLink(true);\r\n        setLoadingMessage('Opening torrent');\r\n\r\n        AppServices.torrentApiService.getTorrentFiles(torrentLink,\r\n            (response) => {\r\n                if (decodeURIComponent(torrentLinkRef.current) === decodeURIComponent(response.link)) {\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles(response.files);\r\n                }\r\n            },\r\n            (response) => {\r\n                if (decodeURIComponent(torrentLinkRef.current) === decodeURIComponent(response.link)) {\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles([]);\r\n                }\r\n            });\r\n    };\r\n\r\n    const onPlayFileClick = (file) => {\r\n        setSelectedFile(file);\r\n        setShowMoviePlayer(true);\r\n    }\r\n\r\n    const torrentFilesAreLoadingOrLoaded = () => {\r\n        return openingTorrentLink || (torrentFiles && torrentFiles.length > 0);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"torrent-link-page-container\">\r\n            <div className=\"title\">Enter a torrent url or magnet and click on Open to see the list of files</div>\r\n            <TextInput placeHolder=\"Torrent link or magnet...\" large onTextChanged={(text) => changeTorrentLink(text)} value={torrentLink} />\r\n\r\n            <div style={{ margin: \"10px 0\" }}>\r\n                <OpenButton visible={!torrentFilesAreLoadingOrLoaded()} onClick={() => openTorrent()} />\r\n                {Boolean(openingTorrentLink) || Boolean(openingHistory) ? <CircularProgressBar visible size=\"30px\" color=\"white\" text={loadingMessage} /> : null}\r\n            </div>\r\n            <TorrentHistory visible={!torrentFilesAreLoadingOrLoaded()} files={torrentHistory} onClick={(torrentLink) => { changeTorrentLink(torrentLink) }} />\r\n            <TorrentFilesList visible={torrentFilesAreLoadingOrLoaded()} torrentLink={torrentLink} files={torrentFiles} onPlayFileClick={(file) => onPlayFileClick(file)} />\r\n\r\n            <VideoPlayerWindow visible={showMoviePlayer} sources={movieSources} onCloseClick={() => setShowMoviePlayer(false)} onWatchedTimeUpdate={() => { }} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TorrentLinkPage;\r\n\r\nfunction TorrentFilesList({ visible, torrentLink, files, onPlayFileClick }) {\r\n    if (!visible)\r\n        return null;\r\n\r\n    return <FilesList\r\n        torrentLink={torrentLink}\r\n        files={files}\r\n        onPlayFileClick={(file) => onPlayFileClick(file)}\r\n        contentType=\"fileFromTorrent\"\r\n        listTitle=\"Torrent files\" />\r\n}\r\n\r\nfunction TorrentHistory({ visible, files, onClick }) {\r\n    if (!visible)\r\n        return null;\r\n\r\n    return <FilesList\r\n        files={files}\r\n        onFileClick={(torrentLink) => onClick(torrentLink)}\r\n        contentType=\"torrentFile\"\r\n        listTitle=\"Last opened torrent files\" />\r\n}\r\n\r\nfunction FilesList({ torrentLink, files, onFileClick, onPlayFileClick, contentType, listTitle }) {\r\n\r\n    const [selectedFileIndex, setSelectedFileIndex] = useState(null);\r\n\r\n    useEffect(() => {\r\n        setSelectedFileIndex(null);\r\n    }, [files]);\r\n\r\n\r\n    if (!files || files.length === 0)\r\n        return null;\r\n\r\n    const fileListContainerStyle = {\r\n        width: '50%'\r\n    };\r\n\r\n    const fileListStyle = {\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)',\r\n        borderRadius: '15px',\r\n        padding: '5px 0',\r\n        maxHeight: '300px',\r\n        overflowY: 'auto'\r\n    };\r\n\r\n    const textStyle = {\r\n        padding: '10px 7px',\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        borderRadius: '7px',\r\n        cursor: 'pointer'\r\n    };\r\n\r\n    const selectedTextStyle = {\r\n        ...textStyle,\r\n        background: 'linear-gradient(90deg, rgba(187,0,0,1) 0%, rgba(193,76,76,1) 35%, rgba(0,0,0,1) 100%)'\r\n    };\r\n\r\n    const titleStyle = {\r\n        ...textStyle,\r\n        fontSize: '20px',\r\n        color: '#858585'\r\n    };\r\n\r\n\r\n    const getComponent = (file, index) => {\r\n        if (contentType === 'fileFromTorrent') {\r\n            return <FileFromTorrent\r\n                torrentLink={torrentLink}\r\n                file={file}\r\n                isSelected={index === selectedFileIndex}\r\n                onClick={() => setSelectedFileIndex(index)}\r\n                onPlayFileClick={() => onPlayFileClick(file)} />\r\n        }\r\n        else if (contentType === 'torrentFile') {\r\n            return <TorrentLink file={file} onClick={(torrentLink) => onFileClick(torrentLink)} />\r\n        }\r\n    };\r\n\r\n    const onMouseHover = (index, enter) => {\r\n        if (index !== selectedFileIndex) {\r\n            const element = document.getElementById('idfile_' + index);\r\n            element.style.background = enter ? '#362b2b' : '';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={fileListContainerStyle}>\r\n            <div style={titleStyle}>{listTitle}</div>\r\n            <div style={fileListStyle}>\r\n                {files.map((file, index) =>\r\n                    <div\r\n                        id={'idfile_' + index}\r\n                        key={index}\r\n                        onMouseEnter={() => { onMouseHover(index, true) }}\r\n                        onMouseLeave={() => { onMouseHover(index, false) }} style={index === selectedFileIndex ? selectedTextStyle : textStyle}>\r\n                        {getComponent(file, index)}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nfunction FileFromTorrent({ torrentLink, file, isSelected, onClick, onPlayFileClick }) {\r\n    let playButtons = null;\r\n    if (isSelected) {\r\n        playButtons = (\r\n            <div className=\"play-buttons-container\">\r\n                <PlayButton onClick={() => onPlayFileClick()} />\r\n                <PlayWithVLCButton videoUrl={AppServices.torrentApiService.buildStreamUrl(torrentLink, file)} />\r\n            </div>)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            onClick={() => onClick()}>\r\n            {file}\r\n            {playButtons}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction TorrentLink({ file, onClick }) {\r\n    const dateStyle = {\r\n        textAlign: 'left',\r\n        color: 'grey'\r\n    };\r\n\r\n    const formateDate = (fullDateTime) => {\r\n        const today = new Date();\r\n\r\n        const yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n        const date = new Date(fullDateTime);\r\n\r\n        let day = '';\r\n        if (yesterday.toDateString() === date.toDateString())\r\n            day = 'Yesterday';\r\n        else if (today.toDateString() === date.toDateString())\r\n            day = 'Today';\r\n        else {\r\n            let options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n            day = date.toLocaleString('en-US', options);\r\n        }\r\n\r\n        const time = date.toLocaleTimeString(navigator.language, {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            hour12: false\r\n        });\r\n        return day + ', ' + time;\r\n    }\r\n\r\n    return (\r\n        <div onClick={() => onClick(file.link)}>\r\n            <div style={dateStyle}>{formateDate(file.lastOpenedDateTime)}</div>\r\n            <div style={{ textAlign: 'left' }}>{file.link}</div>\r\n        </div>\r\n    );\r\n}","\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction Router({ components, activeComponentId }) {\r\n\r\n    const [activeComponent, setActiveComponent] = useState({});\r\n\r\n    useEffect(()=>{\r\n        var component = components.find(c => c.id === activeComponentId);\r\n        if(component) setActiveComponent(component);\r\n    },[components, activeComponentId]);\r\n\r\n    return <div style={activeComponent?.containerStyle}>{activeComponent?.render}</div>;\r\n}\r\n\r\nexport default Router;","import './App.css';\r\nimport NavBar from \"./components/navbar/NavBar\";\r\nimport SplashScreen from \"./components/SplashScreen\";\r\nimport ModalCategories from \"./components/modal/ModalCategories.js\";\r\n\r\nimport MediaListGenrePage from \"./pages/MediaListGenrePage\";\r\nimport MediaListPlatformPage from \"./pages/MediaListPlatformPage\";\r\nimport MediaPresentationPage from \"./pages/MediaPresentationPage\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport WatchedMediasPage from \"./pages/WatchedMediasPage\";\r\nimport BookmarkedMediasPage from \"./pages/BookmarkedMediasPage\";\r\nimport ResearchPage from \"./pages/ResearchPage\";\r\nimport TorrentLinkPage from \"./pages/TorrentLinkPage\";\r\n\r\nimport AppServices from './services/AppServices';\r\nimport Router from \"./components/Router\";\r\nimport { useState } from 'react';\r\n\r\n\r\nfunction App() {\r\n  AppServices.init();\r\n\r\n  const [selectedGenre, setSelectedGenre] = useState(null);\r\n  const [loadFullListGenrefromCache, setLoadFullListGenrefromCache] = useState(false);\r\n\r\n  const [selectedPlatform, setSelectedPlatform] = useState(null);\r\n  const [loadFullListPlatformfromCache, setLoadFullListPlatformfromCache] = useState(false);\r\n\r\n  const [loadResearchfromCache, setLoadResearchfromCache] = useState(false);\r\n\r\n  const [centerToLastClickedBookmark, setCenterToLastClickedBookmark] = useState(false);\r\n  const [centerToLastClickedWatchedMedia, setCenterToLastClickedWatchedMedia] = useState(false);\r\n\r\n  const [splashscreenVisible, setSplashscreenVisible] = useState(true);\r\n  const [homePageFailed, setHomePageFailed] = useState(false);\r\n\r\n  const [modalListCategoriesVisible, setModalListCategoriesVisible] = useState(false);\r\n\r\n  const [mediaId, setMediaId] = useState('');\r\n\r\n  const showComponent = (componentId) => {\r\n    setRouterPreviousComponentId(routerActiveComponentId);\r\n    setRouterActiveComponentId(componentId);\r\n  }\r\n\r\n  const showMediasFullListofGenre = (genre) => {\r\n    setSelectedGenre(genre);\r\n    setLoadFullListGenrefromCache(false);\r\n    showComponent(routerIds.mediasListGenrePage);\r\n  }\r\n\r\n  const showMediasFullListofPlatform = (platform) => {\r\n    setSelectedPlatform(platform);\r\n    setLoadFullListPlatformfromCache(false);\r\n    showComponent(routerIds.mediasListPlatformPage);\r\n  }\r\n\r\n  const showMediaFullPresentation = (mediaId) => {\r\n    setMediaId(mediaId);\r\n    showComponent(routerIds.mediaPresentationPage);\r\n  }\r\n\r\n  const goToPreviousComponent = () => {\r\n    showComponent(routerPreviousComponentId);\r\n  }\r\n\r\n  const onMediaFullPresentationClose = () => {\r\n    setLoadFullListGenrefromCache(true);\r\n    setLoadFullListPlatformfromCache(true);\r\n    setCenterToLastClickedBookmark(true);\r\n    setCenterToLastClickedWatchedMedia(true);\r\n    setLoadResearchfromCache(true);\r\n    goToPreviousComponent();\r\n  }\r\n\r\n  const routerIds = {\r\n    homePage: 'homePage',\r\n    mediasListGenrePage: 'mediasOfGenre',\r\n    mediasListPlatformPage: 'mediasOfPlatform',\r\n    mediaPresentationPage: 'mediaPresentationPage',\r\n    watchedMediasListPage: 'watchedMediasListPage',\r\n    bookmarkedMediasListPage: 'bookmarkedMediasListPage',\r\n    researchPage: 'researchPage',\r\n    torrentLinkPage: 'torrentLinkPage'\r\n  }\r\n\r\n  const router = {\r\n    components: [\r\n      {\r\n        id: routerIds.homePage,\r\n        render: (<HomePage\r\n          onReady={() => { setSplashscreenVisible(false) }}\r\n          onFail={() => { setHomePageFailed(true)}}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.mediasListGenrePage,\r\n        render: (<MediaListGenrePage\r\n          genre={selectedGenre}\r\n          loadFromCache={loadFullListGenrefromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n          containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediasListPlatformPage,\r\n        render: (<MediaListPlatformPage\r\n          platform={selectedPlatform}\r\n          loadFromCache={loadFullListPlatformfromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n          containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediaPresentationPage,\r\n        containerStyle: { height: '100%'},\r\n        render: (<MediaPresentationPage\r\n          mediaId={mediaId}\r\n          onCloseClick={() => onMediaFullPresentationClose()} />)\r\n      },\r\n      {\r\n        id: routerIds.watchedMediasListPage,\r\n        render: (<WatchedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedWatchedMedia}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.bookmarkedMediasListPage,\r\n        render: (<BookmarkedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedBookmark}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.researchPage,\r\n        render: (<ResearchPage loadFromCache={loadResearchfromCache}  onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.torrentLinkPage,\r\n        render: (<TorrentLinkPage />)\r\n      }\r\n    ]\r\n  };\r\n  const [routerActiveComponentId, setRouterActiveComponentId] = useState(routerIds.homePage);\r\n  const [routerPreviousComponentId, setRouterPreviousComponentId] = useState(routerIds.homePage);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <SplashScreen visible={splashscreenVisible} showErrorMessage={homePageFailed}/>\r\n      <ModalCategories\r\n        visible={modalListCategoriesVisible}\r\n        onGenreClick={(genre) => { setModalListCategoriesVisible(false); showMediasFullListofGenre(genre) }}\r\n        onPlatformClick={(platform) => { setModalListCategoriesVisible(false); showMediasFullListofPlatform(platform) }}\r\n        onCloseClick={() => setModalListCategoriesVisible(false)}\r\n      />\r\n      <NavBar\r\n        onSearchClick={() => { setLoadResearchfromCache(false); setRouterActiveComponentId(routerIds.researchPage) }}\r\n        onHomeClick={() => setRouterActiveComponentId(routerIds.homePage)}\r\n        onGenreMenuClick={() => setModalListCategoriesVisible(true)}\r\n        onWatchedMediasClick={() => { setCenterToLastClickedWatchedMedia(false); setRouterActiveComponentId(routerIds.watchedMediasListPage) }}\r\n        onBookmarkedMediasClick={() => { setCenterToLastClickedBookmark(false); setRouterActiveComponentId(routerIds.bookmarkedMediasListPage) }}\r\n        onTorrentLinkClick={()=>{ setRouterActiveComponentId(routerIds.torrentLinkPage) }}\r\n        onAppModeSwitch={()=> {setRouterActiveComponentId(routerIds.homePage)}}/>\r\n      <div className=\"app-content\">\r\n        <Router components={router.components} activeComponentId={routerActiveComponentId} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}
(this["webpackJsonpreact-streaming-client"]=this["webpackJsonpreact-streaming-client"]||[]).push([[0],{101:function(e,t,i){},102:function(e,t,i){"use strict";i.r(t);var n=i(0),s=i.n(n),r=i(11),c=i.n(r),l=(i(79),i(80),i(81),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARQAAAAlCAMAAAC0/+b3AAACdlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qNy/4AAAA0XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFxgaGxwdHh8gIiMkJSYnKCkqKywtLzAxMzQ3ODk7PT9AQUJDRUZHSElLTE1OT1JUVVZXWFlaW1xdXl9gYWJjZGVmaGlqa2xvcHFydHV2eHl6fH1+f4CCg4SGh4iKi42Oj5OUlZeYmZucnZ+hoqOkpaanqKmqq6ytrq+xsrO1uLm6u72+v8HCw8TFx8jJysvMzc7P0NHT1NbZ2tzd3uDh4uPk5ebn6Orr7O3u7/Dx8vP09fb3+Pn6+/z9/jaJQ6QAAAABYktHRNF50f8KAAAE2ElEQVRo3u2a6WNMVxTAz0xEQhASYxe7WCKaVBCEStrQVitVVbWFLqqIXWOX2lpp7TShpUVXiSpKS1AqsiCduf9RM/ecO+++ee+Nl8w1uR96vrx3z7nb+82ce8599wH8LzaSu4PLh/bWRWjNpOLGHY6yUWo1vELIif1ri4Y6D+6yP4AtXJfr/rEyyrlk2JjexQG2drZYVqIFYAlDmWbX9Yt+brvUjsq3maPclpplmU23SrMdpu6yP4BGrlviHkoe9pJnYxr0CG27ww1vo77egPKHFRwkXOYmfzZEBaVZfnrFow0UmEND5JvVA2pRvdCAwkqtrVejZRtEDYWxs0O1gQLlaKzxycq4c6g96ZGg+C3/8VFPcXpdVUBhdbO1gdLtBloPy8qPUHevF0hQWHV7c9O4C6h/DZRAYYFPdIECObhWsiJDNeYJqgrBBIWFTXopar+WVNMLHWW6VC0pk2Ts1DdLzv8bGqAkfHIu+1MOBdai+Z/+QpFYjZq9EAblcbpp3anjysZB0Qb9lFUPxQhzW9uHaijxF9F+xkuKTyncJIdDYee8RjNPBeo+VpALpR6iARrTNYECgykuF1O2FsB1dQJYoLAFlrh1ub2KDNFTQgOc9mgCRSQl+DN1u4mlTWAD5WEf0abn37g45mASFzWWzTTCFF2gwJeUQcU33x/A+6pEM5Tv8XIsLJSX8cI7JVFD8Z7CDiu0gZJyM7T6v4p3T0aDGcrYGrzOQO1LFLR5epNWGz0UGIFRMJCmCxQYh2GxKas3egX7AMKgpBVSlpcSVCb/haW3+I98himAAl9gl+9rAwXWYZ0rlXj91muBIhyGb5N2UorCl8VipgRKPmXR+kBpd15eTx9JuUcIiu8O/r+b9+fjMUDdD2a8MKzBgNJ/gIO4iFFJj3mntXL8cd3fc4ECQ+okKHPABgqQA/3escMVvHuD47wgpaKOaflIF/OkfKm3mzR/ZEygwFxjRNM+yIAiHGjDerwe4fYVTBWUY1g1SyMo8FVoq+VzgEIO1NTEL3d78H3SU2VQdmHVSTpBSSUHCpjfsUlQhANJ28W4KqYMyh6sOlknKPNpvO3gCEU4UFA+54pOTB0USt+yNYIyvB6rXe0cAQo5UNDHuttBOVjhIG5Ssmp5JBlK5bP7ez5QEn5hlL9BBCiGAxWAHZRopCfG+QavBUpiG+UpsIkedjVEhCIcaA8oh1KEXX0D2kCZjD8T+yG4J4TX5zlCQQf6s6t6KN9hVyu0geK7hXUahvFErrZusBMUKAiWpoJyKLTFDAzUBspRcp5F/HXkz4z9GO8EJehAO0E5lOTf7F4dtCWU94jJKb7v2GZ6TAuU7jXXuyiH4j1OU8jVBUo6ReMHfY0A489xggIFE0A1lCR6zWU6GmhTKAm/0oxm8uI+LFzr4gRFFjVQMi7RDOqH6AJFvB7dR+5Bi+5nMYLifeFgQGQ/RaAJlCk0pRsizOYF5DePLYIS4fBK3tKkCuWsxWvK7xnJuyVJaiGUMuuwL7cKio/2F/6JIVUpau73aTGUCMecVVIrh2NT6xFSC6HYSGNroHjEsr/Z0HXALyxYpTeWUB4Ugi5QFojTc3nkTPycgC2LIZTj/UAXKCMa6EhjjEm9nA6PR8cKSqX9l1ltAiVBxMKwT9riztL/5z/xk1pSPhmQ0AAAAABJRU5ErkJggg=="),a=i(54),o=i.n(a),d=i(50),u=i.n(d),b=i(53),j=i.n(b),h=i(52),v=i.n(h),m=i(36),O=i.n(m),g=i(55),p=i.n(g);var x={onAppModeChanged(e){const t="appModeChanged";this.modeChangedEvent||(this.modeChangedEvent=new Event(t)),document.addEventListener(t,(t=>{e&&e()}),!1)},modeChangedEvent:null,modes:[{label:"Films",urlKey:"movies",isActive:!0},{label:"Series",urlKey:"series",isActive:!1}],getActiveMode(){return this.modes.find((e=>e.isActive))},switchActiveMode(){this.modes.forEach((e=>{e.isActive=!e.isActive})),this.modeChangedEvent&&document.dispatchEvent(this.modeChangedEvent)},isSeriesMode(){return console.log("this.modes.filter(mode => mode.isActive)",this.modes.filter((e=>e.isActive))),"series"===this.modes.filter((e=>e.isActive))[0].urlKey}},f=i(1);var C=function(e){let{onSearchClick:t,onHomeClick:i,onGenreMenuClick:s,onWatchedMediasClick:r,onBookmarkedMediasClick:c,onTorrentLinkClick:a,onAppModeSwitch:d}=e;const[b,h]=Object(n.useState)([]);Object(n.useEffect)((()=>{h(x.modes)}),[]);const m={color:"white",width:"30px",height:"30px"};return Object(f.jsxs)("div",{className:"nav-bar-container",children:[Object(f.jsx)("div",{className:"nav-bar-left",children:b.map((e=>Object(f.jsx)("div",{className:"mode "+(e.isActive?"active":""),onClick:()=>{e.isActive||(()=>{x.switchActiveMode();const e=[...x.modes];h(e),d(x.getActiveMode())})()},children:e.label},e.label)))}),Object(f.jsx)("img",{className:"nav-bar-logo",alt:"",src:l}),Object(f.jsxs)("div",{className:"nav-bar-right",children:[Object(f.jsx)("div",{className:"nav-bar-btn",onClick:()=>i(),children:Object(f.jsx)(u.a,{style:m})}),Object(f.jsx)("div",{className:"nav-bar-btn",onClick:()=>r(),children:Object(f.jsx)(v.a,{style:m})}),Object(f.jsx)("div",{className:"nav-bar-btn",onClick:()=>c(),children:Object(f.jsx)(O.a,{style:m})}),Object(f.jsx)("div",{className:"nav-bar-btn",onClick:()=>s(),children:Object(f.jsx)(j.a,{style:m})}),Object(f.jsx)("div",{className:"nav-bar-btn",onClick:()=>t(),children:Object(f.jsx)(o.a,{style:m})}),Object(f.jsx)("div",{className:"nav-bar-btn",onClick:()=>a(),children:Object(f.jsx)(p.a,{style:m})})]})]})},y=(i(86),i(136));var k=function(e,t,i){const n={visibility:e?"visible":"hidden",opacity:e?"1":"0",transition:"all "+(t?t+"s":"0.5s")};return i&&(n.zIndex=e?i:"-1"),n};var S=function(e){let{position:t,color:i,size:s,visible:r,text:c}=e;const[l,a]=Object(n.useState)({}),[o,d]=Object(n.useState)();return Object(n.useEffect)((()=>{"center"===t&&a({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"})}),[t]),Object(n.useEffect)((()=>{d(c)}),[c]),Object(f.jsx)("div",{style:k(r),children:Object(f.jsxs)("div",{style:l,children:[Object(f.jsx)("div",{style:{color:"white",fontSize:"20px",fontWeigth:"bold"},children:o}),Object(f.jsx)(y.a,{style:{color:i,width:s,height:"auto"}})]})})};var N=function(e){let{visible:t,showErrorMessage:i}=e;return Object(f.jsxs)("div",{className:"splash-screen-container"+(t?"":" hidden"),children:[Object(f.jsx)("img",{alt:"",src:l}),Object(f.jsx)(S,{color:"white",size:"40px",visible:!i}),Object(f.jsx)("div",{className:"error-message",style:{display:i?"":"none"},children:"The application failed to load, try to relaunch it"})]})},M=(i(87),i(88),i(37)),w=i.n(M);var A=function(e){let{visible:t,content:i,onCloseClick:n}=e;return Object(f.jsx)("div",{style:k(t),className:"modal-window-container"+(t?" visible":""),children:Object(f.jsxs)("div",{className:"modal-window-content",children:[Object(f.jsx)("div",{className:"modal-window-close-btn",style:{display:n?"":"none"},onClick:()=>n(),children:Object(f.jsx)(w.a,{className:"close-cross"})}),i]})})};var E=class{constructor(){this._apiBaseUrl="http://localhost:5000/"}buildUrl(e){return this._apiBaseUrl+e}getRequest(e,t,i,n,s){const r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var e=i&&this.response?JSON.parse(this.response):this.response;n&&n(e)}else s&&s()},t&&t.length>0){e+="?";for(let i=0;i<t.length;i++){const n=t[i];e+=n.name+"="+n.value,i!==t.length-1&&(e+="&")}}r.open("GET",e,!0),r.send()}postRequest(e,t,i,n){const s=new XMLHttpRequest;s.onreadystatechange=function(){4===this.readyState&&(200===this.status?i&&i():n&&n())},s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(t)}putRequest(e,t,i){const n=new XMLHttpRequest;n.open("PUT",e,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t)),n.onreadystatechange=function(){4===this.readyState&&200===this.status&&Boolean(i)&&i()}}deleteRequest(e,t,i){var n=new XMLHttpRequest;n.open("DELETE",e,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t)),n.onreadystatechange=function(){4===this.readyState&&200===this.status&&i()}}};var T=class extends E{buildSearchUrl(e){return this.buildUrl(x.getActiveMode().urlKey+"/"+e)}getMediaGenres(e,t){var i=this.buildSearchUrl("genres");this.getRequest(i,[],!0,e,t)}getMediaPlatforms(e,t){var i=this.buildSearchUrl("platforms");this.getRequest(i,[],!0,e,t)}getPopularMediasByGenre(e,t,i){var n=this.buildSearchUrl("genre/"+e);this.getRequest(n,[],!0,t,i)}getMediasOfToday(e,t){var i=this.buildSearchUrl("mediasoftoday");this.getRequest(i,[],!0,e,t)}getMediasByGenre(e,t,i,n){var s=this.buildSearchUrl("genre/"+e+"/"+t);this.getRequest(s,[],!0,i,n)}getMediasByPlatform(e,t,i,n){var s=this.buildSearchUrl("platform/"+e+"/"+t);this.getRequest(s,[],!0,i,n)}getMediaDetails(e,t,i){var n=this.buildSearchUrl("details/"+e);this.getRequest(n,[],!0,t,i)}searchMedias(e,t,i){var n=this.buildSearchUrl("search"),s=[{name:"t",value:e}];this.getRequest(n,s,!0,t,i)}getPopularNetflixMedias(e,t){var i=this.buildSearchUrl("netflix");this.getRequest(i,[],!0,e,t)}getPopularDisneyPlusMedias(e,t){var i=this.buildSearchUrl("disneyplus");this.getRequest(i,[],!0,e,t)}getPopularAmazonPrimeMedias(e,t){var i=this.buildSearchUrl("amazonprime");this.getRequest(i,[],!0,e,t)}getPopularAppleTvMedias(e,t){var i=this.buildSearchUrl("appletv");this.getRequest(i,[],!0,e,t)}getPopularMedias(e,t){var i=this.buildSearchUrl("popular");this.getRequest(i,[],!0,e,t)}getRecommandedMedias(e,t){var i=this.buildSearchUrl("recommandations");this.getRequest(i,[],!0,e,t)}getSimilarMedias(e,t,i){var n=this.buildSearchUrl("similar/"+e);this.getRequest(n,[],!0,t,i)}getEpisodes(e,t,i,n){var s=this.buildSearchUrl("episodes/"+e+"/"+t);this.getRequest(s,[],!0,i,n)}};var U=class extends E{buildBookmarkUrl(e){return this.buildUrl(x.getActiveMode().urlKey+"/bookmarks/"+(e||""))}getBookmarkedMedias(e,t){this.getRequest(this.buildBookmarkUrl(),[],!0,e,t)}addBookmarkedMedia(e,t){this.putRequest(this.buildBookmarkUrl(),e,t)}deleteBookmarkedMedia(e,t){this.deleteRequest(this.buildBookmarkUrl(),e,t)}isMediaBookmarked(e,t,i){var n=[{name:"id",value:e}];this.getRequest(this.buildBookmarkUrl("exists"),n,!1,t,i)}};var P=class extends E{buildWatchedMediaUrl(e){return this.buildUrl(x.getActiveMode().urlKey+"/watchedmedia/"+(e||""))}getWatchedMedias(e,t){this.getRequest(this.buildWatchedMediaUrl(),[],!0,e,t)}getWatchedMedia(e,t,i,n,s){const r=[{name:"seasonNumber",value:t},{name:"episodeNumber",value:i}];this.getRequest(this.buildWatchedMediaUrl(e),r,!0,n,s)}getWatchedEpisodes(e,t,i,n){this.getRequest(this.buildWatchedMediaUrl(e+"/"+t),[],!0,i,n)}saveWacthedMedia(e,t,i,n,s,r){const c={...e};c.currentTime=t||0,c.totalDuration=i||0;const l=new URL(r);c.torrentUrl=window.atob(l.searchParams.get("base64Url")),"series"===x.getActiveMode().urlKey&&(c.seasonNumber=n,c.episodeNumber=s),this.putRequest(this.buildWatchedMediaUrl(),c)}};var L=class extends E{buildTorrentUrl(e){return this.buildUrl("torrent/"+(e||""))}buildStreamUrl(e,t,i,n){const s=window.btoa(e);return t?this.buildTorrentUrl("stream/file?base64Url="+s+"&fileName="+t):"series"===x.getActiveMode().urlKey?this.buildTorrentUrl("stream/series?base64Url="+s+"&seasonNumber="+i+"&episodeNumber="+n):this.buildTorrentUrl("stream/movies?base64Url="+s)}searchTorrents(e,t,i,n,s,r,c,l){var a=this.buildTorrentUrl(x.getActiveMode().urlKey),o=[{name:"mediaId",value:e},{name:"title",value:encodeURIComponent(t)},{name:"year",value:i},{name:"season",value:s},{name:"episode",value:r},{name:"imdbid",value:n}];this.getRequest(a,o,!0,c,l)}getDownloadState(e,t,i){var n=[{name:"base64TorrentUrl",value:new URL(e).searchParams.get("base64Url")}];this.getRequest(this.buildTorrentUrl("streamdownloadstate"),n,!0,t,i)}getTorrentFiles(e,t,i){var n=[{name:"base64torrentUrl",value:window.btoa(e)}];this.getRequest(this.buildTorrentUrl("files"),n,!0,t,i)}getTorrentHistory(e,t){this.getRequest(this.buildTorrentUrl("history"),null,!0,e,t)}};var R=class extends E{buildSubtitlesUrl(e){return this.buildUrl("subtitles/"+(e||""))}getAvailableSubtitles(e,t,i,n,s){var r=this.buildSubtitlesUrl(x.getActiveMode().urlKey),c=[{name:"imdbCode",value:e},{name:"seasonNumber",value:t},{name:"episodeNumber",value:i}];this.getRequest(r,c,!0,n,s)}getSubtitlesApiUrl(e){return this.buildSubtitlesUrl("?sourceUrl="+e)}};var I=class extends E{buildAppInfoUrl(e){return this.buildUrl("application/"+(e||""))}isDesktopApplication(e,t){if(this.isDesktopApp)e(this.isDesktopApp);else{const i=this;this.getRequest(this.buildAppInfoUrl("platform"),null,!0,(t=>{i.isDesktopApp=t.isDesktopApplication,e(t.isDesktopApplication)}),t)}}playWithVlc(e,t,i){var n=[{name:"streamUrl",value:encodeURIComponent(e)}];this.getRequest(this.buildAppInfoUrl("startvlc"),n,!1,t,i)}};var F={init(){this.searchMediaService=new T,this.bookmarkApiService=new U,this.watchedMediaApiService=new P,this.torrentApiService=new L,this.subtitlesApiService=new R,this.appInfoApiService=new I}};var q=function(e){let{visible:t,onCloseClick:i,onGenreClick:s,onPlatformClick:r}=e;const[c,l]=Object(n.useState)(!0),[a,o]=Object(n.useState)([]),[d,u]=Object(n.useState)([]),b=()=>{o([]),F.searchMediaService.getMediaGenres((e=>{e&&e.length>0&&o(e)})),F.searchMediaService.getMediaPlatforms((e=>{e&&e.length>0&&u(e)}))};return Object(n.useEffect)((()=>{b(),x.onAppModeChanged((()=>{b()}))}),[]),Object(n.useEffect)((()=>{l(!a||0===a.length||!d||0===d.length)}),[a,d]),Object(f.jsx)(A,{visible:t,content:Object(f.jsxs)("div",{className:"list-categories-view-container",children:[Object(f.jsx)(S,{color:"white",size:"60px",position:"center",visible:c}),Object(f.jsx)("h3",{className:"categorie-title",children:"Genres"}),Object(f.jsx)("div",{className:"list-categories",children:a.map((e=>Object(f.jsx)("div",{className:"genre",onClick:()=>s(e),children:e.name},e.id)))}),Object(f.jsx)("h3",{className:"categorie-title",children:"Platforms"}),Object(f.jsx)("div",{className:"list-categories",children:d.map((e=>Object(f.jsx)("div",{className:"genre",onClick:()=>r(e),children:e.name},e.id)))})]}),onCloseClick:()=>i()})},B=(i(49),i(44),i(31),i(38)),V=i.n(B);var z=function(e){let{rating:t,size:i}=e;const n={color:"white",fontSize:"small"===i?"15px":"20px",fontWeight:"bold",margin:"0 auto",backgroundColor:"#52525263",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",height:"small"===i?"35px":"50px",width:"small"===i?"35px":"50px"};return Object(f.jsx)("div",{style:n,children:t})};var D=function(e){let{media:t,onMediaClick:i,hoverEffect:s}=e;const[r,c]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{c(null===t||void 0===t?void 0:t.coverImageUrl)}),[t]),Boolean(null===t||void 0===t?void 0:t.coverImageUrl)?Object(f.jsx)("div",{style:k(r),children:Object(f.jsxs)("div",{className:"media-lite-presentation "+(s?"hover-effect":""),onClick:()=>{setTimeout((()=>{i&&i(null===t||void 0===t?void 0:t.id)}),150)},children:[Object(f.jsx)("div",{className:"media-lite-presentation-img",style:{backgroundImage:"url("+t.coverImageUrl+")"},children:Object(f.jsx)("div",{className:"rating",children:Object(f.jsx)(z,{rating:(o=t.rating,o?o.toString().replace(",","."):""),size:"small"})})}),Object(f.jsxs)("div",{className:"infos",children:[Object(f.jsx)("div",{className:"title",children:(l=t.title,a=25,l&&l.length>a?l.substring(0,a)+"...":l)}),Object(f.jsx)("div",{className:"year",children:t.year})]})]})}):null;var l,a,o};var W={cacheCollection:[],setCache(e,t){let i=this.getCache(e);i?i.data=t:this.cacheCollection.push({id:e,data:t})},getCache(e){return this.cacheCollection.find((t=>t.id===e))},clearCache(){this.cacheCollection=[]}};var H=function(e){let{categorie:t,searchOperation:i,loadFromCache:s,onMediaClick:r}=e;const[c,l]=Object(n.useState)([]),[a,o]=Object(n.useState)(0),[d,u]=Object(n.useState)(!1),[b,j]=Object(n.useState)(!1),h=()=>{u(!0),j(!1),i(t.id,a,(e=>{u(!1),e&&e.length>0&&(j(!0),l(1===a?e:c.concat(e)))}),(()=>u(!1)))},v=e=>"categorie"+e;Object(n.useEffect)((()=>{if(s){const e=W.getCache(v(t.id));o(e.data.pageIndex)}else W.setCache(v(t.id),null),l([]),o(1),1===a&&h()}),[t.id]),Object(n.useEffect)((()=>{if(a>0){const e=W.getCache(v(t.id));e&&e.data?l(e.data.medias):h()}}),[a]),Object(n.useEffect)((()=>{if(c&&c.length>0)if(s){const e=W.getCache(v(t.id));e&&e.data&&(j(!0),m(e.data.mediaElementId),W.setCache(v(t.id),null))}else 1===a&&m("medialite0")}),[c]);const m=e=>{var t=document.getElementById(e);t&&t.scrollIntoView({block:"nearest",inline:"nearest"})};return Object(f.jsxs)("div",{className:"medias-list-by-categorie-container",children:[Object(f.jsxs)("div",{className:"medias-list-by-categorie-header",children:[Object(f.jsx)("div",{className:"medias-list-categorie",children:t.name}),Object(f.jsx)(S,{size:"30px",color:"white",visible:d})]}),Object(f.jsx)("div",{className:"medias-list-container full",children:Object(f.jsxs)("div",{className:"medias-list wrap-content",children:[c.map(((e,i)=>Object(f.jsx)("div",{id:"medialite"+i,children:Object(f.jsx)(D,{media:e,hoverEffect:!0,onMediaClick:e=>((e,i)=>{const n={medias:c,pageIndex:a,mediaElementId:i};W.setCache(v(t.id),n),r(e)})(e,"medialite"+i)})},i))),Object(f.jsx)("div",{className:"medias-list-more",children:Object(f.jsx)("div",{className:"round-btn grey",style:{visibility:b?"visible":"hidden"},onClick:()=>{b&&o(a+1)},children:Object(f.jsx)(V.a,{style:{width:"60px",height:"60px",color:"white",margin:"auto"}})})})]})})]})};var Q=function(e){let{genre:t,loadFromCache:i,onMediaClick:n}=e;return Object(f.jsx)(H,{categorie:t,loadFromCache:i,searchOperation:(e,t,i,n)=>F.searchMediaService.getMediasByGenre(e,t,i,n),onMediaClick:e=>n(e)})};var G=function(e){let{platform:t,loadFromCache:i,onMediaClick:n}=e;return Object(f.jsx)(H,{categorie:t,loadFromCache:i,searchOperation:(e,t,i,n)=>F.searchMediaService.getMediasByPlatform(e,t,i,n),onMediaClick:e=>n(e)})},K=(i(89),i(71)),J=i.n(K);var Y=function(e){let{visible:t,youtubeTrailerUrl:i,onCloseClick:n}=e;const s={width:"800px",height:"500px",margin:"auto 0",backgroundColor:"black",border:"none",boxShadow:"1px 1px 14px 7px #101010c9"};return Object(f.jsx)(A,{visible:t,content:Object(f.jsx)("iframe",{style:s,src:t?i:""}),onCloseClick:()=>n()})};var X=function(e){let t,{title:i,content:n,justify:s}=e;t="left"===s?"flex-start":"center";const r={fontSize:"18px",fontWeight:"500",display:n?"flex":"none",alignItems:"center",justifyContent:t,margin:"10px 10px 10px 0"};return Object(f.jsxs)("div",{style:r,children:[Object(f.jsx)("div",{style:{color:"white",marginRight:"15px"},children:i}),Object(f.jsx)("div",{style:{color:"#959595",display:"flex"},children:n})]})};var Z=function(e){let{value:t,width:i}=e;const n={width:i,backgroundColor:"#423737",height:"5px",borderRadius:"2px"},s={width:t+"%",backgroundColor:"#e91919",height:"100%",borderRadius:"2px"};return Object(f.jsx)("div",{style:n,children:Object(f.jsx)("div",{style:s})})};var _=function(e){let{text:t,center:i}=e;const n={fontSize:"18px",fontWeight:"500",color:"#959595",textAlign:i?"center":"left",margin:"10px 0"};return Object(f.jsx)("div",{style:n,children:t})};var $=function(e){let{text:t,visible:i}=e;return!1===i?null:Object(f.jsx)("p",{style:{fontSize:"17px",fontWeight:"500",color:"white"},children:t})};var ee=function(e){let{color:t,content:i,centered:s,rounded:r,width:c,onClick:l}=e;const[a,o]=Object(n.useState)(!1);return Object(f.jsxs)("div",{className:(()=>{let e="standard-button";return t&&(e+=" "+t),s&&(e+=" center"),r&&(e+=" rounded"),e})(),style:c?{width:c}:null,onClick:()=>(o(!0),void setTimeout((()=>{o(!1),l()}),300)),children:[Object(f.jsx)("div",{className:"ripple-effect "+(a?"visible":"")}),i]})},te=i(56),ie=i.n(te);function ne(e,t){Object(n.useEffect)((()=>{const i=i=>{e.current&&!e.current.contains(i.target)&&t(i)};return document.addEventListener("mousedown",i),document.addEventListener("touchstart",i),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i)}}),[e,t])}var se=function(e){let{values:t,width:i,onValueChanged:s,textAlignement:r}=e;const[c,l]=Object(n.useState)(!1),[a,o]=Object(n.useState)(""),[d,u]=Object(n.useState)([]),b=Object(n.useRef)(null);Object(n.useEffect)((()=>{j(t)&&(u(t),o(t[0]))}),[t]),ne(b,(()=>l(!1)));const j=e=>{if(d.length!==e.length)return!0;let t=0;return d.forEach(((i,n)=>{e[n]!==i&&(t+=1)})),t>0},h={display:c?"block":"none",position:"absolute",bottom:"0",left:"50%",transform:"translate(-50%, 100%)",borderRadius:"5px",boxShadow:"rgb(0 0 0 / 91%) 0px 19px 20px 8px, rgb(0 0 0) 0px 15px 20px 0px",backgroundColor:"#141414",color:"white",fontSize:"16px",fontWeight:"500",maxHeight:"100px",width:i,overflowY:"scroll",zIndex:"5",textAlign:r||"left"},v={display:"flex",alignItems:"center",justifyContent:"center",width:i},m=Object(f.jsxs)("div",{style:v,children:[Object(f.jsx)("div",{children:a}),Object(f.jsx)(ie.a,{})]}),O={padding:"5px",cursor:"pointer"};return Object(f.jsxs)("div",{ref:b,style:{position:"relative"},children:[Object(f.jsx)(ee,{color:"red",content:m,width:i,onClick:()=>l(!c)}),Object(f.jsx)("div",{style:h,children:d.map(((e,i)=>Object(f.jsx)("div",{style:O,onMouseOver:e=>{e.target.style.backgroundColor="#959595"},onMouseOut:e=>{e.target.style.backgroundColor=""},onClick:()=>{return e=i,l(!1),o(t[e]),void s(e);var e},children:e},e)))})]})};function re(e){const t=e/60,i=Math.trunc(t),n=Math.trunc(60*(t-i));let s="";return i>0&&(s+=i+"h "),s+=(n<10?"0"+n:n)+"min",s}i(90);var ce=function(e){let{visible:t,serieId:i,numberOfSeasons:s,onEpisodeSelected:r,onCloseClick:c}=e;const[l,a]=Object(n.useState)(1),[o,d]=Object(n.useState)([]),[u,b]=Object(n.useState)(!1),[j,h]=Object(n.useState)(!1),v=Object(n.useRef)(null),m=[];for(let n=1;n<=s;n++)m.push("Season "+n);Object(n.useEffect)((()=>{i&&(d([]),b(!0),h(!1),F.searchMediaService.getEpisodes(i,l,(e=>{v.current&&(v.current.scrollTop=0),b(!1),e&&e.length>0?O(e,l):h(!0)}),(()=>{b(!1),h(!0)})))}),[i,l]);const O=(e,t)=>{F.watchedMediaApiService.getWatchedEpisodes(i,t,(t=>{const i=[...e];t&&t.length>0&&t.forEach((e=>{const t=i.find((t=>t.episodeNumber===e.episodeNumber));t&&(t.progression=e.currentTime/e.totalDuration)})),d(i)}),(()=>{d(e)}))};return Object(f.jsx)(A,{visible:t,content:Object(f.jsxs)("div",{className:"modal-episode-selector-container",children:[Object(f.jsx)("div",{className:"season-selector-container",children:Object(f.jsx)(se,{values:m,width:"120px",textAlignement:"center",onValueChanged:e=>a(e+1)})}),Object(f.jsxs)("div",{ref:v,className:"episode-list-container",children:[Object(f.jsxs)("div",{className:"loading-container",children:[Object(f.jsx)(S,{color:"white",size:"50px",visible:u}),Object(f.jsx)($,{text:"No episodes found",visible:j})]}),Object(f.jsx)("div",{style:k(o&&o.length>0),children:o.map((e=>Object(f.jsx)(le,{episode:e,onClick:()=>r(l,e.episodeNumber)},e.episodeNumber)))})]})]}),onCloseClick:()=>c()})};function le(e){let{episode:t,onClick:i}=e;return Object(f.jsxs)("div",{className:"episode-container",onClick:()=>i(),children:[Object(f.jsxs)("div",{style:{margin:"auto 0"},children:[Object(f.jsx)("img",{src:t.imagePath}),t.progression?Object(f.jsx)(Z,{value:100*t.progression,width:"98%"}):null]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(X,{title:t.episodeNumber+"."+t.name,content:re(t.runTime),justify:"left"}),Object(f.jsx)(_,{text:t.overview.substring(0,300)})]})]})}i(91);var ae=function(e){let{visible:t,torrents:i,onQualityClick:s}=e;const[r,c]=Object(n.useState)(null);return Object(n.useEffect)((()=>{if((null===i||void 0===i?void 0:i.length)>0){const e=[];[...new Set(i.map((e=>e.languageVersion)))].forEach((t=>{const n=i.filter((e=>e.languageVersion===t)).sort(((e,t)=>{const[i,n]=[e.quality.toLowerCase().trim(),t.quality.toLowerCase().trim()];return i===n?0:i<n?-1:1}));e.push({languageVersion:t,torrents:n})}));const t=e=>{const t=i.findIndex((t=>t.downloadUrl===e.downloadUrl)),n=i.slice(0,t).filter((t=>t.quality===e.quality)).length;return n>0?"".concat(e.quality," (").concat(n,")"):e.quality},n=Object(f.jsx)("div",{className:"modal-version-quality-container",children:e.map(((e,i)=>Object(f.jsxs)("div",{className:"version-column",children:[Object(f.jsx)("div",{className:"version-name",children:e.languageVersion}),Object(f.jsx)("div",{className:"qualities-list",children:e.torrents.map(((e,i)=>Object(f.jsx)("div",{className:"quality"+(e.selected?" selected":""),onClick:()=>s(e),children:t(e)},i)))})]},i)))});c(n)}}),[i]),Object(f.jsx)(A,{visible:t,content:r,onCloseClick:()=>(()=>{const e=i.find((e=>e.selected));s(e)})()})};i(92),i(93);var oe=function(e){let{videoCurrentTime:t,urlSource:i,size:s,subtitlesAdjustTime:r}=e;const[c,l]=Object(n.useState)(""),[a,o]=Object(n.useState)([]),[d,u]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{if(i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&this.responseText&&o(JSON.parse(this.response))},e.open("GET",i,!0),e.send()}return()=>{o([]),l("")}}),[i]),Object(n.useEffect)((()=>{t&&(e=>{if(a&&0!==a.length){var t=a.find((t=>t.startTime+r<=e&&e<=t.endTime+r));if(null!==t&&void 0!==t&&t.text){var i=t.text;u(!1),(i.includes("<i>")||i.includes("</i>"))&&(u(!0),i=i.replace("<i>","").replace("</i>","")),l(i)}else l("")}})(t)}),[t,a,r]),Object(f.jsx)("div",{className:"video-player-subtitles",style:{fontSize:s+"px",fontStyle:d?"italic":""},children:c})};var de=function(e){let{value:t,width:i,height:s,progressColor:r,cursorColor:c,tooltip:l,onCursorMoved:a,onCursorEndMove:o,onMouseOverSlider:d}=e;const[u,b]=Object(n.useState)(0),[j,h]=Object(n.useState)(!1),v=(e,t)=>e<t.left?0:e>t.right?100:100*(e-t.left)/(t.right-t.left),m=e=>{var t=v(e.clientX,e.target.parentElement.getBoundingClientRect());b(t),a&&a(t)},O=e=>{if(o){var t=v(e.clientX,e.target.parentElement.getBoundingClientRect());o(t)}document.removeEventListener("mouseup",O),document.removeEventListener("mousemove",m)};return Object(n.useEffect)((()=>{b(t)}),[t]),Object(n.useEffect)((()=>{l&&h(!0)}),[l]),Object(f.jsxs)("div",{className:"video-player-slider-container",style:{width:i,height:s},onClick:e=>(e=>{var t=v(e.clientX,e.target.parentElement.getBoundingClientRect());b(t),o&&o(t)})(e),onMouseMove:e=>(e=>{var t=v(e.clientX,e.target.parentElement.getBoundingClientRect());d&&d(t)})(e),onMouseLeave:()=>{h(!1)},children:[Object(f.jsx)("div",{className:"complete-part",style:{width:u+"%",backgroundColor:r}}),Object(f.jsx)("div",{className:"remaining-part",style:{width:100-u+"%"}}),Object(f.jsx)("div",{className:"cursor",style:{left:u+"%",backgroundColor:c},onMouseDown:()=>(document.addEventListener("mousemove",m),void document.addEventListener("mouseup",O))}),Object(f.jsx)("div",{className:"tooltip",style:{left:(null===l||void 0===l?void 0:l.position)+"%",display:j?"":"none"},children:null===l||void 0===l?void 0:l.text})]})};var ue=function(e){let{videoDuration:t,videoCurrentTime:i,onTimeChanged:s}=e;const[r,c]=Object(n.useState)("00:00"),[l,a]=Object(n.useState)("00:00"),[o,d]=Object(n.useState)(0),[u,b]=Object(n.useState)(null),[j,h]=Object(n.useState)(0),v=e=>{let t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=Math.floor(e-3600*t-60*i),s="";return t>0&&(s=t<10?"0"+t:t,s+=":"),s+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)};return Object(n.useEffect)((()=>{var e;i&&(c(v(e=i)),a(v(t-e)),d(j&&j>0?100*e/j:0))}),[i]),Object(n.useEffect)((()=>{t?(h(t),a(v(t))):h(0)}),[t]),Object(f.jsxs)("div",{className:"video-time-controller-container",children:[Object(f.jsx)("div",{className:"video-time-label",children:r}),Object(f.jsx)(de,{value:o,onCursorEndMove:e=>(e=>{if(j&&j>0){var t=Math.floor(e*j/100);c(v(t)),s(t)}})(e),onMouseOverSlider:e=>(e=>{j&&j>0&&b({text:v(Math.floor(e*j/100)),position:e})})(e),tooltip:u,progressColor:"#ed0f0f",cursorColor:"#b59e9e"}),Object(f.jsx)("div",{className:"video-time-label",children:l})]})},be=i(18),je=i.n(be),he=i(39),ve=i.n(he),me=i(59),Oe=i.n(me),ge=i(60),pe=i.n(ge),xe=i(58),fe=i.n(xe),Ce=i(57),ye=i.n(Ce);var ke=function(e){let{videoIsPlaying:t,onPlayClick:i,onPauseClick:s,onVolumeChanged:r,onPlayBackwardClick:c,onPlayForwardClick:l}=e;const[a,o]=Object(n.useState)(!0);return Object(n.useEffect)((()=>{o(!t)}),[t]),Object(f.jsxs)("div",{className:"controls-group",children:[Object(f.jsx)(je.a,{className:"icon",style:{display:a?"":"none"},onClick:()=>i()}),Object(f.jsx)(ve.a,{className:"icon",style:{display:a?"none":""},onClick:()=>s()}),Object(f.jsx)(Se,{onVolumeChanged:e=>r(e)}),Object(f.jsx)(ye.a,{className:"icon",onClick:()=>c()}),Object(f.jsx)(fe.a,{className:"icon",onClick:()=>l()})]})};function Se(e){let{onVolumeChanged:t}=e;const i=Object(n.useRef)(0),[s,r]=Object(n.useState)(70),c=e=>{i.current=e,t(e/100)};return Object(n.useEffect)((()=>{c(70);const e=e=>{38===e.keyCode&&i.current<100?c(i.current+10):40===e.keyCode&&i.current>0&&c(i.current-10)};return document.addEventListener("keyup",e,!1),()=>{document.removeEventListener("keyup",e)}}),[]),Object(f.jsxs)("div",{className:"video-volume-controller",children:[Object(f.jsx)(Oe.a,{className:"icon",onClick:()=>{r(i.current),c(0)},style:{display:i.current>0?"":"none"}}),Object(f.jsx)(pe.a,{className:"icon",onClick:()=>c(s),style:{display:i.current>0?"none":""}}),Object(f.jsx)(de,{value:i.current,onCursorMoved:e=>c(e),onCursorEndMove:e=>c(e),width:"120px",height:"4px"})]})}var Ne=i(62),Me=i.n(Ne),we=i(61),Ae=i.n(we),Ee=i(63),Te=i.n(Ee),Ue=i(64),Pe=i.n(Ue),Le=i(46),Re=i.n(Le),Ie=i(65),Fe=i.n(Ie);function qe(e){let{options:t,icon:i,onOptionChanged:s}=e;const[r,c]=Object(n.useState)([]),[l,a]=Object(n.useState)([]),[o,d]=Object(n.useState)(!1),[u,b]=Object(n.useState)(!1),[j,h]=Object(n.useState)(null),[v,m]=Object(n.useState)(null),O=(e,t)=>{var i;const n=r.find((e=>e.selected)),l=null===e||void 0===e||null===(i=e.subOptions)||void 0===i?void 0:i.find((e=>e.selected));if((null===e||void 0===e||!e.subOptions||t)&&(null===e||void 0===e||!e.subOptions||(null===l||void 0===l?void 0:l.label)!==(null===t||void 0===t?void 0:t.label))&&(null!==e&&void 0!==e&&e.subOptions||(null===n||void 0===n?void 0:n.label)!==e.label)){var a=[];r.forEach((i=>{var n={label:i.label,selected:i.label===e.label,data:i.data},s=[];i.subOptions&&(i.subOptions.forEach((e=>{var i={label:e.label,data:e.data,selected:e.label===(null===t||void 0===t?void 0:t.label)};s.push(i)})),n.subOptions=s),a.push(n)})),c(a),d(!1),b(!1);var o=a.find((e=>e.selected));o.subOptions?s(o.subOptions.find((e=>e.selected))):s(o)}};return Object(n.useEffect)((()=>{t&&c(t)}),[t]),Object(n.useEffect)((()=>{j&&!j.subOptions&&O(j,null)}),[j]),Object(n.useEffect)((()=>{j&&v&&O(j,v)}),[v]),Object(f.jsxs)("div",{className:"video-options-container",onMouseLeave:()=>{d(!1),b(!1)},children:[Object(f.jsx)("div",{className:"video-options-menu "+(o?"":"hidden"),onMouseEnter:()=>{b(!0)},children:r.map((e=>(e=>Object(f.jsx)("div",{className:"option "+(e.selected?"selected":""),onClick:()=>{e.subOptions||h(e)},onMouseEnter:()=>{e.subOptions&&(h(e),a(e&&e.subOptions?e.subOptions:[]))},children:e.label},e.label))(e)))}),Object(f.jsx)("div",{className:"video-options-menu suboptions "+(u&&l&&l.length>0?"":"hidden"),onMouseLeave:()=>{b(!1)},children:l.map((e=>(e=>Object(f.jsx)("div",{className:"option "+(e.selected?"selected":""),onClick:()=>m(e),children:e.label},e.label))(e)))}),Object(f.jsx)(Be,{icon:i,onClick:()=>d(!o)})]})}function Be(e){let{icon:t,hide:i,onClick:n}=e;return Object(f.jsx)("div",{className:"video-options-btn",style:{display:i?"none":""},onClick:()=>n(),children:t})}var Ve=function(e){let{subtitlesOptions:t,qualityOptions:i,onSubtitleSizeChange:s,onSubtitlesChange:r,onAdjustSubtitleTimeChange:c,onVideoQualityChange:l,isFullScreen:a,onFullScreenStateChanged:o}=e;const[d,u]=Object(n.useState)(!1),b=e=>{o(e)};return Object(n.useEffect)((()=>{u(a)}),[a]),Object(f.jsxs)("div",{className:"controls-group",children:[Object(f.jsxs)("div",{className:"controls-sub-group",children:[Object(f.jsx)(qe,{options:t,icon:Object(f.jsx)(Ae.a,{className:"icon"}),onOptionChanged:e=>{var t;return r(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.url?e.data.url:"")}}),Object(f.jsx)(ze,{onAdjustSubtitleTimeChange:e=>c(e)}),Object(f.jsx)(Be,{icon:Object(f.jsx)(Re.a,{className:"icon big"}),onClick:()=>s(2)}),Object(f.jsx)(Be,{icon:Object(f.jsx)(Re.a,{className:"icon small"}),onClick:()=>s(-2)})]}),Object(f.jsx)(qe,{options:i,icon:Object(f.jsx)(Me.a,{className:"icon"}),onOptionChanged:e=>{var t;return l(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.url?e.data.url:"")}}),Object(f.jsx)(Be,{icon:Object(f.jsx)(Te.a,{className:"icon big"}),hide:d,onClick:()=>b(!0)}),Object(f.jsx)(Be,{icon:Object(f.jsx)(Pe.a,{className:"icon big"}),hide:!d,onClick:()=>b(!1)})]})};function ze(e){let{onAdjustSubtitleTimeChange:t}=e;const[i,s]=Object(n.useState)(!1),r=Object(n.useRef)(null);return ne(r,(()=>s(!1))),Object(f.jsxs)("div",{ref:r,className:"adjust-subtitle-time-container",children:[Object(f.jsxs)("div",{className:"video-options-menu"+(i?"":" hidden"),children:[Object(f.jsx)("div",{className:"label",children:"Adj. Sub."}),Object(f.jsxs)("div",{className:"adjust-subtitle-time-input-container",children:[Object(f.jsx)("input",{type:"number",step:"0.01",onChange:e=>t(e.target.valueAsNumber)}),Object(f.jsx)("span",{className:"label",children:" s"})]})]}),Object(f.jsx)(Be,{icon:Object(f.jsx)(Fe.a,{className:"icon"}),onClick:()=>s(!i)})]})}var De=function(e){let{videoIsPlaying:t,onPlayClick:i,onPauseClick:n,onVolumeChanged:s,onPlayBackwardClick:r,onPlayForwardClick:c,videoSubtitlesOptions:l,videoQualitiesOptions:a,onSubtitlesChange:o,onSubtitleSizeChange:d,onAdjustSubtitleTimeChange:u,onVideoQualityChange:b,isFullScreen:j,onFullScreenStateChanged:h}=e;return Object(f.jsxs)("div",{className:"video-player-controls",children:[Object(f.jsx)(ke,{videoIsPlaying:t,onPlayClick:()=>i(),onPauseClick:()=>n(),onVolumeChanged:e=>s(e),onPlayBackwardClick:()=>r(),onPlayForwardClick:()=>c()}),Object(f.jsx)(Ve,{subtitlesOptions:l,qualityOptions:a,onSubtitleSizeChange:e=>d(e),onSubtitlesChange:e=>o(e),onAdjustSubtitleTimeChange:e=>u(e),onVideoQualityChange:e=>b(e),isFullScreen:j,onFullScreenStateChanged:e=>h(e)})]})};var We=function(e){var t;let{videoQualitiesOptions:i,videoSubtitlesOptions:s,onWatchedTimeUpdate:r,videoTime:c}=e;const l=Object(n.useRef)(null),a=Object(n.useRef)(null),o=Object(n.useRef)(0),[d,u]=Object(n.useState)(!1),[b,j]=Object(n.useState)(0),[h,v]=Object(n.useState)(),m=Object(n.useRef)(!1),[O,g]=Object(n.useState)("Loading"),[p,x]=Object(n.useState)(""),[C,y]=Object(n.useState)(!1),[N,M]=Object(n.useState)(!1),[w,A]=Object(n.useState)(""),[E,T]=Object(n.useState)(30),[U,P]=Object(n.useState)(0),[L,R]=Object(n.useState)(!1),I=Object(n.useRef)(0),q=e=>{m.current&&l.current&&F.torrentApiService.getDownloadState(e,(t=>{var i;decodeURIComponent(e)===decodeURIComponent(null===(i=l.current)||void 0===i?void 0:i.src)&&(t.error?(m.current=!1,v(t.message)):(g(t.message?t.message:"Loading"),setTimeout((()=>{q(e)}),3e3)))}))},B=e=>{var t=l.current.currentTime;x(e),l.current.autoplay=!l.current.paused,l.current.load(),l.current.currentTime=t,j(t),y(!0),m.current=!0,v(""),q(e)},V=e=>{l.current.currentTime=e},z=()=>{R(!0),a.current.style.cursor="auto",I.current=Date.now();setTimeout((()=>{null!==a&&void 0!==a&&a.current&&Date.now()>I.current+3e3&&(R(!1),a.current.style.cursor="none")}),3500)},D=()=>{null!==l&&void 0!==l&&l.current&&l.current.play()},W=()=>{null!==l&&void 0!==l&&l.current&&l.current.pause()};return Object(n.useEffect)((()=>(a.current.addEventListener("mousemove",z),()=>{null!==a&&void 0!==a&&a.current&&a.current.removeEventListener("mousemove",z)})),[a]),Object(n.useEffect)((()=>{if(!Boolean(null===l||void 0===l?void 0:l.current))return;const e=e=>{var t;null!==l&&void 0!==l&&null!==(t=l.current)&&void 0!==t&&t.attributes.src.value&&(v(h||"An error occured"),y(!1))};l.current.addEventListener("error",e,!0);const t=()=>{m.current=!1,g(""),y(!1)};l.current.addEventListener("canplay",t,!0);l.current.addEventListener("playing",(()=>{t(),M(!0)}),!0);const i=()=>{M(!1)};l.current.addEventListener("pause",i,!0);const n=()=>{y(!0)};l.current.addEventListener("waiting",n,!0);const s=e=>{var t;if(null!==(t=l.current)&&void 0!==t&&t.currentTime){var i,n;j(null===(i=l.current)||void 0===i?void 0:i.currentTime);let e=Math.round(null===(n=l.current)||void 0===n?void 0:n.currentTime);e-o.current>10&&(o.current=e,r(l.current.currentTime,l.current.duration,l.current.src))}};return l.current.addEventListener("timeupdate",s),()=>{null!==l&&void 0!==l&&l.current&&(l.current.removeEventListener("error",e),l.current.removeEventListener("playing",t),l.current.removeEventListener("canplay",t),l.current.removeEventListener("waiting",n),l.current.removeEventListener("pause",i),l.current.removeEventListener("timeupdate",s))}}),[l]),Object(n.useEffect)((()=>{const e=e=>{u(document.fullscreenElement)},t=e=>{var t,i;null!==l&&void 0!==l&&l.current&&(z(),32===e.keyCode?l.current.paused?D():W():37===e.keyCode?V((null===(t=l.current)||void 0===t?void 0:t.currentTime)-10):39===e.keyCode&&V((null===(i=l.current)||void 0===i?void 0:i.currentTime)+10))};return a.current&&(a.current.addEventListener("fullscreenchange",e),document.addEventListener("keyup",t,!1)),()=>{a.current&&(document.removeEventListener("keyup",t),a.current.removeEventListener("fullscreenchange",e))}}),[]),Object(n.useEffect)((()=>{if(i){var e;const t=i.find((e=>e.selected));null!==t&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.url&&B(t.data.url)}}),[i]),Object(n.useEffect)((()=>{c>0&&null!==l&&void 0!==l&&l.current&&(l.current.currentTime=c)}),[c]),Object(f.jsxs)("div",{ref:a,className:"video-player-content",children:[Object(f.jsx)(S,{color:"white",size:"80px",position:"center",visible:p&&C,text:O}),Object(f.jsx)("div",{className:"video-player-error-message",style:{display:h?"":"none"},children:h}),Object(f.jsx)("video",{ref:l,className:"video-player",src:p}),Object(f.jsxs)("div",{className:"video-player-bottom",children:[Object(f.jsx)(oe,{videoCurrentTime:b,urlSource:w,size:E,subtitlesAdjustTime:U}),Object(f.jsxs)("div",{className:"video-player-controls-container",style:k(L),children:[Object(f.jsx)(ue,{videoDuration:null===(t=l.current)||void 0===t?void 0:t.duration,videoCurrentTime:b,onTimeChanged:e=>V(e)}),Object(f.jsx)(De,{videoIsPlaying:N,onPlayClick:()=>D(),onPauseClick:()=>W(),onVolumeChanged:e=>(e=>{null!==l&&void 0!==l&&l.current&&(l.current.volume=e)})(e),onPlayBackwardClick:()=>V(b-10),onPlayForwardClick:()=>V(b+10),videoSubtitlesOptions:s,videoQualitiesOptions:i,onSubtitleSizeChange:e=>T(E+e<=60&&E+e>=20?E+e:E),onSubtitlesChange:e=>A(e||""),onAdjustSubtitleTimeChange:e=>P(e||0),onVideoQualityChange:e=>B(e),isFullScreen:d,onFullScreenStateChanged:e=>(e=>{if(e){if(!a.current)return;a.current.requestFullscreen?a.current.requestFullscreen():a.current.mozRequestFullScreen?a.current.mozRequestFullScreen():a.current.webkitRequestFullscreen?a.current.webkitRequestFullscreen():a.current.msRequestFullscreen&&a.current.msRequestFullscreen()}else document.exitFullscreen()})(e)})]})]})]})};function He(e){let{sources:t,subtitles:i,visible:s,onCloseClick:r,onWatchedTimeUpdate:c,goToTime:l,mediaDetails:a}=e;const[o,d]=Object(n.useState)([]),[u,b]=Object(n.useState)([]),[j,h]=Object(n.useState)(!0),[v,m]=Object(n.useState)(0),[O,g]=Object(n.useState)(!1),[p,C]=Object(n.useState)(!1);Object(n.useEffect)((()=>{s&&F.appInfoApiService.isDesktopApplication((e=>{if(g(e),e){const e={sources:t.map((e=>({quality:e.quality.trim(),selected:e.selected,url:F.torrentApiService.buildStreamUrl(e.downloadUrl,e.fileName,e.seasonNumber,e.episodeNumber)}))),subtitles:null!==i&&void 0!==i?i:[],resumeToTime:l,watchedMedia:a&&{title:a.title,id:a.id,genres:a.genres,coverImageUrl:a.coverImageUrl,rating:a.rating,totalDuration:60*a.duration,synopsis:a.synopsis,year:a.year,episodeNumber:t[0].episodeNumber,seasonNumber:t[0].seasonNumber},mediaType:x.getActiveMode().urlKey};var n=JSON.stringify(e);window.chrome?(C(!0),window.chrome.webview.addEventListener("message",y),window.chrome.webview.postMessage(n)):window.webkit&&(window.webkit.messageHandlers.medflixWebViewHandler.postMessage(n),r())}}))}),[s]),Object(n.useEffect)((()=>()=>{O&&window.chrome&&window.chrome.webview.removeEventListener("message",y)}),[]);const y=()=>{C(!1),r()};Object(n.useEffect)((()=>{s&&t&&t.length>0&&(e=>{var t=[];e&&(e.sort(((e,t)=>{const[i,n]=[e.quality.toLowerCase().trim(),t.quality.toLowerCase().trim()];return i===n?0:i<n?-1:1})),e.forEach((e=>{var i=t.filter((t=>t.label.startsWith(e.quality))),n={label:i&&i.length>0?e.quality+" ("+(i.length+1)+")":e.quality,selected:e.selected,data:{url:F.torrentApiService.buildStreamUrl(e.downloadUrl,e.fileName,e.seasonNumber,e.episodeNumber)}};t.push(n)})),0===t.filter((e=>e.selected)).length&&(t[0].selected=!0),b(t))})(t)}),[t,s]),Object(n.useEffect)((()=>{s&&i&&i.length>0&&(e=>{var t=[];t.push({label:"Off",selected:!0}),e&&e.length>0&&e.forEach((e=>{var i={label:e.language,selected:!1,subOptions:[]};e.subtitlesSourceUrls.forEach(((t,n)=>{i.subOptions.push({label:e.language+" "+(n+1),selected:!1,data:{url:F.subtitlesApiService.getSubtitlesApiUrl(t)}})})),t.push(i)})),d(t)})(i)}),[i,s]),Object(n.useEffect)((()=>{l>0&&h(!0)}),[l]);const k=Object(f.jsxs)("div",{className:"video-player-window-container",children:[Object(f.jsx)(Qe,{visible:l>0&&j,resumeTime:l,onNoClick:()=>h(!1),onYesClick:()=>{m(l),h(!1)}}),Object(f.jsx)(Ge,{visible:s,videoQualitiesOptions:u,subtitlesOptions:o,onWatchedTimeUpdate:(e,t,i)=>c(e,t,i),videoTime:v})]});return O?Object(f.jsx)(A,{visible:p}):Object(f.jsx)(A,{visible:s,content:k,onCloseClick:()=>r()})}function Qe(e){let{visible:t,resumeTime:i,onYesClick:n,onNoClick:s}=e;const r={display:"flex",alignItems:"center",justifyContent:"center"};return t?Object(f.jsxs)("div",{style:r,children:[Object(f.jsx)($,{text:"Do you want to resume the video to "+re(i/60)+" ?"}),Object(f.jsx)(ee,{color:"red",content:"Yes",onClick:()=>n()}),Object(f.jsx)(ee,{color:"grey",content:"No",onClick:()=>s()})]}):null}function Ge(e){let{visible:t,videoQualitiesOptions:i,subtitlesOptions:n,onWatchedTimeUpdate:s,videoTime:r}=e;return t?Object(f.jsx)("div",{className:"video-player-container",children:Object(f.jsx)(We,{videoQualitiesOptions:i,videoSubtitlesOptions:n,onWatchedTimeUpdate:(e,t,i)=>s(e,t,i),videoTime:r})}):null}var Ke=i(66),Je=i.n(Ke);var Ye=function(e){let{visible:t,onClick:i}=e;if(t){const e=Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(f.jsx)(Je.a,{style:{color:"black"}}),Object(f.jsx)("div",{style:{marginLeft:"5px"},children:"Trailer"})]});return Object(f.jsx)(ee,{content:e,color:"white",onClick:()=>i()})}return null};var Xe=function(e){let{text:t}=e;return Object(f.jsx)("div",{style:{fontSize:"28px",fontWeight:"500",color:"white",textAlign:"center"},children:t})},Ze=i(67),_e=i.n(Ze);var $e=function(e){let{onClick:t}=e;const i=Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(f.jsx)(_e.a,{}),Object(f.jsx)("div",{style:{marginLeft:"5px"},children:"Copy"})]});return Object(f.jsx)(ee,{content:i,color:"grey",onClick:()=>t()})};var et=function(e){let{onClick:t,videoUrl:i}=e;const[s,r]=Object(n.useState)(!1),[c,l]=Object(n.useState)(null);Object(n.useEffect)((()=>{null===c&&F.appInfoApiService.isDesktopApplication((e=>{l(!e)}))}),[]);const a=Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(f.jsx)(je.a,{}),Object(f.jsx)("div",{style:{marginLeft:"5px"},children:"Play With VLC"})]});return c?Object(f.jsxs)("div",{children:[Object(f.jsx)(ee,{content:a,color:"orange",onClick:()=>(r(!0),void(t&&t()))}),Object(f.jsx)(tt,{visible:s,videoUrl:i,onCloseClick:()=>r(!1)})]}):null};function tt(e){let{visible:t,videoUrl:i,onCloseClick:n}=e;const s=Object(f.jsx)("div",{style:{backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",height:"300px",width:"500px",padding:"0 20px",margin:"auto",color:"white",borderRadius:"10px",background:"linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)"},children:Object(f.jsx)(it,{videoUrl:i,launchPlay:t,onCloseClick:()=>n()})});return Object(f.jsx)(A,{visible:t,content:s})}function it(e){let{videoUrl:t,onCloseClick:i}=e;const s=Object(n.useRef)(null);return Object(f.jsxs)("div",{children:[Object(f.jsx)(Xe,{text:"Play with VLC"}),Object(f.jsx)(_,{text:"To play the video in VLC, click on 'Copy', open VLC then open a network stream and paste the copied link."}),Object(f.jsx)("input",{ref:s,style:{background:"none",border:"none",outline:"none",color:"grey",width:"100%",textAlign:"center",textOverflow:"ellipsis",margin:"10px 0"},type:"text",readOnly:!0,value:Boolean(t)?t:""}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center",height:"100%",justifyContent:"space-around",flexDirection:r?"column":""},children:[Object(f.jsx)($e,{onClick:()=>{null!==s&&void 0!==s&&s.current&&(s.current.select(),document.execCommand("copy"),window.getSelection().removeAllRanges())}}),Object(f.jsx)(ee,{content:"Close",color:"red",onClick:()=>i()})]})]});var r}var nt=i(68),st=i.n(nt);function rt(e){let{onClick:t,visible:i}=e;return Object(f.jsx)(lt,{onClick:t,visible:i,color:"grey",insideIcon:Object(f.jsx)(V.a,{style:{fontSize:22,color:"white"}})})}function ct(e){let{onClick:t,visible:i}=e;return Object(f.jsx)(lt,{onClick:t,visible:i,color:"dark-red",insideIcon:Object(f.jsx)(st.a,{style:{fontSize:22,color:"white"}})})}function lt(e){let{onClick:t,visible:i,color:n,insideIcon:s}=e;if(i){const e={position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},i={position:"absolute",top:"-2px",right:"-2px",padding:"1px",zIndex:3,width:"15px",height:"15px",borderRadius:"100%",backgroundColor:"rgba(45,44,44,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},r=Object(f.jsxs)("div",{style:e,children:[Object(f.jsx)(O.a,{style:{fontSize:28}}),Object(f.jsx)("div",{style:i,children:s})]});return Object(f.jsx)(ee,{content:r,color:n,onClick:()=>t()})}return null}var at=function(e){let{center:t,onClick:i}=e;const n=Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(f.jsx)(je.a,{}),Object(f.jsx)("div",{style:{marginLeft:"5px"},children:"Play"})]});return Object(f.jsx)(ee,{content:n,centered:t,color:"red",onClick:()=>i()})},ot=i(70),dt=i.n(ot),ut=i(69),bt=i.n(ut);var jt=function(e){let{medias:t,alignLeft:i,onMediaClick:s}=e;const r=Object(n.useRef)(null),[c,l]=Object(n.useState)(!0),[a,o]=Object(n.useState)(!1);Object(n.useEffect)((()=>{r.current.onscroll=()=>{b()}}),[]),Object(n.useEffect)((()=>{t&&0!==t.length?b():(o(!0),l(!0))}),[t]),Object(n.useEffect)((()=>{b()}),[c,a]);const d=(e,t)=>{const i=e.getBoundingClientRect();return Math.floor(i.right)<=Math.floor(t.right)&&Math.floor(i.left)>=Math.floor(t.left)},u=()=>{var e=[],t=r.current.getBoundingClientRect();for(let i=0;i<r.current.children.length;i++)d(r.current.children[i],t)&&e.push(i);return{maxIndex:Math.max(...e),minIndex:Math.min(...e),count:e.length}},b=()=>{if(r.current.children&&r.current.children.length>0){var e=r.current.getBoundingClientRect();l(d(r.current.children[0],e)),o(d(r.current.children[r.current.children.length-1],e))}};return Object(f.jsxs)("div",{className:"medias-list-container",children:[Object(f.jsx)("div",{style:k(!c),className:"floating-navigation-btn left",onClick:()=>(()=>{if(r.current.children&&r.current.children.length>0){var e=u(),t=e.minIndex-e.count,i=t<0?0:t;r.current.children[i].scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}})(),children:Object(f.jsx)(bt.a,{style:{fontSize:40,color:"white"}})}),Object(f.jsx)("div",{style:k(!a),className:"floating-navigation-btn right",onClick:()=>(()=>{if(r.current.children&&r.current.children.length>0){var e=u(),t=e.maxIndex+e.count,i=t>r.current.children.length-1?r.current.children.length-1:t;r.current.children[i].scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}})(),children:Object(f.jsx)(dt.a,{style:{fontSize:40,color:"white"}})}),Object(f.jsx)("div",{ref:r,className:"medias-list"+(c&&a&&!i?" center":""),children:t.map(((e,t)=>Object(f.jsx)(D,{media:e,hoverEffect:!0,onMediaClick:e=>s(e)},t)))})]})};var ht=function(e){let{listTitle:t,medias:i,alignLeft:n,visible:s,onMediaClick:r}=e;return s?Object(f.jsxs)("div",{className:"medias-list-genre-container",children:[Object(f.jsx)("div",{className:"medias-list-header",children:Object(f.jsx)("div",{className:"medias-list-categorie",children:t})}),Object(f.jsx)(jt,{medias:i,alignLeft:n,onMediaClick:e=>r(e)})]}):null};var vt=function(e){var t,i;let{mediaId:s,onCloseClick:r}=e;const[c,l]=Object(n.useState)(!1),[a,o]=Object(n.useState)({}),[d,u]=Object(n.useState)({}),b=Object(n.useRef)([]),[j,h]=Object(n.useState)(!1),[v,m]=Object(n.useState)(!0),[O,g]=Object(n.useState)([]),[p,x]=Object(n.useState)(""),[C,y]=Object(n.useState)([]),[N,M]=Object(n.useState)(!1),[w,A]=Object(n.useState)(!1),[E,T]=Object(n.useState)(!1),[U,P]=Object(n.useState)(!0),[L,R]=Object(n.useState)([]),I=Object(n.useRef)([]),q=Object(n.useRef)({seasonNumber:1,episodeNumber:1});Object(n.useEffect)((()=>{s&&V(s)}),[s]),Object(n.useEffect)((()=>{a.imdbId&&(H(a.imdbId,q.current.seasonNumber,q.current.episodeNumber),a.id&&a.title&&a.year&&B(a));document.getElementsByClassName("back-btn")[0].scrollIntoView()}),[a]),Object(n.useEffect)((()=>{var e;if(v&&d&&(null===(e=b.current)||void 0===e?void 0:e.length)>0){const e=b.current.find((e=>e.downloadUrl===d.torrentUrl));e&&(D(e),m(!1))}}),[d,b.current]);const B=e=>{b.current=[],x(""),h(!0),F.torrentApiService.searchTorrents(e.id,e.title,e.year,e.imdbId,q.current.seasonNumber,q.current.episodeNumber,(e=>{h(!1),e&&e.length>0&&(b.current=e.map((e=>({...e,seasonNumber:q.current.seasonNumber,episodeNumber:q.current.episodeNumber}))),D(b.current[0]))}),(()=>{h(!1)}))},V=e=>{l(!1),o({}),R([]),e&&(F.searchMediaService.getMediaDetails(e,(t=>{if(t)o(t),l(!0),F.bookmarkApiService.isMediaBookmarked(e,(e=>{P(!(e="true"===e))}));else{l(!0);document.getElementsByClassName("no-media-details-message")[0].scrollIntoView()}})),W(e,1,1),F.searchMediaService.getSimilarMedias(e,(e=>{e&&e.length>0&&R(e)})))},D=e=>{const t=[];for(let i=0;i<b.current.length;i++){const n=b.current[i];n.selected=n.downloadUrl==e.downloadUrl,t.push(n)}b.current=t,x(e?F.torrentApiService.buildStreamUrl(e.downloadUrl,"",e.seasonNumber,e.episodeNumber):""),g(b.current.filter((t=>t.languageVersion===e.languageVersion)))},W=(e,t,i)=>{u({}),F.watchedMediaApiService.getWatchedMedia(e,t,i,(e=>{null!==e&&void 0!==e&&e.currentTime&&null!==e&&void 0!==e&&e.totalDuration&&u({progression:e.currentTime/e.totalDuration,remainingTime:e.totalDuration-e.currentTime,currentTime:e.currentTime,torrentUrl:e.torrentUrl})}))},H=(e,t,i)=>{M(!0),F.subtitlesApiService.getAvailableSubtitles(e,t,i,(e=>{y(e),setTimeout((()=>M(!1)),1e3)}))},Q=()=>{if(I.current.length>0){let e=I.current.pop();V(e)}else r()};return Object(f.jsxs)("div",{style:{height:"100%"},children:[Object(f.jsx)(He,{visible:w,sources:O,subtitles:C,onCloseClick:()=>A(!1),onWatchedTimeUpdate:(e,t,i)=>((e,t,i)=>{F.watchedMediaApiService.saveWacthedMedia(a,e,t,q.current.seasonNumber,q.current.episodeNumber,i)})(e,t,i),goToTime:null===d||void 0===d?void 0:d.currentTime,mediaDetails:a}),Object(f.jsx)(S,{color:"white",size:"80px",position:"center",visible:!c}),Object(f.jsx)(Y,{visible:E,youtubeTrailerUrl:a.youtubeTrailerUrl,onCloseClick:()=>T(!1)}),Object(f.jsxs)("div",{style:{display:c&&!a.title?"flex":"none"},className:"no-media-details-message",children:[Object(f.jsx)($,{text:"No info found for this media"}),Object(f.jsx)(ee,{color:"red",content:"Back",onClick:()=>Q()})]}),Object(f.jsxs)("div",{style:k(c&&a.title),className:"media-presentation-page-container",children:[Object(f.jsx)("div",{className:"back-btn",onClick:()=>Q(),children:Object(f.jsx)(J.a,{className:"back-arrow"})}),Object(f.jsx)("div",{className:"presentation",style:{backgroundImage:"url("+a.backgroundImageUrl+")"},children:Object(f.jsxs)("div",{className:"info-container",children:[Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("div",{className:"title",children:a.logoImageUrl?Object(f.jsx)("img",{src:a.logoImageUrl}):Object(f.jsx)(Xe,{text:a.title})}),Object(f.jsxs)("div",{className:"info-content",children:[Object(f.jsx)(z,{rating:a.rating,size:"50px"}),Object(f.jsx)(_,{center:!0,text:a.year+" | "+(a.duration?re(a.duration)+" | ":"")+(null===(t=a.genres)||void 0===t?void 0:t.map((e=>e.name)).join(", "))}),Object(f.jsx)(mt,{mediaProgression:null===d||void 0===d?void 0:d.progression,remainingTime:null===d||void 0===d?void 0:d.remainingTime}),Object(f.jsxs)("div",{className:"horizontal",children:[Object(f.jsx)(Ye,{visible:null===a||void 0===a?void 0:a.youtubeTrailerUrl,onClick:()=>T(!0)}),Object(f.jsx)(pt,{serieId:a.id,seasonsCount:a.seasonsCount,onEpisodeSelected:(e,t)=>((e,t)=>{q.current={seasonNumber:e,episodeNumber:t},B(a),H(a.imdbId,e,t),W(a.id,e,t)})(e,t)}),Object(f.jsx)(rt,{onClick:()=>{F.bookmarkApiService.addBookmarkedMedia(a,(()=>{P(!1)}))},visible:U}),Object(f.jsx)(ct,{onClick:()=>{F.bookmarkApiService.deleteBookmarkedMedia(a,(()=>{P(!0)}))},visible:!U})]})]})]}),Object(f.jsxs)("div",{className:"play-options",children:[Object(f.jsx)(Ot,{title:"Subtitles",isLoading:N,itemsList:C&&C.map((e=>e.language)),emptyMessage:"No subtitles available"}),Object(f.jsxs)("div",{className:"horizontal",children:[Object(f.jsx)(Ot,{title:"Versions",isLoading:j,itemsList:b.current&&[...new Set(b.current.map((e=>e.languageVersion)))],emptyMessage:"No version available"}),Object(f.jsxs)("div",{style:k(!j&&(null===(i=b.current)||void 0===i?void 0:i.length)>0),className:"horizontal",children:[Object(f.jsx)(gt,{torrents:b.current,onQualityChanged:e=>D(e)}),Object(f.jsx)(at,{onClick:()=>A(!0)}),Object(f.jsx)(et,{videoUrl:p,onClick:()=>{a&&F.watchedMediaApiService.saveWacthedMedia(a,0,0,q.current.seasonNumber,q.current.episodeNumber)}})]})]})]}),Object(f.jsxs)("div",{className:"extra",children:[Object(f.jsxs)("div",{className:"media-details",children:[Object(f.jsx)(X,{title:"Director",content:a.director,justify:"left"}),Object(f.jsx)(X,{title:"Cast",content:a.cast,justify:"left"}),Object(f.jsx)($,{text:a.synopsis})]}),Object(f.jsx)(ht,{medias:L,alignLeft:!0,listTitle:"You may also like",visible:L&&L.length>0,onMediaClick:e=>{(e=>{I.current.push(a.id),V(e)})(e)}})]})]})})]})]})};function mt(e){let{mediaProgression:t,remainingTime:i}=e;return t>0?Object(f.jsxs)("div",{children:[Object(f.jsx)(Z,{width:"100%",value:100*t}),Object(f.jsx)(_,{text:re(i/60)+" remaining"})]}):null}function Ot(e){let{title:t,itemsList:i,emptyMessage:n,isLoading:s}=e;const r=(null===i||void 0===i?void 0:i.length)>0?i.join(", "):n,c=s?Object(f.jsx)(S,{color:"white",size:"15px",visible:!0}):r;return Object(f.jsx)(X,{title:t,content:c})}function gt(e){let{torrents:t,onQualityChanged:i}=e;const[s,r]=Object(n.useState)(!1),[c,l]=Object(n.useState)(!1);Object(n.useEffect)((()=>{if((null===t||void 0===t?void 0:t.length)>0){const e=t.find((e=>e.selected));e&&l(e.languageVersion+" | "+e.quality)}}),[t]);return Object(f.jsxs)("div",{children:[Object(f.jsx)(ee,{color:"grey",content:c,onClick:()=>r(!0)}),Object(f.jsx)(ae,{visible:s,torrents:t,onQualityClick:e=>(e=>{r(!1),t.find((e=>e.selected)).downloadUrl!==e.downloadUrl&&i(e)})(e)})]})}function pt(e){let{serieId:t,seasonsCount:i,onEpisodeSelected:s}=e;const[r,c]=Object(n.useState)(!1),[l,a]=Object(n.useState)(1),[o,d]=Object(n.useState)(1);if(Object(n.useEffect)((()=>{a(1),d(1)}),[i]),!i)return null;return Object(f.jsxs)("div",{children:[Object(f.jsx)(ce,{visible:r,serieId:t,numberOfSeasons:i,onEpisodeSelected:(e,t)=>((e,t)=>{a(e),d(t),s(e,t),c(!1)})(e,t),onCloseClick:()=>c(!1)}),Object(f.jsx)(ee,{color:"red",content:"Season "+l+" - Episode "+o,onClick:()=>{c(!0)}})]})}i(94);var xt=function(e){let{media:t,visible:i,onClick:n}=e;return Object(f.jsxs)("div",{className:"media-pictures "+(i?"":"hidden"),onClick:()=>n(t.id),children:[Object(f.jsx)("div",{className:"logo-title",children:Object(f.jsx)("img",{src:null===t||void 0===t?void 0:t.logoImageUrl})}),Object(f.jsx)("img",{className:"background-image",src:null===t||void 0===t?void 0:t.backgroundImageUrl})]})};i(95);var ft=function(e){let{medias:t,onClick:i}=e;const[s,r]=Object(n.useState)(0),[c,l]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{t&&t.length>0&&l(!0)}),[t]),Object(n.useEffect)((()=>{var e;return c&&(e=setTimeout((()=>{s===(null===t||void 0===t?void 0:t.length)-1?r(0):r(s+1)}),5e3)),()=>{clearTimeout(e)}}),[s,c]),Object(f.jsxs)("div",{className:"medias-pictures-container",children:[null===t||void 0===t?void 0:t.map(((e,t)=>Object(f.jsx)(xt,{media:e,visible:t===s,onClick:()=>i(e.id)},t))),Object(f.jsxs)("div",{className:"medias-pictures-nav-controls",children:[Object(f.jsx)(Ct,{nbMedias:null===t||void 0===t?void 0:t.length,selectedIndex:s,onNavElementClick:e=>r(e)}),Object(f.jsxs)("div",{className:"medias-pictures-play-pause",onClick:()=>l(!c),children:[Object(f.jsx)(je.a,{className:"icon",style:{display:c?"none":""}}),Object(f.jsx)(ve.a,{className:"icon",style:{display:c?"":"none"}})]})]})]})};function Ct(e){let{nbMedias:t,selectedIndex:i,onNavElementClick:n}=e;const s=[];for(let r=0;r<=t-1;r++)s.push(r);return Object(f.jsx)("div",{className:"medias-pictures-nav",children:s.map((e=>Object(f.jsx)("div",{onClick:()=>n(e),className:"nav-elem"+(i===e?" selected":"")},e)))})}var yt=function(e){var t;let{onMediaClick:i,onReady:s,onFail:r}=e;const[c,l]=Object(n.useState)(!1),a=Object(n.useRef)([]),o=Object(n.useRef)(""),[d,u]=Object(n.useState)([]),b="todayTrending",j=(e,t,i)=>{if(t&&t.length>0){let n={title:e,medias:t};i?a.current.unshift(n):a.current.push(n),W.setCache(o.current,a.current);const s=[...a.current];u(s)}},h=()=>{o.current=(e=>"homepage"+e)(x.getActiveMode().label);let e=W.getCache(o.current);a.current=[],e?(a.current=e.data,u(a.current),l(!0)):(F.searchMediaService.getMediasOfToday((e=>{j(b,e),l(!0),s()}),(()=>{r()})),F.searchMediaService.getPopularMedias((e=>{j("Popular "+x.getActiveMode().label.toLocaleLowerCase(),e,!0)})),F.searchMediaService.getRecommandedMedias((e=>{j("Recommanded for you",e,!0)})),F.searchMediaService.getPopularNetflixMedias((e=>{j("Popular on Netflix",e)})),F.searchMediaService.getPopularDisneyPlusMedias((e=>{j("Popular on Disney Plus",e)})),F.searchMediaService.getPopularAmazonPrimeMedias((e=>{j("Popular on Amazon Prime",e)})),F.searchMediaService.getPopularAppleTvMedias((e=>{j("Popular on AppleTv",e)})))};return Object(n.useEffect)((()=>{h(),x.onAppModeChanged((()=>{h()}))}),[]),Object(f.jsxs)("div",{style:{height:"100%"},children:[Object(f.jsx)(S,{position:"center",visible:!c,color:"white",size:"60px"}),Object(f.jsxs)("div",{className:"home-page-container",style:k(c),children:[Object(f.jsx)(ft,{medias:null===(t=d.find((e=>e.title===b)))||void 0===t?void 0:t.medias,onClick:e=>i(e)}),Object(f.jsx)("div",{className:"blur-divider"}),d.filter((e=>e.title!==b)).map((e=>Object(f.jsx)(ht,{visible:!0,listTitle:e.title,medias:e.medias,onMediaClick:e=>i(e)},e.title)))]})]})};i(96),i(97);var kt=function(e){let{media:t,onClick:i}=e;return Object(f.jsxs)("div",{className:"media-intermediate-presentation-container",onClick:()=>i(),children:[Object(f.jsx)(D,{media:t}),Object(f.jsx)("div",{className:"media-intermediate-presentation-content",children:Object(f.jsxs)("div",{className:"media-intermediate-presentation-info",children:[Object(f.jsx)(_,{text:(n=t.synopsis,n&&n.length>400?n.substring(0,300)+"...":n)}),x.isSeriesMode()?Object(f.jsx)(_,{text:"Season "+t.seasonNumber+" - Episode "+t.episodeNumber}):null,t.totalDuration&&t.currentTime?Object(f.jsx)(Z,{value:t.currentTime/t.totalDuration*100,width:"100%"}):null]})})]});var n};var St=function(e){let{title:t,medias:i,centerToMedia:s,loadingProgressVisible:r,onClick:c}=e;return Object(n.useEffect)((()=>{if(s){var e=i.findIndex((e=>e.id===s.id)),t=document.getElementById("mediaintermediatepresentation"+e);t&&t.scrollIntoView({block:"nearest",inline:"nearest"})}}),[i,s]),Object(f.jsxs)("div",{children:[Object(f.jsx)(S,{color:"white",size:"80px",position:"center",visible:r}),Object(f.jsx)("div",{className:"media-intermediate-list-title-page",children:t}),Object(f.jsx)("div",{className:"media-intermediate-list-content",children:i.map(((e,t)=>Object(f.jsx)("div",{id:"mediaintermediatepresentation"+t,children:Object(f.jsx)(kt,{media:e,onClick:()=>c(e)})},t)))})]})},Nt=null;var Mt=function(e){let{centerToLastClickedMedia:t,onMediaClick:i}=e;const[s,r]=Object(n.useState)([]),[c,l]=Object(n.useState)(!0);Object(n.useEffect)((()=>{t||(Nt=null),F.watchedMediaApiService.getWatchedMedias((e=>{l(!1),e&&e.length>0&&r(e)}),(()=>{l(!1)}))}),[]);const a=x.getActiveMode().label.toLowerCase();return Object(f.jsx)(St,{title:s&&s.length>0?"You can see here the "+a+" you have watched":"No "+a+" watched",loadingProgressVisible:c,medias:s,centerToMedia:Nt,onClick:e=>(e=>{Nt=e,i(e.id)})(e)})},wt=null;var At=function(e){let{centerToLastClickedMedia:t,onMediaClick:i}=e;const[s,r]=Object(n.useState)([]),[c,l]=Object(n.useState)(!0);Object(n.useEffect)((()=>{t||(wt=null),F.bookmarkApiService.getBookmarkedMedias((e=>{l(!1),e&&e.length>0&&r(e)}),(()=>{l(!1)}))}),[]);const a=x.getActiveMode().label.toLowerCase();return Object(f.jsx)(St,{title:s&&s.length>0?"You can see here the "+a+" you have bookmarked":"No bookmarked "+a,loadingProgressVisible:c,medias:s,centerToMedia:wt,onClick:e=>(e=>{wt=e,i(e.id)})(e)})},Et=(i(98),i(99),i(137));var Tt=function(e){let{placeHolder:t,onTextChanged:i,large:s,value:r}=e;Object(n.useEffect)((()=>{l(r)}),[r]);const[c,l]=Object(n.useState)(""),a=e=>{l(e),i(e)};return Object(f.jsx)("div",{className:"text-input-container",children:Object(f.jsxs)("div",{className:"text-input "+(s?"large":""),children:[Object(f.jsx)(Et.a,{value:c,onChange:e=>{a(e.target.value)},placeholder:t}),Object(f.jsx)(w.a,{style:k(c),className:"delete-text-cross",onClick:()=>{a("")}})]})})};const Ut={searchValue:"",result:[],save(e,t){this.searchValue=e,this.result=t},clean(){this.searchValue="",this.result=[]}};var Pt=function(e){let{loadFromCache:t,onMediaClick:i}=e;const[s,r]=Object(n.useState)(""),[c,l]=Object(n.useState)([]),[a,o]=Object(n.useState)(!1),d=Object(n.useRef)(s),[u,b]=Object(n.useReducer)(((e,t)=>0===t?"Nothing found":1===t?"one result":t>1?t+" results":""),"");return Object(n.useEffect)((()=>{t&&s===Ut.searchValue||(d.current=s,s&&s.length>2?setTimeout((()=>{s===d.current&&(o(!0),b(-1),l([]),Ut.clean(),F.searchMediaService.searchMedias(s,(e=>{o(!1),d.current&&s===d.current&&(b(e.length),e&&e.length>0&&(l(e),Ut.save(s,e)))}),(()=>{o(!1),b(0)})))}),1e3):(b(-1),l([])))}),[s]),Object(n.useEffect)((()=>{t&&(l(Ut.result),b(Ut.result.length),r(Ut.searchValue))}),[]),Object(f.jsxs)("div",{className:"search-view-container",children:[Object(f.jsx)(Tt,{placeHolder:"Type here to start search...",large:!0,onTextChanged:e=>{r(e)}}),Object(f.jsx)(S,{color:"white",size:"40px",visible:a}),Object(f.jsxs)("div",{className:"medias-search-result",children:[Object(f.jsx)(jt,{medias:c,onMediaClick:e=>i(e)}),Object(f.jsx)("div",{className:"label-result",children:u})]})]})};i(101);var Lt=function(e){let{onClick:t,visible:i}=e;if(!i)return null;const n=Object(f.jsx)("div",{children:"Open"});return Object(f.jsx)(ee,{content:n,centered:!0,color:"red",onClick:()=>t()})};var Rt=function(){const[e,t]=Object(n.useState)(""),i=Object(n.useRef)(""),[s,r]=Object(n.useState)(!1),[c,l]=Object(n.useState)(!1),[a,o]=Object(n.useState)([]),[d,u]=Object(n.useState)([]),[b,j]=Object(n.useState)(""),[h,v]=Object(n.useState)(""),[m,O]=Object(n.useState)(!1),[g,p]=Object(n.useState)([]);Object(n.useEffect)((()=>{p([{quality:"Video",downloadUrl:e,fileName:b}]),e||x(),i.current=e}),[e,b]);const x=()=>{l(!0),v("Loading history"),F.torrentApiService.getTorrentHistory((e=>{l(!1),o(e)}),(()=>{l(!1),o([])}))},C=e=>{r(!1),j(""),t(e),u([])},y=()=>s||d&&d.length>0;return Object(f.jsxs)("div",{className:"torrent-link-page-container",children:[Object(f.jsx)("div",{className:"title",children:"Enter a torrent url or magnet and click on Open to see the list of files"}),Object(f.jsx)(Tt,{placeHolder:"Torrent link or magnet...",large:!0,onTextChanged:e=>C(e),value:e}),Object(f.jsxs)("div",{style:{margin:"10px 0"},children:[Object(f.jsx)(Lt,{visible:!y(),onClick:()=>(u([]),r(!0),v("Opening torrent"),void F.torrentApiService.getTorrentFiles(e,(e=>{decodeURIComponent(i.current)===decodeURIComponent(e.link)&&(r(!1),u(e.files))}),(e=>{decodeURIComponent(i.current)===decodeURIComponent(e.link)&&(r(!1),u([]))})))}),Boolean(s)||Boolean(c)?Object(f.jsx)(S,{visible:!0,size:"30px",color:"white",text:h}):null]}),Object(f.jsx)(Ft,{visible:!y(),files:a,onClick:e=>{C(e)}}),Object(f.jsx)(It,{visible:y(),torrentLink:e,files:d,onPlayFileClick:e=>(e=>{j(e),O(!0)})(e)}),Object(f.jsx)(He,{visible:m,sources:g,onCloseClick:()=>O(!1),onWatchedTimeUpdate:()=>{}})]})};function It(e){let{visible:t,torrentLink:i,files:n,onPlayFileClick:s}=e;return t?Object(f.jsx)(qt,{torrentLink:i,files:n,onPlayFileClick:e=>s(e),contentType:"fileFromTorrent",listTitle:"Torrent files"}):null}function Ft(e){let{visible:t,files:i,onClick:n}=e;return t?Object(f.jsx)(qt,{files:i,onFileClick:e=>n(e),contentType:"torrentFile",listTitle:"Last opened torrent files"}):null}function qt(e){let{torrentLink:t,files:i,onFileClick:s,onPlayFileClick:r,contentType:c,listTitle:l}=e;const[a,o]=Object(n.useState)(null);if(Object(n.useEffect)((()=>{o(null)}),[i]),!i||0===i.length)return null;const d={padding:"10px 7px",fontSize:"18px",fontWeight:"500",borderRadius:"7px",cursor:"pointer"},u={...d,background:"linear-gradient(90deg, rgba(187,0,0,1) 0%, rgba(193,76,76,1) 35%, rgba(0,0,0,1) 100%)"},b={...d,fontSize:"20px",color:"#858585"},j=(e,i)=>"fileFromTorrent"===c?Object(f.jsx)(Bt,{torrentLink:t,file:e,isSelected:i===a,onClick:()=>o(i),onPlayFileClick:()=>r(e)}):"torrentFile"===c?Object(f.jsx)(Vt,{file:e,onClick:e=>s(e)}):void 0,h=(e,t)=>{if(e!==a){document.getElementById("idfile_"+e).style.background=t?"#362b2b":""}};return Object(f.jsxs)("div",{style:{width:"50%"},children:[Object(f.jsx)("div",{style:b,children:l}),Object(f.jsx)("div",{style:{background:"linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)",borderRadius:"15px",padding:"5px 0",maxHeight:"300px",overflowY:"auto"},children:i.map(((e,t)=>Object(f.jsx)("div",{id:"idfile_"+t,onMouseEnter:()=>{h(t,!0)},onMouseLeave:()=>{h(t,!1)},style:t===a?u:d,children:j(e,t)},t)))})]})}function Bt(e){let{torrentLink:t,file:i,isSelected:n,onClick:s,onPlayFileClick:r}=e,c=null;return n&&(c=Object(f.jsxs)("div",{className:"play-buttons-container",children:[Object(f.jsx)(at,{onClick:()=>r()}),Object(f.jsx)(et,{videoUrl:F.torrentApiService.buildStreamUrl(t,i)})]})),Object(f.jsxs)("div",{onClick:()=>s(),children:[i,c]})}function Vt(e){let{file:t,onClick:i}=e;return Object(f.jsxs)("div",{onClick:()=>i(t.link),children:[Object(f.jsx)("div",{style:{textAlign:"left",color:"grey"},children:(e=>{const t=new Date,i=new Date;i.setDate(i.getDate()-1);const n=new Date(e);let s="";if(i.toDateString()===n.toDateString())s="Yesterday";else if(t.toDateString()===n.toDateString())s="Today";else{let e={year:"numeric",month:"long",day:"numeric"};s=n.toLocaleString("en-US",e)}return s+", "+n.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit",hour12:!1})})(t.lastOpenedDateTime)}),Object(f.jsx)("div",{style:{textAlign:"left"},children:t.link})]})}var zt=function(e){let{components:t,activeComponentId:i}=e;const[s,r]=Object(n.useState)({});return Object(n.useEffect)((()=>{var e=t.find((e=>e.id===i));e&&r(e)}),[t,i]),Object(f.jsx)("div",{style:null===s||void 0===s?void 0:s.containerStyle,children:null===s||void 0===s?void 0:s.render})};var Dt=function(){F.init();const[e,t]=Object(n.useState)(null),[i,s]=Object(n.useState)(!1),[r,c]=Object(n.useState)(null),[l,a]=Object(n.useState)(!1),[o,d]=Object(n.useState)(!1),[u,b]=Object(n.useState)(!1),[j,h]=Object(n.useState)(!1),[v,m]=Object(n.useState)(!0),[O,g]=Object(n.useState)(!1),[p,x]=Object(n.useState)(!1),[y,k]=Object(n.useState)(""),S=e=>{L(T),U(e)},M=e=>{k(e),S(A.mediaPresentationPage)},w=()=>{s(!0),a(!0),b(!0),h(!0),d(!0),S(P)},A={homePage:"homePage",mediasListGenrePage:"mediasOfGenre",mediasListPlatformPage:"mediasOfPlatform",mediaPresentationPage:"mediaPresentationPage",watchedMediasListPage:"watchedMediasListPage",bookmarkedMediasListPage:"bookmarkedMediasListPage",researchPage:"researchPage",torrentLinkPage:"torrentLinkPage"},E={components:[{id:A.homePage,render:Object(f.jsx)(yt,{onReady:()=>{m(!1)},onFail:()=>{g(!0)},onMediaClick:e=>M(e)})},{id:A.mediasListGenrePage,render:Object(f.jsx)(Q,{genre:e,loadFromCache:i,onMediaClick:e=>M(e)}),containerStyle:{height:"100%"}},{id:A.mediasListPlatformPage,render:Object(f.jsx)(G,{platform:r,loadFromCache:l,onMediaClick:e=>M(e)}),containerStyle:{height:"100%"}},{id:A.mediaPresentationPage,containerStyle:{height:"100%"},render:Object(f.jsx)(vt,{mediaId:y,onCloseClick:()=>w()})},{id:A.watchedMediasListPage,render:Object(f.jsx)(Mt,{centerToLastClickedMedia:j,onMediaClick:e=>M(e)})},{id:A.bookmarkedMediasListPage,render:Object(f.jsx)(At,{centerToLastClickedMedia:u,onMediaClick:e=>M(e)})},{id:A.researchPage,render:Object(f.jsx)(Pt,{loadFromCache:o,onMediaClick:e=>M(e)})},{id:A.torrentLinkPage,render:Object(f.jsx)(Rt,{})}]},[T,U]=Object(n.useState)(A.homePage),[P,L]=Object(n.useState)(A.homePage);return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(N,{visible:v,showErrorMessage:O}),Object(f.jsx)(q,{visible:p,onGenreClick:e=>{x(!1),(e=>{t(e),s(!1),S(A.mediasListGenrePage)})(e)},onPlatformClick:e=>{x(!1),(e=>{c(e),a(!1),S(A.mediasListPlatformPage)})(e)},onCloseClick:()=>x(!1)}),Object(f.jsx)(C,{onSearchClick:()=>{d(!1),U(A.researchPage)},onHomeClick:()=>U(A.homePage),onGenreMenuClick:()=>x(!0),onWatchedMediasClick:()=>{h(!1),U(A.watchedMediasListPage)},onBookmarkedMediasClick:()=>{b(!1),U(A.bookmarkedMediasListPage)},onTorrentLinkClick:()=>{U(A.torrentLinkPage)},onAppModeSwitch:()=>{U(A.homePage)}}),Object(f.jsx)("div",{className:"app-content",children:Object(f.jsx)(zt,{components:E.components,activeComponentId:T})})]})};var Wt=e=>{e&&e instanceof Function&&i.e(3).then(i.bind(null,139)).then((t=>{let{getCLS:i,getFID:n,getFCP:s,getLCP:r,getTTFB:c}=t;i(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(Dt,{})}),document.getElementById("root")),Wt()},31:function(e,t,i){},44:function(e,t,i){},49:function(e,t,i){},79:function(e,t,i){},80:function(e,t,i){},81:function(e,t,i){},86:function(e,t,i){},87:function(e,t,i){},88:function(e,t,i){},89:function(e,t,i){},90:function(e,t,i){},91:function(e,t,i){},92:function(e,t,i){},93:function(e,t,i){},94:function(e,t,i){},95:function(e,t,i){},96:function(e,t,i){},97:function(e,t,i){},98:function(e,t,i){},99:function(e,t,i){}},[[102,1,2]]]);
//# sourceMappingURL=main.fecdf36d.chunk.js.map
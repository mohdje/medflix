{"version":3,"sources":["assets/logo.png","services/appMode.js","components/navbar/NavBar.js","helpers/customStyles.js","components/common/CircularProgressBar.js","components/SplashScreen.js","components/modal/ModalWindow.js","services/api/baseApiService.js","services/api/searchMediaApiService.js","services/api/bookmarkApiService.js","services/api/watchedMediaApiService.js","services/api/torrentApiService.js","services/api/subtitlesApiService.js","services/api/appInfoApiService.js","services/AppServices.js","components/modal/ModalCategories.js","components/common/Rating.js","components/media/presentation/MediaLitePresentation.js","services/cacheService.js","components/media/list/MediasCategorieList.js","pages/MediaListGenrePage.js","pages/MediaListPlatformPage.js","components/modal/ModalMediaTrailer.js","components/common/TitleAndContent.js","components/common/ProgressionBar.js","components/common/text/SecondaryInfo.js","components/common/text/Paragraph.js","components/common/buttons/BaseButton.js","helpers/customHooks.js","components/common/DropDown.js","helpers/timeFormatHelper.js","components/modal/ModalEpisodeSelector.js","components/video/videoPlayerComponents/VideoSubtitles.js","components/video/videoPlayerComponents/Slider.js","components/video/videoPlayerComponents/TimeController.js","components/video/videoPlayerComponents/LeftControlsGroup.js","components/video/videoPlayerComponents/Options.js","components/video/videoPlayerComponents/RightControlsGroup.js","components/video/videoPlayerComponents/Controls.js","components/video/VideoPlayer.js","components/video/VideoPlayerWindow.js","components/common/buttons/TrailerButton.js","components/common/text/Title.js","components/common/buttons/CopyButton.js","components/common/buttons/PlayWithVLCButton.js","components/common/buttons/BookmarkButton.js","components/common/buttons/PlayButton.js","components/media/list/MediasListLite.js","components/media/list/MediasListLiteWithTitle.js","pages/MediaPresentationPage.js","components/media/presentation/MediaPicturesPresentation.js","components/media/list/MediasOfTodayList.js","pages/HomePage.js","components/media/presentation/MediaIntermediatePresentation.js","components/media/list/MediasIntermediatePresentationList.js","pages/WatchedMediasPage.js","pages/BookmarkedMediasPage.js","components/common/TextInput.js","pages/ResearchPage.js","components/common/buttons/OpenButton.js","pages/TorrentLinkPage.js","components/Router.js","App.js","reportWebVitals.js","index.js"],"names":["AppMode","onAppModeChanged","callback","eventName","this","modeChangedEvent","Event","document","addEventListener","e","modes","label","urlKey","isActive","getActiveMode","find","mode","switchActiveMode","forEach","dispatchEvent","isSeriesMode","console","log","filter","NavBar","onSearchClick","onHomeClick","onGenreMenuClick","onWatchedMediasClick","onBookmarkedMediasClick","onTorrentLinkClick","onAppModeSwitch","useState","setModes","useEffect","navBarIconStyle","color","width","height","className","map","onClick","updatedModes","switchAppMode","alt","src","logo","style","fadeTransition","visible","speedTransition","zIndex","transitionStyle","visibility","opacity","transition","CircularProgressBar","position","size","text","positionStyle","setpositionStyle","displayedText","setDisplayedText","top","left","transform","textAlign","fontSize","fontWeigth","CircularProgress","SplashScreen","showErrorMessage","display","ModalWindow","content","onCloseClick","BaseApiService","_apiBaseUrl","relativePath","url","parameters","deserializeResult","onSuccess","onFail","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","result","response","JSON","parse","length","i","parameter","name","value","open","send","setRequestHeader","obj","stringify","Boolean","SearchMediaApiService","buildUrl","buildSearchUrl","getRequest","genreId","page","platformId","id","mediaId","serieId","seasonNumber","BookmarkApiService","buildBookmarkUrl","mediaDto","putRequest","deleteRequest","WatchedMediaApiService","buildWatchedMediaUrl","episodeNumber","mediaDetails","currentTime","duration","watchedMedia","totalDuration","TorrentApiService","fileName","base64Url","window","btoa","buildTorrentUrl","title","year","encodeURIComponent","imdbid","streamUrl","URL","searchParams","get","torrentUrl","SubtitlesApiService","imdbCode","buildSubtitlesUrl","subtitlesSourceUrl","AppInfoApiService","isDesktopApp","self","buildAppInfoUrl","isDesktopApplication","AppServices","init","searchMediaService","bookmarkApiService","watchedMediaApiService","torrentApiService","subtitlesApiService","appInfoApiService","ModalCategories","onGenreClick","onPlatformClick","loading","setLoading","listGenres","setListGenres","listPlatforms","setListPlatforms","loadCategories","getMediaGenres","genres","getMediaPlatforms","platforms","genre","Rating","rating","fontWeight","margin","backgroundColor","borderRadius","alignItems","justifyContent","MediaLitePresentation","maxLength","media","onMediaClick","hoverEffect","dataLoaded","setDataLoaded","coverImageUrl","setTimeout","backgroundImage","toString","replace","substring","CacheService","cacheCollection","setCache","data","cache","getCache","push","c","clearCache","MediasCategorieList","categorie","searchOperation","loadFromCache","medias","setMedias","pageIndex","setPageIndex","searchInProgress","setSearchInProgress","plusButtonVisible","setPlusButtonVisible","performSearch","mediasOfCategories","concat","getCacheId","categorieId","cacheMedias","scrollToMedia","mediaElementId","elemId","elem","getElementById","scrollIntoView","block","inline","handleMediaClick","elementId","index","MediasListGenrePage","getMediasByGenre","platform","getMediasByPlatform","ModalMediaTrailer","youtubeTrailerUrl","trailerStyle","border","boxShadow","TitleAndContent","containerStyle","justify","marginRight","ProgressionBar","progressionStyle","SecondaryInfo","center","Paragraph","BaseButton","centered","rounded","showRippleEffect","setShowRippleEffect","handleClick","computeClass","useOnClickOutside","ref","handler","listener","event","current","contains","target","removeEventListener","DropDown","values","onValueChanged","textAlignement","showList","setShowList","selectedValue","setSelectedValue","dropDownValues","setDropDownValues","dropdownRef","useRef","shouldUpdateDropDownValues","nbDifferentValues","v","listStyle","bottom","maxHeight","overflowY","buttonContentStyle","buttonContent","listElementStyle","padding","cursor","onMouseOver","onMouseOut","ToTimeFormat","totalMinutes","totalHours","hours","Math","trunc","minutes","timeFormat","ModalEpisodeSelector","numberOfSeasons","onEpisodeSelected","selectedSeasonNumber","setSelectedSeasonNumber","episodes","setEpisodes","isLoading","setIsLoading","noEpisodeMessageVisible","setNoEpisodeMessageVisible","episodeListRef","seasonNumberList","getEpisodes","scrollTop","loadEpisodesProgress","episodesOfSeason","getWatchedEpisodes","watchedEpisodes","newTab","watchedEpisode","episode","ep","progression","selectedIndex","Episode","imagePath","runTime","overview","VideoSubtitles","videoCurrentTime","urlSource","subtitlesAdjustTime","currentSubtitles","setCurrentSubtitles","subtitles","setSubtitles","textItalic","setTextItalic","responseText","subtitle","s","startTime","endTime","includes","applySubtitles","fontStyle","Slider","progressColor","cursorColor","tooltip","onCursorMoved","onCursorEndMove","onMouseOverSlider","cursorPosition","setCursorPosition","showToolTip","setShowToolTip","positionToPercentage","XPosition","railBoundings","right","moveCursor","percentage","clientX","parentElement","getBoundingClientRect","endMove","onSliderClick","onMouseMove","onMouseMoveOverSlider","onMouseLeave","onMouseDown","TimeController","videoDuration","onTimeChanged","videoCurrentTimeLabel","setVideoCurrentTimeLabel","videoRemainingTimeLabel","setVideoRemainingTimeLabel","currentPourcentageTimeVideo","setcurrentPourcentageTimeVideo","setTooltip","totalTime","setTotalTime","getTimeLabel","floor","seconds","hourValues","time","newTime","changeTimeVideo","setTimeControllerTooltip","LeftControlsGroup","videoIsPlaying","onPlayClick","onPauseClick","onVolumeChanged","onPlayBackwardClick","onPlayForwardClick","showPlayButton","setShowPlayButton","VolumeController","newVolume","currentVolumeRef","previousVolume","setPreviousVolume","changeVolume","onKeyboardPress","keyCode","VideoOptions","options","icon","onOptionChanged","menuOptions","setMenuOptions","menuSubOptions","setMenuSubOptions","showMenu","setShowMenu","showSubMenu","setShowSubMenu","selectedOption","setSelectedOption","selectedSubOption","setSelectedSubOption","updateMenuOptions","oldSelectedOption","op","selected","oldSelectedSubOption","subOptions","subOp","updatedOptions","updatedOption","updatedSubOptions","updatedsubOption","option","onMouseEnter","getOptionDisplay","subOption","getSubOptionDisplay","VideoOptionsButton","hide","RightControlsGroup","subtitlesOptions","qualityOptions","onSubtitleSizeChange","onSubtitlesChange","onAdjustSubtitleTimeChange","onVideoQualityChange","isFullScreen","onFullScreenStateChanged","videoInFullscreen","setVideoInFullscreen","changeFullScreenState","fullscreen","AdjustSubtitleTimeOption","menuRef","type","step","onChange","valueAsNumber","Controls","videoSubtitlesOptions","videoQualitiesOptions","pixelsToAdd","newUrlSource","VideoPlayer","onWatchedTimeUpdate","videoTime","videoRef","videoPlayerContainerRef","watchedTimeUpdateTriggeredRef","setIsFullScreen","setCurrentTime","errorMessage","setErrorMessage","checkDownloadStateRef","videoDownloadState","setVideoDownloadState","videoSource","setVideoSource","videoIsLoading","setVideoIsLoading","setVideoIsPlaying","subtitlesUrl","setSubtitlesUrl","subtitlesSize","setSubtitlesSize","setSubtitlesAdjustTime","showVideoControls","setShowVideoControls","lastTimeMouseMovedRef","checkMovieDownloadState","getDownloadState","decodeURIComponent","error","message","changeVideoSource","autoplay","paused","load","changeVideoTime","displayControls","Date","now","waitingTime","playVideo","play","pauseVideo","pause","videoErrorHandler","attributes","onVideoReady","onVideoPaused","onVideoWaiting","onTimeUpdated","round","onFullScreenChange","fullscreenElement","videoQuality","volume","changeVideoVolume","fullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","VideoPlayerWindow","sources","goToTime","setSubtitlesOptions","setVideoQualitiesOptions","resumeMessageVisible","setResumeMessageVisible","setVideoTime","setIsDesktopApp","showLoadingModal","setShowLoadingModal","source","quality","trim","buildStreamUrl","downloadUrl","resumeToTime","synopsis","mediaType","optionsJSON","chrome","webview","postMessage","onDesktoVideoPlayerClosed","webkit","messageHandlers","__dispatchMessageCallback","sort","source1","source2","toLowerCase","quality1","quality2","qualities","o","startsWith","buildVideoQualitiesOptions","newSubtitlesOptions","sub","subtitlesOption","language","subtitlesSourceUrls","sourceUrl","getSubtitlesApiUrl","buildSubtitlesOptions","ResumeMessage","resumeTime","onNoClick","onYesClick","VideoPlayerContainer","TrailerButton","marginLeft","Title","CopyButton","PlayWithVLCButton","videoUrl","showModal","setShowModal","isWebApp","setIsWebApp","ModalForVlc","container","background","ModalContent","launchPlay","vertical","inputLinkUrlRef","outline","textOverflow","readOnly","flexDirection","select","execCommand","getSelection","removeAllRanges","AddBookmarkButton","BookmarkButton","insideIcon","RemoveBookmarkButton","PlayButton","MediasListLite","alignLeft","listRef","hideBackArrow","setHideBackArrow","hideForwardArrow","setHideForwardArrow","onscroll","showHideNavArrows","isElementVisible","boundings","elemBoundings","getVisibleRange","indexes","listBoundings","children","max","min","visibleRange","goToIndex","minIndex","count","behavior","navToLeft","maxIndex","navToRight","MediasListLiteWithTitle","listTitle","MediaFullPresentation","setMediaDetails","mediaProgression","setMediaProgression","versionsSources","voSourcesSearching","setVoSourcesSearching","vfSourcesSearching","setVfSourcesSearching","selectedVersionSources","setSelectedVersionSources","selectedVersionSourceLink","setSelectedVersionSourceLink","mediaSubtitlesSources","setMediaSubtitlesSources","loadingSubtitles","setLoadingSubtitles","showMediaPlayer","setShowMediaPlayer","showMediaTrailer","setShowMediaTrailer","addBookmarkButtonVisible","setAddBookmarkButtonVisible","similarMedias","setSimilarMedias","navHistory","selectedEpisode","loadPage","imdbId","getAvailableSubtitles","clearVersionSources","searchVfSources","searchVoSources","getElementsByClassName","changeSelectedSource","getMediaDetails","details","isMediaBookmarked","getMediaProgression","getSimilarMedias","recommandedMedias","setVersionSources","versionLabel","setFirst","newVersionSources","unshift","mediaTitle","mediaYear","searchVFSources","searchVOSources","getWatchedMedia","remainingTime","availableSubtitles","onBackClick","lastMediaId","pop","saveWacthedMedia","backgroundImageUrl","logoImageUrl","join","MediaProgression","EpisodeSelector","seasonsCount","addBookmarkedMedia","deleteBookmarkedMedia","AvailableSubtitles","availableSubtitlesSources","AvailableVersions","availableVersionsSources","onVersionSelected","versionSources","QualitySelector","onQualityChanged","director","cast","onRecommandedMediaClick","setSelectedIndex","nbSameQualities","q","modalVisible","setModalVisible","selectedEpisodeNumber","setSelectedEpisodeNumber","handleEpisodeSelected","MediaPicturesPresentation","MediasOfToday","mediaIndexVisible","setMediaIndexVisible","carouselPlay","setCarouselPlay","changeMedia","clearTimeout","MediaPicturesCarousel","nbMedias","onNavElementClick","navElements","HomePage","onReady","mediaListref","cacheIdRef","mediaLists","setMediaLists","todayTrendingTitle","addMedias","insertAtBeginning","newArray","loadContent","appMode","buildCacheId","getMediasOfToday","getPopularMedias","toLocaleLowerCase","getRecommandedMedias","getPopularNetflixMedias","getPopularDisneyPlusMedias","getPopularAmazonPrimeMedias","getPopularAppleTvMedias","list","mediasList","MediaIntermediatePresentation","MediasIntermediatePresentationList","centerToMedia","loadingProgressVisible","findIndex","m","watchedMediaLastClicked","WatchedMediasPage","centerToLastClickedMedia","loadingVisible","setLoadingVisible","getWatchedMedias","mediaLabel","lastClickedMedia","BookmarkedMediasPage","mediasBookmarks","setMediasBookmarks","getBookmarkedMedias","bookmarkedMedias","TextInput","placeHolder","onTextChanged","large","setText","TextField","placeholder","cacheResearch","searchValue","save","clean","ResearchPage","setSearchValue","searchValueRef","useReducer","state","mediasLength","searchResultLabel","searchResultLabelDispatch","searchMedias","OpenButton","TorrentLinkPage","torrentLink","setTorrentLink","torrentLinkRef","openingTorrentLink","setOpeningTorrentLink","openingHistory","setOpeningHistory","torrentHistory","setTorrentHistory","torrentFiles","setTorrentFiles","selectedFile","setSelectedFile","loadingMessage","setLoadingMessage","showMoviePlayer","setShowMoviePlayer","movieSources","setMovieSources","getTorrentHistory","files","changeTorrentLink","torrentFilesAreLoadingOrLoaded","getTorrentFiles","link","TorrentHistory","TorrentFilesList","onPlayFileClick","file","FilesList","contentType","onFileClick","selectedFileIndex","setSelectedFileIndex","textStyle","selectedTextStyle","titleStyle","getComponent","FileFromTorrent","isSelected","TorrentLink","onMouseHover","enter","playButtons","fullDateTime","today","yesterday","setDate","getDate","date","day","toDateString","toLocaleString","month","toLocaleTimeString","navigator","hour","minute","hour12","formateDate","lastOpenedDateTime","Router","components","activeComponentId","activeComponent","setActiveComponent","component","render","App","selectedGenre","setSelectedGenre","loadFullListGenrefromCache","setLoadFullListGenrefromCache","selectedPlatform","setSelectedPlatform","loadFullListPlatformfromCache","setLoadFullListPlatformfromCache","loadResearchfromCache","setLoadResearchfromCache","centerToLastClickedBookmark","setCenterToLastClickedBookmark","centerToLastClickedWatchedMedia","setCenterToLastClickedWatchedMedia","splashscreenVisible","setSplashscreenVisible","homePageFailed","setHomePageFailed","modalListCategoriesVisible","setModalListCategoriesVisible","setMediaId","showComponent","componentId","setRouterPreviousComponentId","routerActiveComponentId","setRouterActiveComponentId","showMediaFullPresentation","routerIds","mediaPresentationPage","onMediaFullPresentationClose","routerPreviousComponentId","homePage","mediasListGenrePage","mediasListPlatformPage","watchedMediasListPage","bookmarkedMediasListPage","researchPage","torrentLinkPage","router","MediaListGenrePage","MediaListPlatformPage","MediaPresentationPage","showMediasFullListofGenre","showMediasFullListofPlatform","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.f1c5e30c.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARQAAAAlCAMAAAC0/+b3AAACdlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8qNy/4AAAA0XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFxgaGxwdHh8gIiMkJSYnKCkqKywtLzAxMzQ3ODk7PT9AQUJDRUZHSElLTE1OT1JUVVZXWFlaW1xdXl9gYWJjZGVmaGlqa2xvcHFydHV2eHl6fH1+f4CCg4SGh4iKi42Oj5OUlZeYmZucnZ+hoqOkpaanqKmqq6ytrq+xsrO1uLm6u72+v8HCw8TFx8jJysvMzc7P0NHT1NbZ2tzd3uDh4uPk5ebn6Orr7O3u7/Dx8vP09fb3+Pn6+/z9/jaJQ6QAAAABYktHRNF50f8KAAAE2ElEQVRo3u2a6WNMVxTAz0xEQhASYxe7WCKaVBCEStrQVitVVbWFLqqIXWOX2lpp7TShpUVXiSpKS1AqsiCduf9RM/ecO+++ee+Nl8w1uR96vrx3z7nb+82ce8599wH8LzaSu4PLh/bWRWjNpOLGHY6yUWo1vELIif1ri4Y6D+6yP4AtXJfr/rEyyrlk2JjexQG2drZYVqIFYAlDmWbX9Yt+brvUjsq3maPclpplmU23SrMdpu6yP4BGrlviHkoe9pJnYxr0CG27ww1vo77egPKHFRwkXOYmfzZEBaVZfnrFow0UmEND5JvVA2pRvdCAwkqtrVejZRtEDYWxs0O1gQLlaKzxycq4c6g96ZGg+C3/8VFPcXpdVUBhdbO1gdLtBloPy8qPUHevF0hQWHV7c9O4C6h/DZRAYYFPdIECObhWsiJDNeYJqgrBBIWFTXopar+WVNMLHWW6VC0pk2Ts1DdLzv8bGqAkfHIu+1MOBdai+Z/+QpFYjZq9EAblcbpp3anjysZB0Qb9lFUPxQhzW9uHaijxF9F+xkuKTyncJIdDYee8RjNPBeo+VpALpR6iARrTNYECgykuF1O2FsB1dQJYoLAFlrh1ub2KDNFTQgOc9mgCRSQl+DN1u4mlTWAD5WEf0abn37g45mASFzWWzTTCFF2gwJeUQcU33x/A+6pEM5Tv8XIsLJSX8cI7JVFD8Z7CDiu0gZJyM7T6v4p3T0aDGcrYGrzOQO1LFLR5epNWGz0UGIFRMJCmCxQYh2GxKas3egX7AMKgpBVSlpcSVCb/haW3+I98himAAl9gl+9rAwXWYZ0rlXj91muBIhyGb5N2UorCl8VipgRKPmXR+kBpd15eTx9JuUcIiu8O/r+b9+fjMUDdD2a8MKzBgNJ/gIO4iFFJj3mntXL8cd3fc4ECQ+okKHPABgqQA/3escMVvHuD47wgpaKOaflIF/OkfKm3mzR/ZEygwFxjRNM+yIAiHGjDerwe4fYVTBWUY1g1SyMo8FVoq+VzgEIO1NTEL3d78H3SU2VQdmHVSTpBSSUHCpjfsUlQhANJ28W4KqYMyh6sOlknKPNpvO3gCEU4UFA+54pOTB0USt+yNYIyvB6rXe0cAQo5UNDHuttBOVjhIG5Ssmp5JBlK5bP7ez5QEn5hlL9BBCiGAxWAHZRopCfG+QavBUpiG+UpsIkedjVEhCIcaA8oh1KEXX0D2kCZjD8T+yG4J4TX5zlCQQf6s6t6KN9hVyu0geK7hXUahvFErrZusBMUKAiWpoJyKLTFDAzUBspRcp5F/HXkz4z9GO8EJehAO0E5lOTf7F4dtCWU94jJKb7v2GZ6TAuU7jXXuyiH4j1OU8jVBUo6ReMHfY0A489xggIFE0A1lCR6zWU6GmhTKAm/0oxm8uI+LFzr4gRFFjVQMi7RDOqH6AJFvB7dR+5Bi+5nMYLifeFgQGQ/RaAJlCk0pRsizOYF5DePLYIS4fBK3tKkCuWsxWvK7xnJuyVJaiGUMuuwL7cKio/2F/6JIVUpau73aTGUCMecVVIrh2NT6xFSC6HYSGNroHjEsr/Z0HXALyxYpTeWUB4Ugi5QFojTc3nkTPycgC2LIZTj/UAXKCMa6EhjjEm9nA6PR8cKSqX9l1ltAiVBxMKwT9riztL/5z/xk1pSPhmQ0AAAAABJRU5ErkJggg==\"","const AppMode = {\r\n    onAppModeChanged(callback) {\r\n        const eventName = 'appModeChanged';\r\n        if (!this.modeChangedEvent)\r\n            this.modeChangedEvent = new Event(eventName);\r\n        document.addEventListener(eventName, (e) => {\r\n            if (callback)\r\n                callback()\r\n        }, false);\r\n    },\r\n    modeChangedEvent: null,\r\n    modes: [\r\n        {\r\n            label: 'Films',\r\n            urlKey: 'movies',\r\n            isActive: true\r\n        },\r\n        {\r\n            label: 'Series',\r\n            urlKey: 'series',\r\n            isActive: false\r\n        }\r\n    ],\r\n    getActiveMode() {\r\n        return this.modes.find(mode => mode.isActive);\r\n    },\r\n    switchActiveMode() {\r\n        this.modes.forEach(mode => {\r\n            mode.isActive = !mode.isActive;\r\n        });\r\n        if (this.modeChangedEvent)\r\n            document.dispatchEvent(this.modeChangedEvent);\r\n    },\r\n    isSeriesMode() {\r\n        console.log(\"this.modes.filter(mode => mode.isActive)\", this.modes.filter(mode => mode.isActive))\r\n        return this.modes.filter(mode => mode.isActive)[0].urlKey === \"series\"\r\n    }\r\n}\r\n\r\nexport default AppMode;","import \"../../style/nav-bar.css\";\r\nimport logo from '../../assets/logo.png';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from '../../services/appMode';\r\n\r\nfunction NavBar({ onSearchClick, onHomeClick, onGenreMenuClick, onWatchedMediasClick, onBookmarkedMediasClick, onTorrentLinkClick, onAppModeSwitch }) {\r\n\r\n    const [modes, setModes] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        setModes(AppMode.modes);\r\n    },[]);\r\n\r\n    const switchAppMode = () => {\r\n        AppMode.switchActiveMode();\r\n        const updatedModes = [...AppMode.modes];\r\n        setModes(updatedModes);\r\n        onAppModeSwitch(AppMode.getActiveMode());\r\n    }\r\n\r\n    const navBarIconStyle = {\r\n        color: 'white',\r\n        width: '30px',\r\n        height: '30px'\r\n    }\r\n\r\n    return (\r\n        <div className=\"nav-bar-container\">\r\n            <div className=\"nav-bar-left\">\r\n                {modes.map(mode => <div key={mode.label} className={\"mode \" + (mode.isActive ? 'active' : '')} onClick={()=> {if(!mode.isActive)switchAppMode()}}>{mode.label}</div>)}\r\n            </div>\r\n            <img className=\"nav-bar-logo\" alt=\"\" src={logo} />\r\n            <div className=\"nav-bar-right\">\r\n                <div className=\"nav-bar-btn\" onClick={() => onHomeClick()}>\r\n                    <HomeIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onWatchedMediasClick()}>\r\n                    <VisibilityIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onBookmarkedMediasClick()}>\r\n                    <BookmarkIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onGenreMenuClick()}>\r\n                    <ViewModuleIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onSearchClick()}>\r\n                    <SearchIcon style={navBarIconStyle} />\r\n                </div>\r\n                <div className=\"nav-bar-btn\" onClick={() => onTorrentLinkClick()}>\r\n                    <LinkIcon style={navBarIconStyle} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default NavBar;","function fadeTransition(visible, speedTransition, zIndex){\r\n    var speed = speedTransition ? speedTransition + 's' : '0.5s';\r\n\r\n    const transitionStyle = {\r\n            visibility: visible ? 'visible' : 'hidden',\r\n            opacity: visible ? '1' : '0',\r\n            transition: \"all \" + speed\r\n    }\r\n\r\n    if(zIndex)\r\n        transitionStyle.zIndex = visible ? zIndex : '-1';\r\n    \r\n\r\n    return transitionStyle;\r\n}\r\n\r\nexport default fadeTransition;","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useEffect, useState } from 'react';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nfunction CircularProgressBar({ position, color, size, visible, text }) {\r\n\r\n    const [positionStyle, setpositionStyle] = useState({});\r\n    const [displayedText, setDisplayedText] = useState();\r\n\r\n    const textStyle = {\r\n        color: 'white',\r\n        fontSize: '20px',\r\n        fontWeigth: 'bold'\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (position === 'center') {\r\n            setpositionStyle({\r\n                position: 'fixed',\r\n                top: '50%',\r\n                left: '50%',\r\n                transform: 'translate(-50%, -50%)',\r\n                textAlign: 'center'\r\n            })\r\n        }\r\n    }, [position]);\r\n\r\n    useEffect(() => {\r\n        setDisplayedText(text);\r\n    }, [text]);\r\n\r\n    return (\r\n        <div style={fadeTransition(visible)}>\r\n            <div style={positionStyle}>\r\n                <div style={textStyle}>{displayedText}</div>\r\n                <CircularProgress style={{ color: color, width: size, height: 'auto' }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CircularProgressBar;","\r\nimport \"../style/splashscreen.css\";\r\nimport logo from '../assets/logo.png';\r\nimport CircularProgressBar from \"./common/CircularProgressBar\";\r\n\r\nfunction SplashScreen({visible, showErrorMessage}) {\r\n    \r\n    return (\r\n        <div className={\"splash-screen-container\" + (visible ? '' : ' hidden')}>\r\n           <img alt=\"\" src={logo} />\r\n           <CircularProgressBar color='white' size='40px' visible={!showErrorMessage}/>\r\n           <div className=\"error-message\" style={{display: showErrorMessage ? '' : 'none'}}>\r\n                The application failed to load, try to relaunch it\r\n           </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SplashScreen;","import \"../../style/modal-window.css\";\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nfunction ModalWindow({ visible, content, onCloseClick }) {\r\n    return (\r\n        <div style={fadeTransition(visible)} className={\"modal-window-container\" + (visible ? \" visible\" : \"\")}>\r\n            <div className=\"modal-window-content\">\r\n                <div className=\"modal-window-close-btn\" style={{ display: onCloseClick ? '' : \"none\" }} onClick={() => onCloseClick()}>\r\n                    <ClearIcon className=\"close-cross\" />\r\n                </div>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ModalWindow;","class BaseApiService {\r\n    constructor() {\r\n        this._apiBaseUrl = 'http://localhost:5000/';\r\n      }\r\n    \r\n    buildUrl(relativePath){\r\n        return this._apiBaseUrl + relativePath;\r\n    }\r\n\r\n    getRequest(url, parameters, deserializeResult, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    var result = deserializeResult && this.response ? JSON.parse(this.response) : this.response;\r\n                    if (onSuccess)\r\n                        onSuccess(result);\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n\r\n        if (parameters && parameters.length > 0) {\r\n            url += '?';\r\n            for (let i = 0; i < parameters.length; i++) {\r\n                const parameter = parameters[i];\r\n                url += parameter.name + '=' + parameter.value;\r\n                if (i !== parameters.length - 1)\r\n                    url += '&'\r\n            }\r\n        }\r\n\r\n        xhttp.open(\"GET\", url, true);\r\n        xhttp.send();\r\n    }\r\n\r\n    postRequest(url, parameters, onSuccess, onFail) {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4) {\r\n                if (this.status === 200) {\r\n                    if (onSuccess)\r\n                        onSuccess();\r\n                }\r\n                else {\r\n                    if (onFail)\r\n                        onFail();\r\n                }\r\n            }\r\n        };\r\n        xhttp.open(\"POST\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n        xhttp.send(parameters);\r\n    }\r\n\r\n    putRequest(url, obj, onSuccess){\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"PUT\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4 && this.status === 200 && Boolean(onSuccess))\r\n                onSuccess();\r\n        }\r\n    }\r\n\r\n    deleteRequest(url, obj, onSuccess) {\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"DELETE\", url, true);\r\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        xhttp.send(JSON.stringify(obj));\r\n\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4)\r\n                if (this.status === 200)\r\n                    onSuccess();\r\n        }\r\n    }\r\n  }\r\n\r\nexport default BaseApiService;","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SearchMediaApiService extends BaseApiService {\r\n    buildSearchUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/' + url);\r\n    }\r\n\r\n    getMediaGenres(onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genres');\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaPlatforms(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('platforms');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMediasByGenre(genreId, onSuccess, onFail) {\r\n      var url = this.buildSearchUrl('genre/' + genreId);\r\n      this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasOfToday(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('mediasoftoday')\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByGenre(genreId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('genre/' + genreId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediasByPlatform(platformId, page, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('platform/' + platformId + '/' + page);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getMediaDetails(id, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('details/' + id);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    searchMedias(text, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('search');\r\n        var parameters = [\r\n            {\r\n                name: 't',\r\n                value: text\r\n            }\r\n        ]\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularNetflixMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('netflix');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularDisneyPlusMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('disneyplus');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAmazonPrimeMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('amazonprime');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularAppleTvMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('appletv');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getPopularMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('popular');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getRecommandedMedias(onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('recommandations');\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getSimilarMedias(mediaId, onSuccess, onFail) {\r\n        var url = this.buildSearchUrl('similar/'+ mediaId);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getEpisodes(serieId, seasonNumber, onSuccess, onFail){\r\n        var url = this.buildSearchUrl('episodes/'+ serieId + '/' + seasonNumber);\r\n        this.getRequest(url, [], true, onSuccess, onFail);\r\n    }\r\n\r\n}\r\n\r\nexport default SearchMediaApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass BookmarkApiService extends BaseApiService {\r\n    buildBookmarkUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/bookmarks/' + (url ? url : ''));\r\n    }\r\n\r\n    getBookmarkedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildBookmarkUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    addBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.putRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    deleteBookmarkedMedia(mediaDto, onSuccess) {\r\n        this.deleteRequest(this.buildBookmarkUrl(), mediaDto, onSuccess);\r\n    }\r\n\r\n    isMediaBookmarked(mediaId, onSuccess, onFail) {\r\n        var parameters = [\r\n            {\r\n                name: 'id',\r\n                value: mediaId\r\n            }\r\n        ];\r\n        this.getRequest(this.buildBookmarkUrl('exists'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default BookmarkApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass WatchedMediaApiService extends BaseApiService {\r\n    buildWatchedMediaUrl(url){\r\n      return this.buildUrl(AppMode.getActiveMode().urlKey + '/watchedmedia/' + (url ? url : ''));\r\n    }\r\n\r\n    getWatchedMedias(onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedMedia(mediaId, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        const parameters = [\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ]\r\n\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getWatchedEpisodes(mediaId, seasonNumber, onSuccess, onFail) {\r\n        this.getRequest(this.buildWatchedMediaUrl(mediaId + '/' + seasonNumber), [], true, onSuccess, onFail);\r\n    }\r\n\r\n    saveWacthedMedia(mediaDetails, currentTime, duration, seasonNumber, episodeNumber) {\r\n        const watchedMedia = {... mediaDetails};\r\n        watchedMedia.currentTime = currentTime ? currentTime : 0;\r\n        watchedMedia.totalDuration = duration ? duration : 0;\r\n\r\n        if(AppMode.getActiveMode().urlKey === 'series'){\r\n            watchedMedia.seasonNumber = seasonNumber;\r\n            watchedMedia.episodeNumber = episodeNumber;\r\n        }\r\n\r\n        this.putRequest(this.buildWatchedMediaUrl(), watchedMedia);\r\n    }\r\n}\r\n\r\nexport default WatchedMediaApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass TorrentApiService extends BaseApiService {\r\n    buildTorrentUrl(url) {\r\n        return this.buildUrl('torrent/' + (url ? url : ''));\r\n    }\r\n\r\n    buildStreamUrl(url, fileName, seasonNumber, episodeNumber) {\r\n        const base64Url = window.btoa(url);\r\n\r\n        if (fileName)\r\n            return this.buildTorrentUrl('stream/file?base64Url=' + base64Url + '&fileName=' + fileName);\r\n        else if (AppMode.getActiveMode().urlKey === \"series\")\r\n            return this.buildTorrentUrl('stream/series?base64Url=' + base64Url + '&seasonNumber=' + seasonNumber + '&episodeNumber=' + episodeNumber);\r\n        else\r\n            return this.buildTorrentUrl('stream/movies?base64Url=' + base64Url);\r\n    }\r\n\r\n    searchVFSources(mediaId, title, year, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildTorrentUrl(AppMode.getActiveMode().urlKey + '/vf');\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'mediaId',\r\n                value: mediaId\r\n            },\r\n            {\r\n                name: 'title',\r\n                value: encodeURIComponent(title)\r\n            },\r\n            {\r\n                name: 'year',\r\n                value: year\r\n            },\r\n            {\r\n                name: 'season',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episode',\r\n                value: episodeNumber\r\n            },\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    searchVOSources(title, year, imdbid, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildTorrentUrl(AppMode.getActiveMode().urlKey + '/vo');\r\n        var parameters = [\r\n            {\r\n                name: 'title',\r\n                value: encodeURIComponent(title)\r\n            },\r\n            {\r\n                name: 'year',\r\n                value: year\r\n            },\r\n            {\r\n                name: 'season',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episode',\r\n                value: episodeNumber\r\n            },\r\n            {\r\n                name: 'imdbid',\r\n                value: imdbid\r\n            }\r\n        ];\r\n\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getDownloadState(streamUrl, onSuccess, onFail) {\r\n        const url = new URL(streamUrl);\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'base64TorrentUrl',\r\n                value: url.searchParams.get('base64Url')\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('streamdownloadstate'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentFiles(torrentUrl, onSuccess, onFail) {\r\n        const base64Url = window.btoa(torrentUrl);\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'base64torrentUrl',\r\n                value: base64Url\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildTorrentUrl('files'), parameters, true, onSuccess, onFail);\r\n    }\r\n\r\n    getTorrentHistory(onSuccess, onFail) {\r\n        this.getRequest(this.buildTorrentUrl('history'), null, true, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default TorrentApiService;\r\n","import BaseApiService from \"./baseApiService\";\r\nimport AppMode from \"../appMode\";\r\n\r\nclass SubtitlesApiService extends BaseApiService {\r\n    buildSubtitlesUrl(url){\r\n        return this.buildUrl('subtitles/' + (url ? url : ''));\r\n    }\r\n\r\n    getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber, onSuccess, onFail) {\r\n        var url = this.buildSubtitlesUrl(AppMode.getActiveMode().urlKey);\r\n        var parameters = [\r\n            {\r\n                name: 'imdbCode',\r\n                value: imdbCode\r\n            },\r\n            {\r\n                name: 'seasonNumber',\r\n                value: seasonNumber\r\n            },\r\n            {\r\n                name: 'episodeNumber',\r\n                value: episodeNumber\r\n            }\r\n        ];\r\n        this.getRequest(url, parameters, true, onSuccess, onFail);\r\n    }\r\n    \r\n    getSubtitlesApiUrl(subtitlesSourceUrl) {\r\n        return this.buildSubtitlesUrl(\"?sourceUrl=\" + subtitlesSourceUrl);\r\n    }\r\n}\r\n\r\nexport default SubtitlesApiService;\r\n  ","import BaseApiService from \"./baseApiService\";\r\n\r\nclass AppInfoApiService extends BaseApiService {\r\n    buildAppInfoUrl(url){\r\n        return this.buildUrl('application/' + (url ? url : ''));\r\n    }\r\n\r\n    isDesktopApplication(onSuccess, onFail) {\r\n        if (this.isDesktopApp) onSuccess(this.isDesktopApp);\r\n        else {\r\n            const self = this;\r\n            this.getRequest(this.buildAppInfoUrl('platform'), null, true, (response) => {\r\n                self.isDesktopApp = response.isDesktopApplication;\r\n                onSuccess(response.isDesktopApplication);\r\n            }, onFail);\r\n        }\r\n    }\r\n\r\n    playWithVlc(streamUrl, onSuccess, onFail){\r\n\r\n        var parameters = [\r\n            {\r\n                name: 'streamUrl',\r\n                value: encodeURIComponent(streamUrl)\r\n            }\r\n        ];\r\n\r\n        this.getRequest(this.buildAppInfoUrl('startvlc'), parameters, false, onSuccess, onFail);\r\n    }\r\n}\r\n\r\nexport default AppInfoApiService;\r\n  ","import SearchMediaApiService from './api/searchMediaApiService';\r\nimport BookmarkApiService from './api/bookmarkApiService';\r\nimport WatchedMediaApiService from './api/watchedMediaApiService';\r\nimport TorrentApiService from './api/torrentApiService';\r\nimport SubtitlesApiService from './api/subtitlesApiService';\r\nimport AppInfoApiService from './api/appInfoApiService';\r\n\r\nconst AppServices = {\r\n    init(){\r\n        this.searchMediaService = new SearchMediaApiService();\r\n        this.bookmarkApiService = new BookmarkApiService();\r\n        this.watchedMediaApiService = new WatchedMediaApiService();\r\n        this.torrentApiService = new TorrentApiService();\r\n        this.subtitlesApiService = new SubtitlesApiService();\r\n        this.appInfoApiService = new AppInfoApiService();\r\n    }\r\n}\r\n\r\nexport default AppServices;","import \"../../style/list-categories-view.css\";\r\nimport ModalWindow from \"./ModalWindow\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport AppMode from \"../../services/appMode\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction ModalCategories({ visible, onCloseClick, onGenreClick, onPlatformClick }) {\r\n    const [loading, setLoading] = useState(true);\r\n    const [listGenres, setListGenres] = useState([]);\r\n    const [listPlatforms, setListPlatforms] = useState([]);\r\n\r\n    const loadCategories = () => {\r\n        setListGenres([]);\r\n        AppServices.searchMediaService.getMediaGenres(\r\n            (genres) => {\r\n                if (genres && genres.length > 0) {\r\n                    setListGenres(genres);\r\n                }\r\n            }\r\n        );\r\n\r\n        AppServices.searchMediaService.getMediaPlatforms(\r\n            (platforms) => {\r\n                if (platforms && platforms.length > 0) {\r\n                    setListPlatforms(platforms);\r\n                }\r\n            }\r\n        );\r\n    }\r\n    useEffect(() => {\r\n        loadCategories();\r\n        AppMode.onAppModeChanged(() => {\r\n            loadCategories();\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setLoading(!listGenres || listGenres.length === 0 || !listPlatforms || listPlatforms.length === 0);\r\n    }, [listGenres, listPlatforms]);\r\n\r\n    const listGenresView = () => {\r\n        return (\r\n            <div className=\"list-categories-view-container\">\r\n                <CircularProgressBar color={'white'} size={'60px'} position={'center'} visible={loading} />\r\n                <h3 className=\"categorie-title\">Genres</h3>\r\n                <div className=\"list-categories\">\r\n                    {listGenres.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onGenreClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n                <h3 className=\"categorie-title\">Platforms</h3>\r\n                <div className=\"list-categories\">\r\n                    {listPlatforms.map(genre =>\r\n                        <div key={genre.id}\r\n                            className=\"genre\"\r\n                            onClick={() => onPlatformClick(genre)}>\r\n                            {genre.name}\r\n                        </div>)}\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={listGenresView()} onCloseClick={() => onCloseClick()} />\r\n    )\r\n}\r\n\r\nexport default ModalCategories;","function Rating({ rating, size }) {\r\n\r\n    const style = {\r\n        color: \"white\",\r\n        fontSize: size === \"small\" ? \"15px\" : \"20px\",\r\n        fontWeight: \"bold\",\r\n        margin: \"0 auto\",\r\n        backgroundColor: \"#52525263\",\r\n        borderRadius: \"50%\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: size === \"small\" ? \"35px\" : \"50px\",\r\n        width: size === \"small\" ? \"35px\" : \"50px\",\r\n    };\r\n\r\n    return (\r\n        <div style={style}>{rating}</div>\r\n    );\r\n}\r\n\r\nexport default Rating;","\r\nimport \"../../../style/media-lite-presentation.css\";\r\n\r\nimport Rating from \"../../common/Rating\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport fadeTransition from \"../../../helpers/customStyles.js\";\r\n\r\nfunction MediaLitePresentation({ media, onMediaClick, hoverEffect }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setDataLoaded(media?.coverImageUrl);\r\n    }, [media]);\r\n\r\n    if (!Boolean(media?.coverImageUrl))\r\n        return null;\r\n\r\n    const truncate = (text, maxLength) => {\r\n        if (text && text.length > maxLength)\r\n            return text.substring(0, maxLength) + '...';\r\n        else return text;\r\n    }\r\n\r\n    const handleClick = () => {\r\n        setTimeout(() => {\r\n            if (onMediaClick)\r\n                onMediaClick(media?.id);\r\n        }, 150);\r\n    }\r\n\r\n    const formatMediaRating = (rating) => {\r\n        return rating ? rating.toString().replace(',', '.') : '';\r\n    };\r\n\r\n    return (\r\n        <div style={fadeTransition(dataLoaded)}>\r\n            <div className={\"media-lite-presentation \" + (hoverEffect ? \"hover-effect\" : \"\")} onClick={() => handleClick()}>\r\n                <div className={\"media-lite-presentation-img\"} style={{ backgroundImage: 'url(' + media.coverImageUrl + ')' }}>\r\n                    <div className=\"rating\">\r\n                        <Rating rating={formatMediaRating(media.rating)} size=\"small\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"infos\">\r\n                    <div className=\"title\">{truncate(media.title, 25)}</div>\r\n                    <div className=\"year\">{media.year}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediaLitePresentation;","const CacheService = {\r\n    cacheCollection: [],\r\n    setCache(id, data){\r\n        let cache = this.getCache(id);\r\n        if(!cache){\r\n            this.cacheCollection.push({\r\n                id: id,\r\n                data: data\r\n            }); \r\n        }\r\n        else\r\n            cache.data = data;\r\n    },\r\n    getCache(id){\r\n        return this.cacheCollection.find(c => c.id === id);\r\n    },\r\n    clearCache(){\r\n        this.cacheCollection = [];\r\n    }\r\n}\r\n\r\nexport default CacheService;","import \"../../../style/media-lite-presentation.css\";\r\nimport \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport CacheService from \"../../../services/cacheService\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction MediasCategorieList({ categorie, searchOperation, loadFromCache, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [pageIndex, setPageIndex] = useState(0);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n    const [plusButtonVisible, setPlusButtonVisible] = useState(false);\r\n    \r\n    const addIconStyle = {\r\n        width: '60px',\r\n        height: '60px',\r\n        color: 'white',\r\n        margin: 'auto'\r\n    };\r\n\r\n    const performSearch = () => {\r\n        setSearchInProgress(true);\r\n        setPlusButtonVisible(false); \r\n        searchOperation(categorie.id, pageIndex,\r\n            (mediasOfCategories) => {\r\n                setSearchInProgress(false);\r\n                if (mediasOfCategories && mediasOfCategories.length > 0) {\r\n                    setPlusButtonVisible(true);\r\n                    if (pageIndex === 1) setMedias(mediasOfCategories);\r\n                    else setMedias(medias.concat(mediasOfCategories));\r\n                }\r\n            },\r\n            () => setSearchInProgress(false));\r\n    }\r\n\r\n    const getCacheId = (categorieId) => \"categorie\" + categorieId;\r\n\r\n    useEffect(() => {\r\n        if (loadFromCache) {\r\n            const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n            setPageIndex(cacheMedias.data.pageIndex);\r\n        }\r\n        else {           \r\n            CacheService.setCache(getCacheId(categorie.id), null);\r\n            setMedias([]);\r\n            setPageIndex(1); \r\n            if(pageIndex === 1) performSearch(); \r\n        }\r\n    }, [categorie.id]);\r\n\r\n    useEffect(() => {\r\n        if (pageIndex > 0) {  \r\n            const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n            if (cacheMedias && cacheMedias.data) setMedias(cacheMedias.data.medias);\r\n            else performSearch();\r\n        }\r\n    }, [pageIndex]);\r\n\r\n    useEffect(() => {\r\n        if (medias && medias.length > 0) {\r\n            if (loadFromCache) {\r\n                const cacheMedias = CacheService.getCache(getCacheId(categorie.id));\r\n                if (cacheMedias && cacheMedias.data) {\r\n                    setPlusButtonVisible(true);\r\n                    scrollToMedia(cacheMedias.data.mediaElementId);\r\n                    CacheService.setCache(getCacheId(categorie.id), null);\r\n                }\r\n            }\r\n            else if(pageIndex === 1)  scrollToMedia(\"medialite0\");\r\n        }\r\n    }, [medias]);\r\n\r\n    const scrollToMedia = (elemId) => {\r\n        var elem = document.getElementById(elemId);\r\n        if (elem) {\r\n            elem.scrollIntoView({\r\n                block: \"nearest\",\r\n                inline: \"nearest\"\r\n            });\r\n        }\r\n    }\r\n \r\n    const handleMediaClick = (mediaId, elementId) => {\r\n        const data = {\r\n            medias: medias,\r\n            pageIndex: pageIndex,\r\n            mediaElementId: elementId\r\n        }\r\n        CacheService.setCache(getCacheId(categorie.id), data);\r\n        onMediaClick(mediaId);\r\n    }\r\n\r\n    return (\r\n        <div className=\"medias-list-by-categorie-container\">\r\n            <div className=\"medias-list-by-categorie-header\">\r\n                <div className=\"medias-list-categorie\">{categorie.name}</div>\r\n                <CircularProgressBar size={'30px'} color={'white'} visible={searchInProgress} />\r\n            </div>\r\n            <div className=\"medias-list-container full\">\r\n                <div className=\"medias-list wrap-content\">\r\n                    {medias.map((media, index) =>\r\n                    (<div id={\"medialite\" + index} key={index}>\r\n                        <MediaLitePresentation media={media} hoverEffect={true} onMediaClick={(mediaId) => handleMediaClick(mediaId, \"medialite\" + index)} />\r\n                    </div>))}\r\n                    <div className=\"medias-list-more\">\r\n                        <div className=\"round-btn grey\"\r\n                            style={{ visibility: plusButtonVisible ? 'visible' : 'hidden' }}\r\n                            onClick={() => { if (plusButtonVisible) {setPageIndex(pageIndex + 1);} }}>\r\n                            <AddIcon style={addIconStyle} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasCategorieList;","\r\n\r\nimport MediasCategorieList from \"../components/media/list/MediasCategorieList\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\n\r\nfunction MediasListGenrePage({ genre, loadFromCache, onMediaClick }) {\r\n\r\n    return (\r\n        <MediasCategorieList \r\n            categorie={genre} \r\n            loadFromCache={loadFromCache}\r\n            searchOperation={(genreId, pageIndex, onSuccess, onFail) => AppServices.searchMediaService.getMediasByGenre(genreId, pageIndex, onSuccess, onFail)}\r\n            onMediaClick={(mediaId) => onMediaClick(mediaId)}/>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","\r\n\r\nimport MediasCategorieList from \"../components/media/list/MediasCategorieList\";\r\nimport AppServices from \"../services/AppServices\";\r\n\r\n\r\nfunction MediasListGenrePage({ platform, loadFromCache, onMediaClick }) {\r\n\r\n    return (\r\n        <MediasCategorieList \r\n            categorie={platform} \r\n            loadFromCache={loadFromCache}\r\n            searchOperation={(platformId, pageIndex, onSuccess, onFail) => AppServices.searchMediaService.getMediasByPlatform(platformId, pageIndex, onSuccess, onFail)}\r\n            onMediaClick={(mediaId) => onMediaClick(mediaId)}/>\r\n    );\r\n}\r\n\r\nexport default MediasListGenrePage;","import ModalWindow from \"./ModalWindow\";\r\n\r\nfunction ModalMediaTrailer({visible, youtubeTrailerUrl, onCloseClick}){\r\n\r\n\r\n    const trailerStyle = {      \r\n            width: '800px',\r\n            height: '500px',\r\n            margin: 'auto 0',\r\n            backgroundColor: 'black',\r\n            border: 'none',\r\n            boxShadow: '1px 1px 14px 7px #101010c9'       \r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <iframe style={trailerStyle} src={visible ? youtubeTrailerUrl : ''}></iframe>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalMediaTrailer; ","function TitleAndContent({ title, content, justify }) {\r\n    let justifyContent;\r\n    if(justify === 'left')\r\n        justifyContent = 'flex-start';\r\n    else \r\n        justifyContent = 'center';\r\n\r\n    const containerStyle = {\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: justifyContent,\r\n        margin: '10px 0',\r\n    }\r\n\r\n    const titleStyle = {\r\n        color: 'white',\r\n        marginRight : '15px'\r\n    }\r\n\r\n    const contentStyle = {\r\n        color: \"#959595\",\r\n        display: \"flex\"\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={titleStyle}>{title}</div>\r\n            <div style={contentStyle}>{content}</div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default TitleAndContent;","function ProgressionBar({value, width}){\r\n\r\n    const containerStyle = {\r\n        width: width,\r\n        backgroundColor: '#423737',\r\n        height: '5px',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    const progressionStyle = {\r\n        width: value + '%',\r\n        backgroundColor: '#e91919',\r\n        height: '100%',\r\n        borderRadius: '2px'\r\n    }\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div style={progressionStyle}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProgressionBar;","\r\n\r\nfunction SecondaryInfo({text, center}){\r\n    const style = {\r\n        fontSize: \"18px\",\r\n        fontWeight: \"500\",\r\n        color: \"#959595\",\r\n        textAlign: center ? \"center\" : \"left\",\r\n        margin: '10px 0'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default SecondaryInfo;","function Paragraph({text, visible}){\r\n\r\n    if(visible === false)\r\n        return null;\r\n        \r\n    const style = {\r\n        fontSize: '17px',\r\n        fontWeight: '500',\r\n        color: 'white'\r\n    }\r\n\r\n    return(\r\n        <p style={style}>{text}</p>\r\n    )\r\n}\r\n\r\nexport default Paragraph;","import \"../../../style/button.css\";\r\nimport { useState } from 'react';\r\n\r\nfunction BaseButton({ color, content, centered, rounded, width, onClick }) {\r\n\r\n    const [showRippleEffect, setShowRippleEffect] = useState(false);\r\n\r\n    const handleClick = () => {\r\n        setShowRippleEffect(true)\r\n        setTimeout(() => {\r\n            setShowRippleEffect(false);\r\n            onClick();\r\n        }, 300);\r\n    };\r\n\r\n    const computeClass = () => {\r\n        let className = \"standard-button\";\r\n        if (color) className += \" \" + color;\r\n        if (centered) className += \" center\";\r\n        if(rounded) className += \" rounded\";\r\n        return className;\r\n    }\r\n\r\n    const computeStyle = () => {\r\n        if(width){\r\n            return {\r\n                width: width\r\n            }\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n\r\n    return (\r\n        <div className={computeClass()} style={computeStyle()} onClick={() => handleClick()}>\r\n            <div className={\"ripple-effect \" + (showRippleEffect ? 'visible' : '')}></div>\r\n            {content}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BaseButton;","\r\nimport { useEffect } from 'react';\r\n// Hook\r\nfunction useOnClickOutside(ref, handler) {\r\n    useEffect(\r\n      () => {\r\n        const listener = event => {\r\n          if (!ref.current || ref.current.contains(event.target)) {\r\n            return;\r\n          }\r\n          handler(event);         \r\n        };\r\n  \r\n        document.addEventListener('mousedown', listener);\r\n        document.addEventListener('touchstart', listener);\r\n  \r\n        return () => {\r\n          document.removeEventListener('mousedown', listener);\r\n          document.removeEventListener('touchstart', listener);\r\n        };\r\n      },\r\n      [ref, handler]\r\n    );\r\n  }\r\n\r\n  export { useOnClickOutside };","import BaseButton from './buttons/BaseButton';\r\nimport ArrowDropDownOutlinedIcon from '@material-ui/icons/ArrowDropDownOutlined';\r\nimport { useOnClickOutside } from '../../helpers/customHooks';\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction DropDown({ values, width, onValueChanged, textAlignement }) {\r\n\r\n    const [showList, setShowList] = useState(false);\r\n    const [selectedValue, setSelectedValue] = useState('');\r\n    const [dropDownValues, setDropDownValues] = useState([]);\r\n    const dropdownRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (shouldUpdateDropDownValues(values)) {\r\n            setDropDownValues(values);\r\n            setSelectedValue(values[0]);\r\n        }\r\n    }, [values])\r\n\r\n    useOnClickOutside(dropdownRef, () => setShowList(false));\r\n\r\n    const shouldUpdateDropDownValues = (values) => {\r\n        if (dropDownValues.length !== values.length)\r\n            return true;\r\n\r\n        let nbDifferentValues = 0;\r\n        dropDownValues.forEach((v, i) => {\r\n            if (values[i] !== v)\r\n                nbDifferentValues += 1;\r\n        });\r\n\r\n        return nbDifferentValues > 0;\r\n    }\r\n\r\n    const containerStyle = {\r\n        position: 'relative'\r\n    }\r\n\r\n    const listStyle = {\r\n        display: showList ? 'block' : 'none',\r\n        position: 'absolute',\r\n        bottom: '0',\r\n        left: '50%',\r\n        transform: 'translate(-50%, 100%)',\r\n        borderRadius: '5px',\r\n        boxShadow: 'rgb(0 0 0 / 91%) 0px 19px 20px 8px, rgb(0 0 0) 0px 15px 20px 0px',\r\n        backgroundColor: '#141414',\r\n        color: 'white',\r\n        fontSize: '16px',\r\n        fontWeight: '500',\r\n        maxHeight: '100px',\r\n        width: width,\r\n        overflowY: 'scroll',\r\n        zIndex: '5',\r\n        textAlign: textAlignement ? textAlignement : 'left'\r\n    }\r\n\r\n    const buttonContentStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: width,\r\n    }\r\n\r\n    const buttonContent = (\r\n        <div style={buttonContentStyle}>\r\n            <div>{selectedValue}</div>\r\n            <ArrowDropDownOutlinedIcon />\r\n        </div>)\r\n\r\n    const listElementStyle = {\r\n        padding: '5px',\r\n        cursor: 'pointer'\r\n    }\r\n\r\n    const onElementMouseHover = (element) => {\r\n        element.style.backgroundColor = '#959595';\r\n    }\r\n\r\n    const onElementMouseOut = (element) => {\r\n        element.style.backgroundColor = '';\r\n    }\r\n\r\n    const OnElementClick = (index) => {\r\n        setShowList(false);\r\n        setSelectedValue(values[index]);\r\n        onValueChanged(index);\r\n    }\r\n\r\n    return (\r\n        <div ref={dropdownRef} style={containerStyle}>\r\n            <BaseButton color=\"red\" content={buttonContent} width={width} onClick={() => setShowList(!showList)} />\r\n            <div style={listStyle}>\r\n                {dropDownValues.map((v, i) => <div\r\n                    key={v}\r\n                    style={listElementStyle}\r\n                    onMouseOver={(e) => onElementMouseHover(e.target)}\r\n                    onMouseOut={(e) => onElementMouseOut(e.target)}\r\n                    onClick={() => OnElementClick(i)}>\r\n                    {v}\r\n                </div>)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropDown;","export function ToTimeFormat(totalMinutes) {\r\n    const totalHours = totalMinutes / 60;\r\n\r\n    const hours = Math.trunc(totalHours);\r\n    const minutes = Math.trunc((totalHours - hours) * 60);\r\n\r\n    let timeFormat = '';\r\n    if (hours > 0)\r\n        timeFormat += hours + 'h ';\r\n\r\n    timeFormat += (minutes < 10 ? \"0\" + minutes : minutes) + 'min';\r\n\r\n    return timeFormat;\r\n}","import ModalWindow from \"./ModalWindow\";\r\nimport TitleAndContent from \"../common/TitleAndContent\";\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\nimport ProgressionBar from \"../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../common/text/SecondaryInfo\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport DropDown from \"../common/DropDown\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\nimport { ToTimeFormat } from \"../../helpers/timeFormatHelper\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\n\r\nimport \"../../style/modal-episode-selector.css\";\r\n\r\nfunction ModalEpisodeSelector({ visible, serieId, numberOfSeasons, onEpisodeSelected, onCloseClick }) {\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1);\r\n    const [episodes, setEpisodes] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [noEpisodeMessageVisible, setNoEpisodeMessageVisible] = useState(false);\r\n    const episodeListRef = useRef(null);\r\n\r\n    const seasonNumberList = [];\r\n    for (let i = 1; i <= numberOfSeasons; i++) {\r\n        seasonNumberList.push(\"Season \" + i);\r\n    }\r\n\r\n    const content = () => {\r\n        return (\r\n            <div className=\"modal-episode-selector-container\">\r\n                <div className=\"season-selector-container\">\r\n                    <DropDown values={seasonNumberList} width=\"120px\" textAlignement={\"center\"} onValueChanged={(selectedIndex) => setSelectedSeasonNumber(selectedIndex + 1)} />\r\n                </div>\r\n                <div ref={episodeListRef} className=\"episode-list-container\">\r\n                    <div className=\"loading-container\">\r\n                        <CircularProgressBar color={\"white\"} size={\"50px\"} visible={isLoading} />\r\n                        <Paragraph text={\"No episodes found\"} visible={noEpisodeMessageVisible} />\r\n                    </div>\r\n                    <div style={fadeTransition(episodes && episodes.length > 0)}>\r\n                        {episodes.map(episode =>\r\n                            <Episode\r\n                                key={episode.episodeNumber}\r\n                                episode={episode}\r\n                                onClick={() => onEpisodeSelected(selectedSeasonNumber, episode.episodeNumber)} />)}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (serieId) {\r\n            setEpisodes([]);\r\n            setIsLoading(true);\r\n            setNoEpisodeMessageVisible(false)\r\n            AppServices.searchMediaService.getEpisodes(serieId, selectedSeasonNumber,\r\n                (episodes) => {\r\n                    if (episodeListRef.current)\r\n                        episodeListRef.current.scrollTop = 0;\r\n\r\n                    setIsLoading(false);\r\n                    if (episodes && episodes.length > 0) {\r\n                        loadEpisodesProgress(episodes, selectedSeasonNumber);\r\n                    }\r\n                    else\r\n                        setNoEpisodeMessageVisible(true)\r\n                },\r\n                () => {\r\n                    setIsLoading(false);\r\n                    setNoEpisodeMessageVisible(true)\r\n                })\r\n        }\r\n    }, [serieId, selectedSeasonNumber]);\r\n\r\n    const loadEpisodesProgress = (episodesOfSeason, seasonNumber) => {\r\n        AppServices.watchedMediaApiService.getWatchedEpisodes(serieId, seasonNumber,\r\n            (watchedEpisodes) => {\r\n                const newTab = [...episodesOfSeason]\r\n                if (watchedEpisodes && watchedEpisodes.length > 0) {\r\n                    watchedEpisodes.forEach(watchedEpisode => {\r\n                        const episode = newTab.find(ep => ep.episodeNumber === watchedEpisode.episodeNumber);\r\n                        if (episode)\r\n                            episode.progression = watchedEpisode.currentTime / watchedEpisode.totalDuration;\r\n                    });\r\n                }\r\n                setEpisodes(newTab);\r\n            },\r\n            () => {\r\n                setEpisodes(episodesOfSeason);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <ModalWindow visible={visible} content={content()} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nexport default ModalEpisodeSelector;\r\n\r\nfunction Episode({ episode, onClick }) {\r\n    return <div className=\"episode-container\" onClick={() => onClick()}>\r\n        <div style={{ margin: 'auto 0' }}>\r\n            <img src={episode.imagePath} />\r\n            {episode.progression ? <ProgressionBar value={episode.progression * 100} width=\"98%\" /> : null}\r\n        </div>\r\n\r\n        <div>\r\n            <TitleAndContent title={episode.episodeNumber + '.' + episode.name} content={ToTimeFormat(episode.runTime)} justify=\"left\" />\r\n            <SecondaryInfo text={episode.overview.substring(0, 300)} />\r\n        </div>\r\n    </div>\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\nfunction VideoSubtitles({ videoCurrentTime, urlSource, size, subtitlesAdjustTime }) {\r\n    const [currentSubtitles, setCurrentSubtitles] = useState('');\r\n    const [subtitles, setSubtitles] = useState([]);\r\n    const [textItalic, setTextItalic] = useState(false);\r\n\r\n    const applySubtitles = (currentTime) => {\r\n        if (!subtitles || subtitles.length === 0)\r\n            return;\r\n        \r\n        var subtitle = subtitles.find(s =>\r\n            (s.startTime + subtitlesAdjustTime) <= currentTime && currentTime <= (s.endTime + subtitlesAdjustTime));\r\n\r\n        if (subtitle?.text) {\r\n            var text = subtitle.text;\r\n            setTextItalic(false);\r\n            if (text.includes('<i>') || text.includes('</i>')) {\r\n                setTextItalic(true);\r\n                text = text.replace('<i>', '').replace('</i>', '');\r\n            }\r\n            setCurrentSubtitles(text);\r\n        }\r\n        else setCurrentSubtitles('');\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (urlSource) {\r\n            var xhttp = new XMLHttpRequest();\r\n            xhttp.onreadystatechange = function () {\r\n                if (this.readyState == 4 && this.status == 200 && this.responseText) {\r\n                    setSubtitles(JSON.parse(this.response));\r\n                }\r\n            };\r\n            xhttp.open(\"GET\", urlSource, true);\r\n            xhttp.send();\r\n        }\r\n\r\n        return () => {\r\n            setSubtitles([]);\r\n            setCurrentSubtitles('');\r\n        }\r\n    }, [urlSource]);\r\n\r\n    useEffect(() => {\r\n        if(videoCurrentTime)\r\n            applySubtitles(videoCurrentTime);\r\n    }, [videoCurrentTime, subtitles, subtitlesAdjustTime]);\r\n\r\n    return (<div className=\"video-player-subtitles\"\r\n        style={{ fontSize: size + 'px', fontStyle: textItalic ? 'italic' : '' }}>\r\n        {currentSubtitles}\r\n    </div>);\r\n}\r\n\r\nexport default VideoSubtitles;","import { useEffect, useState } from 'react';\r\n\r\nfunction Slider({ value, width, height, progressColor, cursorColor, tooltip, onCursorMoved, onCursorEndMove, onMouseOverSlider }) {\r\n    const [cursorPosition, setCursorPosition] = useState(0);\r\n    const [showToolTip, setShowToolTip] = useState(false);\r\n\r\n    const positionToPercentage = (XPosition, railBoundings) => {\r\n        if (XPosition < railBoundings.left)\r\n            return 0;\r\n        else if (XPosition > railBoundings.right)\r\n            return 100;\r\n        else\r\n            return (XPosition - railBoundings.left) * 100 / (railBoundings.right - railBoundings.left);\r\n    }\r\n\r\n    const initiateCursorMove = () => {\r\n        document.addEventListener('mousemove', moveCursor);\r\n        document.addEventListener('mouseup', endMove);\r\n    }\r\n\r\n    const moveCursor = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorMoved) onCursorMoved(percentage);\r\n    }\r\n\r\n    const endMove = (event) => {\r\n        if (onCursorEndMove) {\r\n            var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n            onCursorEndMove(percentage);\r\n        }\r\n        document.removeEventListener('mouseup', endMove);\r\n        document.removeEventListener('mousemove', moveCursor);\r\n    }\r\n\r\n    const onSliderClick = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        setCursorPosition(percentage);\r\n        if (onCursorEndMove) onCursorEndMove(percentage);\r\n    }\r\n\r\n    const onMouseMoveOverSlider = (event) => {\r\n        var percentage = positionToPercentage(event.clientX, event.target.parentElement.getBoundingClientRect());\r\n        if (onMouseOverSlider) onMouseOverSlider(percentage);\r\n    }\r\n\r\n    const onMouseLeaveSlider = () => {\r\n        setShowToolTip(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setCursorPosition(value);\r\n    }, [value])\r\n\r\n    useEffect(() => {\r\n        if (tooltip) setShowToolTip(true);\r\n    }, [tooltip])\r\n\r\n    return (\r\n        <div className=\"video-player-slider-container\"\r\n            style={{ width: width, height: height }}\r\n            onClick={(event) => onSliderClick(event)}\r\n            onMouseMove={(event) => onMouseMoveOverSlider(event)}\r\n            onMouseLeave={() => onMouseLeaveSlider()}>\r\n            <div className=\"complete-part\" style={{ width: cursorPosition + \"%\", backgroundColor: progressColor }}></div>\r\n            <div className=\"remaining-part\" style={{ width: (100 - cursorPosition) + \"%\" }}></div>\r\n            <div className=\"cursor\" style={{ left: cursorPosition + '%', backgroundColor: cursorColor }} onMouseDown={() => initiateCursorMove()}></div>\r\n            <div className=\"tooltip\" style={{ left: tooltip?.position + '%', display: showToolTip ? '' : 'none' }}>{tooltip?.text}</div>\r\n        </div>)\r\n}\r\n\r\n\r\nexport default Slider;","\r\nimport VideoPlayerSlider from './Slider';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction TimeController({ videoDuration, videoCurrentTime, onTimeChanged }) {\r\n    const [videoCurrentTimeLabel, setVideoCurrentTimeLabel] = useState('00:00');\r\n    const [videoRemainingTimeLabel, setVideoRemainingTimeLabel] = useState('00:00');\r\n    const [currentPourcentageTimeVideo, setcurrentPourcentageTimeVideo] = useState(0);\r\n    const [tooltip, setTooltip] = useState(null);\r\n    const [totalTime, setTotalTime] = useState(0);\r\n\r\n    const getTimeLabel = (duration) => {\r\n        let hours = Math.floor(duration / 3600);\r\n        let minutes = Math.floor((duration - (hours * 3600)) / 60);\r\n        let seconds = Math.floor(duration - (hours * 3600) - (minutes * 60));\r\n\r\n        let hourValues = '';\r\n        if (hours > 0) {\r\n            hourValues = hours < 10 ? '0' + hours : hours;\r\n            hourValues += ':';\r\n        }\r\n        let minuteValue = minutes < 10 ? '0' + minutes : minutes;\r\n        let secondValue = seconds < 10 ? '0' + seconds : seconds;\r\n        return hourValues + minuteValue + ':' + secondValue;\r\n    };\r\n\r\n    const changeTimeVideo = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            var newTime = Math.floor((percentage * totalTime) / 100)\r\n            setVideoCurrentTimeLabel(getTimeLabel(newTime));\r\n            onTimeChanged(newTime);\r\n        }\r\n    }\r\n\r\n    const updateTimeVideo = (time) => {\r\n        setVideoCurrentTimeLabel(getTimeLabel(time));\r\n        setVideoRemainingTimeLabel(getTimeLabel(videoDuration - time));\r\n        \r\n        if(totalTime && totalTime > 0)\r\n            setcurrentPourcentageTimeVideo((time) * 100 / totalTime);\r\n        else\r\n            setcurrentPourcentageTimeVideo(0);\r\n    }\r\n\r\n    const setTimeControllerTooltip = (percentage) => {\r\n        if (totalTime && totalTime > 0) {\r\n            setTooltip({\r\n                text: getTimeLabel(Math.floor((percentage * totalTime) / 100)),\r\n                position: percentage\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (videoCurrentTime)\r\n            updateTimeVideo(videoCurrentTime);\r\n    }, [videoCurrentTime]);\r\n\r\n    useEffect(() => {\r\n        if (videoDuration){\r\n            setTotalTime(videoDuration);\r\n            setVideoRemainingTimeLabel(getTimeLabel(videoDuration));\r\n        }\r\n        else\r\n            setTotalTime(0);\r\n            \r\n    }, [videoDuration]);\r\n\r\n    return (\r\n        <div className=\"video-time-controller-container\">\r\n            <div className=\"video-time-label\">{videoCurrentTimeLabel}</div>\r\n            <VideoPlayerSlider value={currentPourcentageTimeVideo}\r\n                onCursorEndMove={(percentage) => changeTimeVideo(percentage)}\r\n                onMouseOverSlider={(percentage) => setTimeControllerTooltip(percentage)}\r\n                tooltip={tooltip}\r\n                progressColor={'#ed0f0f'}\r\n                cursorColor={'#b59e9e'} />\r\n            <div className=\"video-time-label\">{videoRemainingTimeLabel}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TimeController;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport VolumeUp from '@material-ui/icons/VolumeUp';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\r\nimport Forward10Icon from '@material-ui/icons/Forward10';\r\nimport Replay10Icon from '@material-ui/icons/Replay10';\r\n\r\nimport Slider from './Slider';\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction LeftControlsGroup({ videoIsPlaying, onPlayClick, onPauseClick, onVolumeChanged, onPlayBackwardClick, onPlayForwardClick }) {\r\n    const [showPlayButton, setShowPlayButton] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setShowPlayButton(!videoIsPlaying);\r\n    }, [videoIsPlaying]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <PlayArrowIcon className=\"icon\" style={{ display: showPlayButton ? '' : 'none' }} onClick={() => onPlayClick()} />\r\n            <PauseIcon className=\"icon\" style={{ display: showPlayButton ? 'none' : '' }} onClick={() => onPauseClick()} />\r\n            <VolumeController onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)} />\r\n            <Replay10Icon className=\"icon\" onClick={() => onPlayBackwardClick()}/>\r\n            <Forward10Icon className=\"icon\" onClick={() => onPlayForwardClick()}/>\r\n        </div>)\r\n}\r\n\r\nexport default LeftControlsGroup;\r\n\r\n\r\nfunction VolumeController({ onVolumeChanged }) {\r\n    const defaultVolume = 70;\r\n    const currentVolumeRef = useRef(0);\r\n    const [previousVolume, setPreviousVolume] = useState(defaultVolume);\r\n\r\n    const changeVolume = (percentage) => {\r\n        currentVolumeRef.current = percentage;\r\n        onVolumeChanged(percentage / 100);\r\n    };\r\n\r\n    const muteVideo = () => {\r\n        setPreviousVolume(currentVolumeRef.current);\r\n        changeVolume(0);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        changeVolume(defaultVolume);\r\n      \r\n        const onKeyboardPress = (e) =>{\r\n            if(e.keyCode === 38 && currentVolumeRef.current < 100)\r\n                changeVolume(currentVolumeRef.current + 10);\r\n            else if(e.keyCode === 40 && currentVolumeRef.current > 0)\r\n                changeVolume(currentVolumeRef.current - 10);\r\n        }\r\n\r\n        document.addEventListener('keyup', onKeyboardPress, false);\r\n\r\n        return () => {\r\n            document.removeEventListener('keyup', onKeyboardPress);\r\n        }\r\n    },[]);\r\n\r\n    return (<div className=\"video-volume-controller\">\r\n        <VolumeUp className=\"icon\" onClick={() => { muteVideo() }} style={{ display: currentVolumeRef.current > 0 ? '' : 'none' }} />\r\n        <VolumeOffIcon className=\"icon\" onClick={() => changeVolume(previousVolume)} style={{ display: currentVolumeRef.current > 0 ? 'none' : '' }} />\r\n        <Slider\r\n            value={currentVolumeRef.current}\r\n            onCursorMoved={(percentage) => changeVolume(percentage)}\r\n            onCursorEndMove={(percentage) => changeVolume(percentage)}\r\n            width={'120px'}\r\n            height={'4px'} />\r\n    </div>)\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\n\r\nexport function VideoOptions({ options, icon, onOptionChanged }) {\r\n\r\n    const [menuOptions, setMenuOptions] = useState([]);\r\n    const [menuSubOptions, setMenuSubOptions] = useState([]);\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const [showSubMenu, setShowSubMenu] = useState(false);\r\n\r\n    const [selectedOption, setSelectedOption] = useState(null);\r\n    const [selectedSubOption, setSelectedSubOption] = useState(null);\r\n\r\n    const updateMenuOptions = (selectedOption, selectedSubOption) => {\r\n\r\n        const oldSelectedOption = menuOptions.find(op => op.selected);\r\n        const oldSelectedSubOption = selectedOption?.subOptions?.find(subOp => subOp.selected);\r\n\r\n        if (selectedOption?.subOptions && !selectedSubOption)\r\n            return;\r\n\r\n        if (selectedOption?.subOptions\r\n            && oldSelectedSubOption?.label === selectedSubOption?.label)\r\n            return;\r\n\r\n        if (!selectedOption?.subOptions && oldSelectedOption?.label === selectedOption.label)\r\n            return;\r\n\r\n        var updatedOptions = [];\r\n        menuOptions.forEach(op => {\r\n            var updatedOption = {\r\n                label: op.label,\r\n                selected: op.label === selectedOption.label,\r\n                data: op.data\r\n            };\r\n            var updatedSubOptions = [];\r\n            if (op.subOptions) {\r\n                op.subOptions.forEach(subOp => {\r\n                    var updatedsubOption =\r\n                    {\r\n                        label: subOp.label,\r\n                        data: subOp.data,\r\n                        selected: subOp.label === selectedSubOption?.label\r\n                    }\r\n                    updatedSubOptions.push(updatedsubOption);\r\n                })\r\n                updatedOption.subOptions = updatedSubOptions;\r\n            }\r\n            updatedOptions.push(updatedOption);\r\n        });\r\n\r\n        setMenuOptions(updatedOptions);\r\n\r\n        setShowMenu(false);\r\n        setShowSubMenu(false);\r\n\r\n        var option = updatedOptions.find(op => op.selected);\r\n        if (option.subOptions) onOptionChanged(option.subOptions.find(subOp => subOp.selected));\r\n        else onOptionChanged(option);\r\n    }\r\n\r\n    const getOptionDisplay = (option) => {\r\n        return  (<div key={option.label} className={\"option \" + (option.selected ? 'selected' : '')}\r\n            onClick={() => {if(!option.subOptions)setSelectedOption(option)}}\r\n            onMouseEnter={() => {if(option.subOptions){setSelectedOption(option);setMenuSubOptions(!option || !option.subOptions ? [] : option.subOptions)}}}\r\n            >\r\n            {option.label}\r\n        </div>)\r\n    }\r\n\r\n    const getSubOptionDisplay = (subOption) => {\r\n        return  (<div key={subOption.label} className={\"option \" + (subOption.selected ? 'selected' : '')}\r\n            onClick={() => setSelectedSubOption(subOption)}\r\n            >\r\n            {subOption.label}\r\n        </div>)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (options) {\r\n            setMenuOptions(options);\r\n        }\r\n    }, [options]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && !selectedOption.subOptions)\r\n            updateMenuOptions(selectedOption, null);\r\n    }, [selectedOption]);\r\n\r\n    useEffect(() => {\r\n        if(selectedOption && selectedSubOption)\r\n            updateMenuOptions(selectedOption, selectedSubOption);\r\n    }, [selectedSubOption]);\r\n\r\n\r\n    return (\r\n        <div className=\"video-options-container\" onMouseLeave={() => {setShowMenu(false);setShowSubMenu(false)}}>\r\n            <div className={\"video-options-menu \" + (showMenu ? '' : 'hidden')}\r\n                onMouseEnter={() => {setShowSubMenu(true)}}>\r\n                {menuOptions.map(option => getOptionDisplay(option))}\r\n            </div>\r\n            <div className={\"video-options-menu suboptions \" + (showSubMenu && menuSubOptions && menuSubOptions.length > 0 ? '' : 'hidden')}\r\n                onMouseLeave={() => {setShowSubMenu(false)}}>\r\n                {menuSubOptions.map(subOption => getSubOptionDisplay(subOption))}\r\n            </div>\r\n            <VideoOptionsButton icon={icon} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function VideoOptionsButton({ icon, hide, onClick }) {\r\n    return (\r\n        <div className=\"video-options-btn\" style={{ display: hide ? 'none' : '' }} onClick={() => onClick()}>\r\n            {icon}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport SubtitlesIcon from '@material-ui/icons/Subtitles';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport SortByAlphaIcon from '@material-ui/icons/SortByAlpha';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\n\r\nimport { VideoOptions, VideoOptionsButton } from './Options';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useOnClickOutside } from '../../../helpers/customHooks';\r\n\r\nfunction RightControlsGroup({\r\n    subtitlesOptions,\r\n    qualityOptions,\r\n    onSubtitleSizeChange,\r\n    onSubtitlesChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged }) {\r\n\r\n    const [videoInFullscreen, setVideoInFullscreen] = useState(false);\r\n\r\n    const changeFullScreenState = (fullscreen) => {\r\n        onFullScreenStateChanged(fullscreen);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setVideoInFullscreen(isFullScreen);\r\n    }, [isFullScreen]);\r\n\r\n    return (\r\n        <div className=\"controls-group\">\r\n            <div className=\"controls-sub-group\">\r\n                <VideoOptions options={subtitlesOptions}\r\n                    icon={<SubtitlesIcon className=\"icon\" />}\r\n                    onOptionChanged={(option) => onSubtitlesChange(option?.data?.url ? option.data.url : '')}\r\n                />\r\n                <AdjustSubtitleTimeOption onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon big\" />} onClick={() => onSubtitleSizeChange(2)} />\r\n                <VideoOptionsButton icon={<SortByAlphaIcon className=\"icon small\" />} onClick={() => onSubtitleSizeChange(-2)} />\r\n            </div>\r\n\r\n            <VideoOptions options={qualityOptions}\r\n                icon={<SettingsIcon className=\"icon\" />}\r\n                onOptionChanged={(option) => onVideoQualityChange(option?.data?.url ? option.data.url : '')}\r\n            />\r\n\r\n            <VideoOptionsButton icon={<FullscreenIcon className=\"icon big\" />} hide={videoInFullscreen} onClick={() => changeFullScreenState(true)} />\r\n            <VideoOptionsButton icon={<FullscreenExitIcon className=\"icon big\" />} hide={!videoInFullscreen} onClick={() => changeFullScreenState(false)} />\r\n        </div>)\r\n}\r\nexport default RightControlsGroup;\r\n\r\nfunction AdjustSubtitleTimeOption({ onAdjustSubtitleTimeChange }) {\r\n\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    const menuRef = useRef(null);\r\n\r\n    useOnClickOutside(menuRef, () => setShowMenu(false));\r\n\r\n    return (\r\n        <div ref={menuRef} className=\"adjust-subtitle-time-container\">\r\n            <div className={\"video-options-menu\" + (showMenu ? '' : ' hidden')}>\r\n                <div className=\"label\">Adj. Sub.</div>\r\n                <div className=\"adjust-subtitle-time-input-container\">\r\n                    <input type=\"number\" step=\"0.01\" onChange={(e) => onAdjustSubtitleTimeChange(e.target.valueAsNumber)} /><span className=\"label\"> s</span>\r\n                </div>\r\n            </div>\r\n            <VideoOptionsButton icon={<RestoreIcon className=\"icon\" />} onClick={() => setShowMenu(!showMenu)} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","import LeftControlsGroup from \"./LeftControlsGroup\";\r\nimport RightControlsGroup from \"./RightControlsGroup\";\r\n\r\nfunction Controls({\r\n    videoIsPlaying,\r\n    onPlayClick,\r\n    onPauseClick,\r\n    onVolumeChanged,\r\n    onPlayBackwardClick,\r\n    onPlayForwardClick,\r\n    videoSubtitlesOptions, \r\n    videoQualitiesOptions,\r\n    onSubtitlesChange,\r\n    onSubtitleSizeChange,\r\n    onAdjustSubtitleTimeChange,\r\n    onVideoQualityChange,\r\n    isFullScreen,\r\n    onFullScreenStateChanged }) {\r\n        \r\n    return (\r\n        <div className=\"video-player-controls\">\r\n            <LeftControlsGroup \r\n                videoIsPlaying = {videoIsPlaying}\r\n                onPlayClick={() => onPlayClick()} \r\n                onPauseClick={() => onPauseClick()} \r\n                onVolumeChanged={(newVolume) => onVolumeChanged(newVolume)}\r\n                onPlayBackwardClick={()=> onPlayBackwardClick()}\r\n                onPlayForwardClick={()=> onPlayForwardClick()}/>\r\n            <RightControlsGroup\r\n                subtitlesOptions={videoSubtitlesOptions}\r\n                qualityOptions={videoQualitiesOptions}\r\n                onSubtitleSizeChange={(pixelsToAdd) => onSubtitleSizeChange(pixelsToAdd)}\r\n                onSubtitlesChange={(newUrlSource) => onSubtitlesChange(newUrlSource)}\r\n                onAdjustSubtitleTimeChange={(time) => onAdjustSubtitleTimeChange(time)}\r\n                onVideoQualityChange={(newUrlSource) => onVideoQualityChange(newUrlSource)} \r\n                isFullScreen={isFullScreen}\r\n                onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Controls;","import \"../../style/video-player.css\";\r\n\r\nimport fadeTransition from \"../../helpers/customStyles\";\r\n\r\nimport CircularProgressBar from \"../common/CircularProgressBar\";\r\n\r\nimport VideoSubtitles from './videoPlayerComponents/VideoSubtitles';\r\nimport TimeController from './videoPlayerComponents/TimeController';\r\nimport Controls from './videoPlayerComponents/Controls';\r\n\r\nimport AppServices from \"../../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction VideoPlayer({ videoQualitiesOptions, videoSubtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n    const videoRef = useRef(null);\r\n    const videoPlayerContainerRef = useRef(null);\r\n    const watchedTimeUpdateTriggeredRef = useRef(0);\r\n\r\n    const [isFullScreen, setIsFullScreen] = useState(false);\r\n    const [currentTime, setCurrentTime] = useState(0);\r\n\r\n    const [errorMessage, setErrorMessage] = useState();\r\n\r\n    const checkDownloadStateRef = useRef(false);\r\n    const [videoDownloadState, setVideoDownloadState] = useState('Loading');\r\n\r\n    const [videoSource, setVideoSource] = useState('');\r\n    const [videoIsLoading, setVideoIsLoading] = useState(false);\r\n    const [videoIsPlaying, setVideoIsPlaying] = useState(false);\r\n\r\n    const [subtitlesUrl, setSubtitlesUrl] = useState('');\r\n    const [subtitlesSize, setSubtitlesSize] = useState(30);\r\n    const [subtitlesAdjustTime, setSubtitlesAdjustTime] = useState(0);\r\n\r\n    const [showVideoControls, setShowVideoControls] = useState(false);\r\n    const lastTimeMouseMovedRef = useRef(0);\r\n\r\n    const checkMovieDownloadState = (url) => {\r\n        if (checkDownloadStateRef.current && videoRef.current) {\r\n            AppServices.torrentApiService.getDownloadState(url, (response) => {\r\n                if (decodeURIComponent(url) === decodeURIComponent(videoRef.current?.src)) {\r\n                    if (response.error) {\r\n                        checkDownloadStateRef.current = false;\r\n                        setErrorMessage(response.message);\r\n                    }\r\n                    else {\r\n                        setVideoDownloadState(response.message ? response.message : 'Loading');\r\n                        setTimeout(() => {\r\n                            checkMovieDownloadState(url);\r\n                        }, 3000);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    const changeVideoSource = (url) => {\r\n        var currentTime = videoRef.current.currentTime;\r\n        setVideoSource(url);\r\n\r\n        videoRef.current.autoplay = !videoRef.current.paused;\r\n        videoRef.current.load();\r\n\r\n        videoRef.current.currentTime = currentTime;\r\n        setCurrentTime(currentTime);\r\n\r\n        setVideoIsLoading(true);\r\n        checkDownloadStateRef.current = true;\r\n        setErrorMessage('');\r\n        checkMovieDownloadState(url);\r\n    }\r\n\r\n    const changeVideoTime = (newTime) => {\r\n        videoRef.current.currentTime = newTime;\r\n    }\r\n\r\n    const displayControls = () => {\r\n        setShowVideoControls(true);\r\n        videoPlayerContainerRef.current.style.cursor = 'auto';\r\n        lastTimeMouseMovedRef.current = Date.now();\r\n        const waitingTime = 3000;\r\n        setTimeout(() => {\r\n            if (videoPlayerContainerRef?.current && Date.now() > lastTimeMouseMovedRef.current + waitingTime) {\r\n                setShowVideoControls(false);\r\n                videoPlayerContainerRef.current.style.cursor = 'none';\r\n            }\r\n        }, waitingTime + 500);\r\n    };\r\n\r\n    const onFullScreenStateChanged = (fullScreen) => {\r\n        if (fullScreen) {\r\n            if (!videoPlayerContainerRef.current) return;\r\n\r\n            if (videoPlayerContainerRef.current.requestFullscreen) videoPlayerContainerRef.current.requestFullscreen();\r\n            else if (videoPlayerContainerRef.current.mozRequestFullScreen) videoPlayerContainerRef.current.mozRequestFullScreen();\r\n            else if (videoPlayerContainerRef.current.webkitRequestFullscreen) videoPlayerContainerRef.current.webkitRequestFullscreen();\r\n            else if (videoPlayerContainerRef.current.msRequestFullscreen) videoPlayerContainerRef.current.msRequestFullscreen();\r\n        }\r\n        else\r\n            document.exitFullscreen();\r\n    }\r\n\r\n    const playVideo = () => {\r\n        if (videoRef?.current)\r\n            videoRef.current.play();\r\n    }\r\n\r\n    const pauseVideo = () => {\r\n        if (videoRef?.current)\r\n            videoRef.current.pause();\r\n    }\r\n\r\n    const changeVideoVolume = (newVolume) => {\r\n        if (videoRef?.current)\r\n            videoRef.current.volume = newVolume;\r\n    }\r\n\r\n    useEffect(() => {\r\n        videoPlayerContainerRef.current.addEventListener(\"mousemove\", displayControls);\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef?.current) videoPlayerContainerRef.current.removeEventListener(\"mousemove\", displayControls);\r\n        }\r\n    }, [videoPlayerContainerRef]);\r\n\r\n    useEffect(() => {\r\n        if (!Boolean(videoRef?.current))\r\n            return;\r\n\r\n        const videoErrorHandler = (e) => {\r\n            if (videoRef?.current?.attributes.src.value) {\r\n                setErrorMessage(errorMessage ? errorMessage : \"An error occured\");\r\n                setVideoIsLoading(false);\r\n            }\r\n        }\r\n        videoRef.current.addEventListener('error', videoErrorHandler, true);\r\n\r\n        const onVideoReady = () => {\r\n            checkDownloadStateRef.current = false;\r\n            setVideoDownloadState('');\r\n            setVideoIsLoading(false);\r\n        };\r\n        videoRef.current.addEventListener('canplay', onVideoReady, true);\r\n\r\n        const onVideoPlaying = () => {\r\n            onVideoReady();\r\n            setVideoIsPlaying(true);\r\n        };\r\n        videoRef.current.addEventListener('playing', onVideoPlaying, true);\r\n\r\n        const onVideoPaused = () => {\r\n            setVideoIsPlaying(false);\r\n        };\r\n        videoRef.current.addEventListener('pause', onVideoPaused, true);\r\n\r\n        const onVideoWaiting = () => {\r\n            setVideoIsLoading(true);\r\n        };\r\n        videoRef.current.addEventListener('waiting', onVideoWaiting, true);\r\n\r\n        const onTimeUpdated = (e) => {\r\n            if (videoRef.current?.currentTime) {\r\n                setCurrentTime(videoRef.current?.currentTime);\r\n\r\n                let currentTime = Math.round(videoRef.current?.currentTime);\r\n                if (currentTime - watchedTimeUpdateTriggeredRef.current > 10) {\r\n                    watchedTimeUpdateTriggeredRef.current = currentTime;\r\n                    onWatchedTimeUpdate(videoRef.current.currentTime, videoRef.current.duration);\r\n                }\r\n            }\r\n        };\r\n        videoRef.current.addEventListener('timeupdate', onTimeUpdated);\r\n\r\n        return () => {\r\n            if (videoRef?.current) {\r\n                videoRef.current.removeEventListener(\"error\", videoErrorHandler);\r\n                videoRef.current.removeEventListener('playing', onVideoReady);\r\n                videoRef.current.removeEventListener('canplay', onVideoReady);\r\n                videoRef.current.removeEventListener('waiting', onVideoWaiting);\r\n                videoRef.current.removeEventListener('pause', onVideoPaused);\r\n                videoRef.current.removeEventListener('timeupdate', onTimeUpdated);\r\n            }\r\n        }\r\n    }, [videoRef]);\r\n\r\n    useEffect(() => {\r\n        const onFullScreenChange = (e) => {\r\n            setIsFullScreen(document.fullscreenElement);\r\n        };\r\n\r\n        const onKeyboardPress = (e) => {\r\n\r\n            if (!videoRef?.current) return;\r\n\r\n            displayControls();\r\n\r\n            if (e.keyCode === 32) {\r\n                if (videoRef.current.paused) playVideo();\r\n                else pauseVideo();\r\n            }\r\n            else if (e.keyCode === 37)\r\n                changeVideoTime(videoRef.current?.currentTime - 10);\r\n            else if (e.keyCode === 39)\r\n                changeVideoTime(videoRef.current?.currentTime + 10);\r\n        }\r\n        if (videoPlayerContainerRef.current) {\r\n            videoPlayerContainerRef.current.addEventListener('fullscreenchange', onFullScreenChange);\r\n            document.addEventListener('keyup', onKeyboardPress, false);\r\n        }\r\n\r\n        return () => {\r\n            if (videoPlayerContainerRef.current) {\r\n                document.removeEventListener('keyup', onKeyboardPress);\r\n                videoPlayerContainerRef.current.removeEventListener('fullscreenchange', onFullScreenChange);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (videoQualitiesOptions) {\r\n            const videoQuality = videoQualitiesOptions.find(op => op.selected);\r\n            if (videoQuality?.data?.url) changeVideoSource(videoQuality.data.url);\r\n        }\r\n    }, [videoQualitiesOptions]);\r\n\r\n    useEffect(() => {\r\n        if (videoTime > 0 && videoRef?.current)\r\n            videoRef.current.currentTime = videoTime;\r\n    }, [videoTime]);\r\n\r\n    return (\r\n        <div ref={videoPlayerContainerRef} className=\"video-player-content\" >\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={videoSource && videoIsLoading} text={videoDownloadState} />\r\n            <div className=\"video-player-error-message\" style={{ display: errorMessage ? '' : 'none' }}>{errorMessage}</div>\r\n            <video ref={videoRef} className=\"video-player\" src={videoSource}></video>\r\n            <div className=\"video-player-bottom\">\r\n                <VideoSubtitles\r\n                    videoCurrentTime={currentTime}\r\n                    urlSource={subtitlesUrl}\r\n                    size={subtitlesSize}\r\n                    subtitlesAdjustTime={subtitlesAdjustTime} />\r\n                <div className=\"video-player-controls-container\" style={fadeTransition(showVideoControls)}>\r\n                    <TimeController\r\n                        videoDuration={videoRef.current?.duration}\r\n                        videoCurrentTime={currentTime}\r\n                        onTimeChanged={(newTime) => changeVideoTime(newTime)} />\r\n                    <Controls\r\n                        videoIsPlaying={videoIsPlaying}\r\n                        onPlayClick={() => playVideo()}\r\n                        onPauseClick={() => pauseVideo()}\r\n                        onVolumeChanged={(newVolume) => changeVideoVolume(newVolume)}\r\n                        onPlayBackwardClick={() => changeVideoTime(currentTime - 10)}\r\n                        onPlayForwardClick={() => changeVideoTime(currentTime + 10)}\r\n                        videoSubtitlesOptions={videoSubtitlesOptions}\r\n                        videoQualitiesOptions={videoQualitiesOptions}\r\n                        onSubtitleSizeChange={(pixelsToAdd) => setSubtitlesSize(subtitlesSize + pixelsToAdd <= 60 && subtitlesSize + pixelsToAdd >= 20 ? subtitlesSize + pixelsToAdd : subtitlesSize)}\r\n                        onSubtitlesChange={(newUrlSource) => setSubtitlesUrl(newUrlSource ? newUrlSource : '')}\r\n                        onAdjustSubtitleTimeChange={(time) => setSubtitlesAdjustTime(time ? time : 0)}\r\n                        onVideoQualityChange={(newUrlSource) => changeVideoSource(newUrlSource)}\r\n                        isFullScreen={isFullScreen}\r\n                        onFullScreenStateChanged={(fullscreen) => onFullScreenStateChanged(fullscreen)} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default VideoPlayer;\r\n","\r\nimport \"../../style/video-player-window.css\";\r\nimport \"../../style/button.css\";\r\nimport AppServices from \"../../services/AppServices\";\r\nimport AppMode from \"../../services/appMode\";\r\nimport VideoPlayer from \"./VideoPlayer\";\r\nimport Paragraph from \"../common/text/Paragraph\";\r\nimport BaseButton from \"../common/buttons/BaseButton\";\r\nimport ModalWindow from \"../modal/ModalWindow\";\r\nimport { ToTimeFormat } from \"../../helpers/timeFormatHelper\";\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function VideoPlayerWindow({ sources, subtitles, visible, onCloseClick, onWatchedTimeUpdate, goToTime, mediaDetails }) {\r\n    const [subtitlesOptions, setSubtitlesOptions] = useState([]);\r\n    const [videoQualitiesOptions, setVideoQualitiesOptions] = useState([]);\r\n    const [resumeMessageVisible, setResumeMessageVisible] = useState(true);\r\n    const [videoTime, setVideoTime] = useState(0);\r\n    const [isDesktopApp, setIsDesktopApp] = useState(false);\r\n    const [showLoadingModal, setShowLoadingModal] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        if (visible) {\r\n            AppServices.appInfoApiService.isDesktopApplication((isDesktopApp) => {\r\n                setIsDesktopApp(isDesktopApp);\r\n                if (isDesktopApp) {\r\n                    setShowLoadingModal(true);\r\n\r\n                    const options = {\r\n                        sources: sources.map(source => {\r\n                            return {\r\n                                quality: source.quality.trim(),\r\n                                selected: source.selected,\r\n                                url: AppServices.torrentApiService.buildStreamUrl(source.downloadUrl, source.fileName, source.seasonNumber, source.episodeNumber)\r\n                            }\r\n                        }),\r\n                        subtitles: subtitles ?? [],\r\n                        resumeToTime: goToTime,\r\n                        watchedMedia: mediaDetails && {\r\n                            title: mediaDetails.title,\r\n                            id: mediaDetails.id,\r\n                            coverImageUrl: mediaDetails.coverImageUrl,\r\n                            rating: mediaDetails.rating,\r\n                            totalDuration: mediaDetails.duration * 60,\r\n                            synopsis: mediaDetails.synopsis,\r\n                            year: mediaDetails.year,\r\n                            episodeNumber: sources[0].episodeNumber,\r\n                            seasonNumber: sources[0].seasonNumber,\r\n                            resumeToTime: mediaDetails.currentTime\r\n                        },\r\n                        mediaType: AppMode.getActiveMode().urlKey\r\n                    }\r\n\r\n                    var optionsJSON = JSON.stringify(options);\r\n\r\n                    if (window.chrome) {\r\n                        window.chrome.webview.postMessage(optionsJSON);\r\n                        window.chrome.webview.addEventListener(\"message\", onDesktoVideoPlayerClosed);\r\n                    }\r\n                    else if (window.webkit) {\r\n                        window.webkit.messageHandlers.webview.postMessage(optionsJSON);\r\n                        window.__dispatchMessageCallback = () => onDesktoVideoPlayerClosed();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return () => {\r\n            if (window.chrome) {\r\n                window.chrome.webview.removeEventListener(\"message\", onDesktoVideoPlayerClosed);\r\n            }\r\n            else if (window.webkit) {\r\n                window.__dispatchMessageCallback = null;\r\n            }\r\n        }\r\n    }, [visible]);\r\n\r\n    const onDesktoVideoPlayerClosed = () => {\r\n        setShowLoadingModal(false);\r\n        onCloseClick();//trigger close click to notify parent that video player is closed\r\n    }\r\n\r\n    const buildVideoQualitiesOptions = (sources) => {\r\n        var options = [];\r\n        if (!sources) return;\r\n\r\n        sources.sort((source1, source2) => {\r\n            const [quality1, quality2] = [source1.quality.toLowerCase().trim(), source2.quality.toLowerCase().trim()]\r\n            return quality1 === quality2 ? 0 : (quality1 < quality2 ? -1 : 1);\r\n        });\r\n\r\n        sources.forEach(source => {\r\n            var qualities = options.filter(o => o.label.startsWith(source.quality));\r\n\r\n            var option = {\r\n                label: qualities && qualities.length > 0 ? source.quality + ' (' + (qualities.length + 1) + ')' : source.quality,\r\n                selected: source.selected,\r\n                data: {\r\n                    url: AppServices.torrentApiService.buildStreamUrl(source.downloadUrl, source.fileName, source.seasonNumber, source.episodeNumber)\r\n                }\r\n            }\r\n            options.push(option);\r\n        });\r\n\r\n        if (options.filter(o => o.selected).length === 0)\r\n            options[0].selected = true;\r\n\r\n        setVideoQualitiesOptions(options);\r\n    }\r\n\r\n    const buildSubtitlesOptions = (subtitles) => {\r\n        var newSubtitlesOptions = [];\r\n        newSubtitlesOptions.push(\r\n            {\r\n                label: 'Off',\r\n                selected: true\r\n            });\r\n\r\n        if (subtitles && subtitles.length > 0) {\r\n            subtitles.forEach(sub => {\r\n                var subtitlesOption = {\r\n                    label: sub.language,\r\n                    selected: false,\r\n                    subOptions: []\r\n                };\r\n                sub.subtitlesSourceUrls.forEach((sourceUrl, index) => {\r\n                    subtitlesOption.subOptions.push({\r\n                        label: sub.language + ' ' + (index + 1),\r\n                        selected: false,\r\n                        data: {\r\n                            url: AppServices.subtitlesApiService.getSubtitlesApiUrl(sourceUrl)\r\n                        }\r\n                    });\r\n                })\r\n                newSubtitlesOptions.push(subtitlesOption);\r\n            });\r\n        }\r\n\r\n        setSubtitlesOptions(newSubtitlesOptions);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (visible && sources && sources.length > 0) {\r\n            buildVideoQualitiesOptions(sources);\r\n        }\r\n    }, [sources, visible]);\r\n\r\n    useEffect(() => {\r\n        if (visible && subtitles && subtitles.length > 0) {\r\n            buildSubtitlesOptions(subtitles);\r\n        }\r\n    }, [subtitles, visible]);\r\n\r\n    useEffect(() => {\r\n        if (goToTime > 0) {\r\n            setResumeMessageVisible(true);\r\n        }\r\n    }, [goToTime]);\r\n\r\n\r\n    const content = (\r\n        <div className=\"video-player-window-container\">\r\n            <ResumeMessage\r\n                visible={goToTime > 0 && resumeMessageVisible}\r\n                resumeTime={goToTime}\r\n                onNoClick={() => setResumeMessageVisible(false)}\r\n                onYesClick={() => { setVideoTime(goToTime); setResumeMessageVisible(false) }} />\r\n            <VideoPlayerContainer\r\n                visible={visible}\r\n                videoQualitiesOptions={videoQualitiesOptions}\r\n                subtitlesOptions={subtitlesOptions}\r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)}\r\n                videoTime={videoTime} />\r\n        </div>\r\n    )\r\n    return (\r\n        isDesktopApp ?\r\n            <ModalWindow visible={showLoadingModal} />\r\n            : <ModalWindow visible={visible} content={content} onCloseClick={() => onCloseClick()} />\r\n    );\r\n}\r\n\r\nfunction ResumeMessage({ visible, resumeTime, onYesClick, onNoClick }) {\r\n    const containerStyle = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    }\r\n    if (visible) {\r\n        return (\r\n            <div style={containerStyle}>\r\n                <Paragraph text={\"Do you want to resume the video to \" + ToTimeFormat(resumeTime / 60) + \" ?\"} />\r\n                <BaseButton color=\"red\" content=\"Yes\" onClick={() => onYesClick()} />\r\n                <BaseButton color=\"grey\" content=\"No\" onClick={() => onNoClick()} />\r\n            </div>\r\n        );\r\n    }\r\n    else\r\n        return null;\r\n}\r\n\r\nfunction VideoPlayerContainer({ visible, videoQualitiesOptions, subtitlesOptions, onWatchedTimeUpdate, videoTime }) {\r\n\r\n    if (visible) {\r\n        return <div className=\"video-player-container\">\r\n            <VideoPlayer\r\n                videoQualitiesOptions={videoQualitiesOptions}\r\n                videoSubtitlesOptions={subtitlesOptions}\r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)}\r\n                videoTime={videoTime} />\r\n        </div>;\r\n    }\r\n    else\r\n        return null;\r\n}","import BaseButton from './BaseButton';\r\nimport TrailerIcon from '@material-ui/icons/LocalMovies';\r\n\r\nfunction TrailerButton({ visible, onClick }) {\r\n    if (visible) {\r\n\r\n        const content = (<div style={{display: 'flex', justifyContent: 'center'}}>\r\n            <TrailerIcon style={{ color: 'black' }}/>\r\n            <div style={{ marginLeft: '5px' }}>Trailer</div>\r\n        </div>);\r\n\r\n        return (\r\n            <BaseButton content={content} color={\"white\"} onClick={() => onClick()}/>\r\n        )\r\n    }\r\n    else return null;\r\n}\r\n\r\nexport default TrailerButton;","function Title({text}){\r\n\r\n    const style={\r\n        fontSize: '28px',\r\n        fontWeight: '500',\r\n        color: 'white',\r\n        textAlign: 'center'\r\n    }\r\n\r\n    return (\r\n        <div style={style}>{text}</div>\r\n    )\r\n}\r\n\r\nexport default Title;","import BaseButton from './BaseButton';\r\nimport FilterNoneIcon from '@material-ui/icons/FilterNone';\r\n\r\nfunction CopyButton({ onClick }) {\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <FilterNoneIcon />\r\n        <div style={{ marginLeft: '5px' }}>Copy</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} color={\"grey\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default CopyButton;","import PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nimport ModalWindow from \"../../modal/ModalWindow\";\r\nimport Title from '../text/Title';\r\nimport SecondaryInfo from '../text/SecondaryInfo';\r\nimport CopyButton from \"./CopyButton\";\r\nimport BaseButton from \"./BaseButton\";\r\n\r\nimport AppServices from \"../../../services/AppServices\";\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction PlayWithVLCButton({ onClick, videoUrl }) {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [isWebApp, setIsWebApp] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (isWebApp === null) {\r\n            AppServices.appInfoApiService.isDesktopApplication((isDesktopApp) => {\r\n                setIsWebApp(!isDesktopApp);\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n        <div style={{ marginLeft: '5px' }}>Play With VLC</div>\r\n    </div>);\r\n\r\n    const handleClick = () => {\r\n        setShowModal(true);\r\n        if (onClick) onClick();\r\n    }\r\n\r\n    if (isWebApp)\r\n        return (\r\n            <div>\r\n                <BaseButton content={content} color={\"orange\"} onClick={() => handleClick()} />\r\n                <ModalForVlc visible={showModal} videoUrl={videoUrl} onCloseClick={() => setShowModal(false)} />\r\n            </div>\r\n        );\r\n    else\r\n        return null;\r\n}\r\n\r\nexport default PlayWithVLCButton;\r\n\r\nfunction ModalForVlc({ visible, videoUrl, onCloseClick }) {\r\n\r\n    const containerStyle = {\r\n        backgroundColor: 'black',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: '300px',\r\n        width: '500px',\r\n        padding: '0 20px',\r\n        margin: 'auto',\r\n        color: 'white',\r\n        borderRadius: '10px',\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)'\r\n    };\r\n\r\n    const container = (\r\n        <div style={containerStyle}>\r\n            <ModalContent videoUrl={videoUrl} launchPlay={visible} onCloseClick={() => onCloseClick()} />\r\n        </div>\r\n    );\r\n\r\n    return <ModalWindow visible={visible} content={container} />;\r\n}\r\n\r\nfunction ModalContent({ videoUrl, onCloseClick }) {\r\n    const inputLinkUrlRef = useRef(null);\r\n\r\n    const onCopyClick = () => {\r\n        if (inputLinkUrlRef?.current) {\r\n            inputLinkUrlRef.current.select();\r\n            document.execCommand(\"copy\");\r\n            window.getSelection().removeAllRanges();\r\n        }\r\n    }\r\n\r\n    const centerStyle = (vertical) => {\r\n        return {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            height: '100%',\r\n            justifyContent: 'space-around',\r\n            flexDirection: vertical ? 'column' : ''\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Title text={\"Play with VLC\"} />\r\n            <SecondaryInfo text={\"To play the video in VLC, click on 'Copy', open VLC then open a network stream and paste the copied link.\"} />\r\n            <input ref={inputLinkUrlRef}\r\n                style={{ background: 'none', border: 'none', outline: 'none', color: 'grey', width: '100%', textAlign: 'center', textOverflow: 'ellipsis', margin: '10px 0' }}\r\n                type=\"text\"\r\n                readOnly={true}\r\n                value={Boolean(videoUrl) ? videoUrl : ''} />\r\n            <div style={centerStyle()}>\r\n                <CopyButton onClick={() => onCopyClick()} />\r\n                <BaseButton content={\"Close\"} color={\"red\"} onClick={() => onCloseClick()} />\r\n            </div>\r\n        </div>);\r\n\r\n}\r\n\r\n\r\n","import BaseButton from './BaseButton';\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\n\r\n\r\nexport function AddBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"grey\"}\r\n                insideIcon={<AddIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n      \r\n}\r\n\r\nexport function RemoveBookmarkButton({ onClick, visible }) {\r\n\r\n    return (<BookmarkButton \r\n                onClick={onClick} \r\n                visible={visible} \r\n                color={\"dark-red\"}\r\n                insideIcon={<RemoveIcon style={{ fontSize: 22, color: 'white' }} />}/>);\r\n\r\n}\r\n\r\nfunction BookmarkButton({ onClick, visible, color, insideIcon }) {\r\n\r\n    if (visible) {\r\n        const contentStyle = {\r\n            position: 'relative',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const insideIconStyle = {\r\n            position: 'absolute',\r\n            top: '-2px',\r\n            right: '-2px',\r\n            padding: '1px',\r\n            zIndex: 3,\r\n            width: '15px',\r\n            height: '15px',\r\n            borderRadius: '100%',\r\n            backgroundColor: 'rgba(45,44,44,0.5)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n        };\r\n\r\n        const content = (\r\n            <div style={contentStyle}>\r\n                <BookmarkIcon style={{ fontSize: 28 }} />\r\n                <div style={insideIconStyle}>{insideIcon}</div>\r\n            </div>\r\n        )\r\n\r\n        return (\r\n            <BaseButton content={content} color={color} onClick={() => onClick()} />\r\n        );\r\n    }\r\n    else return null;\r\n\r\n}\r\n","import BaseButton from './BaseButton';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\n\r\nfunction PlayButton({ center, onClick }) {\r\n\r\n    const content = (<div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <PlayArrowIcon />\r\n        <div style={{ marginLeft: '5px' }}>Play</div>\r\n    </div>);\r\n\r\n    return (\r\n        <BaseButton content={content} centered={center} color={\"grey\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default PlayButton;","import \"../../../style/medias-list.css\";\r\nimport \"../../../style/button.css\";\r\n\r\nimport MediaLitePresentation from \"../presentation/MediaLitePresentation\";\r\n\r\nimport ArrowForwardIosRounded from '@material-ui/icons/ArrowForwardIosRounded';\r\nimport ArrowBackIosRounded from '@material-ui/icons/ArrowBackIosRounded';\r\n\r\nimport fadeTransition from \"../../../helpers/customStyles.js\";\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nfunction MediasListLite({ medias, alignLeft, onMediaClick }) {\r\n  const listRef = useRef(null);\r\n  const [hideBackArrow, setHideBackArrow] = useState(true);\r\n  const [hideForwardArrow, setHideForwardArrow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    listRef.current.onscroll = () => {\r\n      showHideNavArrows();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!medias || medias.length === 0) {\r\n      setHideForwardArrow(true);\r\n      setHideBackArrow(true);\r\n    }\r\n    else showHideNavArrows();\r\n  }, [medias]);\r\n\r\n  useEffect(() => { showHideNavArrows(); }, [hideBackArrow, hideForwardArrow]);\r\n\r\n  const isElementVisible = (elem, boundings) => {\r\n    const elemBoundings = elem.getBoundingClientRect();\r\n    return Math.floor(elemBoundings.right) <= Math.floor(boundings.right)\r\n      && Math.floor(elemBoundings.left) >= Math.floor(boundings.left);\r\n  }\r\n\r\n  const getVisibleRange = () => {\r\n    var indexes = []\r\n    var listBoundings = listRef.current.getBoundingClientRect();\r\n    for (let i = 0; i < listRef.current.children.length; i++) {\r\n      if (isElementVisible(listRef.current.children[i], listBoundings))\r\n        indexes.push(i);\r\n    }\r\n\r\n    return {\r\n      'maxIndex': Math.max(...indexes),\r\n      'minIndex': Math.min(...indexes),\r\n      'count': indexes.length\r\n    }\r\n  }\r\n\r\n  const navToRight = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.maxIndex + visibleRange.count;\r\n      var index = goToIndex > listRef.current.children.length - 1 ? listRef.current.children.length - 1 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const navToLeft = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var visibleRange = getVisibleRange();\r\n      var goToIndex = visibleRange.minIndex - visibleRange.count;\r\n      var index = goToIndex < 0 ? 0 : goToIndex;\r\n\r\n      listRef.current.children[index].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: \"nearest\",\r\n        inline: \"nearest\"\r\n      });\r\n    }\r\n  }\r\n\r\n  const showHideNavArrows = () => {\r\n    if (listRef.current.children && listRef.current.children.length > 0) {\r\n      var listBoundings = listRef.current.getBoundingClientRect();\r\n      setHideBackArrow(isElementVisible(listRef.current.children[0], listBoundings));\r\n      setHideForwardArrow(isElementVisible(listRef.current.children[listRef.current.children.length - 1], listBoundings));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={\"medias-list-container\"}>\r\n      <div style={fadeTransition(!hideBackArrow)} className=\"floating-navigation-btn left\" onClick={() => navToLeft()}>\r\n        <ArrowBackIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div style={fadeTransition(!hideForwardArrow)} className=\"floating-navigation-btn right\" onClick={() => navToRight()}>\r\n        <ArrowForwardIosRounded style={{ fontSize: 40, color: 'white' }} />\r\n      </div>\r\n      <div ref={listRef} className={\"medias-list\" + (hideBackArrow && hideForwardArrow && !alignLeft ? ' center' : '')}>\r\n        {medias.map((media, index) => (<MediaLitePresentation key={index} media={media} hoverEffect={true} onMediaClick={(mediaId) => onMediaClick(mediaId)} />))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default MediasListLite;","import \"../../../style/medias-list.css\";\r\nimport MediasListLite from \"./MediasListLite\";\r\n\r\nfunction MediasListLiteWithTitle({ listTitle, medias, alignLeft, visible, onMediaClick }) {\r\n    if (!visible) return null;\r\n\r\n    return (\r\n        <div className=\"medias-list-genre-container\">\r\n            <div className=\"medias-list-header\">\r\n                <div className=\"medias-list-categorie\">{listTitle}</div>\r\n            </div>\r\n            <MediasListLite medias={medias} alignLeft={alignLeft} onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n        </div>\r\n    );\r\n}\r\nexport default MediasListLiteWithTitle;\r\n\r\n","\r\nimport \"../style/media-presentation-page.css\";\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport ModalMediaTrailer from '../components/modal/ModalMediaTrailer';\r\nimport ModalEpisodeSelector from '../components/modal/ModalEpisodeSelector';\r\n\r\nimport { VideoPlayerWindow } from '../components/video/VideoPlayerWindow';\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport ProgressionBar from \"../components/common/ProgressionBar\";\r\n\r\nimport BaseButton from \"../components/common/buttons/BaseButton\";\r\nimport TrailerButton from \"../components/common/buttons/TrailerButton\";\r\nimport PlayWithVLCButton from \"../components/common/buttons/PlayWithVLCButton\";\r\nimport { AddBookmarkButton, RemoveBookmarkButton } from \"../components/common/buttons/BookmarkButton\";\r\nimport PlayButton from \"../components/common/buttons/PlayButton\";\r\n\r\nimport SecondaryInfo from \"../components/common/text/SecondaryInfo\";\r\nimport Paragraph from \"../components/common/text/Paragraph\";\r\nimport Title from \"../components/common/text/Title\";\r\nimport TitleAndContent from \"../components/common/TitleAndContent\";\r\nimport Rating from \"../components/common/Rating\";\r\nimport DropDown from \"../components/common/DropDown\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\n\r\nimport AppServices from \"../services/AppServices\";\r\nimport { ToTimeFormat } from \"../helpers/timeFormatHelper\";\r\nimport fadeTransition from \"../helpers/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\n\r\nfunction MediaFullPresentation({ mediaId, onCloseClick }) {\r\n\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n    const [mediaDetails, setMediaDetails] = useState({});\r\n    const [mediaProgression, setMediaProgression] = useState({});\r\n\r\n    const versionsSources = useRef([]);\r\n    const [voSourcesSearching, setVoSourcesSearching] = useState(false);\r\n    const [vfSourcesSearching, setVfSourcesSearching] = useState(false);\r\n\r\n    const [selectedVersionSources, setSelectedVersionSources] = useState([]);\r\n    const [selectedVersionSourceLink, setSelectedVersionSourceLink] = useState('');\r\n\r\n    const [mediaSubtitlesSources, setMediaSubtitlesSources] = useState([]);\r\n    const [loadingSubtitles, setLoadingSubtitles] = useState(false);\r\n\r\n    const [showMediaPlayer, setShowMediaPlayer] = useState(false);\r\n    const [showMediaTrailer, setShowMediaTrailer] = useState(false);\r\n    const [addBookmarkButtonVisible, setAddBookmarkButtonVisible] = useState(true);\r\n\r\n    const [similarMedias, setSimilarMedias] = useState([]);\r\n    const navHistory = useRef([]);\r\n\r\n    const selectedEpisode = useRef({\r\n        seasonNumber: 1,\r\n        episodeNumber: 1\r\n    })\r\n\r\n\r\n    useEffect(() => {\r\n        if (mediaId)\r\n            loadPage(mediaId);\r\n    }, [mediaId]);\r\n\r\n    useEffect(() => {\r\n        if (mediaDetails.imdbId) getAvailableSubtitles(mediaDetails.imdbId, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n        if (mediaDetails.id && mediaDetails.title && mediaDetails.year) {\r\n            clearVersionSources();\r\n            searchVfSources(mediaDetails.id, mediaDetails.title, mediaDetails.year, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n            searchVoSources(mediaDetails.title, mediaDetails.year, mediaDetails.imdbId, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n        }\r\n\r\n        const topPage = document.getElementsByClassName('back-btn')[0];\r\n        topPage.scrollIntoView();\r\n    }, [mediaDetails]);\r\n\r\n    useEffect(() => {\r\n        if (!selectedVersionSourceLink && selectedVersionSources.length > 0)\r\n            changeSelectedSource(0);\r\n\r\n    }, [selectedVersionSources]);\r\n\r\n    const loadPage = (mediaId) => {\r\n        setDataLoaded(false);\r\n        setMediaDetails({});\r\n        setSimilarMedias([]);\r\n        if (mediaId) {\r\n            AppServices.searchMediaService.getMediaDetails(mediaId,\r\n                (details) => {\r\n                    if (details) {\r\n                        setMediaDetails(details);\r\n                        setDataLoaded(true);\r\n                        AppServices.bookmarkApiService.isMediaBookmarked(mediaId, (isMediaBookmarked) => {\r\n                            isMediaBookmarked = isMediaBookmarked === 'true';\r\n                            setAddBookmarkButtonVisible(!isMediaBookmarked);\r\n                        });\r\n                    }\r\n                    else {\r\n                        setDataLoaded(true);\r\n                        const topPage = document.getElementsByClassName('no-media-details-message')[0];\r\n                        topPage.scrollIntoView();\r\n                    }\r\n                });\r\n            getMediaProgression(mediaId, 1, 1);\r\n            AppServices.searchMediaService.getSimilarMedias(mediaId, (recommandedMedias) => {\r\n                if (recommandedMedias && recommandedMedias.length > 0)\r\n                    setSimilarMedias(recommandedMedias);\r\n            });\r\n        }\r\n    }\r\n\r\n    const setVersionSources = (versionLabel, sources, setFirst) => {\r\n        if (sources && sources.length > 0) {\r\n            const newVersionSources = {\r\n                versionLabel: versionLabel,\r\n                sources: sources\r\n            };\r\n            if (setFirst) {\r\n                setSelectedVersionSourceLink('');\r\n                versionsSources.current.unshift(newVersionSources)\r\n            }\r\n            else versionsSources.current.push(newVersionSources);\r\n            setSelectedVersionSources(versionsSources.current[0].sources);\r\n        }\r\n    }\r\n\r\n    const clearVersionSources = () => {\r\n        versionsSources.current = [];\r\n        setSelectedVersionSources([]);\r\n        setSelectedVersionSourceLink('');\r\n    }\r\n\r\n    const changeSelectedSource = (index) => {\r\n        const newTab = [];\r\n        for (let i = 0; i < selectedVersionSources.length; i++) {\r\n            newTab.push(selectedVersionSources[i]);\r\n            newTab[i].selected = index == i;\r\n        }\r\n        setSelectedVersionSourceLink(\r\n            selectedVersionSources.length > 0 ? AppServices.torrentApiService.buildStreamUrl(selectedVersionSources[index].downloadUrl, '', selectedVersionSources[index].seasonNumber, selectedVersionSources[index].episodeNumber)\r\n                : '');\r\n        setSelectedVersionSources(newTab);\r\n    }\r\n\r\n    const searchVfSources = (mediaId, mediaTitle, mediaYear, seasonNumber, episodeNumber) => {\r\n        setVfSourcesSearching(true);\r\n        AppServices.torrentApiService.searchVFSources(mediaId, mediaTitle, mediaYear, seasonNumber, episodeNumber,\r\n            (sources) => {\r\n                setVfSourcesSearching(false);\r\n                if (sources && sources.length > 0) {\r\n                    setVersionSources(\"VF\", sources.map(source => ({ ...source, seasonNumber: seasonNumber, episodeNumber: episodeNumber })));\r\n                }\r\n\r\n            }, () => {\r\n                setVfSourcesSearching(false);\r\n            }\r\n        );\r\n    }\r\n\r\n    const searchVoSources = (title, year, imdbId, seasonNumber, episodeNumber) => {\r\n        setVoSourcesSearching(true);\r\n        AppServices.torrentApiService.searchVOSources(title, year, imdbId, seasonNumber, episodeNumber,\r\n            (sources) => {\r\n                setVoSourcesSearching(false);\r\n                if (sources && sources.length > 0) {\r\n                    setVersionSources(\"VO\", sources.map(source => ({ ...source, seasonNumber: seasonNumber, episodeNumber: episodeNumber })), true);\r\n                }\r\n            }, () => {\r\n                setVoSourcesSearching(false);\r\n            }\r\n        );\r\n    }\r\n\r\n    const getMediaProgression = (mediaId, seasonNumber, episodeNumber) => {\r\n        setMediaProgression({});\r\n        AppServices.watchedMediaApiService.getWatchedMedia(\r\n            mediaId,\r\n            seasonNumber,\r\n            episodeNumber,\r\n            (watchedMedia) => {\r\n                if (watchedMedia?.currentTime && watchedMedia?.totalDuration) {\r\n                    setMediaProgression({\r\n                        progression: watchedMedia.currentTime / watchedMedia.totalDuration,\r\n                        remainingTime: watchedMedia.totalDuration - watchedMedia.currentTime,\r\n                        currentTime: watchedMedia.currentTime\r\n                    });\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    const getAvailableSubtitles = (imdbCode, seasonNumber, episodeNumber) => {\r\n        setLoadingSubtitles(true);\r\n        AppServices.subtitlesApiService.getAvailableSubtitles(imdbCode, seasonNumber, episodeNumber,\r\n            (availableSubtitles) => {\r\n                setMediaSubtitlesSources(availableSubtitles);\r\n                setTimeout(() => setLoadingSubtitles(false), 1000);\r\n            })\r\n    }\r\n\r\n    const bookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.addBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(false);\r\n        });\r\n    }\r\n\r\n    const unbookmarkMedia = () => {\r\n        AppServices.bookmarkApiService.deleteBookmarkedMedia(mediaDetails, () => {\r\n            setAddBookmarkButtonVisible(true);\r\n        });\r\n    }\r\n\r\n    const onWatchedTimeUpdate = (currentTime, duration) => {\r\n        AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, currentTime, duration, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber);\r\n    }\r\n\r\n    const onRecommandedMediaClick = (mediaId) => {\r\n        navHistory.current.push(mediaDetails.id);\r\n        loadPage(mediaId);\r\n    }\r\n\r\n    const onBackClick = () => {\r\n        if (navHistory.current.length > 0) {\r\n            let lastMediaId = navHistory.current.pop();\r\n            loadPage(lastMediaId);\r\n        }\r\n        else\r\n            onCloseClick();\r\n    }\r\n\r\n    const onEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        clearVersionSources();\r\n        selectedEpisode.current = {\r\n            seasonNumber: seasonNumber,\r\n            episodeNumber: episodeNumber\r\n        };\r\n        searchVoSources(mediaDetails.title, mediaDetails.year, mediaDetails.imdbId, seasonNumber, episodeNumber);\r\n        searchVfSources(mediaDetails.id, mediaDetails.title, mediaDetails.year, seasonNumber, episodeNumber);\r\n        getAvailableSubtitles(mediaDetails.imdbId, seasonNumber, episodeNumber);\r\n        getMediaProgression(mediaDetails.id, seasonNumber, episodeNumber);\r\n    }\r\n\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <VideoPlayerWindow\r\n                visible={showMediaPlayer}\r\n                sources={selectedVersionSources}\r\n                subtitles={mediaSubtitlesSources}\r\n                onCloseClick={() => setShowMediaPlayer(false)}\r\n                onWatchedTimeUpdate={(currentTime, duration) => onWatchedTimeUpdate(currentTime, duration)}\r\n                goToTime={mediaProgression?.currentTime}\r\n                mediaDetails={mediaDetails} />\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={!dataLoaded} />\r\n            <ModalMediaTrailer visible={showMediaTrailer} youtubeTrailerUrl={mediaDetails.youtubeTrailerUrl} onCloseClick={() => setShowMediaTrailer(false)} />\r\n            <div style={{ display: dataLoaded && !mediaDetails.title ? 'flex' : 'none' }} className=\"no-media-details-message\">\r\n                <Paragraph text={\"No info found for this media\"} />\r\n                <BaseButton color=\"red\" content={\"Back\"} onClick={() => onBackClick()} />\r\n            </div>\r\n            <div style={fadeTransition(dataLoaded && mediaDetails.title)} className=\"media-presentation-page-container\">\r\n                <div className=\"back-btn\" onClick={() => onBackClick()}>\r\n                    <ArrowBackIcon className=\"back-arrow\" />\r\n                </div>\r\n                <div className=\"presentation\" style={{ backgroundImage: 'url(' + mediaDetails.backgroundImageUrl + ')' }}>\r\n                    <div className=\"info-container\">\r\n                        <div className=\"info\">\r\n                            <div className=\"title\">\r\n                                {\r\n                                    mediaDetails.logoImageUrl ? <img src={mediaDetails.logoImageUrl} /> : <Title text={mediaDetails.title} />\r\n                                }\r\n                            </div>\r\n                            <div className=\"info-content\">\r\n                                <Rating rating={mediaDetails.rating} size=\"50px\" />\r\n                                <SecondaryInfo center text={mediaDetails.year + \" | \" + (mediaDetails.duration ? ToTimeFormat(mediaDetails.duration) + \" | \" : '') + mediaDetails.genres?.map(genre => genre.name).join(', ')} />\r\n                                <MediaProgression mediaProgression={mediaProgression?.progression} remainingTime={mediaProgression?.remainingTime} />\r\n                                <div className=\"horizontal\">\r\n                                    <TrailerButton visible={mediaDetails?.youtubeTrailerUrl} onClick={() => setShowMediaTrailer(true)} />\r\n                                    <EpisodeSelector\r\n                                        serieId={mediaDetails.id}\r\n                                        seasonsCount={mediaDetails.seasonsCount}\r\n                                        onEpisodeSelected={(seasonNumber, episodeNumber) => onEpisodeSelected(seasonNumber, episodeNumber)} />\r\n                                    <AddBookmarkButton onClick={() => bookmarkMedia()} visible={addBookmarkButtonVisible} />\r\n                                    <RemoveBookmarkButton onClick={() => unbookmarkMedia()} visible={!addBookmarkButtonVisible} />\r\n                                </div>\r\n                                <div className=\"play-options\">\r\n                                    <AvailableSubtitles loading={loadingSubtitles} availableSubtitlesSources={mediaSubtitlesSources} />\r\n                                    <AvailableVersions\r\n                                        loading={voSourcesSearching || vfSourcesSearching}\r\n                                        availableVersionsSources={versionsSources.current}\r\n                                        onVersionSelected={(versionSources) => { setSelectedVersionSourceLink(null); setSelectedVersionSources(versionSources.sources) }} />\r\n                                    <div style={fadeTransition(!(voSourcesSearching || vfSourcesSearching) && Boolean(selectedVersionSources) && selectedVersionSources.length > 0)} >\r\n                                        <div className=\"horizontal\">\r\n                                            <QualitySelector versionSources={selectedVersionSources} onQualityChanged={(i) => changeSelectedSource(i)} />\r\n                                            <PlayButton onClick={() => setShowMediaPlayer(true)} />\r\n                                            <PlayWithVLCButton\r\n                                                videoUrl={selectedVersionSourceLink}\r\n                                                onClick={() => { if (mediaDetails) AppServices.watchedMediaApiService.saveWacthedMedia(mediaDetails, 0, 0, selectedEpisode.current.seasonNumber, selectedEpisode.current.episodeNumber) }} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"extra\">\r\n                            <TitleAndContent title=\"Director\" content={mediaDetails.director} justify=\"left\" />\r\n                            <TitleAndContent title=\"Cast\" content={mediaDetails.cast} justify=\"left\" />\r\n                            <Paragraph text={mediaDetails.synopsis}></Paragraph>\r\n                            <MediasListLiteWithTitle\r\n                                medias={similarMedias}\r\n                                alignLeft\r\n                                listTitle=\"You may also like\"\r\n                                visible={similarMedias && similarMedias.length > 0}\r\n                                onMediaClick={(mediaId) => { onRecommandedMediaClick(mediaId) }} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default MediaFullPresentation;\r\n\r\n\r\nfunction MediaProgression({ mediaProgression, remainingTime }) {\r\n    if (mediaProgression > 0) {\r\n        return (\r\n            <div>\r\n                <ProgressionBar width=\"100%\" value={mediaProgression * 100} />\r\n                <SecondaryInfo text={ToTimeFormat(remainingTime / 60) + ' remaining'} />\r\n            </div>\r\n        )\r\n    }\r\n    else\r\n        return null;\r\n}\r\n\r\nfunction AvailableSubtitles({ availableSubtitlesSources, loading }) {\r\n    const availableSubtitles = availableSubtitlesSources?.length > 0 ? availableSubtitlesSources.map(s => s.language).join(\", \") : 'No subtitles available';\r\n    const content = loading ? <CircularProgressBar color={'white'} size={'15px'} visible={true} /> : availableSubtitles;\r\n    return (\r\n        <TitleAndContent title=\"Subtitles\" content={content} />\r\n    )\r\n}\r\n\r\nfunction AvailableVersions({ availableVersionsSources, loading, onVersionSelected }) {\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    let content;\r\n\r\n    const onVersionClick = (index) => {\r\n        setSelectedIndex(index);\r\n        onVersionSelected(availableVersionsSources[index]);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (loading)\r\n            setSelectedIndex(0);\r\n    }, [loading]);\r\n\r\n    if (loading)\r\n        content = <CircularProgressBar color={'white'} size={'15px'} visible={true} />;\r\n    else {\r\n        if (availableVersionsSources?.length > 0) {\r\n            content = availableVersionsSources.map((v, i) => <BaseButton\r\n                key={i}\r\n                color={selectedIndex == i ? \"red\" : \"grey\"}\r\n                content={v.versionLabel}\r\n                onClick={() => onVersionClick(i)} />);\r\n        }\r\n        else\r\n            content = 'No version available';\r\n    }\r\n\r\n    return (\r\n        <TitleAndContent title=\"Versions\" content={content} />\r\n    )\r\n}\r\n\r\nfunction QualitySelector({ versionSources, onQualityChanged }) {\r\n    if (!versionSources || versionSources.length === 0)\r\n        return null;\r\n\r\n    versionSources.sort((source1, source2) => {\r\n        const [quality1, quality2] = [source1.quality.toLowerCase().trim(), source2.quality.toLowerCase().trim()]\r\n        return quality1 === quality2 ? 0 : (quality1 < quality2 ? -1 : 1);\r\n    });\r\n\r\n    const qualities = [];\r\n\r\n    versionSources.forEach(source => {\r\n        const nbSameQualities = qualities.filter(q => q.startsWith(source.quality)).length;\r\n        qualities.push(source.quality + (nbSameQualities > 0 ? \" (\" + nbSameQualities + \")\" : \"\"));\r\n    });\r\n\r\n    const content = <DropDown\r\n        values={qualities}\r\n        width=\"130px\"\r\n        onValueChanged={(index) => onQualityChanged(index)} />\r\n\r\n    return <TitleAndContent title=\"Qualities\" content={content} justify=\"left\" />\r\n\r\n}\r\n\r\nfunction EpisodeSelector({ serieId, seasonsCount, onEpisodeSelected }) {\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [selectedSeasonNumber, setSelectedSeasonNumber] = useState(1)\r\n    const [selectedEpisodeNumber, setSelectedEpisodeNumber] = useState(1)\r\n\r\n    useEffect(() => {\r\n        setSelectedSeasonNumber(1);\r\n        setSelectedEpisodeNumber(1);\r\n    }, [seasonsCount]);\r\n\r\n    if (!seasonsCount)\r\n        return null;\r\n\r\n    const onButtonClick = () => {\r\n        setModalVisible(true);\r\n    }\r\n\r\n    const handleEpisodeSelected = (seasonNumber, episodeNumber) => {\r\n        setSelectedSeasonNumber(seasonNumber);\r\n        setSelectedEpisodeNumber(episodeNumber);\r\n        onEpisodeSelected(seasonNumber, episodeNumber);\r\n        setModalVisible(false);\r\n    }\r\n\r\n    return <div>\r\n        <ModalEpisodeSelector\r\n            visible={modalVisible}\r\n            serieId={serieId}\r\n            numberOfSeasons={seasonsCount}\r\n            onEpisodeSelected={(seasonNumber, episodeNumber) => handleEpisodeSelected(seasonNumber, episodeNumber)}\r\n            onCloseClick={() => setModalVisible(false)} />\r\n        <BaseButton\r\n            color=\"red\"\r\n            content={\"Season \" + selectedSeasonNumber + \" - Episode \" + selectedEpisodeNumber}\r\n            onClick={() => onButtonClick()} />\r\n    </div>\r\n}\r\n\r\n\r\n","\r\nfunction MediaPicturesPresentation({ media, visible, onClick }) {\r\n    return (\r\n        <div className={\"media-pictures \" + (!visible ? \"hidden\" : \"\")} onClick={() => onClick(media.id)}>\r\n            <div className=\"logo-title\">\r\n                <img src={media?.logoImageUrl}></img>\r\n            </div>\r\n            <img className=\"background-image\" src={media?.backgroundImageUrl}></img>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediaPicturesPresentation;","\r\n\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport MediaPicturesPresentation from \"../presentation/MediaPicturesPresentation\";\r\nimport { useEffect, useState } from 'react';\r\nimport \"../../../style/media-pictures-presentation.css\";\r\n\r\n\r\nfunction MediasOfToday({ medias, onClick }) {\r\n    const [mediaIndexVisible, setMediaIndexVisible] = useState(0);\r\n    const [carouselPlay, setCarouselPlay] = useState(false);\r\n\r\n    useEffect(() =>{\r\n        if(medias && medias.length > 0)\r\n            setCarouselPlay(true);\r\n    }, [medias]);\r\n\r\n    useEffect(() => {\r\n        var changeMedia;\r\n        if (carouselPlay) {\r\n            changeMedia = setTimeout(() => {\r\n                if (mediaIndexVisible === medias?.length - 1)\r\n                    setMediaIndexVisible(0)\r\n                else setMediaIndexVisible(mediaIndexVisible + 1);\r\n            }, 5000);\r\n        }\r\n\r\n        return () => {\r\n            clearTimeout(changeMedia);\r\n        }\r\n    }, [mediaIndexVisible, carouselPlay]);\r\n\r\n\r\n    return (\r\n        <div className=\"medias-pictures-container\">\r\n            {medias?.map((media, index) =>\r\n                <MediaPicturesPresentation\r\n                    key={index}\r\n                    media={media}\r\n                    visible={index === mediaIndexVisible}\r\n                    onClick={() => onClick(media.id)} />)}\r\n            <div className=\"medias-pictures-nav-controls\">\r\n                <MediaPicturesCarousel\r\n                    nbMedias={medias?.length}\r\n                    selectedIndex={mediaIndexVisible}\r\n                    onNavElementClick={(index) => setMediaIndexVisible(index)} />\r\n                <div className=\"medias-pictures-play-pause\" onClick={() => setCarouselPlay(!carouselPlay)}>\r\n                    <PlayArrowIcon className=\"icon\" style={{ display: carouselPlay ? 'none' : '' }} />\r\n                    <PauseIcon className=\"icon\" style={{ display: !carouselPlay ? 'none' : '' }} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MediasOfToday;\r\n\r\nfunction MediaPicturesCarousel({ nbMedias, selectedIndex, onNavElementClick }) {\r\n\r\n    const navElements = [];\r\n\r\n    for (let i = 0; i <= nbMedias - 1; i++)\r\n        navElements.push(i);\r\n\r\n    return (\r\n        <div className=\"medias-pictures-nav\">\r\n            {navElements.map((i) =>\r\n                <div key={i}\r\n                    onClick={() => onNavElementClick(i)}\r\n                    className={\"nav-elem\" + (selectedIndex === i ? ' selected' : '')}></div>)}\r\n        </div>\r\n    );\r\n}","\r\nimport \"../style/home-page.css\";\r\nimport MediasOfToday from \"../components/media/list/MediasOfTodayList\";\r\nimport MediasListLiteWithTitle from \"../components/media/list/MediasListLiteWithTitle\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\n\r\nimport fadeTransition from \"../helpers/customStyles.js\";\r\nimport AppServices from \"../services/AppServices\";\r\nimport CacheService from \"../services/cacheService\";\r\nimport AppMode from \"../services/appMode\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\nfunction HomePage({ onMediaClick, onReady, onFail }) {\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    const mediaListref = useRef([]);\r\n    const cacheIdRef = useRef(\"\");\r\n\r\n    const [mediaLists, setMediaLists] = useState([]);\r\n\r\n    const buildCacheId = (appMode) => {\r\n        return 'homepage' + appMode;\r\n    }\r\n\r\n    const todayTrendingTitle = \"todayTrending\"\r\n\r\n    const addMedias = (listTitle, medias, insertAtBeginning) => {\r\n        if (medias && medias.length > 0) {\r\n            let data = {\r\n                title: listTitle,\r\n                medias: medias\r\n            }\r\n            if (insertAtBeginning) mediaListref.current.unshift(data);\r\n            else mediaListref.current.push(data);\r\n            CacheService.setCache(cacheIdRef.current, mediaListref.current);\r\n            const newArray = [...mediaListref.current];\r\n            setMediaLists(newArray);\r\n        }\r\n    };\r\n\r\n    const loadContent = () => {\r\n        cacheIdRef.current = buildCacheId(AppMode.getActiveMode().label);\r\n\r\n        let cache = CacheService.getCache(cacheIdRef.current);\r\n        mediaListref.current = [];\r\n\r\n        if (cache) {\r\n            mediaListref.current = cache.data;\r\n            setMediaLists(mediaListref.current);\r\n            setDataLoaded(true);\r\n        }\r\n        else {\r\n            AppServices.searchMediaService.getMediasOfToday(\r\n                (medias) => {\r\n                    addMedias(todayTrendingTitle, medias);\r\n                    setDataLoaded(true);\r\n                    onReady();\r\n                }, () => {\r\n                    onFail();\r\n                });\r\n            AppServices.searchMediaService.getPopularMedias((medias) => {\r\n                addMedias(\"Popular \" + AppMode.getActiveMode().label.toLocaleLowerCase(), medias, true);\r\n            });\r\n            AppServices.searchMediaService.getRecommandedMedias((medias) => {\r\n                addMedias(\"Recommanded for you\", medias, true);\r\n            });\r\n            AppServices.searchMediaService.getPopularNetflixMedias((medias) => {\r\n                addMedias(\"Popular on Netflix\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularDisneyPlusMedias((medias) => {\r\n                addMedias(\"Popular on Disney Plus\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAmazonPrimeMedias((medias) => {\r\n                addMedias(\"Popular on Amazon Prime\", medias);\r\n            });\r\n            AppServices.searchMediaService.getPopularAppleTvMedias((medias) => {\r\n                addMedias(\"Popular on AppleTv\", medias);\r\n            });\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadContent();\r\n        AppMode.onAppModeChanged(() => {\r\n            loadContent();\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <CircularProgressBar position={\"center\"} visible={!dataLoaded} color={\"white\"} size={\"60px\"} />\r\n            <div className=\"home-page-container\" style={fadeTransition(dataLoaded)}>\r\n                <MediasOfToday medias={mediaLists.find(list => list.title === todayTrendingTitle)?.medias} onClick={(mediaId) => onMediaClick(mediaId)} />\r\n                <div className=\"blur-divider\"></div>\r\n                {mediaLists.filter(list => list.title !== todayTrendingTitle).map((mediasList) =>\r\n                (\r\n                    <MediasListLiteWithTitle\r\n                        key={mediasList.title}\r\n                        visible={true}\r\n                        listTitle={mediasList.title}\r\n                        medias={mediasList.medias}\r\n                        onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import \"../../../style/media-intermediate-presentation.css\";\r\n\r\nimport MediaLitePresentation from \"./MediaLitePresentation\";\r\nimport ProgressionBar from \"../../common/ProgressionBar\";\r\nimport SecondaryInfo from \"../../common/text/SecondaryInfo\";\r\nimport AppMode from \"../../../services/appMode\";\r\n\r\nfunction MediaIntermediatePresentation({ media, onClick }) {\r\n    const truncateText = (text) => {\r\n        if (text && text.length > 400) return text.substring(0, 300) + '...';\r\n        else return text;\r\n    };\r\n\r\n    return (\r\n        <div className=\"media-intermediate-presentation-container\" onClick={() => onClick()}>\r\n            <MediaLitePresentation media={media} />\r\n            <div className=\"media-intermediate-presentation-content\">\r\n                <div className=\"media-intermediate-presentation-info\">\r\n                    <SecondaryInfo text={truncateText(media.synopsis)} />\r\n                    {AppMode.isSeriesMode() ? <SecondaryInfo text={\"Season \" + media.seasonNumber + \" - Episode \" + media.episodeNumber} /> : null}\r\n                    {media.totalDuration && media.currentTime ? <ProgressionBar value={(media.currentTime / media.totalDuration) * 100} width=\"100%\" /> : null}\r\n                </div>\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default MediaIntermediatePresentation;","import \"../../../style/media-intermediate-list.css\";\r\n\r\nimport MediaIntermediatePresentation from \"../presentation/MediaIntermediatePresentation\";\r\nimport CircularProgressBar from \"../../common/CircularProgressBar\";\r\nimport { useEffect } from 'react';\r\n\r\nfunction MediasIntermediatePresentationList({ title, medias, centerToMedia, loadingProgressVisible, onClick }) {\r\n\r\n    useEffect(() => {\r\n        if (centerToMedia) {\r\n            var index = medias.findIndex(m => m.id === centerToMedia.id);\r\n            var elem = document.getElementById(\"mediaintermediatepresentation\" + index);\r\n            if (elem) {\r\n                elem.scrollIntoView({\r\n                    block: \"nearest\",\r\n                    inline: \"nearest\"\r\n                });\r\n            }\r\n        }\r\n    }, [medias, centerToMedia]);\r\n\r\n    return (\r\n        <div>\r\n            <CircularProgressBar color={'white'} size={'80px'} position={\"center\"} visible={loadingProgressVisible} />          \r\n            <div className=\"media-intermediate-list-title-page\">{title}</div>\r\n            <div className=\"media-intermediate-list-content\">\r\n                {medias.map((media, index) =>\r\n                (<div id={\"mediaintermediatepresentation\" + index} key={index}>\r\n                    <MediaIntermediatePresentation\r\n                        media={media}\r\n                        onClick={() => onClick(media)}/>\r\n                </div>))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MediasIntermediatePresentationList;","import AppServices from \"../services/AppServices\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\nimport AppMode from \"../services/appMode.js\";\r\n\r\nvar watchedMediaLastClicked = null;\r\n\r\nfunction WatchedMediasPage({centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [medias, setMedias] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            watchedMediaLastClicked = null;\r\n\r\n            AppServices.watchedMediaApiService.getWatchedMedias((medias) => {\r\n            setLoadingVisible(false);\r\n            if (medias && medias.length > 0)\r\n                setMedias(medias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleClick = (media) => {\r\n        watchedMediaLastClicked = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={medias && medias.length > 0 ? \"You can see here the \" + mediaLabel + \" you have watched\" : \"No \" + mediaLabel + \" watched\"}\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={medias}\r\n            centerToMedia={watchedMediaLastClicked}\r\n            onClick={(media) => handleClick(media)} />\r\n    )\r\n}\r\n\r\n\r\nexport default WatchedMediasPage;","import AppServices from \"../services/AppServices\";\r\nimport AppMode from \"../services/appMode.js\";\r\nimport MediasIntermediatePresentationList from \"../components/media/list/MediasIntermediatePresentationList\";\r\nimport { useEffect, useState } from 'react';\r\n\r\nvar lastClickedMedia = null;\r\n\r\nfunction BookmarkedMediasPage({ centerToLastClickedMedia, onMediaClick }) {\r\n\r\n    const [mediasBookmarks, setMediasBookmarks] = useState([]);\r\n    const [loadingVisible, setLoadingVisible] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if(!centerToLastClickedMedia)\r\n            lastClickedMedia = null;\r\n\r\n            AppServices.bookmarkApiService.getBookmarkedMedias((bookmarkedMedias) => {\r\n            setLoadingVisible(false);\r\n            if (bookmarkedMedias && bookmarkedMedias.length > 0)\r\n                setMediasBookmarks(bookmarkedMedias);\r\n        }, () => {\r\n            setLoadingVisible(false);\r\n        });\r\n    }, []);\r\n\r\n    const handleMediaClick = (media) => {\r\n        lastClickedMedia = media;\r\n        onMediaClick(media.id);\r\n    }\r\n\r\n    const mediaLabel = AppMode.getActiveMode().label.toLowerCase();\r\n\r\n    return (\r\n        <MediasIntermediatePresentationList\r\n            title={mediasBookmarks && mediasBookmarks.length > 0 ? \"You can see here the \" + mediaLabel + \" you have bookmarked\" : \"No bookmarked \" + mediaLabel }\r\n            loadingProgressVisible={loadingVisible}\r\n            medias={mediasBookmarks}\r\n            centerToMedia={lastClickedMedia}\r\n            onClick={(media) => handleMediaClick(media)}/>\r\n    )\r\n}\r\n\r\n\r\nexport default BookmarkedMediasPage;","import \"../../style/text-input.css\";\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport fadeTransition from \"../../helpers/customStyles.js\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nfunction TextInput({ placeHolder, onTextChanged, large, value }) {\r\n\r\n    useEffect(() => {\r\n        setText(value);\r\n    }, [value]);\r\n\r\n    const [text, setText] = useState('');\r\n\r\n    const onValueChanged = (value) => {\r\n        setText(value);\r\n        onTextChanged(value);\r\n    }\r\n\r\n    return (\r\n        <div className=\"text-input-container\">\r\n            <div className={\"text-input \" + (large ? 'large' : '')}>\r\n                <TextField value={text} onChange={(e) => { onValueChanged(e.target.value) }} placeholder={placeHolder} />\r\n                <ClearIcon style={fadeTransition(text)} className='delete-text-cross' onClick={() => { onValueChanged('') }} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TextInput;","import \"../style/search-view.css\";\r\n\r\nimport MediasListLite from \"../components/media/list/MediasListLite\";\r\nimport CircularProgressBar from \"../components/common/CircularProgressBar\";\r\nimport TextInput from '../components/common/TextInput';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef, useReducer } from 'react';\r\n\r\nconst cacheResearch = {\r\n    searchValue: '',\r\n    result: [],\r\n    save(searchValue, medias){\r\n        this.searchValue = searchValue;\r\n        this.result = medias;\r\n    },\r\n    clean(){\r\n        this.searchValue = '';\r\n        this.result = [];\r\n    }\r\n}; \r\n\r\nfunction ResearchPage({ loadFromCache, onMediaClick }) {\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [medias, setMedias] = useState([]);\r\n    const [searchInProgress, setSearchInProgress] = useState(false);\r\n\r\n    const searchValueRef = useRef(searchValue);\r\n\r\n    const searchResultLabelReducer = (state, mediasLength) => {\r\n        if (mediasLength === 0) return \"Nothing found\";\r\n        else if (mediasLength === 1) return \"one result\";\r\n        else if (mediasLength > 1) return mediasLength + \" results\";\r\n        else return \"\";\r\n    };\r\n    const [searchResultLabel, searchResultLabelDispatch] = useReducer(searchResultLabelReducer, '');\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache && searchValue === cacheResearch.searchValue)\r\n            return;\r\n\r\n        searchValueRef.current = searchValue;\r\n        if (searchValue && searchValue.length > 2) {\r\n            setTimeout(() => {\r\n                if (searchValue === searchValueRef.current) {\r\n                    setSearchInProgress(true);\r\n                    searchResultLabelDispatch(-1);                \r\n                    setMedias([]);\r\n                    cacheResearch.clean();\r\n                    AppServices.searchMediaService.searchMedias(searchValue,\r\n                        (medias) => {\r\n                            setSearchInProgress(false);\r\n                            if(searchValueRef.current && searchValue === searchValueRef.current){\r\n                                searchResultLabelDispatch(medias.length);\r\n                                if (medias && medias.length > 0){\r\n                                    setMedias(medias);\r\n                                    cacheResearch.save(searchValue, medias);\r\n                                } \r\n                            }\r\n                        },\r\n                        () => {\r\n                            setSearchInProgress(false);\r\n                            searchResultLabelDispatch(0);\r\n                        });\r\n                }\r\n            }, 1000);\r\n        }\r\n        else {\r\n            searchResultLabelDispatch(-1);\r\n            setMedias([]);\r\n        }\r\n    }, [searchValue]);\r\n\r\n    useEffect(() => {\r\n        if(loadFromCache){\r\n            setMedias(cacheResearch.result);\r\n            searchResultLabelDispatch(cacheResearch.result.length);\r\n            setSearchValue(cacheResearch.searchValue);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"search-view-container\">    \r\n            <TextInput placeHolder=\"Type here to start search...\" large onTextChanged={(text) => { setSearchValue(text) }} />\r\n            <CircularProgressBar color={'white'} size={'40px'} visible={searchInProgress} />\r\n            <div className=\"medias-search-result\">\r\n                <MediasListLite medias={medias} onMediaClick={(mediaId) => onMediaClick(mediaId)} />\r\n                <div className=\"label-result\">{searchResultLabel}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ResearchPage;","import BaseButton from './BaseButton';\r\n\r\nfunction OpenButton({ onClick, visible }) {\r\n\r\n    if(!visible)\r\n        return null;\r\n\r\n    const content = <div>Open</div>;\r\n\r\n    return (\r\n        <BaseButton content={content} centered color={\"red\"} onClick={() => onClick()} />\r\n    );\r\n}\r\n\r\nexport default OpenButton;","\r\nimport \"../style/torrent-link-page.css\";\r\n\r\nimport TextInput from '../components/common/TextInput';\r\nimport OpenButton from '../components/common/buttons/OpenButton';\r\nimport CircularProgressBar from '../components/common/CircularProgressBar';\r\nimport PlayButton from '../components/common/buttons/PlayButton';\r\nimport PlayWithVLCButton from '../components/common/buttons/PlayWithVLCButton';\r\nimport { VideoPlayerWindow } from '../components/video/VideoPlayerWindow';\r\nimport AppServices from \"../services/AppServices\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nfunction TorrentLinkPage() {\r\n\r\n    const [torrentLink, setTorrentLink] = useState('');\r\n    const torrentLinkRef = useRef('');\r\n    const [openingTorrentLink, setOpeningTorrentLink] = useState(false);\r\n    const [openingHistory, setOpeningHistory] = useState(false);\r\n    const [torrentHistory, setTorrentHistory] = useState([]);\r\n    const [torrentFiles, setTorrentFiles] = useState([]);\r\n    const [selectedFile, setSelectedFile] = useState('');\r\n    const [loadingMessage, setLoadingMessage] = useState('');\r\n\r\n    const [showMoviePlayer, setShowMoviePlayer] = useState(false);\r\n\r\n    const [movieSources, setMovieSources] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        setMovieSources([{\r\n            quality: 'Video',\r\n            downloadUrl: torrentLink,\r\n            fileName: selectedFile\r\n        }]);\r\n\r\n        if (!torrentLink)\r\n            getTorrentHistory();\r\n\r\n        torrentLinkRef.current = torrentLink;\r\n\r\n    }, [torrentLink, selectedFile]);\r\n\r\n    const getTorrentHistory = () => {\r\n        setOpeningHistory(true);\r\n        setLoadingMessage('Loading history');\r\n        AppServices.torrentApiService.getTorrentHistory(\r\n            (files) => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory(files);\r\n            },\r\n            () => {\r\n                setOpeningHistory(false);\r\n                setTorrentHistory([]);\r\n            });\r\n    };\r\n\r\n    const changeTorrentLink = (torrentLink) => {\r\n        setOpeningTorrentLink(false);\r\n        setSelectedFile('');\r\n        setTorrentLink(torrentLink);\r\n        setTorrentFiles([]);\r\n    };\r\n\r\n    const openTorrent = () => {\r\n        setTorrentFiles([]);\r\n        setOpeningTorrentLink(true);\r\n        setLoadingMessage('Opening torrent');\r\n\r\n        AppServices.torrentApiService.getTorrentFiles(torrentLink,\r\n            (response) => {\r\n                if (decodeURIComponent(torrentLinkRef.current) === decodeURIComponent(response.link)) {\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles(response.files);\r\n                }\r\n            },\r\n            (response) => {\r\n                if (decodeURIComponent(torrentLinkRef.current) === decodeURIComponent(response.link)) {\r\n                    setOpeningTorrentLink(false);\r\n                    setTorrentFiles([]);\r\n                }\r\n            });\r\n    };\r\n\r\n    const onPlayFileClick = (file) => {\r\n        setSelectedFile(file);\r\n        setShowMoviePlayer(true);\r\n    }\r\n\r\n    const torrentFilesAreLoadingOrLoaded = () => {\r\n        return openingTorrentLink || (torrentFiles && torrentFiles.length > 0);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"torrent-link-page-container\">\r\n            <div className=\"title\">Enter a torrent url or magnet and click on Open to see the list of files</div>\r\n            <TextInput placeHolder=\"Torrent link or magnet...\" large onTextChanged={(text) => changeTorrentLink(text)} value={torrentLink} />\r\n\r\n            <div style={{ margin: \"10px 0\" }}>\r\n                <OpenButton visible={!torrentFilesAreLoadingOrLoaded()} onClick={() => openTorrent()} />\r\n                {Boolean(openingTorrentLink) || Boolean(openingHistory) ? <CircularProgressBar visible size=\"30px\" color=\"white\" text={loadingMessage} /> : null}\r\n            </div>\r\n            <TorrentHistory visible={!torrentFilesAreLoadingOrLoaded()} files={torrentHistory} onClick={(torrentLink) => { changeTorrentLink(torrentLink) }} />\r\n            <TorrentFilesList visible={torrentFilesAreLoadingOrLoaded()} torrentLink={torrentLink} files={torrentFiles} onPlayFileClick={(file) => onPlayFileClick(file)} />\r\n\r\n            <VideoPlayerWindow visible={showMoviePlayer} sources={movieSources} onCloseClick={() => setShowMoviePlayer(false)} onWatchedTimeUpdate={() => { }} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TorrentLinkPage;\r\n\r\nfunction TorrentFilesList({ visible, torrentLink, files, onPlayFileClick }) {\r\n    if (!visible)\r\n        return null;\r\n\r\n    return <FilesList\r\n        torrentLink={torrentLink}\r\n        files={files}\r\n        onPlayFileClick={(file) => onPlayFileClick(file)}\r\n        contentType=\"fileFromTorrent\"\r\n        listTitle=\"Torrent files\" />\r\n}\r\n\r\nfunction TorrentHistory({ visible, files, onClick }) {\r\n    if (!visible)\r\n        return null;\r\n\r\n    return <FilesList\r\n        files={files}\r\n        onFileClick={(torrentLink) => onClick(torrentLink)}\r\n        contentType=\"torrentFile\"\r\n        listTitle=\"Last opened torrent files\" />\r\n}\r\n\r\nfunction FilesList({ torrentLink, files, onFileClick, onPlayFileClick, contentType, listTitle }) {\r\n\r\n    const [selectedFileIndex, setSelectedFileIndex] = useState(null);\r\n\r\n    useEffect(() => {\r\n        setSelectedFileIndex(null);\r\n    }, [files]);\r\n\r\n\r\n    if (!files || files.length === 0)\r\n        return null;\r\n\r\n    const fileListContainerStyle = {\r\n        width: '50%'\r\n    };\r\n\r\n    const fileListStyle = {\r\n        background: 'linear-gradient(342deg, rgba(42,42,42,1) 0%, rgba(0,0,0,1) 65%)',\r\n        borderRadius: '15px',\r\n        padding: '5px 0',\r\n        maxHeight: '300px',\r\n        overflowY: 'auto'\r\n    };\r\n\r\n    const textStyle = {\r\n        padding: '10px 7px',\r\n        fontSize: '18px',\r\n        fontWeight: '500',\r\n        borderRadius: '7px',\r\n        cursor: 'pointer'\r\n    };\r\n\r\n    const selectedTextStyle = {\r\n        ...textStyle,\r\n        background: 'linear-gradient(90deg, rgba(187,0,0,1) 0%, rgba(193,76,76,1) 35%, rgba(0,0,0,1) 100%)'\r\n    };\r\n\r\n    const titleStyle = {\r\n        ...textStyle,\r\n        fontSize: '20px',\r\n        color: '#858585'\r\n    };\r\n\r\n\r\n    const getComponent = (file, index) => {\r\n        if (contentType === 'fileFromTorrent') {\r\n            return <FileFromTorrent\r\n                torrentLink={torrentLink}\r\n                file={file}\r\n                isSelected={index === selectedFileIndex}\r\n                onClick={() => setSelectedFileIndex(index)}\r\n                onPlayFileClick={() => onPlayFileClick(file)} />\r\n        }\r\n        else if (contentType === 'torrentFile') {\r\n            return <TorrentLink file={file} onClick={(torrentLink) => onFileClick(torrentLink)} />\r\n        }\r\n    };\r\n\r\n    const onMouseHover = (index, enter) => {\r\n        if (index !== selectedFileIndex) {\r\n            const element = document.getElementById('idfile_' + index);\r\n            element.style.background = enter ? '#362b2b' : '';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={fileListContainerStyle}>\r\n            <div style={titleStyle}>{listTitle}</div>\r\n            <div style={fileListStyle}>\r\n                {files.map((file, index) =>\r\n                    <div\r\n                        id={'idfile_' + index}\r\n                        key={index}\r\n                        onMouseEnter={() => { onMouseHover(index, true) }}\r\n                        onMouseLeave={() => { onMouseHover(index, false) }} style={index === selectedFileIndex ? selectedTextStyle : textStyle}>\r\n                        {getComponent(file, index)}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nfunction FileFromTorrent({ torrentLink, file, isSelected, onClick, onPlayFileClick }) {\r\n    let playButtons = null;\r\n    if (isSelected) {\r\n        playButtons = (\r\n            <div className=\"play-buttons-container\">\r\n                <PlayButton onClick={() => onPlayFileClick()} />\r\n                <PlayWithVLCButton videoUrl={AppServices.torrentApiService.buildStreamUrl(torrentLink, file)} />\r\n            </div>)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            onClick={() => onClick()}>\r\n            {file}\r\n            {playButtons}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction TorrentLink({ file, onClick }) {\r\n    const dateStyle = {\r\n        textAlign: 'left',\r\n        color: 'grey'\r\n    };\r\n\r\n    const formateDate = (fullDateTime) => {\r\n        const today = new Date();\r\n\r\n        const yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n        const date = new Date(fullDateTime);\r\n\r\n        let day = '';\r\n        if (yesterday.toDateString() === date.toDateString())\r\n            day = 'Yesterday';\r\n        else if (today.toDateString() === date.toDateString())\r\n            day = 'Today';\r\n        else {\r\n            let options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n            day = date.toLocaleString('en-US', options);\r\n        }\r\n\r\n        const time = date.toLocaleTimeString(navigator.language, {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            hour12: false\r\n        });\r\n        return day + ', ' + time;\r\n    }\r\n\r\n    return (\r\n        <div onClick={() => onClick(file.link)}>\r\n            <div style={dateStyle}>{formateDate(file.lastOpenedDateTime)}</div>\r\n            <div style={{ textAlign: 'left' }}>{file.link}</div>\r\n        </div>\r\n    );\r\n}","\r\nimport { useEffect, useState } from 'react';\r\n\r\nfunction Router({ components, activeComponentId }) {\r\n\r\n    const [activeComponent, setActiveComponent] = useState({});\r\n\r\n    useEffect(()=>{\r\n        var component = components.find(c => c.id === activeComponentId);\r\n        if(component) setActiveComponent(component);\r\n    },[components, activeComponentId]);\r\n\r\n    return <div style={activeComponent?.containerStyle}>{activeComponent?.render}</div>;\r\n}\r\n\r\nexport default Router;","import './App.css';\r\nimport NavBar from \"./components/navbar/NavBar\";\r\nimport SplashScreen from \"./components/SplashScreen\";\r\nimport ModalCategories from \"./components/modal/ModalCategories.js\";\r\n\r\nimport MediaListGenrePage from \"./pages/MediaListGenrePage\";\r\nimport MediaListPlatformPage from \"./pages/MediaListPlatformPage\";\r\nimport MediaPresentationPage from \"./pages/MediaPresentationPage\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport WatchedMediasPage from \"./pages/WatchedMediasPage\";\r\nimport BookmarkedMediasPage from \"./pages/BookmarkedMediasPage\";\r\nimport ResearchPage from \"./pages/ResearchPage\";\r\nimport TorrentLinkPage from \"./pages/TorrentLinkPage\";\r\n\r\nimport AppServices from './services/AppServices';\r\nimport Router from \"./components/Router\";\r\nimport { useState } from 'react';\r\n\r\n\r\nfunction App() {\r\n  AppServices.init();\r\n\r\n  const [selectedGenre, setSelectedGenre] = useState(null);\r\n  const [loadFullListGenrefromCache, setLoadFullListGenrefromCache] = useState(false);\r\n\r\n  const [selectedPlatform, setSelectedPlatform] = useState(null);\r\n  const [loadFullListPlatformfromCache, setLoadFullListPlatformfromCache] = useState(false);\r\n\r\n  const [loadResearchfromCache, setLoadResearchfromCache] = useState(false);\r\n\r\n  const [centerToLastClickedBookmark, setCenterToLastClickedBookmark] = useState(false);\r\n  const [centerToLastClickedWatchedMedia, setCenterToLastClickedWatchedMedia] = useState(false);\r\n\r\n  const [splashscreenVisible, setSplashscreenVisible] = useState(true);\r\n  const [homePageFailed, setHomePageFailed] = useState(false);\r\n\r\n  const [modalListCategoriesVisible, setModalListCategoriesVisible] = useState(false);\r\n\r\n  const [mediaId, setMediaId] = useState('');\r\n\r\n  const showComponent = (componentId) => {\r\n    setRouterPreviousComponentId(routerActiveComponentId);\r\n    setRouterActiveComponentId(componentId);\r\n  }\r\n\r\n  const showMediasFullListofGenre = (genre) => {\r\n    setSelectedGenre(genre);\r\n    setLoadFullListGenrefromCache(false);\r\n    showComponent(routerIds.mediasListGenrePage);\r\n  }\r\n\r\n  const showMediasFullListofPlatform = (platform) => {\r\n    setSelectedPlatform(platform);\r\n    setLoadFullListPlatformfromCache(false);\r\n    showComponent(routerIds.mediasListPlatformPage);\r\n  }\r\n\r\n  const showMediaFullPresentation = (mediaId) => {\r\n    setMediaId(mediaId);\r\n    showComponent(routerIds.mediaPresentationPage);\r\n  }\r\n\r\n  const goToPreviousComponent = () => {\r\n    showComponent(routerPreviousComponentId);\r\n  }\r\n\r\n  const onMediaFullPresentationClose = () => {\r\n    setLoadFullListGenrefromCache(true);\r\n    setLoadFullListPlatformfromCache(true);\r\n    setCenterToLastClickedBookmark(true);\r\n    setCenterToLastClickedWatchedMedia(true);\r\n    setLoadResearchfromCache(true);\r\n    goToPreviousComponent();\r\n  }\r\n\r\n  const routerIds = {\r\n    homePage: 'homePage',\r\n    mediasListGenrePage: 'mediasOfGenre',\r\n    mediasListPlatformPage: 'mediasOfPlatform',\r\n    mediaPresentationPage: 'mediaPresentationPage',\r\n    watchedMediasListPage: 'watchedMediasListPage',\r\n    bookmarkedMediasListPage: 'bookmarkedMediasListPage',\r\n    researchPage: 'researchPage',\r\n    torrentLinkPage: 'torrentLinkPage'\r\n  }\r\n\r\n  const router = {\r\n    components: [\r\n      {\r\n        id: routerIds.homePage,\r\n        render: (<HomePage\r\n          onReady={() => { setSplashscreenVisible(false) }}\r\n          onFail={() => { setHomePageFailed(true)}}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.mediasListGenrePage,\r\n        render: (<MediaListGenrePage\r\n          genre={selectedGenre}\r\n          loadFromCache={loadFullListGenrefromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n          containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediasListPlatformPage,\r\n        render: (<MediaListPlatformPage\r\n          platform={selectedPlatform}\r\n          loadFromCache={loadFullListPlatformfromCache}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />),\r\n          containerStyle: { height: '100%'}\r\n      },\r\n      {\r\n        id: routerIds.mediaPresentationPage,\r\n        containerStyle: { height: '100%'},\r\n        render: (<MediaPresentationPage\r\n          mediaId={mediaId}\r\n          onCloseClick={() => onMediaFullPresentationClose()} />)\r\n      },\r\n      {\r\n        id: routerIds.watchedMediasListPage,\r\n        render: (<WatchedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedWatchedMedia}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.bookmarkedMediasListPage,\r\n        render: (<BookmarkedMediasPage\r\n          centerToLastClickedMedia={centerToLastClickedBookmark}\r\n          onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)} />)\r\n      },\r\n      {\r\n        id: routerIds.researchPage,\r\n        render: (<ResearchPage loadFromCache={loadResearchfromCache}  onMediaClick={(mediaId) => showMediaFullPresentation(mediaId)}/>)\r\n      },\r\n      {\r\n        id: routerIds.torrentLinkPage,\r\n        render: (<TorrentLinkPage />)\r\n      }\r\n    ]\r\n  };\r\n  const [routerActiveComponentId, setRouterActiveComponentId] = useState(routerIds.homePage);\r\n  const [routerPreviousComponentId, setRouterPreviousComponentId] = useState(routerIds.homePage);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <SplashScreen visible={splashscreenVisible} showErrorMessage={homePageFailed}/>\r\n      <ModalCategories\r\n        visible={modalListCategoriesVisible}\r\n        onGenreClick={(genre) => { setModalListCategoriesVisible(false); showMediasFullListofGenre(genre) }}\r\n        onPlatformClick={(platform) => { setModalListCategoriesVisible(false); showMediasFullListofPlatform(platform) }}\r\n        onCloseClick={() => setModalListCategoriesVisible(false)}\r\n      />\r\n      <NavBar\r\n        onSearchClick={() => { setLoadResearchfromCache(false); setRouterActiveComponentId(routerIds.researchPage) }}\r\n        onHomeClick={() => setRouterActiveComponentId(routerIds.homePage)}\r\n        onGenreMenuClick={() => setModalListCategoriesVisible(true)}\r\n        onWatchedMediasClick={() => { setCenterToLastClickedWatchedMedia(false); setRouterActiveComponentId(routerIds.watchedMediasListPage) }}\r\n        onBookmarkedMediasClick={() => { setCenterToLastClickedBookmark(false); setRouterActiveComponentId(routerIds.bookmarkedMediasListPage) }}\r\n        onTorrentLinkClick={()=>{ setRouterActiveComponentId(routerIds.torrentLinkPage) }}\r\n        onAppModeSwitch={()=> {setRouterActiveComponentId(routerIds.homePage)}}/>\r\n      <div className=\"app-content\">\r\n        <Router components={router.components} activeComponentId={routerActiveComponentId} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}